function Wp(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(i,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Hp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}var Zp={exports:{}},el={},Vp={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ho=Symbol.for("react.element"),Zy=Symbol.for("react.portal"),Vy=Symbol.for("react.fragment"),qy=Symbol.for("react.strict_mode"),Gy=Symbol.for("react.profiler"),Ky=Symbol.for("react.provider"),Jy=Symbol.for("react.context"),Qy=Symbol.for("react.forward_ref"),Yy=Symbol.for("react.suspense"),Xy=Symbol.for("react.memo"),e0=Symbol.for("react.lazy"),Kh=Symbol.iterator;function t0(t){return t===null||typeof t!="object"?null:(t=Kh&&t[Kh]||t["@@iterator"],typeof t=="function"?t:null)}var qp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gp=Object.assign,Kp={};function qi(t,e,n){this.props=t,this.context=e,this.refs=Kp,this.updater=n||qp}qi.prototype.isReactComponent={};qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jp(){}Jp.prototype=qi.prototype;function Hc(t,e,n){this.props=t,this.context=e,this.refs=Kp,this.updater=n||qp}var Zc=Hc.prototype=new Jp;Zc.constructor=Hc;Gp(Zc,qi.prototype);Zc.isPureReactComponent=!0;var Jh=Array.isArray,Qp=Object.prototype.hasOwnProperty,Vc={current:null},Yp={key:!0,ref:!0,__self:!0,__source:!0};function Xp(t,e,n){var i,s={},a=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)Qp.call(e,i)&&!Yp.hasOwnProperty(i)&&(s[i]=e[i]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var d=Array(c),f=0;f<c;f++)d[f]=arguments[f+2];s.children=d}if(t&&t.defaultProps)for(i in c=t.defaultProps,c)s[i]===void 0&&(s[i]=c[i]);return{$$typeof:ho,type:t,key:a,ref:l,props:s,_owner:Vc.current}}function n0(t,e){return{$$typeof:ho,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ho}function r0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qh=/\/+/g;function Jl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?r0(""+t.key):e.toString(36)}function ha(t,e,n,i,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case ho:case Zy:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+Jl(l,0):i,Jh(s)?(n="",t!=null&&(n=t.replace(Qh,"$&/")+"/"),ha(s,e,n,"",function(f){return f})):s!=null&&(qc(s)&&(s=n0(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Qh,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",Jh(t))for(var c=0;c<t.length;c++){a=t[c];var d=i+Jl(a,c);l+=ha(a,e,n,d,s)}else if(d=t0(t),typeof d=="function")for(t=d.call(t),c=0;!(a=t.next()).done;)a=a.value,d=i+Jl(a,c++),l+=ha(a,e,n,d,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Uo(t,e,n){if(t==null)return t;var i=[],s=0;return ha(t,i,"","",function(a){return e.call(n,a,s++)}),i}function i0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},fa={transition:null},s0={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:fa,ReactCurrentOwner:Vc};function em(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Uo,forEach:function(t,e,n){Uo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uo(t,function(){e++}),e},toArray:function(t){return Uo(t,function(e){return e})||[]},only:function(t){if(!qc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=qi;ke.Fragment=Vy;ke.Profiler=Gy;ke.PureComponent=Hc;ke.StrictMode=qy;ke.Suspense=Yy;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s0;ke.act=em;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Gp({},t.props),s=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=Vc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)Qp.call(e,d)&&!Yp.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){c=Array(d);for(var f=0;f<d;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:ho,type:t.type,key:s,ref:a,props:i,_owner:l}};ke.createContext=function(t){return t={$$typeof:Jy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ky,_context:t},t.Consumer=t};ke.createElement=Xp;ke.createFactory=function(t){var e=Xp.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:Qy,render:t}};ke.isValidElement=qc;ke.lazy=function(t){return{$$typeof:e0,_payload:{_status:-1,_result:t},_init:i0}};ke.memo=function(t,e){return{$$typeof:Xy,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=fa.transition;fa.transition={};try{t()}finally{fa.transition=e}};ke.unstable_act=em;ke.useCallback=function(t,e){return Tt.current.useCallback(t,e)};ke.useContext=function(t){return Tt.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};ke.useEffect=function(t,e){return Tt.current.useEffect(t,e)};ke.useId=function(){return Tt.current.useId()};ke.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return Tt.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};ke.useRef=function(t){return Tt.current.useRef(t)};ke.useState=function(t){return Tt.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return Tt.current.useTransition()};ke.version="18.3.1";Vp.exports=ke;var E=Vp.exports;const $s=Hy(E),o0=Wp({__proto__:null,default:$s},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0=E,l0=Symbol.for("react.element"),u0=Symbol.for("react.fragment"),c0=Object.prototype.hasOwnProperty,d0=a0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h0={key:!0,ref:!0,__self:!0,__source:!0};function tm(t,e,n){var i,s={},a=null,l=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)c0.call(e,i)&&!h0.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:l0,type:t,key:a,ref:l,props:s,_owner:d0.current}}el.Fragment=u0;el.jsx=tm;el.jsxs=tm;Zp.exports=el;var m=Zp.exports,Au={},nm={exports:{}},Ht={},rm={exports:{}},im={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,ce){var F=M.length;M.push(ce);e:for(;0<F;){var te=F-1>>>1,ve=M[te];if(0<s(ve,ce))M[te]=ce,M[F]=ve,F=te;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var ce=M[0],F=M.pop();if(F!==ce){M[0]=F;e:for(var te=0,ve=M.length,Ae=ve>>>1;te<Ae;){var be=2*(te+1)-1,_e=M[be],ue=be+1,qe=M[ue];if(0>s(_e,F))ue<ve&&0>s(qe,_e)?(M[te]=qe,M[ue]=F,te=ue):(M[te]=_e,M[be]=F,te=be);else if(ue<ve&&0>s(qe,F))M[te]=qe,M[ue]=F,te=ue;else break e}}return ce}function s(M,ce){var F=M.sortIndex-ce.sortIndex;return F!==0?F:M.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],f=[],g=1,v=null,y=3,x=!1,k=!1,P=!1,C=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(M){for(var ce=n(f);ce!==null;){if(ce.callback===null)i(f);else if(ce.startTime<=M)i(f),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(f)}}function O(M){if(P=!1,b(M),!k)if(n(d)!==null)k=!0,ee(A);else{var ce=n(f);ce!==null&&Ne(O,ce.startTime-M)}}function A(M,ce){k=!1,P&&(P=!1,S($),$=-1),x=!0;var F=y;try{for(b(ce),v=n(d);v!==null&&(!(v.expirationTime>ce)||M&&!we());){var te=v.callback;if(typeof te=="function"){v.callback=null,y=v.priorityLevel;var ve=te(v.expirationTime<=ce);ce=t.unstable_now(),typeof ve=="function"?v.callback=ve:v===n(d)&&i(d),b(ce)}else i(d);v=n(d)}if(v!==null)var Ae=!0;else{var be=n(f);be!==null&&Ne(O,be.startTime-ce),Ae=!1}return Ae}finally{v=null,y=F,x=!1}}var D=!1,I=null,$=-1,Q=5,X=-1;function we(){return!(t.unstable_now()-X<Q)}function Y(){if(I!==null){var M=t.unstable_now();X=M;var ce=!0;try{ce=I(!0,M)}finally{ce?Oe():(D=!1,I=null)}}else D=!1}var Oe;if(typeof w=="function")Oe=function(){w(Y)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,le=Z.port2;Z.port1.onmessage=Y,Oe=function(){le.postMessage(null)}}else Oe=function(){C(Y,0)};function ee(M){I=M,D||(D=!0,Oe())}function Ne(M,ce){$=C(function(){M(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){k||x||(k=!0,ee(A))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(M){switch(y){case 1:case 2:case 3:var ce=3;break;default:ce=y}var F=y;y=ce;try{return M()}finally{y=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,ce){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var F=y;y=M;try{return ce()}finally{y=F}},t.unstable_scheduleCallback=function(M,ce,F){var te=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?te+F:te):F=te,M){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=F+ve,M={id:g++,callback:ce,priorityLevel:M,startTime:F,expirationTime:ve,sortIndex:-1},F>te?(M.sortIndex=F,e(f,M),n(d)===null&&M===n(f)&&(P?(S($),$=-1):P=!0,Ne(O,F-te))):(M.sortIndex=ve,e(d,M),k||x||(k=!0,ee(A))),M},t.unstable_shouldYield=we,t.unstable_wrapCallback=function(M){var ce=y;return function(){var F=y;y=ce;try{return M.apply(this,arguments)}finally{y=F}}}})(im);rm.exports=im;var f0=rm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0=E,Wt=f0;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sm=new Set,Fs={};function Jr(t,e){Di(t,e),Di(t+"Capture",e)}function Di(t,e){for(Fs[t]=e,t=0;t<e.length;t++)sm.add(e[t])}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ru=Object.prototype.hasOwnProperty,m0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yh={},Xh={};function g0(t){return Ru.call(Xh,t)?!0:Ru.call(Yh,t)?!1:m0.test(t)?Xh[t]=!0:(Yh[t]=!0,!1)}function v0(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _0(t,e,n,i){if(e===null||typeof e>"u"||v0(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ot(t,e,n,i,s,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new Ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new Ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new Ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new Ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new Ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new Ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new Ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new Ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new Ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gc=/[\-:]([a-z])/g;function Kc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gc,Kc);ht[e]=new Ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gc,Kc);ht[e]=new Ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gc,Kc);ht[e]=new Ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new Ot(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new Ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jc(t,e,n,i){var s=ht.hasOwnProperty(e)?ht[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_0(e,n,s,i)&&(n=null),i||s===null?g0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Vn=p0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$o=Symbol.for("react.element"),yi=Symbol.for("react.portal"),wi=Symbol.for("react.fragment"),Qc=Symbol.for("react.strict_mode"),Iu=Symbol.for("react.profiler"),om=Symbol.for("react.provider"),am=Symbol.for("react.context"),Yc=Symbol.for("react.forward_ref"),Mu=Symbol.for("react.suspense"),zu=Symbol.for("react.suspense_list"),Xc=Symbol.for("react.memo"),er=Symbol.for("react.lazy"),lm=Symbol.for("react.offscreen"),ef=Symbol.iterator;function ps(t){return t===null||typeof t!="object"?null:(t=ef&&t[ef]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,Ql;function Es(t){if(Ql===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ql=e&&e[1]||""}return`
`+Ql+t}var Yl=!1;function Xl(t,e){if(!t||Yl)return"";Yl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),a=i.stack.split(`
`),l=s.length-1,c=a.length-1;1<=l&&0<=c&&s[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(s[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||s[l]!==a[c]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=c);break}}}finally{Yl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Es(t):""}function y0(t){switch(t.tag){case 5:return Es(t.type);case 16:return Es("Lazy");case 13:return Es("Suspense");case 19:return Es("SuspenseList");case 0:case 2:case 15:return t=Xl(t.type,!1),t;case 11:return t=Xl(t.type.render,!1),t;case 1:return t=Xl(t.type,!0),t;default:return""}}function Du(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wi:return"Fragment";case yi:return"Portal";case Iu:return"Profiler";case Qc:return"StrictMode";case Mu:return"Suspense";case zu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case am:return(t.displayName||"Context")+".Consumer";case om:return(t._context.displayName||"Context")+".Provider";case Yc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xc:return e=t.displayName||null,e!==null?e:Du(t.type)||"Memo";case er:e=t._payload,t=t._init;try{return Du(t(e))}catch{}}return null}function w0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Du(e);case 8:return e===Qc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function um(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function x0(t){var e=um(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fo(t){t._valueTracker||(t._valueTracker=x0(t))}function cm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=um(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ea(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bu(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tf(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dm(t,e){e=e.checked,e!=null&&Jc(t,"checked",e,!1)}function Uu(t,e){dm(t,e);var n=vr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$u(t,e.type,n):e.hasOwnProperty("defaultValue")&&$u(t,e.type,vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $u(t,e,n){(e!=="number"||Ea(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ks=Array.isArray;function Li(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(ks(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vr(n)}}function hm(t,e){var n=vr(e.value),i=vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function sf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wo,pm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wo=Wo||document.createElement("div"),Wo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ws(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b0=["Webkit","ms","Moz","O"];Object.keys(Os).forEach(function(t){b0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Os[e]=Os[t]})});function mm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Os.hasOwnProperty(t)&&Os[t]?(""+e).trim():e+"px"}function gm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=mm(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var S0=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hu(t,e){if(e){if(S0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Zu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vu=null;function ed(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qu=null,Ni=null,Ai=null;function of(t){if(t=mo(t)){if(typeof qu!="function")throw Error(W(280));var e=t.stateNode;e&&(e=sl(e),qu(t.stateNode,t.type,e))}}function vm(t){Ni?Ai?Ai.push(t):Ai=[t]:Ni=t}function _m(){if(Ni){var t=Ni,e=Ai;if(Ai=Ni=null,of(t),e)for(t=0;t<e.length;t++)of(e[t])}}function ym(t,e){return t(e)}function wm(){}var eu=!1;function xm(t,e,n){if(eu)return t(e,n);eu=!0;try{return ym(t,e,n)}finally{eu=!1,(Ni!==null||Ai!==null)&&(wm(),_m())}}function Hs(t,e){var n=t.stateNode;if(n===null)return null;var i=sl(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Gu=!1;if(Fn)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){Gu=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{Gu=!1}function E0(t,e,n,i,s,a,l,c,d){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(g){this.onError(g)}}var js=!1,ka=null,Pa=!1,Ku=null,k0={onError:function(t){js=!0,ka=t}};function P0(t,e,n,i,s,a,l,c,d){js=!1,ka=null,E0.apply(k0,arguments)}function C0(t,e,n,i,s,a,l,c,d){if(P0.apply(this,arguments),js){if(js){var f=ka;js=!1,ka=null}else throw Error(W(198));Pa||(Pa=!0,Ku=f)}}function Qr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function af(t){if(Qr(t)!==t)throw Error(W(188))}function T0(t){var e=t.alternate;if(!e){if(e=Qr(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return af(s),t;if(a===i)return af(s),e;a=a.sibling}throw Error(W(188))}if(n.return!==i.return)n=s,i=a;else{for(var l=!1,c=s.child;c;){if(c===n){l=!0,n=s,i=a;break}if(c===i){l=!0,i=s,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,i=s;break}if(c===i){l=!0,i=a,n=s;break}c=c.sibling}if(!l)throw Error(W(189))}}if(n.alternate!==i)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function Sm(t){return t=T0(t),t!==null?Em(t):null}function Em(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Em(t);if(e!==null)return e;t=t.sibling}return null}var km=Wt.unstable_scheduleCallback,lf=Wt.unstable_cancelCallback,O0=Wt.unstable_shouldYield,j0=Wt.unstable_requestPaint,Je=Wt.unstable_now,L0=Wt.unstable_getCurrentPriorityLevel,td=Wt.unstable_ImmediatePriority,Pm=Wt.unstable_UserBlockingPriority,Ca=Wt.unstable_NormalPriority,N0=Wt.unstable_LowPriority,Cm=Wt.unstable_IdlePriority,tl=null,Cn=null;function A0(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(tl,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:M0,R0=Math.log,I0=Math.LN2;function M0(t){return t>>>=0,t===0?32:31-(R0(t)/I0|0)|0}var Ho=64,Zo=4194304;function Ps(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ta(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes,l=n&268435455;if(l!==0){var c=l&~s;c!==0?i=Ps(c):(a&=l,a!==0&&(i=Ps(a)))}else l=n&~s,l!==0?i=Ps(l):a!==0&&(i=Ps(a));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-gn(e),s=1<<n,i|=t[n],e&=~s;return i}function z0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D0(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-gn(a),c=1<<l,d=s[l];d===-1?(!(c&n)||c&i)&&(s[l]=z0(c,e)):d<=e&&(t.expiredLanes|=c),a&=~c}}function Ju(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tm(){var t=Ho;return Ho<<=1,!(Ho&4194240)&&(Ho=64),t}function tu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function B0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gn(n),a=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~a}}function nd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-gn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Le=0;function Om(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jm,rd,Lm,Nm,Am,Qu=!1,Vo=[],lr=null,ur=null,cr=null,Zs=new Map,Vs=new Map,nr=[],U0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uf(t,e){switch(t){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Zs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vs.delete(e.pointerId)}}function gs(t,e,n,i,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},e!==null&&(e=mo(e),e!==null&&rd(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function $0(t,e,n,i,s){switch(e){case"focusin":return lr=gs(lr,t,e,n,i,s),!0;case"dragenter":return ur=gs(ur,t,e,n,i,s),!0;case"mouseover":return cr=gs(cr,t,e,n,i,s),!0;case"pointerover":var a=s.pointerId;return Zs.set(a,gs(Zs.get(a)||null,t,e,n,i,s)),!0;case"gotpointercapture":return a=s.pointerId,Vs.set(a,gs(Vs.get(a)||null,t,e,n,i,s)),!0}return!1}function Rm(t){var e=Br(t.target);if(e!==null){var n=Qr(e);if(n!==null){if(e=n.tag,e===13){if(e=bm(n),e!==null){t.blockedOn=e,Am(t.priority,function(){Lm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Vu=i,n.target.dispatchEvent(i),Vu=null}else return e=mo(n),e!==null&&rd(e),t.blockedOn=n,!1;e.shift()}return!0}function cf(t,e,n){pa(t)&&n.delete(e)}function F0(){Qu=!1,lr!==null&&pa(lr)&&(lr=null),ur!==null&&pa(ur)&&(ur=null),cr!==null&&pa(cr)&&(cr=null),Zs.forEach(cf),Vs.forEach(cf)}function vs(t,e){t.blockedOn===e&&(t.blockedOn=null,Qu||(Qu=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,F0)))}function qs(t){function e(s){return vs(s,t)}if(0<Vo.length){vs(Vo[0],t);for(var n=1;n<Vo.length;n++){var i=Vo[n];i.blockedOn===t&&(i.blockedOn=null)}}for(lr!==null&&vs(lr,t),ur!==null&&vs(ur,t),cr!==null&&vs(cr,t),Zs.forEach(e),Vs.forEach(e),n=0;n<nr.length;n++)i=nr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<nr.length&&(n=nr[0],n.blockedOn===null);)Rm(n),n.blockedOn===null&&nr.shift()}var Ri=Vn.ReactCurrentBatchConfig,Oa=!0;function W0(t,e,n,i){var s=Le,a=Ri.transition;Ri.transition=null;try{Le=1,id(t,e,n,i)}finally{Le=s,Ri.transition=a}}function H0(t,e,n,i){var s=Le,a=Ri.transition;Ri.transition=null;try{Le=4,id(t,e,n,i)}finally{Le=s,Ri.transition=a}}function id(t,e,n,i){if(Oa){var s=Yu(t,e,n,i);if(s===null)du(t,e,i,ja,n),uf(t,i);else if($0(s,t,e,n,i))i.stopPropagation();else if(uf(t,i),e&4&&-1<U0.indexOf(t)){for(;s!==null;){var a=mo(s);if(a!==null&&jm(a),a=Yu(t,e,n,i),a===null&&du(t,e,i,ja,n),a===s)break;s=a}s!==null&&i.stopPropagation()}else du(t,e,i,null,n)}}var ja=null;function Yu(t,e,n,i){if(ja=null,t=ed(i),t=Br(t),t!==null)if(e=Qr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ja=t,null}function Im(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L0()){case td:return 1;case Pm:return 4;case Ca:case N0:return 16;case Cm:return 536870912;default:return 16}default:return 16}}var sr=null,sd=null,ma=null;function Mm(){if(ma)return ma;var t,e=sd,n=e.length,i,s="value"in sr?sr.value:sr.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[a-i];i++);return ma=s.slice(t,1<i?1-i:void 0)}function ga(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qo(){return!0}function df(){return!1}function Zt(t){function e(n,i,s,a,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?qo:df,this.isPropagationStopped=df,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),e}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},od=Zt(Gi),po=Ve({},Gi,{view:0,detail:0}),Z0=Zt(po),nu,ru,_s,nl=Ve({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ad,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_s&&(_s&&t.type==="mousemove"?(nu=t.screenX-_s.screenX,ru=t.screenY-_s.screenY):ru=nu=0,_s=t),nu)},movementY:function(t){return"movementY"in t?t.movementY:ru}}),hf=Zt(nl),V0=Ve({},nl,{dataTransfer:0}),q0=Zt(V0),G0=Ve({},po,{relatedTarget:0}),iu=Zt(G0),K0=Ve({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),J0=Zt(K0),Q0=Ve({},Gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Y0=Zt(Q0),X0=Ve({},Gi,{data:0}),ff=Zt(X0),ew={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nw[t])?!!e[t]:!1}function ad(){return rw}var iw=Ve({},po,{key:function(t){if(t.key){var e=ew[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ga(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ad,charCode:function(t){return t.type==="keypress"?ga(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ga(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sw=Zt(iw),ow=Ve({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pf=Zt(ow),aw=Ve({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ad}),lw=Zt(aw),uw=Ve({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),cw=Zt(uw),dw=Ve({},nl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hw=Zt(dw),fw=[9,13,27,32],ld=Fn&&"CompositionEvent"in window,Ls=null;Fn&&"documentMode"in document&&(Ls=document.documentMode);var pw=Fn&&"TextEvent"in window&&!Ls,zm=Fn&&(!ld||Ls&&8<Ls&&11>=Ls),mf=" ",gf=!1;function Dm(t,e){switch(t){case"keyup":return fw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xi=!1;function mw(t,e){switch(t){case"compositionend":return Bm(e);case"keypress":return e.which!==32?null:(gf=!0,mf);case"textInput":return t=e.data,t===mf&&gf?null:t;default:return null}}function gw(t,e){if(xi)return t==="compositionend"||!ld&&Dm(t,e)?(t=Mm(),ma=sd=sr=null,xi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zm&&e.locale!=="ko"?null:e.data;default:return null}}var vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vw[t.type]:e==="textarea"}function Um(t,e,n,i){vm(i),e=La(e,"onChange"),0<e.length&&(n=new od("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ns=null,Gs=null;function _w(t){Qm(t,0)}function rl(t){var e=Ei(t);if(cm(e))return t}function yw(t,e){if(t==="change")return e}var $m=!1;if(Fn){var su;if(Fn){var ou="oninput"in document;if(!ou){var _f=document.createElement("div");_f.setAttribute("oninput","return;"),ou=typeof _f.oninput=="function"}su=ou}else su=!1;$m=su&&(!document.documentMode||9<document.documentMode)}function yf(){Ns&&(Ns.detachEvent("onpropertychange",Fm),Gs=Ns=null)}function Fm(t){if(t.propertyName==="value"&&rl(Gs)){var e=[];Um(e,Gs,t,ed(t)),xm(_w,e)}}function ww(t,e,n){t==="focusin"?(yf(),Ns=e,Gs=n,Ns.attachEvent("onpropertychange",Fm)):t==="focusout"&&yf()}function xw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rl(Gs)}function bw(t,e){if(t==="click")return rl(e)}function Sw(t,e){if(t==="input"||t==="change")return rl(e)}function Ew(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:Ew;function Ks(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Ru.call(e,s)||!_n(t[s],e[s]))return!1}return!0}function wf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xf(t,e){var n=wf(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wf(n)}}function Wm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hm(){for(var t=window,e=Ea();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ea(t.document)}return e}function ud(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kw(t){var e=Hm(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wm(n.ownerDocument.documentElement,n)){if(i!==null&&ud(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!t.extend&&a>i&&(s=i,i=a,a=s),s=xf(n,a);var l=xf(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pw=Fn&&"documentMode"in document&&11>=document.documentMode,bi=null,Xu=null,As=null,ec=!1;function bf(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ec||bi==null||bi!==Ea(i)||(i=bi,"selectionStart"in i&&ud(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),As&&Ks(As,i)||(As=i,i=La(Xu,"onSelect"),0<i.length&&(e=new od("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=bi)))}function Go(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Si={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},au={},Zm={};Fn&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function il(t){if(au[t])return au[t];if(!Si[t])return t;var e=Si[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zm)return au[t]=e[n];return t}var Vm=il("animationend"),qm=il("animationiteration"),Gm=il("animationstart"),Km=il("transitionend"),Jm=new Map,Sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(t,e){Jm.set(t,e),Jr(e,[t])}for(var lu=0;lu<Sf.length;lu++){var uu=Sf[lu],Cw=uu.toLowerCase(),Tw=uu[0].toUpperCase()+uu.slice(1);yr(Cw,"on"+Tw)}yr(Vm,"onAnimationEnd");yr(qm,"onAnimationIteration");yr(Gm,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(Km,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ow=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cs));function Ef(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,C0(i,e,void 0,t),t.currentTarget=null}function Qm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var l=i.length-1;0<=l;l--){var c=i[l],d=c.instance,f=c.currentTarget;if(c=c.listener,d!==a&&s.isPropagationStopped())break e;Ef(s,c,f),a=d}else for(l=0;l<i.length;l++){if(c=i[l],d=c.instance,f=c.currentTarget,c=c.listener,d!==a&&s.isPropagationStopped())break e;Ef(s,c,f),a=d}}}if(Pa)throw t=Ku,Pa=!1,Ku=null,t}function De(t,e){var n=e[sc];n===void 0&&(n=e[sc]=new Set);var i=t+"__bubble";n.has(i)||(Ym(e,t,2,!1),n.add(i))}function cu(t,e,n){var i=0;e&&(i|=4),Ym(n,t,i,e)}var Ko="_reactListening"+Math.random().toString(36).slice(2);function Js(t){if(!t[Ko]){t[Ko]=!0,sm.forEach(function(n){n!=="selectionchange"&&(Ow.has(n)||cu(n,!1,t),cu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ko]||(e[Ko]=!0,cu("selectionchange",!1,e))}}function Ym(t,e,n,i){switch(Im(e)){case 1:var s=W0;break;case 4:s=H0;break;default:s=id}n=s.bind(null,e,n,t),s=void 0,!Gu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function du(t,e,n,i,s){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var c=i.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;c!==null;){if(l=Br(c),l===null)return;if(d=l.tag,d===5||d===6){i=a=l;continue e}c=c.parentNode}}i=i.return}xm(function(){var f=a,g=ed(n),v=[];e:{var y=Jm.get(t);if(y!==void 0){var x=od,k=t;switch(t){case"keypress":if(ga(n)===0)break e;case"keydown":case"keyup":x=sw;break;case"focusin":k="focus",x=iu;break;case"focusout":k="blur",x=iu;break;case"beforeblur":case"afterblur":x=iu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=q0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=lw;break;case Vm:case qm:case Gm:x=J0;break;case Km:x=cw;break;case"scroll":x=Z0;break;case"wheel":x=hw;break;case"copy":case"cut":case"paste":x=Y0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=pf}var P=(e&4)!==0,C=!P&&t==="scroll",S=P?y!==null?y+"Capture":null:y;P=[];for(var w=f,b;w!==null;){b=w;var O=b.stateNode;if(b.tag===5&&O!==null&&(b=O,S!==null&&(O=Hs(w,S),O!=null&&P.push(Qs(w,O,b)))),C)break;w=w.return}0<P.length&&(y=new x(y,k,null,n,g),v.push({event:y,listeners:P}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",y&&n!==Vu&&(k=n.relatedTarget||n.fromElement)&&(Br(k)||k[Wn]))break e;if((x||y)&&(y=g.window===g?g:(y=g.ownerDocument)?y.defaultView||y.parentWindow:window,x?(k=n.relatedTarget||n.toElement,x=f,k=k?Br(k):null,k!==null&&(C=Qr(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(x=null,k=f),x!==k)){if(P=hf,O="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=pf,O="onPointerLeave",S="onPointerEnter",w="pointer"),C=x==null?y:Ei(x),b=k==null?y:Ei(k),y=new P(O,w+"leave",x,n,g),y.target=C,y.relatedTarget=b,O=null,Br(g)===f&&(P=new P(S,w+"enter",k,n,g),P.target=b,P.relatedTarget=C,O=P),C=O,x&&k)t:{for(P=x,S=k,w=0,b=P;b;b=ci(b))w++;for(b=0,O=S;O;O=ci(O))b++;for(;0<w-b;)P=ci(P),w--;for(;0<b-w;)S=ci(S),b--;for(;w--;){if(P===S||S!==null&&P===S.alternate)break t;P=ci(P),S=ci(S)}P=null}else P=null;x!==null&&kf(v,y,x,P,!1),k!==null&&C!==null&&kf(v,C,k,P,!0)}}e:{if(y=f?Ei(f):window,x=y.nodeName&&y.nodeName.toLowerCase(),x==="select"||x==="input"&&y.type==="file")var A=yw;else if(vf(y))if($m)A=Sw;else{A=xw;var D=ww}else(x=y.nodeName)&&x.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(A=bw);if(A&&(A=A(t,f))){Um(v,A,n,g);break e}D&&D(t,y,f),t==="focusout"&&(D=y._wrapperState)&&D.controlled&&y.type==="number"&&$u(y,"number",y.value)}switch(D=f?Ei(f):window,t){case"focusin":(vf(D)||D.contentEditable==="true")&&(bi=D,Xu=f,As=null);break;case"focusout":As=Xu=bi=null;break;case"mousedown":ec=!0;break;case"contextmenu":case"mouseup":case"dragend":ec=!1,bf(v,n,g);break;case"selectionchange":if(Pw)break;case"keydown":case"keyup":bf(v,n,g)}var I;if(ld)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else xi?Dm(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(zm&&n.locale!=="ko"&&(xi||$!=="onCompositionStart"?$==="onCompositionEnd"&&xi&&(I=Mm()):(sr=g,sd="value"in sr?sr.value:sr.textContent,xi=!0)),D=La(f,$),0<D.length&&($=new ff($,t,null,n,g),v.push({event:$,listeners:D}),I?$.data=I:(I=Bm(n),I!==null&&($.data=I)))),(I=pw?mw(t,n):gw(t,n))&&(f=La(f,"onBeforeInput"),0<f.length&&(g=new ff("onBeforeInput","beforeinput",null,n,g),v.push({event:g,listeners:f}),g.data=I))}Qm(v,e)})}function Qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function La(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Hs(t,n),a!=null&&i.unshift(Qs(t,a,s)),a=Hs(t,e),a!=null&&i.push(Qs(t,a,s))),t=t.return}return i}function ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kf(t,e,n,i,s){for(var a=e._reactName,l=[];n!==null&&n!==i;){var c=n,d=c.alternate,f=c.stateNode;if(d!==null&&d===i)break;c.tag===5&&f!==null&&(c=f,s?(d=Hs(n,a),d!=null&&l.unshift(Qs(n,d,c))):s||(d=Hs(n,a),d!=null&&l.push(Qs(n,d,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var jw=/\r\n?/g,Lw=/\u0000|\uFFFD/g;function Pf(t){return(typeof t=="string"?t:""+t).replace(jw,`
`).replace(Lw,"")}function Jo(t,e,n){if(e=Pf(e),Pf(t)!==e&&n)throw Error(W(425))}function Na(){}var tc=null,nc=null;function rc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ic=typeof setTimeout=="function"?setTimeout:void 0,Nw=typeof clearTimeout=="function"?clearTimeout:void 0,Cf=typeof Promise=="function"?Promise:void 0,Aw=typeof queueMicrotask=="function"?queueMicrotask:typeof Cf<"u"?function(t){return Cf.resolve(null).then(t).catch(Rw)}:ic;function Rw(t){setTimeout(function(){throw t})}function hu(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),qs(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);qs(e)}function dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Ki,Ys="__reactProps$"+Ki,Wn="__reactContainer$"+Ki,sc="__reactEvents$"+Ki,Iw="__reactListeners$"+Ki,Mw="__reactHandles$"+Ki;function Br(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wn]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tf(t);t!==null;){if(n=t[Pn])return n;t=Tf(t)}return e}t=n,n=t.parentNode}return null}function mo(t){return t=t[Pn]||t[Wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function sl(t){return t[Ys]||null}var oc=[],ki=-1;function wr(t){return{current:t}}function Be(t){0>ki||(t.current=oc[ki],oc[ki]=null,ki--)}function ze(t,e){ki++,oc[ki]=t.current,t.current=e}var _r={},_t=wr(_r),It=wr(!1),Zr=_r;function Bi(t,e){var n=t.type.contextTypes;if(!n)return _r;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(t){return t=t.childContextTypes,t!=null}function Aa(){Be(It),Be(_t)}function Of(t,e,n){if(_t.current!==_r)throw Error(W(168));ze(_t,e),ze(It,n)}function Xm(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(W(108,w0(t)||"Unknown",s));return Ve({},n,i)}function Ra(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,Zr=_t.current,ze(_t,t),ze(It,It.current),!0}function jf(t,e,n){var i=t.stateNode;if(!i)throw Error(W(169));n?(t=Xm(t,e,Zr),i.__reactInternalMemoizedMergedChildContext=t,Be(It),Be(_t),ze(_t,t)):Be(It),ze(It,n)}var Dn=null,ol=!1,fu=!1;function eg(t){Dn===null?Dn=[t]:Dn.push(t)}function zw(t){ol=!0,eg(t)}function xr(){if(!fu&&Dn!==null){fu=!0;var t=0,e=Le;try{var n=Dn;for(Le=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Dn=null,ol=!1}catch(s){throw Dn!==null&&(Dn=Dn.slice(t+1)),km(td,xr),s}finally{Le=e,fu=!1}}return null}var Pi=[],Ci=0,Ia=null,Ma=0,Qt=[],Yt=0,Vr=null,Bn=1,Un="";function Rr(t,e){Pi[Ci++]=Ma,Pi[Ci++]=Ia,Ia=t,Ma=e}function tg(t,e,n){Qt[Yt++]=Bn,Qt[Yt++]=Un,Qt[Yt++]=Vr,Vr=t;var i=Bn;t=Un;var s=32-gn(i)-1;i&=~(1<<s),n+=1;var a=32-gn(e)+s;if(30<a){var l=s-s%5;a=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Bn=1<<32-gn(e)+s|n<<s|i,Un=a+t}else Bn=1<<a|n<<s|i,Un=t}function cd(t){t.return!==null&&(Rr(t,1),tg(t,1,0))}function dd(t){for(;t===Ia;)Ia=Pi[--Ci],Pi[Ci]=null,Ma=Pi[--Ci],Pi[Ci]=null;for(;t===Vr;)Vr=Qt[--Yt],Qt[Yt]=null,Un=Qt[--Yt],Qt[Yt]=null,Bn=Qt[--Yt],Qt[Yt]=null}var Ft=null,$t=null,Ue=!1,mn=null;function ng(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ft=t,$t=dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ft=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vr!==null?{id:Bn,overflow:Un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ft=t,$t=null,!0):!1;default:return!1}}function ac(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lc(t){if(Ue){var e=$t;if(e){var n=e;if(!Lf(t,e)){if(ac(t))throw Error(W(418));e=dr(n.nextSibling);var i=Ft;e&&Lf(t,e)?ng(i,n):(t.flags=t.flags&-4097|2,Ue=!1,Ft=t)}}else{if(ac(t))throw Error(W(418));t.flags=t.flags&-4097|2,Ue=!1,Ft=t}}}function Nf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ft=t}function Qo(t){if(t!==Ft)return!1;if(!Ue)return Nf(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rc(t.type,t.memoizedProps)),e&&(e=$t)){if(ac(t))throw rg(),Error(W(418));for(;e;)ng(t,e),e=dr(e.nextSibling)}if(Nf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=Ft?dr(t.stateNode.nextSibling):null;return!0}function rg(){for(var t=$t;t;)t=dr(t.nextSibling)}function Ui(){$t=Ft=null,Ue=!1}function hd(t){mn===null?mn=[t]:mn.push(t)}var Dw=Vn.ReactCurrentBatchConfig;function ys(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var i=n.stateNode}if(!i)throw Error(W(147,t));var s=i,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var c=s.refs;l===null?delete c[a]:c[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Yo(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Af(t){var e=t._init;return e(t._payload)}function ig(t){function e(S,w){if(t){var b=S.deletions;b===null?(S.deletions=[w],S.flags|=16):b.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function i(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function s(S,w){return S=mr(S,w),S.index=0,S.sibling=null,S}function a(S,w,b){return S.index=b,t?(b=S.alternate,b!==null?(b=b.index,b<w?(S.flags|=2,w):b):(S.flags|=2,w)):(S.flags|=1048576,w)}function l(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,w,b,O){return w===null||w.tag!==6?(w=wu(b,S.mode,O),w.return=S,w):(w=s(w,b),w.return=S,w)}function d(S,w,b,O){var A=b.type;return A===wi?g(S,w,b.props.children,O,b.key):w!==null&&(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===er&&Af(A)===w.type)?(O=s(w,b.props),O.ref=ys(S,w,b),O.return=S,O):(O=Sa(b.type,b.key,b.props,null,S.mode,O),O.ref=ys(S,w,b),O.return=S,O)}function f(S,w,b,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=xu(b,S.mode,O),w.return=S,w):(w=s(w,b.children||[]),w.return=S,w)}function g(S,w,b,O,A){return w===null||w.tag!==7?(w=Hr(b,S.mode,O,A),w.return=S,w):(w=s(w,b),w.return=S,w)}function v(S,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=wu(""+w,S.mode,b),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $o:return b=Sa(w.type,w.key,w.props,null,S.mode,b),b.ref=ys(S,null,w),b.return=S,b;case yi:return w=xu(w,S.mode,b),w.return=S,w;case er:var O=w._init;return v(S,O(w._payload),b)}if(ks(w)||ps(w))return w=Hr(w,S.mode,b,null),w.return=S,w;Yo(S,w)}return null}function y(S,w,b,O){var A=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return A!==null?null:c(S,w,""+b,O);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $o:return b.key===A?d(S,w,b,O):null;case yi:return b.key===A?f(S,w,b,O):null;case er:return A=b._init,y(S,w,A(b._payload),O)}if(ks(b)||ps(b))return A!==null?null:g(S,w,b,O,null);Yo(S,b)}return null}function x(S,w,b,O,A){if(typeof O=="string"&&O!==""||typeof O=="number")return S=S.get(b)||null,c(w,S,""+O,A);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case $o:return S=S.get(O.key===null?b:O.key)||null,d(w,S,O,A);case yi:return S=S.get(O.key===null?b:O.key)||null,f(w,S,O,A);case er:var D=O._init;return x(S,w,b,D(O._payload),A)}if(ks(O)||ps(O))return S=S.get(b)||null,g(w,S,O,A,null);Yo(w,O)}return null}function k(S,w,b,O){for(var A=null,D=null,I=w,$=w=0,Q=null;I!==null&&$<b.length;$++){I.index>$?(Q=I,I=null):Q=I.sibling;var X=y(S,I,b[$],O);if(X===null){I===null&&(I=Q);break}t&&I&&X.alternate===null&&e(S,I),w=a(X,w,$),D===null?A=X:D.sibling=X,D=X,I=Q}if($===b.length)return n(S,I),Ue&&Rr(S,$),A;if(I===null){for(;$<b.length;$++)I=v(S,b[$],O),I!==null&&(w=a(I,w,$),D===null?A=I:D.sibling=I,D=I);return Ue&&Rr(S,$),A}for(I=i(S,I);$<b.length;$++)Q=x(I,S,$,b[$],O),Q!==null&&(t&&Q.alternate!==null&&I.delete(Q.key===null?$:Q.key),w=a(Q,w,$),D===null?A=Q:D.sibling=Q,D=Q);return t&&I.forEach(function(we){return e(S,we)}),Ue&&Rr(S,$),A}function P(S,w,b,O){var A=ps(b);if(typeof A!="function")throw Error(W(150));if(b=A.call(b),b==null)throw Error(W(151));for(var D=A=null,I=w,$=w=0,Q=null,X=b.next();I!==null&&!X.done;$++,X=b.next()){I.index>$?(Q=I,I=null):Q=I.sibling;var we=y(S,I,X.value,O);if(we===null){I===null&&(I=Q);break}t&&I&&we.alternate===null&&e(S,I),w=a(we,w,$),D===null?A=we:D.sibling=we,D=we,I=Q}if(X.done)return n(S,I),Ue&&Rr(S,$),A;if(I===null){for(;!X.done;$++,X=b.next())X=v(S,X.value,O),X!==null&&(w=a(X,w,$),D===null?A=X:D.sibling=X,D=X);return Ue&&Rr(S,$),A}for(I=i(S,I);!X.done;$++,X=b.next())X=x(I,S,$,X.value,O),X!==null&&(t&&X.alternate!==null&&I.delete(X.key===null?$:X.key),w=a(X,w,$),D===null?A=X:D.sibling=X,D=X);return t&&I.forEach(function(Y){return e(S,Y)}),Ue&&Rr(S,$),A}function C(S,w,b,O){if(typeof b=="object"&&b!==null&&b.type===wi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $o:e:{for(var A=b.key,D=w;D!==null;){if(D.key===A){if(A=b.type,A===wi){if(D.tag===7){n(S,D.sibling),w=s(D,b.props.children),w.return=S,S=w;break e}}else if(D.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===er&&Af(A)===D.type){n(S,D.sibling),w=s(D,b.props),w.ref=ys(S,D,b),w.return=S,S=w;break e}n(S,D);break}else e(S,D);D=D.sibling}b.type===wi?(w=Hr(b.props.children,S.mode,O,b.key),w.return=S,S=w):(O=Sa(b.type,b.key,b.props,null,S.mode,O),O.ref=ys(S,w,b),O.return=S,S=O)}return l(S);case yi:e:{for(D=b.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(S,w.sibling),w=s(w,b.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=xu(b,S.mode,O),w.return=S,S=w}return l(S);case er:return D=b._init,C(S,w,D(b._payload),O)}if(ks(b))return k(S,w,b,O);if(ps(b))return P(S,w,b,O);Yo(S,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(S,w.sibling),w=s(w,b),w.return=S,S=w):(n(S,w),w=wu(b,S.mode,O),w.return=S,S=w),l(S)):n(S,w)}return C}var $i=ig(!0),sg=ig(!1),za=wr(null),Da=null,Ti=null,fd=null;function pd(){fd=Ti=Da=null}function md(t){var e=za.current;Be(za),t._currentValue=e}function uc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ii(t,e){Da=t,fd=Ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(fd!==t)if(t={context:t,memoizedValue:e,next:null},Ti===null){if(Da===null)throw Error(W(308));Ti=t,Da.dependencies={lanes:0,firstContext:t}}else Ti=Ti.next=t;return e}var Ur=null;function gd(t){Ur===null?Ur=[t]:Ur.push(t)}function og(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,gd(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,i)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var tr=!1;function vd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ag(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ce&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Hn(t,n)}return s=i.interleaved,s===null?(e.next=e,gd(i)):(e.next=s.next,s.next=e),i.interleaved=e,Hn(t,n)}function va(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nd(t,n)}}function Rf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ba(t,e,n,i){var s=t.updateQueue;tr=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var d=c,f=d.next;d.next=null,l===null?a=f:l.next=f,l=d;var g=t.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==l&&(c===null?g.firstBaseUpdate=f:c.next=f,g.lastBaseUpdate=d))}if(a!==null){var v=s.baseState;l=0,g=f=d=null,c=a;do{var y=c.lane,x=c.eventTime;if((i&y)===y){g!==null&&(g=g.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var k=t,P=c;switch(y=e,x=n,P.tag){case 1:if(k=P.payload,typeof k=="function"){v=k.call(x,v,y);break e}v=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=P.payload,y=typeof k=="function"?k.call(x,v,y):k,y==null)break e;v=Ve({},v,y);break e;case 2:tr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[c]:y.push(c))}else x={eventTime:x,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(f=g=x,d=v):g=g.next=x,l|=y;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;y=c,c=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(g===null&&(d=v),s.baseState=d,s.firstBaseUpdate=f,s.lastBaseUpdate=g,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Gr|=l,t.lanes=l,t.memoizedState=v}}function If(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(W(191,s));s.call(i)}}}var go={},Tn=wr(go),Xs=wr(go),eo=wr(go);function $r(t){if(t===go)throw Error(W(174));return t}function _d(t,e){switch(ze(eo,e),ze(Xs,t),ze(Tn,go),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wu(e,t)}Be(Tn),ze(Tn,e)}function Fi(){Be(Tn),Be(Xs),Be(eo)}function lg(t){$r(eo.current);var e=$r(Tn.current),n=Wu(e,t.type);e!==n&&(ze(Xs,t),ze(Tn,n))}function yd(t){Xs.current===t&&(Be(Tn),Be(Xs))}var He=wr(0);function Ua(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pu=[];function wd(){for(var t=0;t<pu.length;t++)pu[t]._workInProgressVersionPrimary=null;pu.length=0}var _a=Vn.ReactCurrentDispatcher,mu=Vn.ReactCurrentBatchConfig,qr=0,Ze=null,it=null,at=null,$a=!1,Rs=!1,to=0,Bw=0;function mt(){throw Error(W(321))}function xd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_n(t[n],e[n]))return!1;return!0}function bd(t,e,n,i,s,a){if(qr=a,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_a.current=t===null||t.memoizedState===null?Ww:Hw,t=n(i,s),Rs){a=0;do{if(Rs=!1,to=0,25<=a)throw Error(W(301));a+=1,at=it=null,e.updateQueue=null,_a.current=Zw,t=n(i,s)}while(Rs)}if(_a.current=Fa,e=it!==null&&it.next!==null,qr=0,at=it=Ze=null,$a=!1,e)throw Error(W(300));return t}function Sd(){var t=to!==0;return to=0,t}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Ze.memoizedState=at=t:at=at.next=t,at}function nn(){if(it===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=at===null?Ze.memoizedState:at.next;if(e!==null)at=e,it=t;else{if(t===null)throw Error(W(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},at===null?Ze.memoizedState=at=t:at=at.next=t}return at}function no(t,e){return typeof e=="function"?e(t):e}function gu(t){var e=nn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var i=it,s=i.baseQueue,a=n.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}i.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,i=i.baseState;var c=l=null,d=null,f=a;do{var g=f.lane;if((qr&g)===g)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var v={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(c=d=v,l=i):d=d.next=v,Ze.lanes|=g,Gr|=g}f=f.next}while(f!==null&&f!==a);d===null?l=i:d.next=c,_n(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Ze.lanes|=a,Gr|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vu(t){var e=nn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do a=t(a,l.action),l=l.next;while(l!==s);_n(a,e.memoizedState)||(Rt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function ug(){}function cg(t,e){var n=Ze,i=nn(),s=e(),a=!_n(i.memoizedState,s);if(a&&(i.memoizedState=s,Rt=!0),i=i.queue,Ed(fg.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,ro(9,hg.bind(null,n,i,s,e),void 0,null),lt===null)throw Error(W(349));qr&30||dg(n,e,s)}return s}function dg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hg(t,e,n,i){e.value=n,e.getSnapshot=i,pg(e)&&mg(t)}function fg(t,e,n){return n(function(){pg(e)&&mg(t)})}function pg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_n(t,n)}catch{return!0}}function mg(t){var e=Hn(t,1);e!==null&&vn(e,t,1,-1)}function Mf(t){var e=kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:t},e.queue=t,t=t.dispatch=Fw.bind(null,Ze,t),[e.memoizedState,t]}function ro(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function gg(){return nn().memoizedState}function ya(t,e,n,i){var s=kn();Ze.flags|=t,s.memoizedState=ro(1|e,n,void 0,i===void 0?null:i)}function al(t,e,n,i){var s=nn();i=i===void 0?null:i;var a=void 0;if(it!==null){var l=it.memoizedState;if(a=l.destroy,i!==null&&xd(i,l.deps)){s.memoizedState=ro(e,n,a,i);return}}Ze.flags|=t,s.memoizedState=ro(1|e,n,a,i)}function zf(t,e){return ya(8390656,8,t,e)}function Ed(t,e){return al(2048,8,t,e)}function vg(t,e){return al(4,2,t,e)}function _g(t,e){return al(4,4,t,e)}function yg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wg(t,e,n){return n=n!=null?n.concat([t]):null,al(4,4,yg.bind(null,e,t),n)}function kd(){}function xg(t,e){var n=nn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&xd(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function bg(t,e){var n=nn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&xd(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Sg(t,e,n){return qr&21?(_n(n,e)||(n=Tm(),Ze.lanes|=n,Gr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function Uw(t,e){var n=Le;Le=n!==0&&4>n?n:4,t(!0);var i=mu.transition;mu.transition={};try{t(!1),e()}finally{Le=n,mu.transition=i}}function Eg(){return nn().memoizedState}function $w(t,e,n){var i=pr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},kg(t))Pg(e,n);else if(n=og(t,e,n,i),n!==null){var s=Ct();vn(n,t,i,s),Cg(n,e,i)}}function Fw(t,e,n){var i=pr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(kg(t))Pg(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,c=a(l,n);if(s.hasEagerState=!0,s.eagerState=c,_n(c,l)){var d=e.interleaved;d===null?(s.next=s,gd(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=og(t,e,s,i),n!==null&&(s=Ct(),vn(n,t,i,s),Cg(n,e,i))}}function kg(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function Pg(t,e){Rs=$a=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Cg(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,nd(t,n)}}var Fa={readContext:tn,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},Ww={readContext:tn,useCallback:function(t,e){return kn().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:zf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ya(4194308,4,yg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return ya(4,2,t,e)},useMemo:function(t,e){var n=kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=kn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=$w.bind(null,Ze,t),[i.memoizedState,t]},useRef:function(t){var e=kn();return t={current:t},e.memoizedState=t},useState:Mf,useDebugValue:kd,useDeferredValue:function(t){return kn().memoizedState=t},useTransition:function(){var t=Mf(!1),e=t[0];return t=Uw.bind(null,t[1]),kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ze,s=kn();if(Ue){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),lt===null)throw Error(W(349));qr&30||dg(i,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,zf(fg.bind(null,i,a,t),[t]),i.flags|=2048,ro(9,hg.bind(null,i,a,n,e),void 0,null),n},useId:function(){var t=kn(),e=lt.identifierPrefix;if(Ue){var n=Un,i=Bn;n=(i&~(1<<32-gn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=to++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Bw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Hw={readContext:tn,useCallback:xg,useContext:tn,useEffect:Ed,useImperativeHandle:wg,useInsertionEffect:vg,useLayoutEffect:_g,useMemo:bg,useReducer:gu,useRef:gg,useState:function(){return gu(no)},useDebugValue:kd,useDeferredValue:function(t){var e=nn();return Sg(e,it.memoizedState,t)},useTransition:function(){var t=gu(no)[0],e=nn().memoizedState;return[t,e]},useMutableSource:ug,useSyncExternalStore:cg,useId:Eg,unstable_isNewReconciler:!1},Zw={readContext:tn,useCallback:xg,useContext:tn,useEffect:Ed,useImperativeHandle:wg,useInsertionEffect:vg,useLayoutEffect:_g,useMemo:bg,useReducer:vu,useRef:gg,useState:function(){return vu(no)},useDebugValue:kd,useDeferredValue:function(t){var e=nn();return it===null?e.memoizedState=t:Sg(e,it.memoizedState,t)},useTransition:function(){var t=vu(no)[0],e=nn().memoizedState;return[t,e]},useMutableSource:ug,useSyncExternalStore:cg,useId:Eg,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ll={isMounted:function(t){return(t=t._reactInternals)?Qr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ct(),s=pr(t),a=$n(i,s);a.payload=e,n!=null&&(a.callback=n),e=hr(t,a,s),e!==null&&(vn(e,t,s,i),va(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ct(),s=pr(t),a=$n(i,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=hr(t,a,s),e!==null&&(vn(e,t,s,i),va(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),i=pr(t),s=$n(n,i);s.tag=2,e!=null&&(s.callback=e),e=hr(t,s,i),e!==null&&(vn(e,t,i,n),va(e,t,i))}};function Df(t,e,n,i,s,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,l):e.prototype&&e.prototype.isPureReactComponent?!Ks(n,i)||!Ks(s,a):!0}function Tg(t,e,n){var i=!1,s=_r,a=e.contextType;return typeof a=="object"&&a!==null?a=tn(a):(s=Mt(e)?Zr:_t.current,i=e.contextTypes,a=(i=i!=null)?Bi(t,s):_r),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ll,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Bf(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ll.enqueueReplaceState(e,e.state,null)}function dc(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},vd(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=tn(a):(a=Mt(e)?Zr:_t.current,s.context=Bi(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(cc(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ll.enqueueReplaceState(s,s.state,null),Ba(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wi(t,e){try{var n="",i=e;do n+=y0(i),i=i.return;while(i);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function _u(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Vw=typeof WeakMap=="function"?WeakMap:Map;function Og(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Ha||(Ha=!0,bc=i),hc(t,e)},n}function jg(t,e,n){n=$n(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){hc(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){hc(t,e),typeof i!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Uf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Vw;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=ox.bind(null,t,e,n),e.then(t,t))}function $f(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ff(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,hr(n,e,1))),n.lanes|=1),t)}var qw=Vn.ReactCurrentOwner,Rt=!1;function kt(t,e,n,i){e.child=t===null?sg(e,null,n,i):$i(e,t.child,n,i)}function Wf(t,e,n,i,s){n=n.render;var a=e.ref;return Ii(e,s),i=bd(t,e,n,i,a,s),n=Sd(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zn(t,e,s)):(Ue&&n&&cd(e),e.flags|=1,kt(t,e,i,s),e.child)}function Hf(t,e,n,i,s){if(t===null){var a=n.type;return typeof a=="function"&&!Ad(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Lg(t,e,a,i,s)):(t=Sa(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ks,n(l,i)&&t.ref===e.ref)return Zn(t,e,s)}return e.flags|=1,t=mr(a,i),t.ref=e.ref,t.return=e,e.child=t}function Lg(t,e,n,i,s){if(t!==null){var a=t.memoizedProps;if(Ks(a,i)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=i=a,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Zn(t,e,s)}return fc(t,e,n,i,s)}function Ng(t,e,n){var i=e.pendingProps,s=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(ji,Dt),Dt|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(ji,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:n,ze(ji,Dt),Dt|=i}else a!==null?(i=a.baseLanes|n,e.memoizedState=null):i=n,ze(ji,Dt),Dt|=i;return kt(t,e,s,n),e.child}function Ag(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fc(t,e,n,i,s){var a=Mt(n)?Zr:_t.current;return a=Bi(e,a),Ii(e,s),n=bd(t,e,n,i,a,s),i=Sd(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zn(t,e,s)):(Ue&&i&&cd(e),e.flags|=1,kt(t,e,n,s),e.child)}function Zf(t,e,n,i,s){if(Mt(n)){var a=!0;Ra(e)}else a=!1;if(Ii(e,s),e.stateNode===null)wa(t,e),Tg(e,n,i),dc(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var d=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=tn(f):(f=Mt(n)?Zr:_t.current,f=Bi(e,f));var g=n.getDerivedStateFromProps,v=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==i||d!==f)&&Bf(e,l,i,f),tr=!1;var y=e.memoizedState;l.state=y,Ba(e,i,l,s),d=e.memoizedState,c!==i||y!==d||It.current||tr?(typeof g=="function"&&(cc(e,n,g,i),d=e.memoizedState),(c=tr||Df(e,n,c,i,y,d,f))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=f,i=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,ag(t,e),c=e.memoizedProps,f=e.type===e.elementType?c:dn(e.type,c),l.props=f,v=e.pendingProps,y=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=tn(d):(d=Mt(n)?Zr:_t.current,d=Bi(e,d));var x=n.getDerivedStateFromProps;(g=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==v||y!==d)&&Bf(e,l,i,d),tr=!1,y=e.memoizedState,l.state=y,Ba(e,i,l,s);var k=e.memoizedState;c!==v||y!==k||It.current||tr?(typeof x=="function"&&(cc(e,n,x,i),k=e.memoizedState),(f=tr||Df(e,n,f,i,y,k,d)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,k,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,k,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),l.props=i,l.state=k,l.context=d,i=f):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),i=!1)}return pc(t,e,n,i,a,s)}function pc(t,e,n,i,s,a){Ag(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&jf(e,n,!1),Zn(t,e,a);i=e.stateNode,qw.current=e;var c=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=$i(e,t.child,null,a),e.child=$i(e,null,c,a)):kt(t,e,c,a),e.memoizedState=i.state,s&&jf(e,n,!0),e.child}function Rg(t){var e=t.stateNode;e.pendingContext?Of(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Of(t,e.context,!1),_d(t,e.containerInfo)}function Vf(t,e,n,i,s){return Ui(),hd(s),e.flags|=256,kt(t,e,n,i),e.child}var mc={dehydrated:null,treeContext:null,retryLane:0};function gc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ig(t,e,n){var i=e.pendingProps,s=He.current,a=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ze(He,s&1),t===null)return lc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=dl(l,i,0,null),t=Hr(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=gc(n),e.memoizedState=mc,t):Pd(e,l));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return Gw(t,e,l,i,c,s,n);if(a){a=i.fallback,l=e.mode,s=t.child,c=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=mr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),c!==null?a=mr(c,a):(a=Hr(a,l,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=t.child.memoizedState,l=l===null?gc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=mc,i}return a=t.child,t=a.sibling,i=mr(a,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Pd(t,e){return e=dl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xo(t,e,n,i){return i!==null&&hd(i),$i(e,t.child,null,n),t=Pd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gw(t,e,n,i,s,a,l){if(n)return e.flags&256?(e.flags&=-257,i=_u(Error(W(422))),Xo(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=i.fallback,s=e.mode,i=dl({mode:"visible",children:i.children},s,0,null),a=Hr(a,s,l,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,e.mode&1&&$i(e,t.child,null,l),e.child.memoizedState=gc(l),e.memoizedState=mc,a);if(!(e.mode&1))return Xo(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var c=i.dgst;return i=c,a=Error(W(419)),i=_u(a,i,void 0),Xo(t,e,l,i)}if(c=(l&t.childLanes)!==0,Rt||c){if(i=lt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Hn(t,s),vn(i,t,s,-1))}return Nd(),i=_u(Error(W(421))),Xo(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ax.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,$t=dr(s.nextSibling),Ft=e,Ue=!0,mn=null,t!==null&&(Qt[Yt++]=Bn,Qt[Yt++]=Un,Qt[Yt++]=Vr,Bn=t.id,Un=t.overflow,Vr=e),e=Pd(e,i.children),e.flags|=4096,e)}function qf(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),uc(t.return,e,n)}function yu(t,e,n,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=s)}function Mg(t,e,n){var i=e.pendingProps,s=i.revealOrder,a=i.tail;if(kt(t,e,i.children,n),i=He.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qf(t,n,e);else if(t.tag===19)qf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ze(He,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ua(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),yu(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ua(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}yu(e,!0,n,null,a);break;case"together":yu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Kw(t,e,n){switch(e.tag){case 3:Rg(e),Ui();break;case 5:lg(e);break;case 1:Mt(e.type)&&Ra(e);break;case 4:_d(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ze(za,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ze(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?Ig(t,e,n):(ze(He,He.current&1),t=Zn(t,e,n),t!==null?t.sibling:null);ze(He,He.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Mg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(He,He.current),i)break;return null;case 22:case 23:return e.lanes=0,Ng(t,e,n)}return Zn(t,e,n)}var zg,vc,Dg,Bg;zg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vc=function(){};Dg=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,$r(Tn.current);var a=null;switch(n){case"input":s=Bu(t,s),i=Bu(t,i),a=[];break;case"select":s=Ve({},s,{value:void 0}),i=Ve({},i,{value:void 0}),a=[];break;case"textarea":s=Fu(t,s),i=Fu(t,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Na)}Hu(n,i);var l;n=null;for(f in s)if(!i.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var c=s[f];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Fs.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in i){var d=i[f];if(c=s!=null?s[f]:void 0,i.hasOwnProperty(f)&&d!==c&&(d!=null||c!=null))if(f==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(a||(a=[]),a.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Fs.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&De("scroll",t),a||c===d||(a=[])):(a=a||[]).push(f,d))}n&&(a=a||[]).push("style",n);var f=a;(e.updateQueue=f)&&(e.flags|=4)}};Bg=function(t,e,n,i){n!==i&&(e.flags|=4)};function ws(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Jw(t,e,n){var i=e.pendingProps;switch(dd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Mt(e.type)&&Aa(),gt(e),null;case 3:return i=e.stateNode,Fi(),Be(It),Be(_t),wd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Qo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(kc(mn),mn=null))),vc(t,e),gt(e),null;case 5:yd(e);var s=$r(eo.current);if(n=e.type,t!==null&&e.stateNode!=null)Dg(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(W(166));return gt(e),null}if(t=$r(Tn.current),Qo(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[Pn]=e,i[Ys]=a,t=(e.mode&1)!==0,n){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(s=0;s<Cs.length;s++)De(Cs[s],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":tf(i,a),De("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},De("invalid",i);break;case"textarea":rf(i,a),De("invalid",i)}Hu(n,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?i.textContent!==c&&(a.suppressHydrationWarning!==!0&&Jo(i.textContent,c,t),s=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Jo(i.textContent,c,t),s=["children",""+c]):Fs.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&De("scroll",i)}switch(n){case"input":Fo(i),nf(i,a,!0);break;case"textarea":Fo(i),sf(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Na)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[Pn]=e,t[Ys]=i,zg(t,e,!1,!1),e.stateNode=t;e:{switch(l=Zu(n,i),n){case"dialog":De("cancel",t),De("close",t),s=i;break;case"iframe":case"object":case"embed":De("load",t),s=i;break;case"video":case"audio":for(s=0;s<Cs.length;s++)De(Cs[s],t);s=i;break;case"source":De("error",t),s=i;break;case"img":case"image":case"link":De("error",t),De("load",t),s=i;break;case"details":De("toggle",t),s=i;break;case"input":tf(t,i),s=Bu(t,i),De("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ve({},i,{value:void 0}),De("invalid",t);break;case"textarea":rf(t,i),s=Fu(t,i),De("invalid",t);break;default:s=i}Hu(n,s),c=s;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?gm(t,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&pm(t,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ws(t,d):typeof d=="number"&&Ws(t,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Fs.hasOwnProperty(a)?d!=null&&a==="onScroll"&&De("scroll",t):d!=null&&Jc(t,a,d,l))}switch(n){case"input":Fo(t),nf(t,i,!1);break;case"textarea":Fo(t),sf(t);break;case"option":i.value!=null&&t.setAttribute("value",""+vr(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?Li(t,!!i.multiple,a,!1):i.defaultValue!=null&&Li(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Na)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)Bg(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(W(166));if(n=$r(eo.current),$r(Tn.current),Qo(e)){if(i=e.stateNode,n=e.memoizedProps,i[Pn]=e,(a=i.nodeValue!==n)&&(t=Ft,t!==null))switch(t.tag){case 3:Jo(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jo(i.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Pn]=e,e.stateNode=i}return gt(e),null;case 13:if(Be(He),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&$t!==null&&e.mode&1&&!(e.flags&128))rg(),Ui(),e.flags|=98560,a=!1;else if(a=Qo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(W(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(W(317));a[Pn]=e}else Ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),a=!1}else mn!==null&&(kc(mn),mn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?st===0&&(st=3):Nd())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return Fi(),vc(t,e),t===null&&Js(e.stateNode.containerInfo),gt(e),null;case 10:return md(e.type._context),gt(e),null;case 17:return Mt(e.type)&&Aa(),gt(e),null;case 19:if(Be(He),a=e.memoizedState,a===null)return gt(e),null;if(i=(e.flags&128)!==0,l=a.rendering,l===null)if(i)ws(a,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Ua(t),l!==null){for(e.flags|=128,ws(a,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)a=n,t=i,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(He,He.current&1|2),e.child}t=t.sibling}a.tail!==null&&Je()>Hi&&(e.flags|=128,i=!0,ws(a,!1),e.lanes=4194304)}else{if(!i)if(t=Ua(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ws(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Ue)return gt(e),null}else 2*Je()-a.renderingStartTime>Hi&&n!==1073741824&&(e.flags|=128,i=!0,ws(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(n=a.last,n!==null?n.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Je(),e.sibling=null,n=He.current,ze(He,i?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return Ld(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Dt&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function Qw(t,e){switch(dd(e),e.tag){case 1:return Mt(e.type)&&Aa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fi(),Be(It),Be(_t),wd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yd(e),null;case 13:if(Be(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(He),null;case 4:return Fi(),null;case 10:return md(e.type._context),null;case 22:case 23:return Ld(),null;case 24:return null;default:return null}}var ea=!1,vt=!1,Yw=typeof WeakSet=="function"?WeakSet:Set,J=null;function Oi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ge(t,e,i)}else n.current=null}function _c(t,e,n){try{n()}catch(i){Ge(t,e,i)}}var Gf=!1;function Xw(t,e){if(tc=Oa,t=Hm(),ud(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,c=-1,d=-1,f=0,g=0,v=t,y=null;t:for(;;){for(var x;v!==n||s!==0&&v.nodeType!==3||(c=l+s),v!==a||i!==0&&v.nodeType!==3||(d=l+i),v.nodeType===3&&(l+=v.nodeValue.length),(x=v.firstChild)!==null;)y=v,v=x;for(;;){if(v===t)break t;if(y===n&&++f===s&&(c=l),y===a&&++g===i&&(d=l),(x=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=x}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(nc={focusedElem:t,selectionRange:n},Oa=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var P=k.memoizedProps,C=k.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?P:dn(e.type,P),C);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(O){Ge(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return k=Gf,Gf=!1,k}function Is(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&_c(e,n,a)}s=s.next}while(s!==i)}}function ul(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function yc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ug(t){var e=t.alternate;e!==null&&(t.alternate=null,Ug(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[Ys],delete e[sc],delete e[Iw],delete e[Mw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $g(t){return t.tag===5||t.tag===3||t.tag===4}function Kf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$g(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Na));else if(i!==4&&(t=t.child,t!==null))for(wc(t,e,n),t=t.sibling;t!==null;)wc(t,e,n),t=t.sibling}function xc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(xc(t,e,n),t=t.sibling;t!==null;)xc(t,e,n),t=t.sibling}var ct=null,fn=!1;function Yn(t,e,n){for(n=n.child;n!==null;)Fg(t,e,n),n=n.sibling}function Fg(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(tl,n)}catch{}switch(n.tag){case 5:vt||Oi(n,e);case 6:var i=ct,s=fn;ct=null,Yn(t,e,n),ct=i,fn=s,ct!==null&&(fn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(fn?(t=ct,n=n.stateNode,t.nodeType===8?hu(t.parentNode,n):t.nodeType===1&&hu(t,n),qs(t)):hu(ct,n.stateNode));break;case 4:i=ct,s=fn,ct=n.stateNode.containerInfo,fn=!0,Yn(t,e,n),ct=i,fn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&_c(n,e,l),s=s.next}while(s!==i)}Yn(t,e,n);break;case 1:if(!vt&&(Oi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(c){Ge(n,e,c)}Yn(t,e,n);break;case 21:Yn(t,e,n);break;case 22:n.mode&1?(vt=(i=vt)||n.memoizedState!==null,Yn(t,e,n),vt=i):Yn(t,e,n);break;default:Yn(t,e,n)}}function Jf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Yw),e.forEach(function(i){var s=lx.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var a=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:ct=c.stateNode,fn=!1;break e;case 3:ct=c.stateNode.containerInfo,fn=!0;break e;case 4:ct=c.stateNode.containerInfo,fn=!0;break e}c=c.return}if(ct===null)throw Error(W(160));Fg(a,l,s),ct=null,fn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(f){Ge(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wg(e,t),e=e.sibling}function Wg(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),En(t),i&4){try{Is(3,t,t.return),ul(3,t)}catch(P){Ge(t,t.return,P)}try{Is(5,t,t.return)}catch(P){Ge(t,t.return,P)}}break;case 1:ln(e,t),En(t),i&512&&n!==null&&Oi(n,n.return);break;case 5:if(ln(e,t),En(t),i&512&&n!==null&&Oi(n,n.return),t.flags&32){var s=t.stateNode;try{Ws(s,"")}catch(P){Ge(t,t.return,P)}}if(i&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,l=n!==null?n.memoizedProps:a,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&dm(s,a),Zu(c,l);var f=Zu(c,a);for(l=0;l<d.length;l+=2){var g=d[l],v=d[l+1];g==="style"?gm(s,v):g==="dangerouslySetInnerHTML"?pm(s,v):g==="children"?Ws(s,v):Jc(s,g,v,f)}switch(c){case"input":Uu(s,a);break;case"textarea":hm(s,a);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?Li(s,!!a.multiple,x,!1):y!==!!a.multiple&&(a.defaultValue!=null?Li(s,!!a.multiple,a.defaultValue,!0):Li(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ys]=a}catch(P){Ge(t,t.return,P)}}break;case 6:if(ln(e,t),En(t),i&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(P){Ge(t,t.return,P)}}break;case 3:if(ln(e,t),En(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{qs(e.containerInfo)}catch(P){Ge(t,t.return,P)}break;case 4:ln(e,t),En(t);break;case 13:ln(e,t),En(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Od=Je())),i&4&&Jf(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(f=vt)||g,ln(e,t),vt=f):ln(e,t),En(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!g&&t.mode&1)for(J=t,g=t.child;g!==null;){for(v=J=g;J!==null;){switch(y=J,x=y.child,y.tag){case 0:case 11:case 14:case 15:Is(4,y,y.return);break;case 1:Oi(y,y.return);var k=y.stateNode;if(typeof k.componentWillUnmount=="function"){i=y,n=y.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(P){Ge(i,n,P)}}break;case 5:Oi(y,y.return);break;case 22:if(y.memoizedState!==null){Yf(v);continue}}x!==null?(x.return=y,J=x):Yf(v)}g=g.sibling}e:for(g=null,v=t;;){if(v.tag===5){if(g===null){g=v;try{s=v.stateNode,f?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=v.stateNode,d=v.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=mm("display",l))}catch(P){Ge(t,t.return,P)}}}else if(v.tag===6){if(g===null)try{v.stateNode.nodeValue=f?"":v.memoizedProps}catch(P){Ge(t,t.return,P)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;g===v&&(g=null),v=v.return}g===v&&(g=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:ln(e,t),En(t),i&4&&Jf(t);break;case 21:break;default:ln(e,t),En(t)}}function En(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($g(n)){var i=n;break e}n=n.return}throw Error(W(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Ws(s,""),i.flags&=-33);var a=Kf(t);xc(t,a,s);break;case 3:case 4:var l=i.stateNode.containerInfo,c=Kf(t);wc(t,c,l);break;default:throw Error(W(161))}}catch(d){Ge(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ex(t,e,n){J=t,Hg(t)}function Hg(t,e,n){for(var i=(t.mode&1)!==0;J!==null;){var s=J,a=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||ea;if(!l){var c=s.alternate,d=c!==null&&c.memoizedState!==null||vt;c=ea;var f=vt;if(ea=l,(vt=d)&&!f)for(J=s;J!==null;)l=J,d=l.child,l.tag===22&&l.memoizedState!==null?Xf(s):d!==null?(d.return=l,J=d):Xf(s);for(;a!==null;)J=a,Hg(a),a=a.sibling;J=s,ea=c,vt=f}Qf(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,J=a):Qf(t)}}function Qf(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||ul(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!vt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&If(e,a,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}If(e,l,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var v=g.dehydrated;v!==null&&qs(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}vt||e.flags&512&&yc(e)}catch(y){Ge(e,e.return,y)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Yf(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Xf(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ul(4,e)}catch(d){Ge(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Ge(e,s,d)}}var a=e.return;try{yc(e)}catch(d){Ge(e,a,d)}break;case 5:var l=e.return;try{yc(e)}catch(d){Ge(e,l,d)}}}catch(d){Ge(e,e.return,d)}if(e===t){J=null;break}var c=e.sibling;if(c!==null){c.return=e.return,J=c;break}J=e.return}}var tx=Math.ceil,Wa=Vn.ReactCurrentDispatcher,Cd=Vn.ReactCurrentOwner,en=Vn.ReactCurrentBatchConfig,Ce=0,lt=null,tt=null,dt=0,Dt=0,ji=wr(0),st=0,io=null,Gr=0,cl=0,Td=0,Ms=null,At=null,Od=0,Hi=1/0,Mn=null,Ha=!1,bc=null,fr=null,ta=!1,or=null,Za=0,zs=0,Sc=null,xa=-1,ba=0;function Ct(){return Ce&6?Je():xa!==-1?xa:xa=Je()}function pr(t){return t.mode&1?Ce&2&&dt!==0?dt&-dt:Dw.transition!==null?(ba===0&&(ba=Tm()),ba):(t=Le,t!==0||(t=window.event,t=t===void 0?16:Im(t.type)),t):1}function vn(t,e,n,i){if(50<zs)throw zs=0,Sc=null,Error(W(185));fo(t,n,i),(!(Ce&2)||t!==lt)&&(t===lt&&(!(Ce&2)&&(cl|=n),st===4&&rr(t,dt)),zt(t,i),n===1&&Ce===0&&!(e.mode&1)&&(Hi=Je()+500,ol&&xr()))}function zt(t,e){var n=t.callbackNode;D0(t,e);var i=Ta(t,t===lt?dt:0);if(i===0)n!==null&&lf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&lf(n),e===1)t.tag===0?zw(ep.bind(null,t)):eg(ep.bind(null,t)),Aw(function(){!(Ce&6)&&xr()}),n=null;else{switch(Om(i)){case 1:n=td;break;case 4:n=Pm;break;case 16:n=Ca;break;case 536870912:n=Cm;break;default:n=Ca}n=Yg(n,Zg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zg(t,e){if(xa=-1,ba=0,Ce&6)throw Error(W(327));var n=t.callbackNode;if(Mi()&&t.callbackNode!==n)return null;var i=Ta(t,t===lt?dt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Va(t,i);else{e=i;var s=Ce;Ce|=2;var a=qg();(lt!==t||dt!==e)&&(Mn=null,Hi=Je()+500,Wr(t,e));do try{ix();break}catch(c){Vg(t,c)}while(!0);pd(),Wa.current=a,Ce=s,tt!==null?e=0:(lt=null,dt=0,e=st)}if(e!==0){if(e===2&&(s=Ju(t),s!==0&&(i=s,e=Ec(t,s))),e===1)throw n=io,Wr(t,0),rr(t,i),zt(t,Je()),n;if(e===6)rr(t,i);else{if(s=t.current.alternate,!(i&30)&&!nx(s)&&(e=Va(t,i),e===2&&(a=Ju(t),a!==0&&(i=a,e=Ec(t,a))),e===1))throw n=io,Wr(t,0),rr(t,i),zt(t,Je()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(W(345));case 2:Ir(t,At,Mn);break;case 3:if(rr(t,i),(i&130023424)===i&&(e=Od+500-Je(),10<e)){if(Ta(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ic(Ir.bind(null,t,At,Mn),e);break}Ir(t,At,Mn);break;case 4:if(rr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-gn(i);a=1<<l,l=e[l],l>s&&(s=l),i&=~a}if(i=s,i=Je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*tx(i/1960))-i,10<i){t.timeoutHandle=ic(Ir.bind(null,t,At,Mn),i);break}Ir(t,At,Mn);break;case 5:Ir(t,At,Mn);break;default:throw Error(W(329))}}}return zt(t,Je()),t.callbackNode===n?Zg.bind(null,t):null}function Ec(t,e){var n=Ms;return t.current.memoizedState.isDehydrated&&(Wr(t,e).flags|=256),t=Va(t,e),t!==2&&(e=At,At=n,e!==null&&kc(e)),t}function kc(t){At===null?At=t:At.push.apply(At,t)}function nx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],a=s.getSnapshot;s=s.value;try{if(!_n(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rr(t,e){for(e&=~Td,e&=~cl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),i=1<<n;t[n]=-1,e&=~i}}function ep(t){if(Ce&6)throw Error(W(327));Mi();var e=Ta(t,0);if(!(e&1))return zt(t,Je()),null;var n=Va(t,e);if(t.tag!==0&&n===2){var i=Ju(t);i!==0&&(e=i,n=Ec(t,i))}if(n===1)throw n=io,Wr(t,0),rr(t,e),zt(t,Je()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ir(t,At,Mn),zt(t,Je()),null}function jd(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(Hi=Je()+500,ol&&xr())}}function Kr(t){or!==null&&or.tag===0&&!(Ce&6)&&Mi();var e=Ce;Ce|=1;var n=en.transition,i=Le;try{if(en.transition=null,Le=1,t)return t()}finally{Le=i,en.transition=n,Ce=e,!(Ce&6)&&xr()}}function Ld(){Dt=ji.current,Be(ji)}function Wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Nw(n)),tt!==null)for(n=tt.return;n!==null;){var i=n;switch(dd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Aa();break;case 3:Fi(),Be(It),Be(_t),wd();break;case 5:yd(i);break;case 4:Fi();break;case 13:Be(He);break;case 19:Be(He);break;case 10:md(i.type._context);break;case 22:case 23:Ld()}n=n.return}if(lt=t,tt=t=mr(t.current,null),dt=Dt=e,st=0,io=null,Td=cl=Gr=0,At=Ms=null,Ur!==null){for(e=0;e<Ur.length;e++)if(n=Ur[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,a=n.pending;if(a!==null){var l=a.next;a.next=s,i.next=l}n.pending=i}Ur=null}return t}function Vg(t,e){do{var n=tt;try{if(pd(),_a.current=Fa,$a){for(var i=Ze.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}$a=!1}if(qr=0,at=it=Ze=null,Rs=!1,to=0,Cd.current=null,n===null||n.return===null){st=1,io=e,tt=null;break}e:{var a=t,l=n.return,c=n,d=e;if(e=dt,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,g=c,v=g.tag;if(!(g.mode&1)&&(v===0||v===11||v===15)){var y=g.alternate;y?(g.updateQueue=y.updateQueue,g.memoizedState=y.memoizedState,g.lanes=y.lanes):(g.updateQueue=null,g.memoizedState=null)}var x=$f(l);if(x!==null){x.flags&=-257,Ff(x,l,c,a,e),x.mode&1&&Uf(a,f,e),e=x,d=f;var k=e.updateQueue;if(k===null){var P=new Set;P.add(d),e.updateQueue=P}else k.add(d);break e}else{if(!(e&1)){Uf(a,f,e),Nd();break e}d=Error(W(426))}}else if(Ue&&c.mode&1){var C=$f(l);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Ff(C,l,c,a,e),hd(Wi(d,c));break e}}a=d=Wi(d,c),st!==4&&(st=2),Ms===null?Ms=[a]:Ms.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var S=Og(a,d,e);Rf(a,S);break e;case 1:c=d;var w=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(fr===null||!fr.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var O=jg(a,c,e);Rf(a,O);break e}}a=a.return}while(a!==null)}Kg(n)}catch(A){e=A,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function qg(){var t=Wa.current;return Wa.current=Fa,t===null?Fa:t}function Nd(){(st===0||st===3||st===2)&&(st=4),lt===null||!(Gr&268435455)&&!(cl&268435455)||rr(lt,dt)}function Va(t,e){var n=Ce;Ce|=2;var i=qg();(lt!==t||dt!==e)&&(Mn=null,Wr(t,e));do try{rx();break}catch(s){Vg(t,s)}while(!0);if(pd(),Ce=n,Wa.current=i,tt!==null)throw Error(W(261));return lt=null,dt=0,st}function rx(){for(;tt!==null;)Gg(tt)}function ix(){for(;tt!==null&&!O0();)Gg(tt)}function Gg(t){var e=Qg(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?Kg(t):tt=e,Cd.current=null}function Kg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Qw(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,tt=null;return}}else if(n=Jw(n,e,Dt),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);st===0&&(st=5)}function Ir(t,e,n){var i=Le,s=en.transition;try{en.transition=null,Le=1,sx(t,e,n,i)}finally{en.transition=s,Le=i}return null}function sx(t,e,n,i){do Mi();while(or!==null);if(Ce&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(B0(t,a),t===lt&&(tt=lt=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ta||(ta=!0,Yg(Ca,function(){return Mi(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=en.transition,en.transition=null;var l=Le;Le=1;var c=Ce;Ce|=4,Cd.current=null,Xw(t,n),Wg(n,t),kw(nc),Oa=!!tc,nc=tc=null,t.current=n,ex(n),j0(),Ce=c,Le=l,en.transition=a}else t.current=n;if(ta&&(ta=!1,or=t,Za=s),a=t.pendingLanes,a===0&&(fr=null),A0(n.stateNode),zt(t,Je()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Ha)throw Ha=!1,t=bc,bc=null,t;return Za&1&&t.tag!==0&&Mi(),a=t.pendingLanes,a&1?t===Sc?zs++:(zs=0,Sc=t):zs=0,xr(),null}function Mi(){if(or!==null){var t=Om(Za),e=en.transition,n=Le;try{if(en.transition=null,Le=16>t?16:t,or===null)var i=!1;else{if(t=or,or=null,Za=0,Ce&6)throw Error(W(331));var s=Ce;for(Ce|=4,J=t.current;J!==null;){var a=J,l=a.child;if(J.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var f=c[d];for(J=f;J!==null;){var g=J;switch(g.tag){case 0:case 11:case 15:Is(8,g,a)}var v=g.child;if(v!==null)v.return=g,J=v;else for(;J!==null;){g=J;var y=g.sibling,x=g.return;if(Ug(g),g===f){J=null;break}if(y!==null){y.return=x,J=y;break}J=x}}}var k=a.alternate;if(k!==null){var P=k.child;if(P!==null){k.child=null;do{var C=P.sibling;P.sibling=null,P=C}while(P!==null)}}J=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,J=l;else e:for(;J!==null;){if(a=J,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Is(9,a,a.return)}var S=a.sibling;if(S!==null){S.return=a.return,J=S;break e}J=a.return}}var w=t.current;for(J=w;J!==null;){l=J;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,J=b;else e:for(l=w;J!==null;){if(c=J,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ul(9,c)}}catch(A){Ge(c,c.return,A)}if(c===l){J=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,J=O;break e}J=c.return}}if(Ce=s,xr(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(tl,t)}catch{}i=!0}return i}finally{Le=n,en.transition=e}}return!1}function tp(t,e,n){e=Wi(n,e),e=Og(t,e,1),t=hr(t,e,1),e=Ct(),t!==null&&(fo(t,1,e),zt(t,e))}function Ge(t,e,n){if(t.tag===3)tp(t,t,n);else for(;e!==null;){if(e.tag===3){tp(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fr===null||!fr.has(i))){t=Wi(n,t),t=jg(e,t,1),e=hr(e,t,1),t=Ct(),e!==null&&(fo(e,1,t),zt(e,t));break}}e=e.return}}function ox(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(dt&n)===n&&(st===4||st===3&&(dt&130023424)===dt&&500>Je()-Od?Wr(t,0):Td|=n),zt(t,e)}function Jg(t,e){e===0&&(t.mode&1?(e=Zo,Zo<<=1,!(Zo&130023424)&&(Zo=4194304)):e=1);var n=Ct();t=Hn(t,e),t!==null&&(fo(t,e,n),zt(t,n))}function ax(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jg(t,n)}function lx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(W(314))}i!==null&&i.delete(e),Jg(t,n)}var Qg;Qg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,Kw(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Ue&&e.flags&1048576&&tg(e,Ma,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;wa(t,e),t=e.pendingProps;var s=Bi(e,_t.current);Ii(e,n),s=bd(null,e,i,t,s,n);var a=Sd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(i)?(a=!0,Ra(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vd(e),s.updater=ll,e.stateNode=s,s._reactInternals=e,dc(e,i,t,n),e=pc(null,e,i,!0,a,n)):(e.tag=0,Ue&&a&&cd(e),kt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(wa(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=cx(i),t=dn(i,t),s){case 0:e=fc(null,e,i,t,n);break e;case 1:e=Zf(null,e,i,t,n);break e;case 11:e=Wf(null,e,i,t,n);break e;case 14:e=Hf(null,e,i,dn(i.type,t),n);break e}throw Error(W(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:dn(i,s),fc(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:dn(i,s),Zf(t,e,i,s,n);case 3:e:{if(Rg(e),t===null)throw Error(W(387));i=e.pendingProps,a=e.memoizedState,s=a.element,ag(t,e),Ba(e,i,null,n);var l=e.memoizedState;if(i=l.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Wi(Error(W(423)),e),e=Vf(t,e,i,n,s);break e}else if(i!==s){s=Wi(Error(W(424)),e),e=Vf(t,e,i,n,s);break e}else for($t=dr(e.stateNode.containerInfo.firstChild),Ft=e,Ue=!0,mn=null,n=sg(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ui(),i===s){e=Zn(t,e,n);break e}kt(t,e,i,n)}e=e.child}return e;case 5:return lg(e),t===null&&lc(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,l=s.children,rc(i,s)?l=null:a!==null&&rc(i,a)&&(e.flags|=32),Ag(t,e),kt(t,e,l,n),e.child;case 6:return t===null&&lc(e),null;case 13:return Ig(t,e,n);case 4:return _d(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=$i(e,null,i,n):kt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:dn(i,s),Wf(t,e,i,s,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,a=e.memoizedProps,l=s.value,ze(za,i._currentValue),i._currentValue=l,a!==null)if(_n(a.value,l)){if(a.children===s.children&&!It.current){e=Zn(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var d=c.firstContext;d!==null;){if(d.context===i){if(a.tag===1){d=$n(-1,n&-n),d.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?d.next=d:(d.next=g.next,g.next=d),f.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),uc(a.return,n,e),c.lanes|=n;break}d=d.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(W(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),uc(l,n,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Ii(e,n),s=tn(s),i=i(s),e.flags|=1,kt(t,e,i,n),e.child;case 14:return i=e.type,s=dn(i,e.pendingProps),s=dn(i.type,s),Hf(t,e,i,s,n);case 15:return Lg(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:dn(i,s),wa(t,e),e.tag=1,Mt(i)?(t=!0,Ra(e)):t=!1,Ii(e,n),Tg(e,i,s),dc(e,i,s,n),pc(null,e,i,!0,t,n);case 19:return Mg(t,e,n);case 22:return Ng(t,e,n)}throw Error(W(156,e.tag))};function Yg(t,e){return km(t,e)}function ux(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,i){return new ux(t,e,n,i)}function Ad(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cx(t){if(typeof t=="function")return Ad(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yc)return 11;if(t===Xc)return 14}return 2}function mr(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sa(t,e,n,i,s,a){var l=2;if(i=t,typeof t=="function")Ad(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case wi:return Hr(n.children,s,a,e);case Qc:l=8,s|=8;break;case Iu:return t=Xt(12,n,e,s|2),t.elementType=Iu,t.lanes=a,t;case Mu:return t=Xt(13,n,e,s),t.elementType=Mu,t.lanes=a,t;case zu:return t=Xt(19,n,e,s),t.elementType=zu,t.lanes=a,t;case lm:return dl(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case om:l=10;break e;case am:l=9;break e;case Yc:l=11;break e;case Xc:l=14;break e;case er:l=16,i=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Xt(l,n,e,s),e.elementType=t,e.type=i,e.lanes=a,e}function Hr(t,e,n,i){return t=Xt(7,t,i,e),t.lanes=n,t}function dl(t,e,n,i){return t=Xt(22,t,i,e),t.elementType=lm,t.lanes=n,t.stateNode={isHidden:!1},t}function wu(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function xu(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dx(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tu(0),this.expirationTimes=tu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tu(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rd(t,e,n,i,s,a,l,c,d){return t=new dx(t,e,n,c,d),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Xt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vd(a),t}function hx(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yi,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Xg(t){if(!t)return _r;t=t._reactInternals;e:{if(Qr(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Mt(n))return Xm(t,n,e)}return e}function ev(t,e,n,i,s,a,l,c,d){return t=Rd(n,i,!0,t,s,a,l,c,d),t.context=Xg(null),n=t.current,i=Ct(),s=pr(n),a=$n(i,s),a.callback=e??null,hr(n,a,s),t.current.lanes=s,fo(t,s,i),zt(t,i),t}function hl(t,e,n,i){var s=e.current,a=Ct(),l=pr(s);return n=Xg(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(a,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=hr(s,e,l),t!==null&&(vn(t,s,l,a),va(t,s,l)),l}function qa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function np(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Id(t,e){np(t,e),(t=t.alternate)&&np(t,e)}function fx(){return null}var tv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Md(t){this._internalRoot=t}fl.prototype.render=Md.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));hl(t,e,null,null)};fl.prototype.unmount=Md.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kr(function(){hl(null,t,null,null)}),e[Wn]=null}};function fl(t){this._internalRoot=t}fl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nr.length&&e!==0&&e<nr[n].priority;n++);nr.splice(n,0,t),n===0&&Rm(t)}};function zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rp(){}function px(t,e,n,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var f=qa(l);a.call(f)}}var l=ev(e,i,t,0,null,!1,!1,"",rp);return t._reactRootContainer=l,t[Wn]=l.current,Js(t.nodeType===8?t.parentNode:t),Kr(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var c=i;i=function(){var f=qa(d);c.call(f)}}var d=Rd(t,0,!1,null,null,!1,!1,"",rp);return t._reactRootContainer=d,t[Wn]=d.current,Js(t.nodeType===8?t.parentNode:t),Kr(function(){hl(e,d,n,i)}),d}function ml(t,e,n,i,s){var a=n._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var c=s;s=function(){var d=qa(l);c.call(d)}}hl(e,l,t,s)}else l=px(n,e,t,s,i);return qa(l)}jm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ps(e.pendingLanes);n!==0&&(nd(e,n|1),zt(e,Je()),!(Ce&6)&&(Hi=Je()+500,xr()))}break;case 13:Kr(function(){var i=Hn(t,1);if(i!==null){var s=Ct();vn(i,t,1,s)}}),Id(t,1)}};rd=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=Ct();vn(e,t,134217728,n)}Id(t,134217728)}};Lm=function(t){if(t.tag===13){var e=pr(t),n=Hn(t,e);if(n!==null){var i=Ct();vn(n,t,e,i)}Id(t,e)}};Nm=function(){return Le};Am=function(t,e){var n=Le;try{return Le=t,e()}finally{Le=n}};qu=function(t,e,n){switch(e){case"input":if(Uu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=sl(i);if(!s)throw Error(W(90));cm(i),Uu(i,s)}}}break;case"textarea":hm(t,n);break;case"select":e=n.value,e!=null&&Li(t,!!n.multiple,e,!1)}};ym=jd;wm=Kr;var mx={usingClientEntryPoint:!1,Events:[mo,Ei,sl,vm,_m,jd]},xs={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gx={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sm(t),t===null?null:t.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!na.isDisabled&&na.supportsFiber)try{tl=na.inject(gx),Cn=na}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zd(e))throw Error(W(200));return hx(t,e,null,n)};Ht.createRoot=function(t,e){if(!zd(t))throw Error(W(299));var n=!1,i="",s=tv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Rd(t,1,!1,null,null,n,!1,i,s),t[Wn]=e.current,Js(t.nodeType===8?t.parentNode:t),new Md(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=Sm(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return Kr(t)};Ht.hydrate=function(t,e,n){if(!pl(e))throw Error(W(200));return ml(null,t,e,!0,n)};Ht.hydrateRoot=function(t,e,n){if(!zd(t))throw Error(W(405));var i=n!=null&&n.hydratedSources||null,s=!1,a="",l=tv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=ev(e,null,t,1,n??null,s,!1,a,l),t[Wn]=e.current,Js(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new fl(e)};Ht.render=function(t,e,n){if(!pl(e))throw Error(W(200));return ml(null,t,e,!1,n)};Ht.unmountComponentAtNode=function(t){if(!pl(t))throw Error(W(40));return t._reactRootContainer?(Kr(function(){ml(null,null,t,!1,function(){t._reactRootContainer=null,t[Wn]=null})}),!0):!1};Ht.unstable_batchedUpdates=jd;Ht.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!pl(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return ml(t,e,n,!1,i)};Ht.version="18.3.1-next-f1338f8080-20240426";function nv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nv)}catch(t){console.error(t)}}nv(),nm.exports=Ht;var vx=nm.exports,ip=vx;Au.createRoot=ip.createRoot,Au.hydrateRoot=ip.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function so(){return so=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},so.apply(this,arguments)}var ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ar||(ar={}));const sp="popstate";function _x(t){t===void 0&&(t={});function e(s,a){let{pathname:l="/",search:c="",hash:d=""}=Yr(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Pc("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){let l=s.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");c=f===-1?d:d.slice(0,f)}return c+"#"+(typeof a=="string"?a:Ga(a))}function i(s,a){Dd(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return wx(e,n,i,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Dd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yx(){return Math.random().toString(36).substr(2,8)}function op(t,e){return{usr:t.state,key:t.key,idx:e}}function Pc(t,e,n,i){return n===void 0&&(n=null),so({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yr(e):e,{state:n,key:e&&e.key||i||yx()})}function Ga(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Yr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function wx(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,l=s.history,c=ar.Pop,d=null,f=g();f==null&&(f=0,l.replaceState(so({},l.state,{idx:f}),""));function g(){return(l.state||{idx:null}).idx}function v(){c=ar.Pop;let C=g(),S=C==null?null:C-f;f=C,d&&d({action:c,location:P.location,delta:S})}function y(C,S){c=ar.Push;let w=Pc(P.location,C,S);n&&n(w,C),f=g()+1;let b=op(w,f),O=P.createHref(w);try{l.pushState(b,"",O)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(O)}a&&d&&d({action:c,location:P.location,delta:1})}function x(C,S){c=ar.Replace;let w=Pc(P.location,C,S);n&&n(w,C),f=g();let b=op(w,f),O=P.createHref(w);l.replaceState(b,"",O),a&&d&&d({action:c,location:P.location,delta:0})}function k(C){let S=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof C=="string"?C:Ga(C);return w=w.replace(/ $/,"%20"),nt(S,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,S)}let P={get action(){return c},get location(){return t(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(sp,v),d=C,()=>{s.removeEventListener(sp,v),d=null}},createHref(C){return e(s,C)},createURL:k,encodeLocation(C){let S=k(C);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:x,go(C){return l.go(C)}};return P}var ap;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ap||(ap={}));function xx(t,e,n){return n===void 0&&(n="/"),bx(t,e,n)}function bx(t,e,n,i){let s=typeof e=="string"?Yr(e):e,a=Bd(s.pathname||"/",n);if(a==null)return null;let l=rv(t);Sx(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let f=Ix(a);c=Nx(l[d],f)}return c}function rv(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(a,l,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(nt(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let f=gr([i,d.relativePath]),g=n.concat(d);a.children&&a.children.length>0&&(nt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),rv(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:jx(f,a.index),routesMeta:g})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,l);else for(let d of iv(a.path))s(a,l,d)}),e}function iv(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let l=iv(i.join("/")),c=[];return c.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function Sx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Lx(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Ex=/^:[\w-]+$/,kx=3,Px=2,Cx=1,Tx=10,Ox=-2,lp=t=>t==="*";function jx(t,e){let n=t.split("/"),i=n.length;return n.some(lp)&&(i+=Ox),e&&(i+=Px),n.filter(s=>!lp(s)).reduce((s,a)=>s+(Ex.test(a)?kx:a===""?Cx:Tx),i)}function Lx(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function Nx(t,e,n){let{routesMeta:i}=t,s={},a="/",l=[];for(let c=0;c<i.length;++c){let d=i[c],f=c===i.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=Ax({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),y=d.route;if(!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:gr([a,v.pathname]),pathnameBase:Bx(gr([a,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(a=gr([a,v.pathnameBase]))}return l}function Ax(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Rx(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:i.reduce((f,g,v)=>{let{paramName:y,isOptional:x}=g;if(y==="*"){let P=c[v]||"";l=a.slice(0,a.length-P.length).replace(/(.)\/+$/,"$1")}const k=c[v];return x&&!k?f[y]=void 0:f[y]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:t}}function Rx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Dd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(i.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function Ix(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Mx(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?Yr(t):t;return{pathname:n?n.startsWith("/")?n:zx(n,e):e,search:Ux(i),hash:$x(s)}}function zx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function bu(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sv(t,e){let n=Dx(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function ov(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=Yr(t):(s=so({},t),nt(!s.pathname||!s.pathname.includes("?"),bu("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),bu("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),bu("#","search","hash",s)));let a=t===""||s.pathname==="",l=a?"/":s.pathname,c;if(l==null)c=n;else{let v=e.length-1;if(!i&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}c=v>=0?e[v]:"/"}let d=Mx(s,c),f=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}const gr=t=>t.join("/").replace(/\/\/+/g,"/"),Bx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ux=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$x=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Fx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const av=["post","put","patch","delete"];new Set(av);const Wx=["get",...av];new Set(Wx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},oo.apply(this,arguments)}const Ud=E.createContext(null),Hx=E.createContext(null),Xr=E.createContext(null),gl=E.createContext(null),br=E.createContext({outlet:null,matches:[],isDataRoute:!1}),lv=E.createContext(null);function Zx(t,e){let{relative:n}=e===void 0?{}:e;vo()||nt(!1);let{basename:i,navigator:s}=E.useContext(Xr),{hash:a,pathname:l,search:c}=cv(t,{relative:n}),d=l;return i!=="/"&&(d=l==="/"?i:gr([i,l])),s.createHref({pathname:d,search:c,hash:a})}function vo(){return E.useContext(gl)!=null}function _o(){return vo()||nt(!1),E.useContext(gl).location}function uv(t){E.useContext(Xr).static||E.useLayoutEffect(t)}function Ji(){let{isDataRoute:t}=E.useContext(br);return t?sb():Vx()}function Vx(){vo()||nt(!1);let t=E.useContext(Ud),{basename:e,future:n,navigator:i}=E.useContext(Xr),{matches:s}=E.useContext(br),{pathname:a}=_o(),l=JSON.stringify(sv(s,n.v7_relativeSplatPath)),c=E.useRef(!1);return uv(()=>{c.current=!0}),E.useCallback(function(f,g){if(g===void 0&&(g={}),!c.current)return;if(typeof f=="number"){i.go(f);return}let v=ov(f,JSON.parse(l),a,g.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:gr([e,v.pathname])),(g.replace?i.replace:i.push)(v,g.state,g)},[e,i,l,a,t])}function qx(){let{matches:t}=E.useContext(br),e=t[t.length-1];return e?e.params:{}}function cv(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=E.useContext(Xr),{matches:s}=E.useContext(br),{pathname:a}=_o(),l=JSON.stringify(sv(s,i.v7_relativeSplatPath));return E.useMemo(()=>ov(t,JSON.parse(l),a,n==="path"),[t,l,a,n])}function Gx(t,e){return Kx(t,e)}function Kx(t,e,n,i){vo()||nt(!1);let{navigator:s}=E.useContext(Xr),{matches:a}=E.useContext(br),l=a[a.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let f=_o(),g;if(e){var v;let C=typeof e=="string"?Yr(e):e;d==="/"||(v=C.pathname)!=null&&v.startsWith(d)||nt(!1),g=C}else g=f;let y=g.pathname||"/",x=y;if(d!=="/"){let C=d.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let k=xx(t,{pathname:x}),P=eb(k&&k.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:gr([d,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:gr([d,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,n,i);return e&&P?E.createElement(gl.Provider,{value:{location:oo({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ar.Pop}},P):P}function Jx(){let t=ib(),e=Fx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:s},n):null,null)}const Qx=E.createElement(Jx,null);class Yx extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(br.Provider,{value:this.props.routeContext},E.createElement(lv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xx(t){let{routeContext:e,match:n,children:i}=t,s=E.useContext(Ud);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(br.Provider,{value:e},i)}function eb(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let g=l.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);g>=0||nt(!1),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let g=0;g<l.length;g++){let v=l[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=g),v.route.id){let{loaderData:y,errors:x}=n,k=v.route.loader&&y[v.route.id]===void 0&&(!x||x[v.route.id]===void 0);if(v.route.lazy||k){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((g,v,y)=>{let x,k=!1,P=null,C=null;n&&(x=c&&v.route.id?c[v.route.id]:void 0,P=v.route.errorElement||Qx,d&&(f<0&&y===0?(ob("route-fallback"),k=!0,C=null):f===y&&(k=!0,C=v.route.hydrateFallbackElement||null)));let S=e.concat(l.slice(0,y+1)),w=()=>{let b;return x?b=P:k?b=C:v.route.Component?b=E.createElement(v.route.Component,null):v.route.element?b=v.route.element:b=g,E.createElement(Xx,{match:v,routeContext:{outlet:g,matches:S,isDataRoute:n!=null},children:b})};return n&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?E.createElement(Yx,{location:n.location,revalidation:n.revalidation,component:P,error:x,children:w(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):w()},null)}var dv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dv||{}),hv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hv||{});function tb(t){let e=E.useContext(Ud);return e||nt(!1),e}function nb(t){let e=E.useContext(Hx);return e||nt(!1),e}function rb(t){let e=E.useContext(br);return e||nt(!1),e}function fv(t){let e=rb(),n=e.matches[e.matches.length-1];return n.route.id||nt(!1),n.route.id}function ib(){var t;let e=E.useContext(lv),n=nb(),i=fv();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function sb(){let{router:t}=tb(dv.UseNavigateStable),e=fv(hv.UseNavigateStable),n=E.useRef(!1);return uv(()=>{n.current=!0}),E.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,oo({fromRouteId:e},a)))},[t,e])}const up={};function ob(t,e,n){up[t]||(up[t]=!0)}function ab(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gi(t){nt(!1)}function lb(t){let{basename:e="/",children:n=null,location:i,navigationType:s=ar.Pop,navigator:a,static:l=!1,future:c}=t;vo()&&nt(!1);let d=e.replace(/^\/*/,"/"),f=E.useMemo(()=>({basename:d,navigator:a,static:l,future:oo({v7_relativeSplatPath:!1},c)}),[d,c,a,l]);typeof i=="string"&&(i=Yr(i));let{pathname:g="/",search:v="",hash:y="",state:x=null,key:k="default"}=i,P=E.useMemo(()=>{let C=Bd(g,d);return C==null?null:{location:{pathname:C,search:v,hash:y,state:x,key:k},navigationType:s}},[d,g,v,y,x,k,s]);return P==null?null:E.createElement(Xr.Provider,{value:f},E.createElement(gl.Provider,{children:n,value:P}))}function ub(t){let{children:e,location:n}=t;return Gx(Cc(e),n)}new Promise(()=>{});function Cc(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(i,s)=>{if(!E.isValidElement(i))return;let a=[...e,s];if(i.type===E.Fragment){n.push.apply(n,Cc(i.props.children,a));return}i.type!==gi&&nt(!1),!i.props.index||!i.props.children||nt(!1);let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Cc(i.props.children,a)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Tc.apply(this,arguments)}function cb(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function db(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hb(t,e){return t.button===0&&(!e||e==="_self")&&!db(t)}const fb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pb="6";try{window.__reactRouterVersion=pb}catch{}const mb="startTransition",cp=o0[mb];function gb(t){let{basename:e,children:n,future:i,window:s}=t,a=E.useRef();a.current==null&&(a.current=_x({window:s,v5Compat:!0}));let l=a.current,[c,d]=E.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},g=E.useCallback(v=>{f&&cp?cp(()=>d(v)):d(v)},[d,f]);return E.useLayoutEffect(()=>l.listen(g),[l,g]),E.useEffect(()=>ab(i),[i]),E.createElement(lb,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const vb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_b=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Et=E.forwardRef(function(e,n){let{onClick:i,relative:s,reloadDocument:a,replace:l,state:c,target:d,to:f,preventScrollReset:g,viewTransition:v}=e,y=cb(e,fb),{basename:x}=E.useContext(Xr),k,P=!1;if(typeof f=="string"&&_b.test(f)&&(k=f,vb))try{let b=new URL(window.location.href),O=f.startsWith("//")?new URL(b.protocol+f):new URL(f),A=Bd(O.pathname,x);O.origin===b.origin&&A!=null?f=A+O.search+O.hash:P=!0}catch{}let C=Zx(f,{relative:s}),S=yb(f,{replace:l,state:c,target:d,preventScrollReset:g,relative:s,viewTransition:v});function w(b){i&&i(b),b.defaultPrevented||S(b)}return E.createElement("a",Tc({},y,{href:k||C,onClick:P||a?i:w,ref:n,target:d}))});var dp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dp||(dp={}));var hp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hp||(hp={}));function yb(t,e){let{target:n,replace:i,state:s,preventScrollReset:a,relative:l,viewTransition:c}=e===void 0?{}:e,d=Ji(),f=_o(),g=cv(t,{relative:l});return E.useCallback(v=>{if(hb(v,n)){v.preventDefault();let y=i!==void 0?i:Ga(f)===Ga(g);d(t,{replace:y,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[f,d,g,i,s,n,t,a,l,c])}var Oc=function(t,e){return Oc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},Oc(t,e)};function pv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Oc(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ka=function(){return Ka=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ka.apply(this,arguments)};function Qi(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function mv(t,e,n,i){var s=arguments.length,a=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(l=t[c])&&(a=(s<3?l(a):s>3?l(e,n,a):l(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a}function gv(t,e){return function(n,i){e(n,i,t)}}function vv(t,e,n,i,s,a){function l(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=i.kind,d=c==="getter"?"get":c==="setter"?"set":"value",f=!e&&t?i.static?t:t.prototype:null,g=e||(f?Object.getOwnPropertyDescriptor(f,i.name):{}),v,y=!1,x=n.length-1;x>=0;x--){var k={};for(var P in i)k[P]=P==="access"?{}:i[P];for(var P in i.access)k.access[P]=i.access[P];k.addInitializer=function(S){if(y)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(S||null))};var C=(0,n[x])(c==="accessor"?{get:g.get,set:g.set}:g[d],k);if(c==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(v=l(C.get))&&(g.get=v),(v=l(C.set))&&(g.set=v),(v=l(C.init))&&s.unshift(v)}else(v=l(C))&&(c==="field"?s.unshift(v):g[d]=v)}f&&Object.defineProperty(f,i.name,g),y=!0}function _v(t,e,n){for(var i=arguments.length>2,s=0;s<e.length;s++)n=i?e[s].call(t,n):e[s].call(t);return i?n:void 0}function yv(t){return typeof t=="symbol"?t:"".concat(t)}function wv(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function xv(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function re(t,e,n,i){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function c(g){try{f(i.next(g))}catch(v){l(v)}}function d(g){try{f(i.throw(g))}catch(v){l(v)}}function f(g){g.done?a(g.value):s(g.value).then(c,d)}f((i=i.apply(t,e||[])).next())})}function bv(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=c(0),l.throw=c(1),l.return=c(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(g){return d([f,g])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(n=0)),n;)try{if(i=1,s&&(a=f[0]&2?s.return:f[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,f[1])).done)return a;switch(s=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,s=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(g){f=[6,g],s=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var vl=Object.create?function(t,e,n,i){i===void 0&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]};function Sv(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&vl(e,t,n)}function Ja(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $d(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function Ev(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat($d(arguments[e]));return t}function kv(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),s=0,e=0;e<n;e++)for(var a=arguments[e],l=0,c=a.length;l<c;l++,s++)i[s]=a[l];return i}function Pv(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}function Zi(t){return this instanceof Zi?(this.v=t,this):new Zi(t)}function Cv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(x){return function(k){return Promise.resolve(k).then(x,v)}}function c(x,k){i[x]&&(s[x]=function(P){return new Promise(function(C,S){a.push([x,P,C,S])>1||d(x,P)})},k&&(s[x]=k(s[x])))}function d(x,k){try{f(i[x](k))}catch(P){y(a[0][3],P)}}function f(x){x.value instanceof Zi?Promise.resolve(x.value.v).then(g,v):y(a[0][2],x)}function g(x){d("next",x)}function v(x){d("throw",x)}function y(x,k){x(k),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Tv(t){var e,n;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,a){e[s]=t[s]?function(l){return(n=!n)?{value:Zi(t[s](l)),done:!1}:a?a(l):l}:a}}function Ov(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ja=="function"?Ja(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,d){l=t[a](l),s(c,d,l.done,l.value)})}}function s(a,l,c,d){Promise.resolve(d).then(function(f){a({value:f,done:c})},l)}}function jv(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var wb=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},jc=function(t){return jc=Object.getOwnPropertyNames||function(e){var n=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[n.length]=i);return n},jc(t)};function Lv(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=jc(t),i=0;i<n.length;i++)n[i]!=="default"&&vl(e,t,n[i]);return wb(e,t),e}function Nv(t){return t&&t.__esModule?t:{default:t}}function Av(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}function Rv(t,e,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function Iv(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Mv(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],n&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:i,async:n})}else n&&t.stack.push({async:!0});return e}var xb=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var i=new Error(n);return i.name="SuppressedError",i.error=t,i.suppressed=e,i};function zv(t){function e(a){t.error=t.hasError?new xb(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,i=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&i===1)return i=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(a).then(s,function(l){return e(l),s()})}else i|=1}catch(l){e(l)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Dv(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,s,a,l){return i?e?".jsx":".js":s&&(!a||!l)?n:s+a+"."+l.toLowerCase()+"js"}):t}const bb={__extends:pv,__assign:Ka,__rest:Qi,__decorate:mv,__param:gv,__esDecorate:vv,__runInitializers:_v,__propKey:yv,__setFunctionName:wv,__metadata:xv,__awaiter:re,__generator:bv,__createBinding:vl,__exportStar:Sv,__values:Ja,__read:$d,__spread:Ev,__spreadArrays:kv,__spreadArray:Pv,__await:Zi,__asyncGenerator:Cv,__asyncDelegator:Tv,__asyncValues:Ov,__makeTemplateObject:jv,__importStar:Lv,__importDefault:Nv,__classPrivateFieldGet:Av,__classPrivateFieldSet:Rv,__classPrivateFieldIn:Iv,__addDisposableResource:Mv,__disposeResources:zv,__rewriteRelativeImportExtension:Dv},Sb=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Mv,get __assign(){return Ka},__asyncDelegator:Tv,__asyncGenerator:Cv,__asyncValues:Ov,__await:Zi,__awaiter:re,__classPrivateFieldGet:Av,__classPrivateFieldIn:Iv,__classPrivateFieldSet:Rv,__createBinding:vl,__decorate:mv,__disposeResources:zv,__esDecorate:vv,__exportStar:Sv,__extends:pv,__generator:bv,__importDefault:Nv,__importStar:Lv,__makeTemplateObject:jv,__metadata:xv,__param:gv,__propKey:yv,__read:$d,__rest:Qi,__rewriteRelativeImportExtension:Dv,__runInitializers:_v,__setFunctionName:wv,__spread:Ev,__spreadArray:Pv,__spreadArrays:kv,__values:Ja,default:bb},Symbol.toStringTag,{value:"Module"})),Eb="modulepreload",kb=function(t){return"/"+t},fp={},Yi=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(d=>{if(d=kb(d),d in fp)return;fp[d]=!0;const f=d.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":Eb,f||(v.as="script"),v.crossOrigin="",v.href=d,c&&v.setAttribute("nonce",c),document.head.appendChild(v),f)return new Promise((y,x)=>{v.addEventListener("load",y),v.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},Pb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Yi(async()=>{const{default:i}=await Promise.resolve().then(()=>ei);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class Fd extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class pp extends Fd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class mp extends Fd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gp extends Fd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Lc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Lc||(Lc={}));class Cb{constructor(e,{headers:n={},customFetch:i,region:s=Lc.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Pb(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return re(this,arguments,void 0,function*(n,i={}){var s;try{const{headers:a,method:l,body:c,signal:d}=i;let f={},{region:g}=i;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(f["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(f["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(f["Content-Type"]="application/json",y=JSON.stringify(c)):y=c;const x=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:y,signal:d}).catch(S=>{throw S.name==="AbortError"?S:new pp(S)}),k=x.headers.get("x-relay-error");if(k&&k==="true")throw new mp(x);if(!x.ok)throw new gp(x);let P=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),C;return P==="application/json"?C=yield x.json():P==="application/octet-stream"||P==="application/pdf"?C=yield x.blob():P==="text/event-stream"?C=x:P==="multipart/form-data"?C=yield x.formData():C=yield x.text(),{data:C,error:null,response:x}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new pp(a)}:{data:null,error:a,response:a instanceof gp||a instanceof mp?a.context:void 0}}})}}var Pt={};const Xi=Hp(Sb);var ra={},ia={},sa={},oa={},aa={},Tb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vi=Tb();const Ob=Vi.fetch,Bv=Vi.fetch.bind(Vi),Uv=Vi.Headers,jb=Vi.Request,Lb=Vi.Response,ei=Object.freeze(Object.defineProperty({__proto__:null,Headers:Uv,Request:jb,Response:Lb,default:Bv,fetch:Ob},Symbol.toStringTag,{value:"Module"})),Nb=Hp(ei);var la={},vp;function $v(){if(vp)return la;vp=1,Object.defineProperty(la,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return la.default=t,la}var _p;function Fv(){if(_p)return aa;_p=1,Object.defineProperty(aa,"__esModule",{value:!0});const t=Xi,e=t.__importDefault(Nb),n=t.__importDefault($v());class i{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,v,y,x;let k=null,P=null,C=null,S=f.status,w=f.statusText;if(f.ok){if(this.method!=="HEAD"){const D=await f.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?P=D:P=JSON.parse(D))}const O=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),A=(y=f.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");O&&A&&A.length>1&&(C=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(P)&&(P.length>1?(k={code:"PGRST116",details:`Results contain ${P.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},P=null,C=null,S=406,w="Not Acceptable"):P.length===1?P=P[0]:P=null)}else{const O=await f.text();try{k=JSON.parse(O),Array.isArray(k)&&f.status===404&&(P=[],k=null,S=200,w="OK")}catch{f.status===404&&O===""?(S=204,w="No Content"):k={message:O}}if(k&&this.isMaybeSingle&&(!((x=k==null?void 0:k.details)===null||x===void 0)&&x.includes("0 rows"))&&(k=null,S=200,w="OK"),k&&this.shouldThrowOnError)throw new n.default(k)}return{error:k,data:P,count:C,status:S,statusText:w}});return this.shouldThrowOnError||(d=d.catch(f=>{var g,v,y;return{error:{message:`${(g=f==null?void 0:f.name)!==null&&g!==void 0?g:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(v=f==null?void 0:f.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(y=f==null?void 0:f.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return aa.default=i,aa}var yp;function Wv(){if(yp)return oa;yp=1,Object.defineProperty(oa,"__esModule",{value:!0});const e=Xi.__importDefault(Fv());class n extends e.default{select(s){let a=!1;const l=(s??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:l,foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${s}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this}range(s,a,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(f,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:l=!1,buffers:c=!1,wal:d=!1,format:f="text"}={}){var g;const v=[s?"analyze":null,a?"verbose":null,l?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${y}"; options=${v};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return oa.default=n,oa}var wp;function Wd(){if(wp)return sa;wp=1,Object.defineProperty(sa,"__esModule",{value:!0});const e=Xi.__importDefault(Wv()),n=new RegExp("[,()]");class i extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const c=Array.from(new Set(l)).map(d=>typeof d=="string"&&n.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:c,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const g=c===void 0?"":`(${c})`;return this.url.searchParams.append(a,`${f}fts${g}.${l}`),this}match(a){return Object.entries(a).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(a,l,c){return this.url.searchParams.append(a,`not.${l}.${c}`),this}or(a,{foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,l,c){return this.url.searchParams.append(a,`${l}.${c}`),this}}return sa.default=i,sa}var xp;function Hv(){if(xp)return ia;xp=1,Object.defineProperty(ia,"__esModule",{value:!0});const e=Xi.__importDefault(Wd());class n{constructor(s,{headers:a={},schema:l,fetch:c}){this.url=s,this.headers=new Headers(a),this.schema=l,this.fetch=c}select(s,a){const{head:l=!1,count:c}=a??{},d=l?"HEAD":"GET";let f=!1;const g=(s??"*").split("").map(v=>/\s/.test(v)&&!f?"":(v==='"'&&(f=!f),v)).join("");return this.url.searchParams.set("select",g),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:l=!0}={}){var c;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(f.length>0){const g=[...new Set(f)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:l=!1,count:c,defaultToNull:d=!0}={}){var f;const g="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),c&&this.headers.append("Prefer",`count=${c}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const v=s.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(v.length>0){const y=[...new Set(v)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(s,{count:a}={}){var l;const c="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var a;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return ia.default=n,ia}var bp;function Ab(){if(bp)return ra;bp=1,Object.defineProperty(ra,"__esModule",{value:!0});const t=Xi,e=t.__importDefault(Hv()),n=t.__importDefault(Wd());class i{constructor(a,{headers:l={},schema:c,fetch:d}={}){this.url=a,this.headers=new Headers(l),this.schemaName=c,this.fetch=d}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new i(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:c=!1,get:d=!1,count:f}={}){var g;let v;const y=new URL(`${this.url}/rpc/${a}`);let x;c||d?(v=c?"HEAD":"GET",Object.entries(l).filter(([P,C])=>C!==void 0).map(([P,C])=>[P,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([P,C])=>{y.searchParams.append(P,C)})):(v="POST",x=l);const k=new Headers(this.headers);return f&&k.set("Prefer",`count=${f}`),new n.default({method:v,url:y,headers:k,schema:this.schemaName,body:x,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return ra.default=i,ra}Object.defineProperty(Pt,"__esModule",{value:!0});var Zv=Pt.PostgrestError=t_=Pt.PostgrestBuilder=Xv=Pt.PostgrestTransformBuilder=Qv=Pt.PostgrestFilterBuilder=Kv=Pt.PostgrestQueryBuilder=qv=Pt.PostgrestClient=void 0;const es=Xi,Vv=es.__importDefault(Ab());var qv=Pt.PostgrestClient=Vv.default;const Gv=es.__importDefault(Hv());var Kv=Pt.PostgrestQueryBuilder=Gv.default;const Jv=es.__importDefault(Wd());var Qv=Pt.PostgrestFilterBuilder=Jv.default;const Yv=es.__importDefault(Wv());var Xv=Pt.PostgrestTransformBuilder=Yv.default;const e_=es.__importDefault(Fv());var t_=Pt.PostgrestBuilder=e_.default;const n_=es.__importDefault($v());Zv=Pt.PostgrestError=n_.default;var r_=Pt.default={PostgrestClient:Vv.default,PostgrestQueryBuilder:Gv.default,PostgrestFilterBuilder:Jv.default,PostgrestTransformBuilder:Yv.default,PostgrestBuilder:e_.default,PostgrestError:n_.default};const Rb=Wp({__proto__:null,get PostgrestBuilder(){return t_},get PostgrestClient(){return qv},get PostgrestError(){return Zv},get PostgrestFilterBuilder(){return Qv},get PostgrestQueryBuilder(){return Kv},get PostgrestTransformBuilder(){return Xv},default:r_},[Pt]),{PostgrestClient:Ib,PostgrestQueryBuilder:Ck,PostgrestFilterBuilder:Tk,PostgrestTransformBuilder:Ok,PostgrestBuilder:jk,PostgrestError:Lk}=r_||Rb;class Mb{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const zb="2.78.0",Db=`realtime-js/${zb}`,Bb="1.0.0",Nc=1e4,Ub=1e3,$b=100;var Ds;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ds||(Ds={}));var rt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rt||(rt={}));var pn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(pn||(pn={}));var Ac;(function(t){t.websocket="websocket"})(Ac||(Ac={}));var zr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(zr||(zr={}));class Fb{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const s=n.getUint8(1),a=n.getUint8(2);let l=this.HEADER_LENGTH+2;const c=i.decode(e.slice(l,l+s));l=l+s;const d=i.decode(e.slice(l,l+a));l=l+a;const f=JSON.parse(i.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:d,payload:f}}}class i_{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Me||(Me={}));const Sp=(t,e,n={})=>{var i;const s=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=Wb(l,t,e,s),a),{}):{}},Wb=(t,e,n,i)=>{const s=e.find(c=>c.name===t),a=s==null?void 0:s.type,l=n[t];return a&&!i.includes(a)?s_(a,l):Rc(l)},s_=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return qb(e,n)}switch(t){case Me.bool:return Hb(e);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return Zb(e);case Me.json:case Me.jsonb:return Vb(e);case Me.timestamp:return Gb(e);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return Rc(e);default:return Rc(e)}},Rc=t=>t,Hb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Zb=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Vb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},qb=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(c=>s_(e,c))}return t},Gb=t=>typeof t=="string"?t.replace(" ","T"):t,o_=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Su{constructor(e,n,i={},s=Nc){this.channel=e,this.event=n,this.payload=i,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ep;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ep||(Ep={}));class Bs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},s=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bs.syncState(this.state,s,a,l),this.pendingDiffs.forEach(d=>{this.state=Bs.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],c()}),this.channel._on(i.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Bs.syncDiff(this.state,s,a,l),c())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,s){const a=this.cloneDeep(e),l=this.transformState(n),c={},d={};return this.map(a,(f,g)=>{l[f]||(d[f]=g)}),this.map(l,(f,g)=>{const v=a[f];if(v){const y=g.map(C=>C.presence_ref),x=v.map(C=>C.presence_ref),k=g.filter(C=>x.indexOf(C.presence_ref)<0),P=v.filter(C=>y.indexOf(C.presence_ref)<0);k.length>0&&(c[f]=k),P.length>0&&(d[f]=P)}else c[f]=g}),this.syncDiff(a,{joins:c,leaves:d},i,s)}static syncDiff(e,n,i,s){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),s||(s=()=>{}),this.map(a,(c,d)=>{var f;const g=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(d),g.length>0){const v=e[c].map(x=>x.presence_ref),y=g.filter(x=>v.indexOf(x.presence_ref)<0);e[c].unshift(...y)}i(c,g,d)}),this.map(l,(c,d)=>{let f=e[c];if(!f)return;const g=d.map(v=>v.presence_ref);f=f.filter(v=>g.indexOf(v.presence_ref)<0),e[c]=f,s(c,f,d),f.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const s=e[i];return"metas"in s?n[i]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[i]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kp;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(kp||(kp={}));var Us;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Us||(Us={}));var zn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(zn||(zn={}));class Hd{constructor(e,n={config:{}},i){var s,a;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Su(this,pn.join,this.params,this.timeout),this.rejoinTimer=new i_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Bs(this),this.broadcastEndpointURL=o_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==rt.closed){const{config:{broadcast:l,presence:c,private:d}}=this.params,f=(s=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(x=>x.filter))!==null&&s!==void 0?s:[],g=!!this.bindings[Us.PRESENCE]&&this.bindings[Us.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,v={},y={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:g}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(zn.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(zn.CLOSED)),this.updateJoinPayload(Object.assign({config:y},v)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var k;if(this.socket.setAuth(),x===void 0){e==null||e(zn.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,C=(k=P==null?void 0:P.length)!==null&&k!==void 0?k:0,S=[];for(let w=0;w<C;w++){const b=P[w],{filter:{event:O,schema:A,table:D,filter:I}}=b,$=x&&x[w];if($&&$.event===O&&$.schema===A&&$.table===D&&$.filter===I)S.push(Object.assign(Object.assign({},b),{id:$.id}));else{this.unsubscribe(),this.state=rt.errored,e==null||e(zn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(zn.SUBSCRIBED);return}}).receive("error",x=>{this.state=rt.errored,e==null||e(zn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(zn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===rt.joined&&e===Us.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var s;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let d=c.statusText;try{const f=await c.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,c,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(s=>{i=new Su(this,pn.leave,{},e),i.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=rt.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const s=new AbortController,a=setTimeout(()=>s.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),l}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Su(this,e,n,i);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>$b){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var s,a;const l=e.toLocaleLowerCase(),{close:c,error:d,leave:f,join:g}=pn;if(i&&[c,d,f,g].indexOf(l)>=0&&i!==this._joinRef())return;let y=this._onMessage(l,n,i);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var k,P,C;return((k=x.filter)===null||k===void 0?void 0:k.event)==="*"||((C=(P=x.filter)===null||P===void 0?void 0:P.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===l}).map(x=>x.callback(y,i)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var k,P,C,S,w,b;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const O=x.id,A=(k=x.filter)===null||k===void 0?void 0:k.event;return O&&((P=n.ids)===null||P===void 0?void 0:P.includes(O))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const O=(w=(S=x==null?void 0:x.filter)===null||S===void 0?void 0:S.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return O==="*"||O===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const k=y.data,{schema:P,table:C,commit_timestamp:S,type:w,errors:b}=k;y=Object.assign(Object.assign({},{schema:P,table:C,commit_timestamp:S,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(k))}x.callback(y,i)})}_isClosed(){return this.state===rt.closed}_isJoined(){return this.state===rt.joined}_isJoining(){return this.state===rt.joining}_isLeaving(){return this.state===rt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:i};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&Hd.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pn.close,{},e)}_onError(e){this._on(pn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Sp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Sp(e.columns,e.old_record)),n}}const Eu=()=>{},ua={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Kb=[1e3,2e3,5e3,1e4],Jb=1e4,Qb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Yb{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Nc,this.transport=null,this.heartbeatIntervalMs=ua.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Eu,this.ref=0,this.reconnectTimer=null,this.logger=Eu,this.conn=null,this.sendBuffer=[],this.serializer=new Fb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>Yi(async()=>{const{default:c}=await Promise.resolve().then(()=>ei);return{default:c}},void 0).then(({default:c})=>c(...l)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Ac.websocket}`,this.httpEndpoint=o_(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Mb.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Bb}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ds.connecting:return zr.Connecting;case Ds.open:return zr.Open;case Ds.closing:return zr.Closing;default:return zr.Closed}}isConnected(){return this.connectionState()===zr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===i);if(s)return s;{const a=new Hd(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:i,payload:s,ref:a}=e,l=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${n} ${i} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Ub,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ua.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:s,payload:a,ref:l}=n,c=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${i} ${s} ${c}`.trim(),a),this.channels.filter(f=>f._isMember(i)).forEach(f=>f._trigger(s,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(pn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${i}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([Qb],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:Db};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(pn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new i_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ua.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,s,a,l,c,d,f,g;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:Nc,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ua.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:Eu,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:v=>Kb[v-1]||Jb,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(v,y)=>y(JSON.stringify(v)),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Zd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function We(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Xb extends Zd{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ic extends Zd{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Vd=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Yi(async()=>{const{default:i}=await Promise.resolve().then(()=>ei);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},eS=()=>re(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yi(()=>Promise.resolve().then(()=>ei),void 0)).Response:Response}),Mc=t=>{if(Array.isArray(t))return t.map(n=>Mc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Mc(i)}),e},tS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ku=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},nS=(t,e,n)=>re(void 0,void 0,void 0,function*(){const i=yield eS();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const a=t.status||500,l=(s==null?void 0:s.statusCode)||a+"";e(new Xb(ku(s),a,l))}).catch(s=>{e(new Ic(ku(s),s))}):e(new Ic(ku(t),t))}),rS=(t,e,n,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?s:(tS(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function yo(t,e,n,i,s,a){return re(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(n,rS(e,i,s,a)).then(d=>{if(!d.ok)throw d;return i!=null&&i.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>nS(d,c,i))})})}function ao(t,e,n,i){return re(this,void 0,void 0,function*(){return yo(t,"GET",e,n,i)})}function hn(t,e,n,i,s){return re(this,void 0,void 0,function*(){return yo(t,"POST",e,i,s,n)})}function zc(t,e,n,i,s){return re(this,void 0,void 0,function*(){return yo(t,"PUT",e,i,s,n)})}function iS(t,e,n,i){return re(this,void 0,void 0,function*(){return yo(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function qd(t,e,n,i,s){return re(this,void 0,void 0,function*(){return yo(t,"DELETE",e,i,s,n)})}class sS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return re(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(We(e))return{data:null,error:e};throw e}})}}var a_;class oS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[a_]="BlobDownloadBuilder",this.promise=null}asStream(){return new sS(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return re(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(We(e))return{data:null,error:e};throw e}})}}a_=Symbol.toStringTag;const aS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lS{constructor(e,n={},i,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=i,this.fetch=Vd(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,i,s){return re(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Pp),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&i instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",i)):typeof FormData<"u"&&i instanceof FormData?(a=i,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=i,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const f=this._removeEmptyFolders(n),g=this._getFinalPath(f),v=yield(e=="PUT"?zc:hn)(this.fetch,`${this.url}/object/${g}`,a,Object.assign({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:v.Id,fullPath:v.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(We(a))return{data:null,error:a};throw a}})}upload(e,n,i){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,s){return re(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",n);try{let d;const f=Object.assign({upsert:Pp.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",f.cacheControl)):(d=i,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const v=yield zc(this.fetch,c.toString(),d,{headers:g});return{data:{path:a,fullPath:v.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(We(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return re(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield hn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:s}),l=new URL(this.url+a.url),c=l.searchParams.get("token");if(!c)throw new Zd("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}update(e,n,i){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return re(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}copy(e,n,i){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield hn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,i){return re(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield hn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,i){return re(this,void 0,void 0,function*(){try{const s=yield hn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=a?`?${a}`:"",c=this._getFinalPath(e),d=()=>ao(this.fetch,`${this.url}/${s}/${c}${l}`,{headers:this.headers,noResolveJson:!0});return new oS(d,this.shouldThrowOnError)}info(e){return re(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield ao(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Mc(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}exists(e){return re(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield iS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i)&&i instanceof Ic){const s=i.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&s.push(d);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${i}${f}`)}}}remove(e){return re(this,void 0,void 0,function*(){try{return{data:yield qd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}list(e,n,i){return re(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},aS),n),{prefix:e||""});return{data:yield hn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},i),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}listV2(e,n){return re(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield hn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const l_="2.78.0",u_={"X-Client-Info":`storage-js/${l_}`};class uS{constructor(e,n={},i,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},u_),n),this.fetch=Vd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return re(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield ao(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}getBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}createBucket(e){return re(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield hn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return re(this,void 0,void 0,function*(){try{return{data:yield zc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}emptyBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}deleteBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield qd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class cS{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},u_),n),this.fetch=Vd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}listBuckets(e){return re(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const i=n.toString(),s=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield ao(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}deleteBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield qd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}}const Gd={"X-Client-Info":`storage-js/${l_}`,"Content-Type":"application/json"};class c_ extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Bt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Pu extends c_{constructor(e,n,i){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class dS extends c_{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var Cp;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Cp||(Cp={}));const Kd=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Yi(async()=>{const{default:i}=await Promise.resolve().then(()=>ei);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},hS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Tp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fS=(t,e,n)=>re(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new Pu(Tp(l),s,c))}).catch(()=>{const l=s+"",c=a.statusText||`HTTP ${s} error`;e(new Pu(c,s,l))});else{const l=s+"",c=a.statusText||`HTTP ${s} error`;e(new Pu(c,s,l))}}else e(new dS(Tp(t),t))}),pS=(t,e,n,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return i?(hS(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,Object.assign(Object.assign({},s),n)):s};function mS(t,e,n,i,s,a){return re(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(n,pS(e,i,s,a)).then(d=>{if(!d.ok)throw d;if(i!=null&&i.noResolveJson)return d;const f=d.headers.get("content-type");return!f||!f.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>fS(d,c,i))})})}function Ut(t,e,n,i,s){return re(this,void 0,void 0,function*(){return mS(t,"POST",e,i,s,n)})}class gS{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gd),n),this.fetch=Kd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return re(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}getIndex(e,n){return re(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Bt(i))return{data:null,error:i};throw i}})}listIndexes(e){return re(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return re(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Bt(i))return{data:null,error:i};throw i}})}}class vS{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gd),n),this.fetch=Kd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return re(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ut(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}getVectors(e){return re(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}listVectors(e){return re(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ut(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}queryVectors(e){return re(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}deleteVectors(e){return re(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ut(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}}class _S{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gd),n),this.fetch=Kd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return re(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}getBucket(e){return re(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}listBuckets(){return re(this,arguments,void 0,function*(e={}){try{return{data:yield Ut(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return re(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}}class yS extends _S{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new wS(this.url,this.headers,e,this.fetch)}}class wS extends gS{constructor(e,n,i,s){super(e,n,s),this.vectorBucketName=i}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return re(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return re(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return re(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return re(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new xS(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class xS extends vS{constructor(e,n,i,s,a){super(e,n,a),this.vectorBucketName=i,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return re(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return re(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return re(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return re(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return re(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class bS extends uS{constructor(e,n={},i,s){super(e,n,i,s)}from(e){return new lS(this.url,this.headers,e,this.fetch)}get vectors(){return new yS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new cS(this.url+"/iceberg",this.headers,this.fetch)}}const SS="2.78.0";let Ts="";typeof Deno<"u"?Ts="deno":typeof document<"u"?Ts="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ts="react-native":Ts="node";const ES={"X-Client-Info":`supabase-js-${Ts}/${SS}`},kS={headers:ES},PS={schema:"public"},CS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TS={},OS=t=>{let e;return t?e=t:typeof fetch>"u"?e=Bv:e=fetch,(...n)=>e(...n)},jS=()=>typeof Headers>"u"?Uv:Headers,LS=(t,e,n)=>{const i=OS(n),s=jS();return async(a,l)=>{var c;const d=(c=await e())!==null&&c!==void 0?c:t;let f=new s(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),i(a,Object.assign(Object.assign({},l),{headers:f}))}};function NS(t){return t.endsWith("/")?t:t+"/"}function AS(t,e){var n,i;const{db:s,auth:a,realtime:l,global:c}=t,{db:d,auth:f,realtime:g,global:v}=e,y={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},g),l),storage:{},global:Object.assign(Object.assign(Object.assign({},v),c),{headers:Object.assign(Object.assign({},(n=v==null?void 0:v.headers)!==null&&n!==void 0?n:{}),(i=c==null?void 0:c.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function RS(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(NS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const d_="2.78.0",vi=30*1e3,Dc=3,Cu=Dc*vi,IS="http://localhost:9999",MS="supabase.auth.token",zS={"X-Client-Info":`gotrue-js/${d_}`},Bc="X-Supabase-Api-Version",h_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},DS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,BS=10*60*1e3;class lo extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class US extends lo{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function $S(t){return oe(t)&&t.name==="AuthApiError"}class Dr extends lo{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Sr extends lo{constructor(e,n,i,s){super(e,i,s),this.name=n,this.status=i}}class un extends Sr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function FS(t){return oe(t)&&t.name==="AuthSessionMissingError"}class di extends Sr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ca extends Sr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class da extends Sr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function WS(t){return oe(t)&&t.name==="AuthImplicitGrantRedirectError"}class Op extends Sr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Uc extends Sr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Tu(t){return oe(t)&&t.name==="AuthRetryableFetchError"}class jp extends Sr{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class $c extends Sr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lp=` 	
\r=`.split(""),HS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Lp.length;e+=1)t[Lp[e].charCodeAt(0)]=-2;for(let e=0;e<Qa.length;e+=1)t[Qa[e].charCodeAt(0)]=e;return t})();function Np(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Qa[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Qa[i]),e.queuedBits-=6}}function f_(t,e,n){const i=HS[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ap(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{qS(l,i,n)};for(let l=0;l<t.length;l+=1)f_(t.charCodeAt(l),s,a);return e.join("")}function ZS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function VS(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const s=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}ZS(i,e)}}function qS(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function zi(t){const e=[],n={queue:0,queuedBits:0},i=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)f_(t.charCodeAt(s),n,i);return new Uint8Array(e)}function GS(t){const e=[];return VS(t,n=>e.push(n)),new Uint8Array(e)}function Fr(t){const e=[],n={queue:0,queuedBits:0},i=s=>{e.push(s)};return t.forEach(s=>Np(s,n,i)),Np(null,n,i),e.join("")}function KS(t){return Math.round(Date.now()/1e3)+t}function JS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const St=()=>typeof window<"u"&&typeof document<"u",Nr={tested:!1,writable:!1},p_=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Nr.tested)return Nr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Nr.tested=!0,Nr.writable=!0}catch{Nr.tested=!0,Nr.writable=!1}return Nr.writable};function QS(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((i,s)=>{e[s]=i}),e}const m_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Yi(async()=>{const{default:i}=await Promise.resolve().then(()=>ei);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},YS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",_i=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ar=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Xn=async(t,e)=>{await t.removeItem(e)};class _l{constructor(){this.promise=new _l.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}_l.promiseConstructor=Promise;function Ou(t){const e=t.split(".");if(e.length!==3)throw new $c("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!DS.test(e[i]))throw new $c("JWT not in base64url format");return{header:JSON.parse(Ap(e[0])),payload:JSON.parse(Ap(e[1])),signature:zi(e[2]),raw:{header:e[0],payload:e[1]}}}async function XS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function eE(t,e){return new Promise((i,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){i(l);return}}catch(l){if(!e(a,l)){s(l);return}}})()})}function tE(t){return("0"+t.toString(16)).substr(-2)}function nE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*i));return s}return crypto.getRandomValues(e),Array.from(e,tE).join("")}async function rE(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(i);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function iE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await rE(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hi(t,e,n=!1){const i=nE();let s=i;n&&(s+="/PASSWORD_RECOVERY"),await _i(t,`${e}-code-verifier`,s);const a=await iE(i);return[a,i===a?"plain":"s256"]}const sE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function oE(t){const e=t.headers.get(Bc);if(!e||!e.match(sE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function aE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function lE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fi(t){if(!uE.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ju(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cE(t,e){return new Proxy(t,{get:(n,i,s)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,s)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,s)}})}function Rp(t){return JSON.parse(JSON.stringify(t))}const Mr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dE=[502,503,504];async function Ip(t){var e;if(!YS(t))throw new Uc(Mr(t),0);if(dE.includes(t.status))throw new Uc(Mr(t),t.status);let n;try{n=await t.json()}catch(a){throw new Dr(Mr(a),a)}let i;const s=oE(t);if(s&&s.getTime()>=h_["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new jp(Mr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new un}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new jp(Mr(n),t.status,n.weak_password.reasons);throw new US(Mr(n),t.status||500,i)}const hE=(t,e,n,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),n))};async function pe(t,e,n,i){var s;const a=Object.assign({},i==null?void 0:i.headers);a[Bc]||(a[Bc]=h_["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const l=(s=i==null?void 0:i.query)!==null&&s!==void 0?s:{};i!=null&&i.redirectTo&&(l.redirect_to=i.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await fE(t,e,n+c,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(d):{data:Object.assign({},d),error:null}}async function fE(t,e,n,i,s,a){const l=hE(e,i,s,a);let c;try{c=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new Uc(Mr(d),0)}if(c.ok||await Ip(c),i!=null&&i.noResolveJson)return c;try{return await c.json()}catch(d){await Ip(d)}}function cn(t){var e;let n=null;gE(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=KS(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function Mp(t){const e=cn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ir(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function pE(t){return{data:t,error:null}}function mE(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:s,verification_type:a}=t,l=Qi(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:i,redirect_to:s,verification_type:a},d=Object.assign({},l);return{data:{properties:c,user:d},error:null}}function zp(t){return t}function gE(t){return t.access_token&&t.refresh_token&&t.expires_in}const Lu=["global","local","others"];class vE{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=m_(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Lu[0]){if(Lu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lu.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(oe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ir})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=Qi(e,["options"]),s=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(s.new_email=i==null?void 0:i.newEmail,delete s.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:mE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ir})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,s,a,l,c,d;try{const f={nextPage:null,lastPage:0,total:0},g=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:zp});if(g.error)throw g.error;const v=await g.json(),y=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(k=>{const P=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);f[`${C}Page`]=P}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(oe(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){fi(e);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ir})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){fi(e);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ir})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){fi(e);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ir})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){fi(e.userId);try{const{data:n,error:i}=await pe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:i}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){fi(e.userId),fi(e.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,s,a,l,c,d;try{const f={nextPage:null,lastPage:0,total:0},g=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:zp});if(g.error)throw g.error;const v=await g.json(),y=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(c=g.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(k=>{const P=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);f[`${C}Page`]=P}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(oe(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}}function Dp(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const pi={debug:!!(globalThis&&p_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class g_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _E extends g_{}async function yE(t,e,n){pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),pi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async s=>{if(s){pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new _E(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(pi.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function wE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function v_(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function xE(t){return parseInt(t,16)}function bE(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function SE(t){var e;const{chainId:n,domain:i,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:c,requestId:d,resources:f,scheme:g,uri:v,version:y}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const x=v_(t.address),k=g?`${g}://${i}`:i,P=t.statement?`${t.statement}
`:"",C=`${k} wants you to sign in with your Ethereum account:
${x}

${P}`;let S=`URI: ${v}
Version: ${y}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(S+=`
Expiration Time: ${s.toISOString()}`),c&&(S+=`
Not Before: ${c.toISOString()}`),d&&(S+=`
Request ID: ${d}`),f){let w=`
Resources:`;for(const b of f){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);w+=`
- ${b}`}S+=w}return`${C}
${S}`}class et extends Error{constructor({message:e,code:n,cause:i,name:s}){var a;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(a=s??(i instanceof Error?i.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Ya extends et{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function EE({error:t,options:e}){var n,i,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new et({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new et({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new et({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new et({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new et({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new et({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new et({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new et({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(__(l)){if(a.rp.id!==l)return new et({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new et({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function kE({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new et({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new et({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(__(i)){if(n.rpId!==i)return new et({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class PE{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const CE=new PE;function TE(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:i}=t,s=Qi(t,["challenge","user","excludeCredentials"]),a=zi(e).buffer,l=Object.assign(Object.assign({},n),{id:zi(n.id).buffer}),c=Object.assign(Object.assign({},s),{challenge:a,user:l});if(i&&i.length>0){c.excludeCredentials=new Array(i.length);for(let d=0;d<i.length;d++){const f=i[d];c.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:zi(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function OE(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,i=Qi(t,["challenge","allowCredentials"]),s=zi(e).buffer,a=Object.assign(Object.assign({},i),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},c),{id:zi(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function jE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Fr(new Uint8Array(t.response.attestationObject)),clientDataJSON:Fr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function LE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,i=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Fr(new Uint8Array(s.authenticatorData)),clientDataJSON:Fr(new Uint8Array(s.clientDataJSON)),signature:Fr(new Uint8Array(s.signature)),userHandle:s.userHandle?Fr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function __(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Bp(){var t,e;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function NE(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ya("Browser returned unexpected credential type",e)}:{data:null,error:new Ya("Empty credential response",e)}}catch(e){return{data:null,error:EE({error:e,options:t})}}}async function AE(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ya("Browser returned unexpected credential type",e)}:{data:null,error:new Ya("Empty credential response",e)}}catch(e){return{data:null,error:kE({error:e,options:t})}}}const RE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},IE={userVerification:"preferred",hints:["security-key"]};function Xa(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),i={};for(const s of t)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))i[a]=l;else if(n(l))i[a]=l;else if(e(l)){const c=i[a];e(c)?i[a]=Xa(c,l):i[a]=Xa(l)}else i[a]=l}return i}function ME(t,e){return Xa(RE,t,e||{})}function zE(t,e){return Xa(IE,t,e||{})}class DE{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:s},a){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:c};const d=s??CE.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${i}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=ME(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:g,error:v}=await NE({publicKey:f,signal:d});return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}case"request":{const f=zE(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:g,error:v}=await AE(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:d}));return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}}}catch(l){return oe(l)?{data:null,error:l}:{data:null,error:new Dr("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!n)return{data:null,error:new lo("rpId is required for WebAuthn authentication")};try{if(!Bp())return{data:null,error:new Dr("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:s},{request:a});if(!l)return{data:null,error:c};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:i,credential_response:d.credential_response}})}catch(l){return oe(l)?{data:null,error:l}:{data:null,error:new Dr("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!n)return{data:null,error:new lo("rpId is required for WebAuthn registration")};try{if(!Bp())return{data:null,error:new Dr("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(g=>{var v;return(v=g.data)===null||v===void 0?void 0:v.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:c};const{data:d,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:s},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:i,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(l){return oe(l)?{data:null,error:l}:{data:null,error:new Dr("Unexpected error in register",l)}}}}wE();const BE={url:IS,storageKey:MS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Up(t,e,n){return await n()}const mi={};class uo{get jwks(){var e,n;return(n=(e=mi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){mi[this.storageKey]=Object.assign(Object.assign({},mi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=mi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){mi[this.storageKey]=Object.assign(Object.assign({},mi[this.storageKey]),{cachedAt:e})}constructor(e){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=uo.nextInstanceID,uo.nextInstanceID+=1,this.instanceID>0&&St()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},BE),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new vE({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=m_(s.fetch),this.lock=s.lock||Up,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:St()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=yE:this.lock=Up,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new DE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:p_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dp(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Dp(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${d_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=QS(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),St()&&this.detectSessionInUrl&&i!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),WS(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return oe(n)?{error:n}:{error:new Dr("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,s;try{const a=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:cn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(oe(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,i,s;try{let a;if("email"in e){const{email:g,password:v,options:y}=e;let x=null,k=null;this.flowType==="pkce"&&([x,k]=await hi(this.storage,this.storageKey)),a=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:g,password:v,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:k},xform:cn})}else if("phone"in e){const{phone:g,password:v,options:y}=e;a=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(i=y==null?void 0:y.data)!==null&&i!==void 0?i:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:cn})}else throw new ca("You must provide either an email or phone number and a password");const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(oe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:c}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Mp})}else if("phone"in e){const{phone:a,password:l,options:c}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Mp})}else throw new ca("You must provide either an email or phone number and a password");const{data:i,error:s}=n;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new di}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(n){if(oe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,s,a,l,c,d,f,g,v,y;let x,k;if("message"in e)x=e.message,k=e.signature;else{const{chain:P,wallet:C,statement:S,options:w}=e;let b;if(St())if(typeof C=="object")b=C;else{const Q=window;if("ethereum"in Q&&typeof Q.ethereum=="object"&&"request"in Q.ethereum&&typeof Q.ethereum.request=="function")b=Q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=C}const O=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),A=await b.request({method:"eth_requestAccounts"}).then(Q=>Q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=v_(A[0]);let I=(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!I){const Q=await b.request({method:"eth_chainId"});I=xE(Q)}const $={domain:O.host,address:D,statement:S,uri:O.href,version:"1",chainId:I,nonce:(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=w==null?void 0:w.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(g=w==null?void 0:w.signInWithEthereum)===null||g===void 0?void 0:g.resources};x=SE($),k=await b.request({method:"personal_sign",params:[bE(x),D]})}try{const{data:P,error:C}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:k},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:cn});if(C)throw C;return!P||!P.session||!P.user?{data:{user:null,session:null},error:new di}:(P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),{data:Object.assign({},P),error:C})}catch(P){if(oe(P))return{data:{user:null,session:null},error:P};throw P}}async signInWithSolana(e){var n,i,s,a,l,c,d,f,g,v,y,x;let k,P;if("message"in e)k=e.message,P=e.signature;else{const{chain:C,wallet:S,statement:w,options:b}=e;let O;if(St())if(typeof S=="object")O=S;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))O=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=S}const A=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const D=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),w?{statement:w}:null));let I;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")I=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)I=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)k=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),P=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${A.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(i=b==null?void 0:b.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((f=b==null?void 0:b.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((v=(g=b==null?void 0:b.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...b.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const D=await O.signMessage(new TextEncoder().encode(k),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=D}}try{const{data:C,error:S}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Fr(P)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:cn});if(S)throw S;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new di}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:S})}catch(C){if(oe(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(e){const n=await Ar(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(n??"").split("/");try{const{data:a,error:l}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:cn});if(await Xn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new di}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(oe(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:i,token:s,access_token:a,nonce:l}=e,c=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:cn}),{data:d,error:f}=c;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new di}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(n){if(oe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,s,a,l;try{if("email"in e){const{email:c,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await hi(this.storage,this.storageKey));const{error:v}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:c,options:d}=e,{data:f,error:g}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new ca("You must provide either an email or phone number.")}catch(c){if(oe(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var n,i;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:c}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:cn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(s){if(oe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,i,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await hi(this.storage,this.storageKey)),await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:pE})}catch(a){if(oe(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new un;const{error:s}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(oe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:s,options:a}=e,{error:l}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:i,type:s,options:a}=e,{data:l,error:c}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new ca("You must provide either an email or phone number and a type")}catch(n){if(oe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ar(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Cu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await Ar(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=ju()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=cE(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ir}):await this._useSession(async n=>{var i,s,a;const{data:l,error:c}=n;if(c)throw c;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new un}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:ir})})}catch(n){if(oe(n))return FS(n)&&(await this._removeSession(),await Xn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:s,error:a}=i;if(a)throw a;if(!s.session)throw new un;const l=s.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await hi(this.storage,this.storageKey));const{data:f,error:g}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:l.access_token,xform:ir});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(i){if(oe(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new un;const n=Date.now()/1e3;let i=n,s=!0,a=null;const{payload:l}=Ou(e.access_token);if(l.exp&&(i=l.exp,s=i<=n),s){const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(oe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:l,error:c}=n;if(c)throw c;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new un;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(oe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!St())throw new da("No browser detected.");if(e.error||e.error_description||e.error_code)throw new da(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Op("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new da("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Op("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:d,token_type:f}=e;if(!a||!c||!l||!f)throw new da("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(c);let y=g+v;d&&(y=parseInt(d));const x=y-g;x*1e3<=vi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${v}s`);const k=y-v;g-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,y,g):g-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,y,g);const{data:P,error:C}=await this._getUser(a);if(C)throw C;const S={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:v,expires_at:y,refresh_token:l,token_type:f,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(i){if(oe(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ar(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:s,error:a}=n;if(a)return{error:a};const l=(i=s.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!($S(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Xn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=JS(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,s;try{const{data:{session:a},error:l}=n;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await hi(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(oe(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:s}=await this._useSession(async a=>{var l,c,d,f,g;const{data:v,error:y}=a;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",x,{headers:this.headers,jwt:(g=(f=v.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return St()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(oe(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:l,provider:c,token:d,access_token:f,nonce:g}=e,v=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=a==null?void 0:a.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:d,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:cn}),{data:y,error:x}=v;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new di}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:x})}catch(s){if(oe(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,s;const{data:a,error:l}=n;if(l)throw l;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await eE(async s=>(s>0&&await XS(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cn})),(s,a)=>{const l=200*Math.pow(2,s);return a&&Tu(a)&&Date.now()+l-i<vi})}catch(i){if(this._debug(n,"error",i),oe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),St()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const s=await Ar(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Ar(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await _i(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:ju()}else if(s&&!s.user&&!s.user){const l=await Ar(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Xn(this.storage,this.storageKey+"-user"),await _i(this.storage,this.storageKey,s)):s.user=ju()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Cu;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Cu}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Tu(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(s.access_token);!c&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new un;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new _l;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new un;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(s,"error",a),oe(a)){const l={data:null,error:a};return Tu(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,i=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await _i(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Rp(s);await _i(this.storage,this.storageKey,a)}else{const s=Rp(n);await _i(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Xn(this.storage,this.storageKey),await Xn(this.storage,this.storageKey+"-code-verifier"),await Xn(this.storage,this.storageKey+"-user"),this.userStorage&&await Xn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&St()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),vi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((i.expires_at*1e3-e)/vi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${vi}ms, refresh threshold is ${Dc} ticks`),s<=Dc&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof g_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const s=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,l]=await hi(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);s.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:s,error:a}=n;return a?{data:null,error:a}:await pe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,s;const{data:a,error:l}=n;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?jE(e.webauthn.credential_response):LE(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:d}=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:d})})}catch(n){if(oe(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const l=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:TE(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:OE(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(oe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:i},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ou(i.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(e=i.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;return s?{data:null,error:s}:i?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):{data:null,error:new un}})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;if(a)return{data:null,error:a};if(!s)return{data:null,error:new un};const l=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&St()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;if(a)return{data:null,error:a};if(!s)return{data:null,error:new un};const l=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&St()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(c=>c.kid===e);if(i)return i;const s=Date.now();if(i=this.jwks.keys.find(c=>c.kid===e),i&&this.jwks_cached_at+BS>s)return i;const{data:a,error:l}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,i=a.keys.find(c=>c.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:x,error:k}=await this.getSession();if(k||!x.session)return{data:null,error:k};i=x.session.access_token}const{header:s,payload:a,signature:l,raw:{header:c,payload:d}}=Ou(i);n!=null&&n.allowExpired||aE(a.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:x}=await this.getUser(i);if(x)throw x;return{data:{claims:a,header:s,signature:l},error:null}}const g=lE(s.alg),v=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,l,GS(`${c}.${d}`)))throw new $c("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(i){if(oe(i))return{data:null,error:i};throw i}}}uo.nextInstanceID=0;const UE=uo;class $E extends UE{constructor(e){super(e)}}class FE{constructor(e,n,i){var s,a,l;this.supabaseUrl=e,this.supabaseKey=n;const c=RS(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:PS,realtime:TS,auth:Object.assign(Object.assign({},CS),{storageKey:d}),global:kS},g=AS(i??{},f);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=LS(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new Ib(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new bS(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Cb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:s,userStorage:a,storageKey:l,flowType:c,lock:d,debug:f},g,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $E({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),g),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:s,userStorage:a,flowType:c,lock:d,debug:f,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Yb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const WE=(t,e,n)=>new FE(t,e,n);function HE(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}HE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const y_="https://fbbufxevwvqnrervhshd.supabase.co",ZE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZiYnVmeGV2d3ZxbnJlcnZoc2hkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMDI4MzksImV4cCI6MjA3NzY3ODgzOX0.ZmxvgXQWlWnMyq1sQU6oJps3ty0AiwEj1o_0FlMLVh0";console.log("[Supabase Client] Initializing...");console.log("[Supabase Client] URL present:",!0);console.log("[Supabase Client] Anon Key present:",!0);console.log("[Supabase Client]  Environment variables loaded");console.log("[Supabase Client] URL:",y_.substring(0,30)+"...");const Ee=WE(y_,ZE);(async()=>{try{const{error:t}=await Ee.from("profiles").select("count",{count:"exact",head:!0});t?(console.error("[Supabase Client]  Connection test failed:",t),console.error("[Supabase Client] Error details:",{message:t.message,code:t.code,details:t.details,hint:t.hint})):console.log("[Supabase Client]  Connection successful! Database is reachable.")}catch(t){console.error("[Supabase Client]  Connection test exception:",t)}})();function w_(){const[t,e]=E.useState([]),[n,i]=E.useState(!0),[s,a]=E.useState(null);E.useEffect(()=>{l()},[]);const l=async()=>{try{console.log("[useGroups]  Fetching groups..."),i(!0);const{data:c,error:d}=await Ee.from("groups").select("*").order("name",{ascending:!0});if(d)throw console.error("[useGroups]  Error fetching groups:",d),console.error("[useGroups] Error details:",{message:d.message,code:d.code,details:d.details,hint:d.hint}),d;console.log("[useGroups]  Successfully fetched groups:",(c==null?void 0:c.length)||0,"groups"),e(c||[]),a(null)}catch(c){console.error("[useGroups]  Exception fetching groups:",c),a(c)}finally{i(!1)}};return{groups:t,loading:n,error:s,refetch:l}}const x_=E.createContext(void 0),bs="usk-social-selected-group";function VE({children:t}){const{groups:e,loading:n}=w_(),[i,s]=E.useState(null),[a,l]=E.useState(!0);E.useEffect(()=>{if(n)return;const d=localStorage.getItem(bs);if(d&&e.length>0){const g=e.find(v=>v.id===d);if(g){s(g),l(!1);return}}const f=e.find(g=>g.name.toLowerCase().includes("medelln")||g.name.toLowerCase().includes("medellin"));f?(s(f),localStorage.setItem(bs,f.id),l(!1)):(e.length>0&&(s(e[0]),localStorage.setItem(bs,e[0].id)),l(!1))},[e,n]);const c=d=>{s(d),d?localStorage.setItem(bs,d.id):localStorage.removeItem(bs)};return m.jsx(x_.Provider,{value:{selectedGroup:i,setSelectedGroup:c,loading:a},children:t})}function yl(){const t=E.useContext(x_);if(t===void 0)throw new Error("useSelectedGroup must be used within a SelectedGroupProvider");return t}function wo(){const[t,e]=E.useState(null),[n,i]=E.useState(!0);return E.useEffect(()=>{console.log("[useAuth] Getting initial session..."),Ee.auth.getSession().then(({data:{session:d},error:f})=>{var g;f?(console.error("[useAuth]  Error getting session:",f),console.error("[useAuth] Error details:",{message:f.message,status:f.status})):console.log("[useAuth]  Session retrieved:",d?`User: ${(g=d.user)==null?void 0:g.email}`:"No session"),e((d==null?void 0:d.user)??null),i(!1)}),console.log("[useAuth] Setting up auth state listener...");const{data:{subscription:c}}=Ee.auth.onAuthStateChange((d,f)=>{var g;console.log("[useAuth] Auth state changed:",d,f?`User: ${(g=f.user)==null?void 0:g.email}`:"No session"),e((f==null?void 0:f.user)??null),i(!1)});return()=>{console.log("[useAuth] Cleaning up auth state listener"),c.unsubscribe()}},[]),{user:t,loading:n,signUp:async(c,d,f)=>{console.log("[useAuth]  Signing up user:",c,f?`with username: ${f}`:"");const{data:g,error:v}=await Ee.auth.signUp({email:c,password:d,options:{emailRedirectTo:void 0,data:f?{username:f}:void 0}});return v?(console.error("[useAuth]  Sign up failed:",v),console.error("[useAuth] Error details:",{message:v.message,status:v.status})):console.log("[useAuth]  Sign up successful:",g.user?`User ID: ${g.user.id}`:"No user data"),{data:g,error:v}},signIn:async(c,d)=>{console.log("[useAuth]  Signing in user with email:",c);const{data:f,error:g}=await Ee.auth.signInWithPassword({email:c.trim(),password:d});return g?(console.error("[useAuth]  Sign in failed:",g),console.error("[useAuth] Error details:",{message:g.message,status:g.status})):console.log("[useAuth]  Sign in successful:",f.user?`User ID: ${f.user.id}`:"No user data"),{data:f,error:g}},signOut:async()=>{console.log("[useAuth]  Signing out user");const{error:c}=await Ee.auth.signOut();return c?(console.error("[useAuth]  Sign out failed:",c),console.error("[useAuth] Error details:",{message:c.message,status:c.status})):(console.log("[useAuth]  Sign out successful"),localStorage.removeItem("usk_username"),console.log("[useAuth]  Cleared localStorage username")),{error:c}}}}const Ss="usk_username";function qE(){const{user:t}=wo(),[e,n]=E.useState(null),[i,s]=E.useState(!0);return E.useEffect(()=>{if(!t){n(null),s(!1),localStorage.removeItem(Ss);return}(async()=>{console.log("[useProfile]  Fetching profile for user:",t.id),s(!0);try{const{error:c}=await Ee.from("profiles").select("id, username").limit(1);if(c){console.error("[useProfile]  Cannot query profiles table:",c),console.error("[useProfile] This might be an RLS (Row Level Security) issue"),console.error("[useProfile] Error code:",c.code),console.error("[useProfile] Error message:",c.message),n(null),s(!1);return}const{data:d,error:f}=await Ee.from("profiles").select("*").eq("id",t.id).maybeSingle();if(f)if(f.code==="PGRST116"){if(console.log("[useProfile]  No profile found for user ID:",t.id),t.email){const{data:g}=await Ee.from("profiles").select("id, username, email").eq("email",t.email).maybeSingle();g&&(console.log("[useProfile]  Found profile with matching email but different ID:",g),console.log("[useProfile] Profile ID in DB:",g.id),console.log("[useProfile] User ID from auth:",t.id))}n(null)}else console.error("[useProfile]  Error fetching profile:",f),console.error("[useProfile] Error details:",{message:f.message,code:f.code,details:f.details,hint:f.hint}),n(null);else d?(console.log("[useProfile]  Profile found:",{id:d.id,username:d.username,email:d.email}),n(d),d.username&&(localStorage.setItem(Ss,d.username),console.log("[useProfile]  Synced localStorage with username:",d.username))):(console.log("[useProfile]  No profile data returned (null)"),n(null),localStorage.removeItem(Ss))}catch(c){console.error("[useProfile]  Exception fetching profile:",c),n(null)}finally{s(!1)}})();const l=Ee.channel(`profile:${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:`id=eq.${t.id}`},c=>{if(console.log("[useProfile]  Profile changed:",c),c.eventType==="UPDATE"||c.eventType==="INSERT"){const d=c.new;n(d),d.username&&(localStorage.setItem(Ss,d.username),console.log("[useProfile]  Synced localStorage with updated username:",d.username))}else c.eventType==="DELETE"&&(n(null),localStorage.removeItem(Ss))}).subscribe();return()=>{Ee.removeChannel(l)}},[t]),{profile:e,username:(e==null?void 0:e.username)||null,loading:i}}function GE(){const{user:t,signOut:e}=wo(),{profile:n,username:i}=qE(),{selectedGroup:s,setSelectedGroup:a}=yl(),{groups:l}=w_(),c=Ji(),d=_o(),[f,g]=E.useState(!1),[v,y]=E.useState(!1),[x,k]=E.useState(!1),P=E.useRef(null),C=E.useRef(null),S=E.useRef(null),w=d.pathname==="/info"||d.pathname.startsWith("/profile/"),b=async()=>{const{error:A}=await e();g(!1),A||c("/",{replace:!0})};E.useEffect(()=>{const A=D=>{const I=D.target;P.current&&!P.current.contains(I)&&g(!1),C.current&&!C.current.contains(I)&&y(!1),x&&S.current&&!S.current.contains(I)&&(D.target.closest('button[aria-label="Toggle menu"]')||k(!1))};return(f||v||x)&&document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[f,v,x]),E.useEffect(()=>{k(!1)},[d.pathname]);const O=()=>n!=null&&n.full_name?n.full_name.charAt(0).toUpperCase():i?i.charAt(0).toUpperCase():"U";return m.jsx("nav",{className:"sticky top-0 z-50 bg-gray-100 shadow-sm border-b border-gray-300",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"flex justify-between items-center h-16",children:[m.jsxs(Et,{to:"/",className:"flex items-center space-x-2",children:[m.jsx("img",{src:"/logo2.png",alt:"USK Social Logo",className:"h-10 w-10 object-contain"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("span",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"USK Social"}),s&&!w&&m.jsxs("div",{className:"relative flex items-center",ref:C,children:[m.jsx("div",{className:"h-6 w-px bg-gray-400 mx-2"}),m.jsxs("button",{onClick:A=>{A.preventDefault(),A.stopPropagation(),y(!v)},className:"flex items-center space-x-1 px-2 py-1 rounded-md hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400",children:[m.jsx("span",{className:"text-sm sm:text-lg font-semibold text-gray-700",children:s.city||s.name}),m.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&m.jsx("div",{className:"absolute left-0 mt-2 w-56 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200 max-h-96 overflow-y-auto",children:l.map(A=>m.jsxs("button",{onClick:()=>{a(A),y(!1),window.location.reload()},className:`block w-full text-left px-4 py-2 text-sm transition-colors ${(s==null?void 0:s.id)===A.id?"bg-gray-100 text-gray-900 font-semibold":"text-gray-700 hover:bg-gray-100"}`,children:[m.jsx("div",{className:"font-medium",children:A.name}),A.city&&m.jsxs("div",{className:"text-xs text-gray-500",children:[A.city,A.country?`, ${A.country}`:""]})]},A.id))})]})]})]}),m.jsxs("div",{className:"hidden md:flex md:items-center md:space-x-4",children:[m.jsx(Et,{to:"/",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Inicio"}),m.jsx(Et,{to:"/map",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:" Mapa"}),m.jsx(Et,{to:"/info",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Info"}),t?n&&i?m.jsxs("div",{className:"relative",ref:P,children:[m.jsxs("button",{onClick:()=>g(!f),className:"flex items-center space-x-2 px-3 py-2 rounded-md hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-400 flex items-center justify-center text-white font-semibold text-sm overflow-hidden",children:n.avatar_url?m.jsx("img",{src:n.avatar_url,alt:i,className:"w-full h-full object-cover"}):m.jsx("span",{children:O()})}),m.jsx("span",{className:"text-gray-700 text-sm font-medium",children:i}),m.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&m.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[m.jsx(Et,{to:`/profile/${n.username}`,onClick:()=>g(!1),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Perfil"}),m.jsx("button",{onClick:b,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:"Cerrar Sesin"})]})]}):m.jsx("span",{className:"text-gray-500 text-sm",children:"Loading..."}):m.jsx(Et,{to:"/auth",className:"text-blue-600 hover:text-blue-700 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Iniciar Sesin"})]}),m.jsx("button",{onClick:A=>{A.stopPropagation(),k(!x)},className:"md:hidden p-2 rounded-md text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-400","aria-label":"Toggle menu",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x?m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),x&&m.jsx("div",{ref:S,className:"md:hidden border-t border-gray-300 py-4",children:m.jsxs("div",{className:"space-y-1",children:[m.jsx(Et,{to:"/",onClick:()=>k(!1),className:"block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md text-sm font-medium",children:"Inicio"}),m.jsx(Et,{to:"/map",onClick:()=>k(!1),className:"block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md text-sm font-medium",children:" Mapa"}),m.jsx(Et,{to:"/info",onClick:()=>k(!1),className:"block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md text-sm font-medium",children:"Info"}),t?n&&i?m.jsxs("div",{className:"border-t border-gray-300 pt-2 mt-2",children:[m.jsxs("div",{className:"flex items-center space-x-3 px-4 py-2",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-400 flex items-center justify-center text-white font-semibold text-sm overflow-hidden",children:n.avatar_url?m.jsx("img",{src:n.avatar_url,alt:i,className:"w-full h-full object-cover"}):m.jsx("span",{children:O()})}),m.jsx("span",{className:"text-gray-700 text-sm font-medium",children:i})]}),m.jsx(Et,{to:`/profile/${n.username}`,onClick:()=>k(!1),className:"block px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md text-sm",children:"Perfil"}),m.jsx("button",{onClick:()=>{b(),k(!1)},className:"block w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 rounded-md text-sm",children:"Cerrar Sesin"})]}):m.jsx("div",{className:"px-4 py-2 text-gray-500 text-sm",children:"Loading..."}):m.jsx(Et,{to:"/auth",onClick:()=>k(!1),className:"block px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-md text-sm font-medium",children:"Iniciar Sesin"})]})})]})})}function b_(){const{selectedGroup:t}=yl(),[e,n]=E.useState([]),[i,s]=E.useState(!0),[a,l]=E.useState(null),c=E.useCallback(async()=>{if(t)try{console.log("[useEvents]  Fetching events for group:",t.id),s(!0);let d=Ee.from("events").select("*").eq("group_id",t.id).order("event_date",{ascending:!1});const{data:f,error:g}=await d;if(g)throw console.error("[useEvents]  Error fetching events:",g),console.error("[useEvents] Error details:",{message:g.message,code:g.code,details:g.details,hint:g.hint}),g;console.log("[useEvents]  Successfully fetched events:",(f==null?void 0:f.length)||0,"events"),n(f||[]),l(null)}catch(d){console.error("[useEvents]  Exception fetching events:",d),l(d)}finally{s(!1)}},[t]);return E.useEffect(()=>{t?c():(n([]),s(!1))},[t,c]),{events:e,loading:i,error:a,refetch:c}}function wl(t){const{selectedGroup:e}=yl(),[n,i]=E.useState([]),[s,a]=E.useState(!0),[l,c]=E.useState(null),d=E.useCallback(async()=>{if(t){try{console.log("[useSketches]  Fetching sketches for user:",t),a(!0);const{data:f,error:g}=await Ee.from("sketches").select(`
            *,
            profiles:user_id (username, avatar_url),
            events:event_id (title, location_name, group_id)
          `).eq("user_id",t).order("uploaded_at",{ascending:!1});if(g)throw console.error("[useSketches]  Error fetching sketches:",g),g;console.log("[useSketches]  Successfully fetched sketches:",(f==null?void 0:f.length)||0,"sketches"),i(f||[]),c(null)}catch(f){console.error("[useSketches]  Exception fetching sketches:",f),c(f)}finally{a(!1)}return}if(!e){i([]),a(!1);return}try{console.log("[useSketches]  Fetching sketches for group:",e.id),a(!0);const{data:f,error:g}=await Ee.from("sketches").select(`
          *,
          profiles:user_id (username, avatar_url),
          events:event_id (title, location_name, group_id)
        `).order("uploaded_at",{ascending:!1});if(g)throw console.error("[useSketches]  Error fetching sketches:",g),g;const v=(f||[]).filter(y=>{if(!y.event_id)return!0;const x=y.events;return(x==null?void 0:x.group_id)===e.id});console.log("[useSketches]  Successfully fetched sketches:",v.length,"sketches"),i(v),c(null)}catch(f){console.error("[useSketches]  Exception fetching sketches:",f),c(f)}finally{a(!1)}},[t,e]);return E.useEffect(()=>{d()},[d]),{sketches:n,loading:s,error:l,refetch:d}}const Nu="usk_username";function Jd(){const[t,e]=E.useState(""),[n,i]=E.useState(null),[s,a]=E.useState(!0);E.useEffect(()=>{const d=localStorage.getItem(Nu);d?(e(d),l(d)):a(!1)},[]);const l=async d=>{if(!d.trim()){i(null),a(!1);return}console.log("[useUsername]  Looking up profile for username:",d),a(!0);try{const{data:f,error:g}=await Ee.from("profiles").select("*").eq("username",d.trim().toLowerCase()).single();if(g&&g.code!=="PGRST116"){console.error("[useUsername]  Error fetching profile:",g),i(null),a(!1);return}if(f){console.log("[useUsername]  Found existing profile:",f.id),i(f),a(!1);return}console.log("[useUsername]  Creating new profile for username:",d);const v=crypto.randomUUID(),{data:y,error:x}=await Ee.from("profiles").insert({id:v,username:d.trim().toLowerCase(),full_name:null,bio:null,city:null,country:null,avatar_url:null}).select().single();x?(console.error("[useUsername]  Error creating profile:",x),console.error("[useUsername] Error details:",{message:x.message,code:x.code,details:x.details,hint:x.hint}),i(null)):y?(console.log("[useUsername]  Profile created:",y.id),i(y)):i(null)}catch(f){console.error("[useUsername]  Exception in fetchOrCreateProfile:",f),i(null)}finally{a(!1)}};return{username:t,profile:n,loading:s,setUsername:d=>{const f=d.trim();e(f),f?(localStorage.setItem(Nu,f),l(f)):(localStorage.removeItem(Nu),i(null))}}}function KE(t,e){const n=E.useRef(e);E.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const JE=1;function QE(t){return Object.freeze({__version:JE,map:t})}function YE(t,e){return Object.freeze({...t,...e})}const S_=E.createContext(null),E_=S_.Provider;function k_(){const t=E.useContext(S_);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function XE(t){function e(n,i){const{instance:s,context:a}=t(n).current;return E.useImperativeHandle(i,()=>s),n.children==null?null:$s.createElement(E_,{value:a},n.children)}return E.forwardRef(e)}function ek(t){function e(n,i){const{instance:s}=t(n).current;return E.useImperativeHandle(i,()=>s),null}return E.forwardRef(e)}function tk(t,e){const n=E.useRef();E.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function P_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Fc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Wy,function(n){var i="1.9.4";function s(r){var o,u,h,p;for(u=1,h=arguments.length;u<h;u++){p=arguments[u];for(o in p)r[o]=p[o]}return r}var a=Object.create||function(){function r(){}return function(o){return r.prototype=o,new r}}();function l(r,o){var u=Array.prototype.slice;if(r.bind)return r.bind.apply(r,u.call(arguments,1));var h=u.call(arguments,2);return function(){return r.apply(o,h.length?h.concat(u.call(arguments)):arguments)}}var c=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++c),r._leaflet_id}function f(r,o,u){var h,p,_,T;return T=function(){h=!1,p&&(_.apply(u,p),p=!1)},_=function(){h?p=arguments:(r.apply(u,arguments),setTimeout(T,o),h=!0)},_}function g(r,o,u){var h=o[1],p=o[0],_=h-p;return r===h&&u?r:((r-p)%_+_)%_+p}function v(){return!1}function y(r,o){if(o===!1)return r;var u=Math.pow(10,o===void 0?6:o);return Math.round(r*u)/u}function x(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function k(r){return x(r).split(/\s+/)}function P(r,o){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var u in o)r.options[u]=o[u];return r.options}function C(r,o,u){var h=[];for(var p in r)h.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(r[p]));return(!o||o.indexOf("?")===-1?"?":"&")+h.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function w(r,o){return r.replace(S,function(u,h){var p=o[h];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(o)),p})}var b=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function O(r,o){for(var u=0;u<r.length;u++)if(r[u]===o)return u;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function D(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var I=0;function $(r){var o=+new Date,u=Math.max(0,16-(o-I));return I=o+u,window.setTimeout(r,u)}var Q=window.requestAnimationFrame||D("RequestAnimationFrame")||$,X=window.cancelAnimationFrame||D("CancelAnimationFrame")||D("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function we(r,o,u){if(u&&Q===$)r.call(o);else return Q.call(window,l(r,o))}function Y(r){r&&X.call(window,r)}var Oe={__proto__:null,extend:s,create:a,bind:l,get lastId(){return c},stamp:d,throttle:f,wrapNum:g,falseFn:v,formatNum:y,trim:x,splitWords:k,setOptions:P,getParamString:C,template:w,isArray:b,indexOf:O,emptyImageUrl:A,requestFn:Q,cancelFn:X,requestAnimFrame:we,cancelAnimFrame:Y};function Z(){}Z.extend=function(r){var o=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,h=a(u);h.constructor=o,o.prototype=h;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(o[p]=this[p]);return r.statics&&s(o,r.statics),r.includes&&(le(r.includes),s.apply(null,[h].concat(r.includes))),s(h,r),delete h.statics,delete h.includes,h.options&&(h.options=u.options?a(u.options):{},s(h.options,r.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var _=0,T=h._initHooks.length;_<T;_++)h._initHooks[_].call(this)}},o},Z.include=function(r){var o=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=o,this.mergeOptions(r.options)),this},Z.mergeOptions=function(r){return s(this.prototype.options,r),this},Z.addInitHook=function(r){var o=Array.prototype.slice.call(arguments,1),u=typeof r=="function"?r:function(){this[r].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function le(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=b(r)?r:[r];for(var o=0;o<r.length;o++)r[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(r,o,u){if(typeof r=="object")for(var h in r)this._on(h,r[h],o);else{r=k(r);for(var p=0,_=r.length;p<_;p++)this._on(r[p],o,u)}return this},off:function(r,o,u){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var h in r)this._off(h,r[h],o);else{r=k(r);for(var p=arguments.length===1,_=0,T=r.length;_<T;_++)p?this._off(r[_]):this._off(r[_],o,u)}return this},_on:function(r,o,u,h){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(r,o,u)===!1){u===this&&(u=void 0);var p={fn:o,ctx:u};h&&(p.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(p)}},_off:function(r,o,u){var h,p,_;if(this._events&&(h=this._events[r],!!h)){if(arguments.length===1){if(this._firingCount)for(p=0,_=h.length;p<_;p++)h[p].fn=v;delete this._events[r];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var T=this._listens(r,o,u);if(T!==!1){var j=h[T];this._firingCount&&(j.fn=v,this._events[r]=h=h.slice()),h.splice(T,1)}}},fire:function(r,o,u){if(!this.listens(r,u))return this;var h=s({},o,{type:r,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var p=this._events[r];if(p){this._firingCount=this._firingCount+1||1;for(var _=0,T=p.length;_<T;_++){var j=p[_],R=j.fn;j.once&&this.off(r,R,j.ctx),R.call(j.ctx||this,h)}this._firingCount--}}return u&&this._propagateEvent(h),this},listens:function(r,o,u,h){typeof r!="string"&&console.warn('"string" type argument expected');var p=o;typeof o!="function"&&(h=!!o,p=void 0,u=void 0);var _=this._events&&this._events[r];if(_&&_.length&&this._listens(r,p,u)!==!1)return!0;if(h){for(var T in this._eventParents)if(this._eventParents[T].listens(r,o,u,h))return!0}return!1},_listens:function(r,o,u){if(!this._events)return!1;var h=this._events[r]||[];if(!o)return!!h.length;u===this&&(u=void 0);for(var p=0,_=h.length;p<_;p++)if(h[p].fn===o&&h[p].ctx===u)return p;return!1},once:function(r,o,u){if(typeof r=="object")for(var h in r)this._on(h,r[h],o,!0);else{r=k(r);for(var p=0,_=r.length;p<_;p++)this._on(r[p],o,u,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var o in this._eventParents)this._eventParents[o].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var Ne=Z.extend(ee);function M(r,o,u){this.x=u?Math.round(r):r,this.y=u?Math.round(o):o}var ce=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};M.prototype={clone:function(){return new M(this.x,this.y)},add:function(r){return this.clone()._add(F(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(F(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new M(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new M(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(r){r=F(r);var o=r.x-this.x,u=r.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(r){return r=F(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=F(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function F(r,o,u){return r instanceof M?r:b(r)?new M(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new M(r.x,r.y):new M(r,o,u)}function te(r,o){if(r)for(var u=o?[r,o]:r,h=0,p=u.length;h<p;h++)this.extend(u[h])}te.prototype={extend:function(r){var o,u;if(!r)return this;if(r instanceof M||typeof r[0]=="number"||"x"in r)o=u=F(r);else if(r=ve(r),o=r.min,u=r.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(r){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var o,u;return typeof r[0]=="number"||r instanceof M?r=F(r):r=ve(r),r instanceof te?(o=r.min,u=r.max):o=u=r,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(r){r=ve(r);var o=this.min,u=this.max,h=r.min,p=r.max,_=p.x>=o.x&&h.x<=u.x,T=p.y>=o.y&&h.y<=u.y;return _&&T},overlaps:function(r){r=ve(r);var o=this.min,u=this.max,h=r.min,p=r.max,_=p.x>o.x&&h.x<u.x,T=p.y>o.y&&h.y<u.y;return _&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var o=this.min,u=this.max,h=Math.abs(o.x-u.x)*r,p=Math.abs(o.y-u.y)*r;return ve(F(o.x-h,o.y-p),F(u.x+h,u.y+p))},equals:function(r){return r?(r=ve(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ve(r,o){return!r||r instanceof te?r:new te(r,o)}function Ae(r,o){if(r)for(var u=o?[r,o]:r,h=0,p=u.length;h<p;h++)this.extend(u[h])}Ae.prototype={extend:function(r){var o=this._southWest,u=this._northEast,h,p;if(r instanceof _e)h=r,p=r;else if(r instanceof Ae){if(h=r._southWest,p=r._northEast,!h||!p)return this}else return r?this.extend(ue(r)||be(r)):this;return!o&&!u?(this._southWest=new _e(h.lat,h.lng),this._northEast=new _e(p.lat,p.lng)):(o.lat=Math.min(h.lat,o.lat),o.lng=Math.min(h.lng,o.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(r){var o=this._southWest,u=this._northEast,h=Math.abs(o.lat-u.lat)*r,p=Math.abs(o.lng-u.lng)*r;return new Ae(new _e(o.lat-h,o.lng-p),new _e(u.lat+h,u.lng+p))},getCenter:function(){return new _e((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _e(this.getNorth(),this.getWest())},getSouthEast:function(){return new _e(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof _e||"lat"in r?r=ue(r):r=be(r);var o=this._southWest,u=this._northEast,h,p;return r instanceof Ae?(h=r.getSouthWest(),p=r.getNorthEast()):h=p=r,h.lat>=o.lat&&p.lat<=u.lat&&h.lng>=o.lng&&p.lng<=u.lng},intersects:function(r){r=be(r);var o=this._southWest,u=this._northEast,h=r.getSouthWest(),p=r.getNorthEast(),_=p.lat>=o.lat&&h.lat<=u.lat,T=p.lng>=o.lng&&h.lng<=u.lng;return _&&T},overlaps:function(r){r=be(r);var o=this._southWest,u=this._northEast,h=r.getSouthWest(),p=r.getNorthEast(),_=p.lat>o.lat&&h.lat<u.lat,T=p.lng>o.lng&&h.lng<u.lng;return _&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,o){return r?(r=be(r),this._southWest.equals(r.getSouthWest(),o)&&this._northEast.equals(r.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function be(r,o){return r instanceof Ae?r:new Ae(r,o)}function _e(r,o,u){if(isNaN(r)||isNaN(o))throw new Error("Invalid LatLng object: ("+r+", "+o+")");this.lat=+r,this.lng=+o,u!==void 0&&(this.alt=+u)}_e.prototype={equals:function(r,o){if(!r)return!1;r=ue(r);var u=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return u<=(o===void 0?1e-9:o)},toString:function(r){return"LatLng("+y(this.lat,r)+", "+y(this.lng,r)+")"},distanceTo:function(r){return jt.distance(this,ue(r))},wrap:function(){return jt.wrapLatLng(this)},toBounds:function(r){var o=180*r/40075017,u=o/Math.cos(Math.PI/180*this.lat);return be([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new _e(this.lat,this.lng,this.alt)}};function ue(r,o,u){return r instanceof _e?r:b(r)&&typeof r[0]!="object"?r.length===3?new _e(r[0],r[1],r[2]):r.length===2?new _e(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new _e(r.lat,"lng"in r?r.lng:r.lon,r.alt):o===void 0?null:new _e(r,o,u)}var qe={latLngToPoint:function(r,o){var u=this.projection.project(r),h=this.scale(o);return this.transformation._transform(u,h)},pointToLatLng:function(r,o){var u=this.scale(o),h=this.transformation.untransform(r,u);return this.projection.unproject(h)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(r),h=this.transformation.transform(o.min,u),p=this.transformation.transform(o.max,u);return new te(h,p)},infinite:!1,wrapLatLng:function(r){var o=this.wrapLng?g(r.lng,this.wrapLng,!0):r.lng,u=this.wrapLat?g(r.lat,this.wrapLat,!0):r.lat,h=r.alt;return new _e(u,o,h)},wrapLatLngBounds:function(r){var o=r.getCenter(),u=this.wrapLatLng(o),h=o.lat-u.lat,p=o.lng-u.lng;if(h===0&&p===0)return r;var _=r.getSouthWest(),T=r.getNorthEast(),j=new _e(_.lat-h,_.lng-p),R=new _e(T.lat-h,T.lng-p);return new Ae(j,R)}},jt=s({},qe,{wrapLng:[-180,180],R:6371e3,distance:function(r,o){var u=Math.PI/180,h=r.lat*u,p=o.lat*u,_=Math.sin((o.lat-r.lat)*u/2),T=Math.sin((o.lng-r.lng)*u/2),j=_*_+Math.cos(h)*Math.cos(p)*T*T,R=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*R}}),rn=6378137,yn={R:rn,MAX_LATITUDE:85.0511287798,project:function(r){var o=Math.PI/180,u=this.MAX_LATITUDE,h=Math.max(Math.min(u,r.lat),-u),p=Math.sin(h*o);return new M(this.R*r.lng*o,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(r){var o=180/Math.PI;return new _e((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*o,r.x*o/this.R)},bounds:function(){var r=rn*Math.PI;return new te([-r,-r],[r,r])}()};function sn(r,o,u,h){if(b(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=o,this._c=u,this._d=h}sn.prototype={transform:function(r,o){return this._transform(r.clone(),o)},_transform:function(r,o){return o=o||1,r.x=o*(this._a*r.x+this._b),r.y=o*(this._c*r.y+this._d),r},untransform:function(r,o){return o=o||1,new M((r.x/o-this._b)/this._a,(r.y/o-this._d)/this._c)}};function Lt(r,o,u,h){return new sn(r,o,u,h)}var On=s({},jt,{code:"EPSG:3857",projection:yn,transformation:function(){var r=.5/(Math.PI*yn.R);return Lt(r,.5,-r,.5)}()}),q=s({},On,{code:"EPSG:900913"});function je(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function yt(r,o){var u="",h,p,_,T,j,R;for(h=0,_=r.length;h<_;h++){for(j=r[h],p=0,T=j.length;p<T;p++)R=j[p],u+=(p?"L":"M")+R.x+" "+R.y;u+=o?se.svg?"z":"x":""}return u||"M0 0"}var N=document.documentElement.style,B="ActiveXObject"in window,z=B&&!document.addEventListener,H="msLaunchUri"in navigator&&!("documentMode"in document),V=wn("webkit"),de=wn("android"),ne=wn("android 2")||wn("android 3"),ie=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),G=de&&wn("Google")&&ie<537&&!("AudioNode"in window),me=!!window.opera,ae=!H&&wn("chrome"),ge=wn("gecko")&&!V&&!me&&!B,fe=!ae&&wn("safari"),$e=wn("phantom"),wt="OTransition"in N,Re=navigator.platform.indexOf("Win")===0,Qe=B&&"transition"in N,jn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ne,ft="MozPerspective"in N,xt=!window.L_DISABLE_3D&&(Qe||jn||ft)&&!wt&&!$e,Vt=typeof orientation<"u"||wn("mobile"),Ln=Vt&&V,qn=Vt&&jn,pt=!window.PointerEvent&&window.MSPointerEvent,qt=!!(window.PointerEvent||pt),Gn="ontouchstart"in window||!!window.TouchEvent,Sl=!window.L_NO_TOUCH&&(Gn||qt),ts=Vt&&me,Er=Vt&&ge,kr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kn=function(){var r=!1;try{var o=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",v,o),window.removeEventListener("testPassiveEventSupport",v,o)}catch{}return r}(),xo=function(){return!!document.createElement("canvas").getContext}(),Pr=!!(document.createElementNS&&je("svg").createSVGRect),R_=!!Pr&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),I_=!Pr&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var o=r.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),M_=navigator.platform.indexOf("Mac")===0,z_=navigator.platform.indexOf("Linux")===0;function wn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var se={ie:B,ielt9:z,edge:H,webkit:V,android:de,android23:ne,androidStock:G,opera:me,chrome:ae,gecko:ge,safari:fe,phantom:$e,opera12:wt,win:Re,ie3d:Qe,webkit3d:jn,gecko3d:ft,any3d:xt,mobile:Vt,mobileWebkit:Ln,mobileWebkit3d:qn,msPointer:pt,pointer:qt,touch:Sl,touchNative:Gn,mobileOpera:ts,mobileGecko:Er,retina:kr,passiveEvents:Kn,canvas:xo,svg:Pr,vml:I_,inlineSvg:R_,mac:M_,linux:z_},eh=se.msPointer?"MSPointerDown":"pointerdown",th=se.msPointer?"MSPointerMove":"pointermove",nh=se.msPointer?"MSPointerUp":"pointerup",rh=se.msPointer?"MSPointerCancel":"pointercancel",El={touchstart:eh,touchmove:th,touchend:nh,touchcancel:rh},ih={touchstart:W_,touchmove:bo,touchend:bo,touchcancel:bo},ti={},sh=!1;function D_(r,o,u){return o==="touchstart"&&F_(),ih[o]?(u=ih[o].bind(this,u),r.addEventListener(El[o],u,!1),u):(console.warn("wrong event specified:",o),v)}function B_(r,o,u){if(!El[o]){console.warn("wrong event specified:",o);return}r.removeEventListener(El[o],u,!1)}function U_(r){ti[r.pointerId]=r}function $_(r){ti[r.pointerId]&&(ti[r.pointerId]=r)}function oh(r){delete ti[r.pointerId]}function F_(){sh||(document.addEventListener(eh,U_,!0),document.addEventListener(th,$_,!0),document.addEventListener(nh,oh,!0),document.addEventListener(rh,oh,!0),sh=!0)}function bo(r,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in ti)o.touches.push(ti[u]);o.changedTouches=[o],r(o)}}function W_(r,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&ut(o),bo(r,o)}function H_(r){var o={},u,h;for(h in r)u=r[h],o[h]=u&&u.bind?u.bind(r):u;return r=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Z_=200;function V_(r,o){r.addEventListener("dblclick",o);var u=0,h;function p(_){if(_.detail!==1){h=_.detail;return}if(!(_.pointerType==="mouse"||_.sourceCapabilities&&!_.sourceCapabilities.firesTouchEvents)){var T=dh(_);if(!(T.some(function(R){return R instanceof HTMLLabelElement&&R.attributes.for})&&!T.some(function(R){return R instanceof HTMLInputElement||R instanceof HTMLSelectElement}))){var j=Date.now();j-u<=Z_?(h++,h===2&&o(H_(_))):h=1,u=j}}}return r.addEventListener("click",p),{dblclick:o,simDblclick:p}}function q_(r,o){r.removeEventListener("dblclick",o.dblclick),r.removeEventListener("click",o.simDblclick)}var kl=ko(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ns=ko(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ah=ns==="webkitTransition"||ns==="OTransition"?ns+"End":"transitionend";function lh(r){return typeof r=="string"?document.getElementById(r):r}function rs(r,o){var u=r.style[o]||r.currentStyle&&r.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(r,null);u=h?h[o]:null}return u==="auto"?null:u}function Te(r,o,u){var h=document.createElement(r);return h.className=o||"",u&&u.appendChild(h),h}function Fe(r){var o=r.parentNode;o&&o.removeChild(r)}function So(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function ni(r){var o=r.parentNode;o&&o.lastChild!==r&&o.appendChild(r)}function ri(r){var o=r.parentNode;o&&o.firstChild!==r&&o.insertBefore(r,o.firstChild)}function Pl(r,o){if(r.classList!==void 0)return r.classList.contains(o);var u=Eo(r);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function xe(r,o){if(r.classList!==void 0)for(var u=k(o),h=0,p=u.length;h<p;h++)r.classList.add(u[h]);else if(!Pl(r,o)){var _=Eo(r);Cl(r,(_?_+" ":"")+o)}}function Ke(r,o){r.classList!==void 0?r.classList.remove(o):Cl(r,x((" "+Eo(r)+" ").replace(" "+o+" "," ")))}function Cl(r,o){r.className.baseVal===void 0?r.className=o:r.className.baseVal=o}function Eo(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Gt(r,o){"opacity"in r.style?r.style.opacity=o:"filter"in r.style&&G_(r,o)}function G_(r,o){var u=!1,h="DXImageTransform.Microsoft.Alpha";try{u=r.filters.item(h)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):r.style.filter+=" progid:"+h+"(opacity="+o+")"}function ko(r){for(var o=document.documentElement.style,u=0;u<r.length;u++)if(r[u]in o)return r[u];return!1}function Cr(r,o,u){var h=o||new M(0,0);r.style[kl]=(se.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(u?" scale("+u+")":"")}function Ye(r,o){r._leaflet_pos=o,se.any3d?Cr(r,o):(r.style.left=o.x+"px",r.style.top=o.y+"px")}function Tr(r){return r._leaflet_pos||new M(0,0)}var is,ss,Tl;if("onselectstart"in document)is=function(){ye(window,"selectstart",ut)},ss=function(){Ie(window,"selectstart",ut)};else{var os=ko(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);is=function(){if(os){var r=document.documentElement.style;Tl=r[os],r[os]="none"}},ss=function(){os&&(document.documentElement.style[os]=Tl,Tl=void 0)}}function Ol(){ye(window,"dragstart",ut)}function jl(){Ie(window,"dragstart",ut)}var Po,Ll;function Nl(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Co(),Po=r,Ll=r.style.outlineStyle,r.style.outlineStyle="none",ye(window,"keydown",Co))}function Co(){Po&&(Po.style.outlineStyle=Ll,Po=void 0,Ll=void 0,Ie(window,"keydown",Co))}function uh(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Al(r){var o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}var K_={__proto__:null,TRANSFORM:kl,TRANSITION:ns,TRANSITION_END:ah,get:lh,getStyle:rs,create:Te,remove:Fe,empty:So,toFront:ni,toBack:ri,hasClass:Pl,addClass:xe,removeClass:Ke,setClass:Cl,getClass:Eo,setOpacity:Gt,testProp:ko,setTransform:Cr,setPosition:Ye,getPosition:Tr,get disableTextSelection(){return is},get enableTextSelection(){return ss},disableImageDrag:Ol,enableImageDrag:jl,preventOutline:Nl,restoreOutline:Co,getSizedParentNode:uh,getScale:Al};function ye(r,o,u,h){if(o&&typeof o=="object")for(var p in o)Il(r,p,o[p],u);else{o=k(o);for(var _=0,T=o.length;_<T;_++)Il(r,o[_],u,h)}return this}var xn="_leaflet_events";function Ie(r,o,u,h){if(arguments.length===1)ch(r),delete r[xn];else if(o&&typeof o=="object")for(var p in o)Ml(r,p,o[p],u);else if(o=k(o),arguments.length===2)ch(r,function(j){return O(o,j)!==-1});else for(var _=0,T=o.length;_<T;_++)Ml(r,o[_],u,h);return this}function ch(r,o){for(var u in r[xn]){var h=u.split(/\d/)[0];(!o||o(h))&&Ml(r,h,null,null,u)}}var Rl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Il(r,o,u,h){var p=o+d(u)+(h?"_"+d(h):"");if(r[xn]&&r[xn][p])return this;var _=function(j){return u.call(h||r,j||window.event)},T=_;!se.touchNative&&se.pointer&&o.indexOf("touch")===0?_=D_(r,o,_):se.touch&&o==="dblclick"?_=V_(r,_):"addEventListener"in r?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?r.addEventListener(Rl[o]||o,_,se.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(_=function(j){j=j||window.event,Dl(r,j)&&T(j)},r.addEventListener(Rl[o],_,!1)):r.addEventListener(o,T,!1):r.attachEvent("on"+o,_),r[xn]=r[xn]||{},r[xn][p]=_}function Ml(r,o,u,h,p){p=p||o+d(u)+(h?"_"+d(h):"");var _=r[xn]&&r[xn][p];if(!_)return this;!se.touchNative&&se.pointer&&o.indexOf("touch")===0?B_(r,o,_):se.touch&&o==="dblclick"?q_(r,_):"removeEventListener"in r?r.removeEventListener(Rl[o]||o,_,!1):r.detachEvent("on"+o,_),r[xn][p]=null}function Or(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function zl(r){return Il(r,"wheel",Or),this}function as(r){return ye(r,"mousedown touchstart dblclick contextmenu",Or),r._leaflet_disable_click=!0,this}function ut(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function jr(r){return ut(r),Or(r),this}function dh(r){if(r.composedPath)return r.composedPath();for(var o=[],u=r.target;u;)o.push(u),u=u.parentNode;return o}function hh(r,o){if(!o)return new M(r.clientX,r.clientY);var u=Al(o),h=u.boundingClientRect;return new M((r.clientX-h.left)/u.x-o.clientLeft,(r.clientY-h.top)/u.y-o.clientTop)}var J_=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function fh(r){return se.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/J_:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Dl(r,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==r;)u=u.parentNode}catch{return!1}return u!==r}var Q_={__proto__:null,on:ye,off:Ie,stopPropagation:Or,disableScrollPropagation:zl,disableClickPropagation:as,preventDefault:ut,stop:jr,getPropagationPath:dh,getMousePosition:hh,getWheelDelta:fh,isExternalTarget:Dl,addListener:ye,removeListener:Ie},ph=Ne.extend({run:function(r,o,u,h){this.stop(),this._el=r,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=Tr(r),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=we(this._animate,this),this._step()},_step:function(r){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),r):(this._runFrame(1),this._complete())},_runFrame:function(r,o){var u=this._startPos.add(this._offset.multiplyBy(r));o&&u._round(),Ye(this._el,u),this.fire("step")},_complete:function(){Y(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Pe=Ne.extend({options:{crs:On,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,o){o=P(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(ue(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ns&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ye(this._proxy,ah,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),r=this._limitCenter(ue(r),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var h=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,o,u.zoom):this._tryAnimatedPan(r,u.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(r,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(r,o){return this._loaded?this.setView(this.getCenter(),r,{zoom:o}):(this._zoom=r,this)},zoomIn:function(r,o){return r=r||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,o)},zoomOut:function(r,o){return r=r||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,o)},setZoomAround:function(r,o,u){var h=this.getZoomScale(o),p=this.getSize().divideBy(2),_=r instanceof M?r:this.latLngToContainerPoint(r),T=_.subtract(p).multiplyBy(1-1/h),j=this.containerPointToLatLng(p.add(T));return this.setView(j,o,{zoom:u})},_getBoundsCenterZoom:function(r,o){o=o||{},r=r.getBounds?r.getBounds():be(r);var u=F(o.paddingTopLeft||o.padding||[0,0]),h=F(o.paddingBottomRight||o.padding||[0,0]),p=this.getBoundsZoom(r,!1,u.add(h));if(p=typeof o.maxZoom=="number"?Math.min(o.maxZoom,p):p,p===1/0)return{center:r.getCenter(),zoom:p};var _=h.subtract(u).divideBy(2),T=this.project(r.getSouthWest(),p),j=this.project(r.getNorthEast(),p),R=this.unproject(T.add(j).divideBy(2).add(_),p);return{center:R,zoom:p}},fitBounds:function(r,o){if(r=be(r),!r.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(r,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,o){return this.setView(r,this._zoom,{pan:o})},panBy:function(r,o){if(r=F(r).round(),o=o||{},!r.x&&!r.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ph,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){xe(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,o,u){if(u=u||{},u.animate===!1||!se.any3d)return this.setView(r,o,u);this._stop();var h=this.project(this.getCenter()),p=this.project(r),_=this.getSize(),T=this._zoom;r=ue(r),o=o===void 0?T:o;var j=Math.max(_.x,_.y),R=j*this.getZoomScale(T,o),U=p.distanceTo(h)||1,K=1.42,he=K*K;function Se(Xe){var Bo=Xe?-1:1,By=Xe?R:j,Uy=R*R-j*j+Bo*he*he*U*U,$y=2*By*he*U,Kl=Uy/$y,Gh=Math.sqrt(Kl*Kl+1)-Kl,Fy=Gh<1e-9?-18:Math.log(Gh);return Fy}function bt(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function ot(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}function Jt(Xe){return bt(Xe)/ot(Xe)}var Nt=Se(0);function ui(Xe){return j*(ot(Nt)/ot(Nt+K*Xe))}function Iy(Xe){return j*(ot(Nt)*Jt(Nt+K*Xe)-bt(Nt))/he}function My(Xe){return 1-Math.pow(1-Xe,1.5)}var zy=Date.now(),Vh=(Se(1)-Nt)/K,Dy=u.duration?1e3*u.duration:1e3*Vh*.8;function qh(){var Xe=(Date.now()-zy)/Dy,Bo=My(Xe)*Vh;Xe<=1?(this._flyToFrame=we(qh,this),this._move(this.unproject(h.add(p.subtract(h).multiplyBy(Iy(Bo)/U)),T),this.getScaleZoom(j/ui(Bo),T),{flyTo:!0})):this._move(r,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),qh.call(this),this},flyToBounds:function(r,o){var u=this._getBoundsCenterZoom(r,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(r){return r=be(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var o=this.options.minZoom;return this.options.minZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var o=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,o){this._enforcingBounds=!0;var u=this.getCenter(),h=this._limitCenter(u,this._zoom,be(r));return u.equals(h)||this.panTo(h,o),this._enforcingBounds=!1,this},panInside:function(r,o){o=o||{};var u=F(o.paddingTopLeft||o.padding||[0,0]),h=F(o.paddingBottomRight||o.padding||[0,0]),p=this.project(this.getCenter()),_=this.project(r),T=this.getPixelBounds(),j=ve([T.min.add(u),T.max.subtract(h)]),R=j.getSize();if(!j.contains(_)){this._enforcingBounds=!0;var U=_.subtract(j.getCenter()),K=j.extend(_).getSize().subtract(R);p.x+=U.x<0?-K.x:K.x,p.y+=U.y<0?-K.y:K.y,this.panTo(this.unproject(p),o),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),h=o.divideBy(2).round(),p=u.divideBy(2).round(),_=h.subtract(p);return!_.x&&!_.y?this:(r.animate&&r.pan?this.panBy(_):(r.pan&&this._rawPanBy(_),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),u=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,r):navigator.geolocation.getCurrentPosition(o,u,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var o=r.code,u=r.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var o=r.coords.latitude,u=r.coords.longitude,h=new _e(o,u),p=h.toBounds(r.coords.accuracy*2),_=this._locateOptions;if(_.setView){var T=this.getBoundsZoom(p);this.setView(h,_.maxZoom?Math.min(T,_.maxZoom):T)}var j={latlng:h,bounds:p,timestamp:r.timestamp};for(var R in r.coords)typeof r.coords[R]=="number"&&(j[R]=r.coords[R]);this.fire("locationfound",j)}},addHandler:function(r,o){if(!o)return this;var u=this[r]=new o(this);return this._handlers.push(u),this.options[r]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Fe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Y(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Fe(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,o){var u="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),h=Te("div",u,o||this._mapPane);return r&&(this._panes[r]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),o=this.unproject(r.getBottomLeft()),u=this.unproject(r.getTopRight());return new Ae(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,o,u){r=be(r),u=F(u||[0,0]);var h=this.getZoom()||0,p=this.getMinZoom(),_=this.getMaxZoom(),T=r.getNorthWest(),j=r.getSouthEast(),R=this.getSize().subtract(u),U=ve(this.project(j,h),this.project(T,h)).getSize(),K=se.any3d?this.options.zoomSnap:1,he=R.x/U.x,Se=R.y/U.y,bt=o?Math.max(he,Se):Math.min(he,Se);return h=this.getScaleZoom(bt,h),K&&(h=Math.round(h/(K/100))*(K/100),h=o?Math.ceil(h/K)*K:Math.floor(h/K)*K),Math.max(p,Math.min(_,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,o){var u=this._getTopLeftPoint(r,o);return new te(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(r)/u.scale(o)},getScaleZoom:function(r,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var h=u.zoom(r*u.scale(o));return isNaN(h)?1/0:h},project:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(ue(r),o)},unproject:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(F(r),o)},layerPointToLatLng:function(r){var o=F(r).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(r){var o=this.project(ue(r))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(ue(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(be(r))},distance:function(r,o){return this.options.crs.distance(ue(r),ue(o))},containerPointToLayerPoint:function(r){return F(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return F(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var o=this.containerPointToLayerPoint(F(r));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(r)))},mouseEventToContainerPoint:function(r){return hh(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var o=this._container=lh(r);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ye(o,"scroll",this._onScroll,this),this._containerId=d(o)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,xe(r,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=rs(r,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ye(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(r.markerPane,"leaflet-zoom-hide"),xe(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,o,u){Ye(this._mapPane,new M(0,0));var h=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var p=this._zoom!==o;this._moveStart(p,u)._move(r,o)._moveEnd(p),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(r,o){return r&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(r,o,u,h){o===void 0&&(o=this._zoom);var p=this._zoom!==o;return this._zoom=o,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),h?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Y(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Ye(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var o=r?Ie:ye;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Y(this._resizeRequest),this._resizeRequest=we(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,o){for(var u=[],h,p=o==="mouseout"||o==="mouseover",_=r.target||r.srcElement,T=!1;_;){if(h=this._targets[d(_)],h&&(o==="click"||o==="preclick")&&this._draggableMoved(h)){T=!0;break}if(h&&h.listens(o,!0)&&(p&&!Dl(_,r)||(u.push(h),p))||_===this._container)break;_=_.parentNode}return!u.length&&!T&&!p&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var o=r.target||r.srcElement;if(!(!this._loaded||o._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(o))){var u=r.type;u==="mousedown"&&Nl(o),this._fireDOMEvent(r,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,o,u){if(r.type==="click"){var h=s({},r);h.type="preclick",this._fireDOMEvent(h,h.type,u)}var p=this._findEventTargets(r,o);if(u){for(var _=[],T=0;T<u.length;T++)u[T].listens(o,!0)&&_.push(u[T]);p=_.concat(p)}if(p.length){o==="contextmenu"&&ut(r);var j=p[0],R={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var U=j.getLatLng&&(!j._radius||j._radius<=10);R.containerPoint=U?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(r),R.layerPoint=this.containerPointToLayerPoint(R.containerPoint),R.latlng=U?j.getLatLng():this.layerPointToLatLng(R.layerPoint)}for(T=0;T<p.length;T++)if(p[T].fire(o,R,!0),R.originalEvent._stopped||p[T].options.bubblingMouseEvents===!1&&O(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,o=this._handlers.length;r<o;r++)this._handlers[r].disable()},whenReady:function(r,o){return this._loaded?r.call(o||this,{target:this}):this.on("load",r,o),this},_getMapPanePos:function(){return Tr(this._mapPane)||new M(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,o){var u=r&&o!==void 0?this._getNewPixelOrigin(r,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,o){var u=this.getSize()._divideBy(2);return this.project(r,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,o,u){var h=this._getNewPixelOrigin(u,o);return this.project(r,o)._subtract(h)},_latLngBoundsToNewLayerBounds:function(r,o,u){var h=this._getNewPixelOrigin(u,o);return ve([this.project(r.getSouthWest(),o)._subtract(h),this.project(r.getNorthWest(),o)._subtract(h),this.project(r.getSouthEast(),o)._subtract(h),this.project(r.getNorthEast(),o)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,o,u){if(!u)return r;var h=this.project(r,o),p=this.getSize().divideBy(2),_=new te(h.subtract(p),h.add(p)),T=this._getBoundsOffset(_,u,o);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?r:this.unproject(h.add(T),o)},_limitOffset:function(r,o){if(!o)return r;var u=this.getPixelBounds(),h=new te(u.min.add(r),u.max.add(r));return r.add(this._getBoundsOffset(h,o))},_getBoundsOffset:function(r,o,u){var h=ve(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),p=h.min.subtract(r.min),_=h.max.subtract(r.max),T=this._rebound(p.x,-_.x),j=this._rebound(p.y,-_.y);return new M(T,j)},_rebound:function(r,o){return r+o>0?Math.round(r-o)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(o))},_limitZoom:function(r){var o=this.getMinZoom(),u=this.getMaxZoom(),h=se.any3d?this.options.zoomSnap:1;return h&&(r=Math.round(r/h)*h),Math.max(o,Math.min(u,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ke(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,o){var u=this._getCenterOffset(r)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var r=this._proxy=Te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(o){var u=kl,h=this._proxy.style[u];Cr(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),h===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Fe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),o=this.getZoom();Cr(this._proxy,this.project(r,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(o),p=this._getCenterOffset(r)._divideBy(1-1/h);return u.animate!==!0&&!this.getSize().contains(p)?!1:(we(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(r,o,!0)},this),!0)},_animateZoom:function(r,o,u,h){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=o,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:o,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ke(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Y_(r,o){return new Pe(r,o)}var on=Z.extend({options:{position:"topright"},initialize:function(r){P(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var o=this._map;return o&&o.removeControl(this),this.options.position=r,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var o=this._container=this.onAdd(r),u=this.getPosition(),h=r._controlCorners[u];return xe(o,"leaflet-control"),u.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Fe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),ls=function(r){return new on(r)};Pe.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},o="leaflet-",u=this._controlContainer=Te("div",o+"control-container",this._container);function h(p,_){var T=o+p+" "+o+_;r[p+_]=Te("div",T,u)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Fe(this._controlCorners[r]);Fe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var mh=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,o,u,h){return u<h?-1:h<u?1:0}},initialize:function(r,o,u){P(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in r)this._addLayer(r[h],h);for(h in o)this._addLayer(o[h],h,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return on.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,o){return this._addLayer(r,o),this._map?this._update():this},addOverlay:function(r,o){return this._addLayer(r,o,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var o=this._getLayer(d(r));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Ke(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ke(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",o=this._container=Te("div",r),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),as(o),zl(o);var h=this._section=Te("section",r+"-list");u&&(this._map.on("click",this.collapse,this),ye(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=Te("a",r+"-toggle",o);p.href="#",p.title="Layers",p.setAttribute("role","button"),ye(p,{keydown:function(_){_.keyCode===13&&this._expandSafely()},click:function(_){ut(_),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=Te("div",r+"-base",h),this._separator=Te("div",r+"-separator",h),this._overlaysList=Te("div",r+"-overlays",h),o.appendChild(h)},_getLayer:function(r){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&d(this._layers[o].layer)===r)return this._layers[o]},_addLayer:function(r,o,u){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(l(function(h,p){return this.options.sortFunction(h.layer,p.layer,h.name,p.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;So(this._baseLayersList),So(this._overlaysList),this._layerControlInputs=[];var r,o,u,h,p=0;for(u=0;u<this._layers.length;u++)h=this._layers[u],this._addItem(h),o=o||h.overlay,r=r||!h.overlay,p+=h.overlay?0:1;return this.options.hideSingleBase&&(r=r&&p>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=o&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var o=this._getLayer(d(r.target)),u=o.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(r,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(o?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=u,h.firstChild},_addItem:function(r){var o=document.createElement("label"),u=this._map.hasLayer(r.layer),h;r.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=u):h=this._createRadioElement("leaflet-base-layers_"+d(this),u),this._layerControlInputs.push(h),h.layerId=d(r.layer),ye(h,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+r.name;var _=document.createElement("span");o.appendChild(_),_.appendChild(h),_.appendChild(p);var T=r.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,o,u,h=[],p=[];this._handlingClick=!0;for(var _=r.length-1;_>=0;_--)o=r[_],u=this._getLayer(o.layerId).layer,o.checked?h.push(u):o.checked||p.push(u);for(_=0;_<p.length;_++)this._map.hasLayer(p[_])&&this._map.removeLayer(p[_]);for(_=0;_<h.length;_++)this._map.hasLayer(h[_])||this._map.addLayer(h[_]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,o,u,h=this._map.getZoom(),p=r.length-1;p>=0;p--)o=r[p],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&h<u.options.minZoom||u.options.maxZoom!==void 0&&h>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ye(r,"click",ut),this.expand();var o=this;setTimeout(function(){Ie(r,"click",ut),o._preventClick=!1})}}),X_=function(r,o,u){return new mh(r,o,u)},Bl=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var o="leaflet-control-zoom",u=Te("div",o+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,o,u,h,p){var _=Te("a",u,h);return _.innerHTML=r,_.href="#",_.title=o,_.setAttribute("role","button"),_.setAttribute("aria-label",o),as(_),ye(_,"click",jr),ye(_,"click",p,this),ye(_,"click",this._refocusOnMap,this),_},_updateDisabled:function(){var r=this._map,o="leaflet-disabled";Ke(this._zoomInButton,o),Ke(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(xe(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(xe(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Pe.mergeOptions({zoomControl:!0}),Pe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bl,this.addControl(this.zoomControl))});var ey=function(r){return new Bl(r)},gh=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var o="leaflet-control-scale",u=Te("div",o),h=this.options;return this._addScales(h,o+"-line",u),r.on(h.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),u},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,o,u){r.metric&&(this._mScale=Te("div",o,u)),r.imperial&&(this._iScale=Te("div",o,u))},_update:function(){var r=this._map,o=r.getSize().y/2,u=r.distance(r.containerPointToLatLng([0,o]),r.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var o=this._getRoundNum(r),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/r)},_updateImperial:function(r){var o=r*3.2808399,u,h,p;o>5280?(u=o/5280,h=this._getRoundNum(u),this._updateScale(this._iScale,h+" mi",h/u)):(p=this._getRoundNum(o),this._updateScale(this._iScale,p+" ft",p/o))},_updateScale:function(r,o,u){r.style.width=Math.round(this.options.maxWidth*u)+"px",r.innerHTML=o},_getRoundNum:function(r){var o=Math.pow(10,(Math.floor(r)+"").length-1),u=r/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),ty=function(r){return new gh(r)},ny='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ul=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?ny+" ":"")+"Leaflet</a>"},initialize:function(r){P(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Te("div","leaflet-control-attribution"),as(this._container);for(var o in r._layers)r._layers[o].getAttribution&&this.addAttribution(r._layers[o].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var o in this._attributions)this._attributions[o]&&r.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),r.length&&u.push(r.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});Pe.mergeOptions({attributionControl:!0}),Pe.addInitHook(function(){this.options.attributionControl&&new Ul().addTo(this)});var ry=function(r){return new Ul(r)};on.Layers=mh,on.Zoom=Bl,on.Scale=gh,on.Attribution=Ul,ls.layers=X_,ls.zoom=ey,ls.scale=ty,ls.attribution=ry;var bn=Z.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bn.addTo=function(r,o){return r.addHandler(o,this),this};var iy={Events:ee},vh=se.touch?"touchstart mousedown":"mousedown",Jn=Ne.extend({options:{clickTolerance:3},initialize:function(r,o,u,h){P(this,h),this._element=r,this._dragStartTarget=o||r,this._preventOutline=u},enable:function(){this._enabled||(ye(this._dragStartTarget,vh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Jn._dragging===this&&this.finishDrag(!0),Ie(this._dragStartTarget,vh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Pl(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Jn._dragging===this&&this.finishDrag();return}if(!(Jn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Jn._dragging=this,this._preventOutline&&Nl(this._element),Ol(),is(),!this._moving)){this.fire("down");var o=r.touches?r.touches[0]:r,u=uh(this._element);this._startPoint=new M(o.clientX,o.clientY),this._startPos=Tr(this._element),this._parentScale=Al(u);var h=r.type==="mousedown";ye(document,h?"mousemove":"touchmove",this._onMove,this),ye(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var o=r.touches&&r.touches.length===1?r.touches[0]:r,u=new M(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,ut(r),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Ye(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Ke(document.body,"leaflet-dragging"),this._lastTarget&&(Ke(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ie(document,"mousemove touchmove",this._onMove,this),Ie(document,"mouseup touchend touchcancel",this._onUp,this),jl(),ss();var o=this._moved&&this._moving;this._moving=!1,Jn._dragging=!1,o&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function _h(r,o,u){var h,p=[1,4,2,8],_,T,j,R,U,K,he,Se;for(_=0,K=r.length;_<K;_++)r[_]._code=Lr(r[_],o);for(j=0;j<4;j++){for(he=p[j],h=[],_=0,K=r.length,T=K-1;_<K;T=_++)R=r[_],U=r[T],R._code&he?U._code&he||(Se=To(U,R,he,o,u),Se._code=Lr(Se,o),h.push(Se)):(U._code&he&&(Se=To(U,R,he,o,u),Se._code=Lr(Se,o),h.push(Se)),h.push(R));r=h}return r}function yh(r,o){var u,h,p,_,T,j,R,U,K;if(!r||r.length===0)throw new Error("latlngs not passed");Kt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var he=ue([0,0]),Se=be(r),bt=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());bt<1700&&(he=$l(r));var ot=r.length,Jt=[];for(u=0;u<ot;u++){var Nt=ue(r[u]);Jt.push(o.project(ue([Nt.lat-he.lat,Nt.lng-he.lng])))}for(j=R=U=0,u=0,h=ot-1;u<ot;h=u++)p=Jt[u],_=Jt[h],T=p.y*_.x-_.y*p.x,R+=(p.x+_.x)*T,U+=(p.y+_.y)*T,j+=T*3;j===0?K=Jt[0]:K=[R/j,U/j];var ui=o.unproject(F(K));return ue([ui.lat+he.lat,ui.lng+he.lng])}function $l(r){for(var o=0,u=0,h=0,p=0;p<r.length;p++){var _=ue(r[p]);o+=_.lat,u+=_.lng,h++}return ue([o/h,u/h])}var sy={__proto__:null,clipPolygon:_h,polygonCenter:yh,centroid:$l};function wh(r,o){if(!o||!r.length)return r.slice();var u=o*o;return r=ly(r,u),r=ay(r,u),r}function xh(r,o,u){return Math.sqrt(us(r,o,u,!0))}function oy(r,o,u){return us(r,o,u)}function ay(r,o){var u=r.length,h=typeof Uint8Array<"u"?Uint8Array:Array,p=new h(u);p[0]=p[u-1]=1,Fl(r,p,o,0,u-1);var _,T=[];for(_=0;_<u;_++)p[_]&&T.push(r[_]);return T}function Fl(r,o,u,h,p){var _=0,T,j,R;for(j=h+1;j<=p-1;j++)R=us(r[j],r[h],r[p],!0),R>_&&(T=j,_=R);_>u&&(o[T]=1,Fl(r,o,u,h,T),Fl(r,o,u,T,p))}function ly(r,o){for(var u=[r[0]],h=1,p=0,_=r.length;h<_;h++)uy(r[h],r[p])>o&&(u.push(r[h]),p=h);return p<_-1&&u.push(r[_-1]),u}var bh;function Sh(r,o,u,h,p){var _=h?bh:Lr(r,u),T=Lr(o,u),j,R,U;for(bh=T;;){if(!(_|T))return[r,o];if(_&T)return!1;j=_||T,R=To(r,o,j,u,p),U=Lr(R,u),j===_?(r=R,_=U):(o=R,T=U)}}function To(r,o,u,h,p){var _=o.x-r.x,T=o.y-r.y,j=h.min,R=h.max,U,K;return u&8?(U=r.x+_*(R.y-r.y)/T,K=R.y):u&4?(U=r.x+_*(j.y-r.y)/T,K=j.y):u&2?(U=R.x,K=r.y+T*(R.x-r.x)/_):u&1&&(U=j.x,K=r.y+T*(j.x-r.x)/_),new M(U,K,p)}function Lr(r,o){var u=0;return r.x<o.min.x?u|=1:r.x>o.max.x&&(u|=2),r.y<o.min.y?u|=4:r.y>o.max.y&&(u|=8),u}function uy(r,o){var u=o.x-r.x,h=o.y-r.y;return u*u+h*h}function us(r,o,u,h){var p=o.x,_=o.y,T=u.x-p,j=u.y-_,R=T*T+j*j,U;return R>0&&(U=((r.x-p)*T+(r.y-_)*j)/R,U>1?(p=u.x,_=u.y):U>0&&(p+=T*U,_+=j*U)),T=r.x-p,j=r.y-_,h?T*T+j*j:new M(p,_)}function Kt(r){return!b(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Eh(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Kt(r)}function kh(r,o){var u,h,p,_,T,j,R,U;if(!r||r.length===0)throw new Error("latlngs not passed");Kt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var K=ue([0,0]),he=be(r),Se=he.getNorthWest().distanceTo(he.getSouthWest())*he.getNorthEast().distanceTo(he.getNorthWest());Se<1700&&(K=$l(r));var bt=r.length,ot=[];for(u=0;u<bt;u++){var Jt=ue(r[u]);ot.push(o.project(ue([Jt.lat-K.lat,Jt.lng-K.lng])))}for(u=0,h=0;u<bt-1;u++)h+=ot[u].distanceTo(ot[u+1])/2;if(h===0)U=ot[0];else for(u=0,_=0;u<bt-1;u++)if(T=ot[u],j=ot[u+1],p=T.distanceTo(j),_+=p,_>h){R=(_-h)/p,U=[j.x-R*(j.x-T.x),j.y-R*(j.y-T.y)];break}var Nt=o.unproject(F(U));return ue([Nt.lat+K.lat,Nt.lng+K.lng])}var cy={__proto__:null,simplify:wh,pointToSegmentDistance:xh,closestPointOnSegment:oy,clipSegment:Sh,_getEdgeIntersection:To,_getBitCode:Lr,_sqClosestPointOnSegment:us,isFlat:Kt,_flat:Eh,polylineCenter:kh},Wl={project:function(r){return new M(r.lng,r.lat)},unproject:function(r){return new _e(r.y,r.x)},bounds:new te([-180,-90],[180,90])},Hl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var o=Math.PI/180,u=this.R,h=r.lat*o,p=this.R_MINOR/u,_=Math.sqrt(1-p*p),T=_*Math.sin(h),j=Math.tan(Math.PI/4-h/2)/Math.pow((1-T)/(1+T),_/2);return h=-u*Math.log(Math.max(j,1e-10)),new M(r.lng*o*u,h)},unproject:function(r){for(var o=180/Math.PI,u=this.R,h=this.R_MINOR/u,p=Math.sqrt(1-h*h),_=Math.exp(-r.y/u),T=Math.PI/2-2*Math.atan(_),j=0,R=.1,U;j<15&&Math.abs(R)>1e-7;j++)U=p*Math.sin(T),U=Math.pow((1-U)/(1+U),p/2),R=Math.PI/2-2*Math.atan(_*U)-T,T+=R;return new _e(T*o,r.x*o/u)}},dy={__proto__:null,LonLat:Wl,Mercator:Hl,SphericalMercator:yn},hy=s({},jt,{code:"EPSG:3395",projection:Hl,transformation:function(){var r=.5/(Math.PI*Hl.R);return Lt(r,.5,-r,.5)}()}),Ph=s({},jt,{code:"EPSG:4326",projection:Wl,transformation:Lt(1/180,1,-1/180,.5)}),fy=s({},qe,{projection:Wl,transformation:Lt(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,o){var u=o.lng-r.lng,h=o.lat-r.lat;return Math.sqrt(u*u+h*h)},infinite:!0});qe.Earth=jt,qe.EPSG3395=hy,qe.EPSG3857=On,qe.EPSG900913=q,qe.EPSG4326=Ph,qe.Simple=fy;var an=Ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var o=r.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Pe.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var o=d(r);return this._layers[o]?this:(this._layers[o]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var o=d(r);return this._layers[o]?(this._loaded&&r.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},_addLayers:function(r){r=r?b(r)?r:[r]:[];for(var o=0,u=r.length;o<u;o++)this.addLayer(r[o])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var o=d(r);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,o=-1/0,u=this._getZoomSpan();for(var h in this._zoomBoundLayers){var p=this._zoomBoundLayers[h].options;r=p.minZoom===void 0?r:Math.min(r,p.minZoom),o=p.maxZoom===void 0?o:Math.max(o,p.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=r===1/0?void 0:r,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ii=an.extend({initialize:function(r,o){P(this,o),this._layers={};var u,h;if(r)for(u=0,h=r.length;u<h;u++)this.addLayer(r[u])},addLayer:function(r){var o=this.getLayerId(r);return this._layers[o]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var o=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(r){var o=typeof r=="number"?r:this.getLayerId(r);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var o=Array.prototype.slice.call(arguments,1),u,h;for(u in this._layers)h=this._layers[u],h[r]&&h[r].apply(h,o);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),py=function(r,o){return new ii(r,o)},Nn=ii.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),ii.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),ii.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ae;for(var o in this._layers){var u=this._layers[o];r.extend(u.getBounds?u.getBounds():u.getLatLng())}return r}}),my=function(r,o){return new Nn(r,o)},si=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){P(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,o){var u=this._getIconUrl(r);if(!u){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(h,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(r,o){var u=this.options,h=u[o+"Size"];typeof h=="number"&&(h=[h,h]);var p=F(h),_=F(o==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));r.className="leaflet-marker-"+o+" "+(u.className||""),_&&(r.style.marginLeft=-_.x+"px",r.style.marginTop=-_.y+"px"),p&&(r.style.width=p.x+"px",r.style.height=p.y+"px")},_createImg:function(r,o){return o=o||document.createElement("img"),o.src=r,o},_getIconUrl:function(r){return se.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function gy(r){return new si(r)}var cs=si.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof cs.imagePath!="string"&&(cs.imagePath=this._detectIconPath()),(this.options.imagePath||cs.imagePath)+si.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var o=function(u,h,p){var _=h.exec(u);return _&&_[p]};return r=o(r,/^url\((['"])?(.+)\1\)$/,2),r&&o(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Te("div","leaflet-default-icon-path",document.body),o=rs(r,"background-image")||rs(r,"backgroundImage");if(document.body.removeChild(r),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Ch=bn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Jn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ke(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var o=this._marker,u=o._map,h=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,_=Tr(o._icon),T=u.getPixelBounds(),j=u.getPixelOrigin(),R=ve(T.min._subtract(j).add(p),T.max._subtract(j).subtract(p));if(!R.contains(_)){var U=F((Math.max(R.max.x,_.x)-R.max.x)/(T.max.x-R.max.x)-(Math.min(R.min.x,_.x)-R.min.x)/(T.min.x-R.min.x),(Math.max(R.max.y,_.y)-R.max.y)/(T.max.y-R.max.y)-(Math.min(R.min.y,_.y)-R.min.y)/(T.min.y-R.min.y)).multiplyBy(h);u.panBy(U,{animate:!1}),this._draggable._newPos._add(U),this._draggable._startPos._add(U),Ye(o._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=we(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(Y(this._panRequest),this._panRequest=we(this._adjustPan.bind(this,r)))},_onDrag:function(r){var o=this._marker,u=o._shadow,h=Tr(o._icon),p=o._map.layerPointToLatLng(h);u&&Ye(u,h),o._latlng=p,r.latlng=p,r.oldLatLng=this._oldLatLng,o.fire("move",r).fire("drag",r)},_onDragEnd:function(r){Y(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Oo=an.extend({options:{icon:new cs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,o){P(this,o),this._latlng=ue(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var o=this._latlng;return this._latlng=ue(r),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=r.icon.createIcon(this._icon),h=!1;u!==this._icon&&(this._icon&&this._removeIcon(),h=!0,r.title&&(u.title=r.title),u.tagName==="IMG"&&(u.alt=r.alt||"")),xe(u,o),r.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(u,"focus",this._panOnFocus,this);var p=r.icon.createShadow(this._shadow),_=!1;p!==this._shadow&&(this._removeShadow(),_=!0),p&&(xe(p,o),p.alt=""),this._shadow=p,r.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&_&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(this._icon,"focus",this._panOnFocus,this),Fe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Fe(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Ye(this._icon,r),this._shadow&&Ye(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ch)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ch(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Gt(this._icon,r),this._shadow&&Gt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var o=this.options.icon.options,u=o.iconSize?F(o.iconSize):F(0,0),h=o.iconAnchor?F(o.iconAnchor):F(0,0);r.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:u.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vy(r,o){return new Oo(r,o)}var Qn=an.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return P(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),jo=Qn.extend({options:{fill:!0,radius:10},initialize:function(r,o){P(this,o),this._latlng=ue(r),this._radius=this.options.radius},setLatLng:function(r){var o=this._latlng;return this._latlng=ue(r),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var o=r&&r.radius||this._radius;return Qn.prototype.setStyle.call(this,r),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,o=this._radiusY||r,u=this._clickTolerance(),h=[r+u,o+u];this._pxBounds=new te(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function _y(r,o){return new jo(r,o)}var Zl=jo.extend({initialize:function(r,o,u){if(typeof o=="number"&&(o=s({},u,{radius:o})),P(this,o),this._latlng=ue(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ae(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Qn.prototype.setStyle,_project:function(){var r=this._latlng.lng,o=this._latlng.lat,u=this._map,h=u.options.crs;if(h.distance===jt.distance){var p=Math.PI/180,_=this._mRadius/jt.R/p,T=u.project([o+_,r]),j=u.project([o-_,r]),R=T.add(j).divideBy(2),U=u.unproject(R).lat,K=Math.acos((Math.cos(_*p)-Math.sin(o*p)*Math.sin(U*p))/(Math.cos(o*p)*Math.cos(U*p)))/p;(isNaN(K)||K===0)&&(K=_/Math.cos(Math.PI/180*o)),this._point=R.subtract(u.getPixelOrigin()),this._radius=isNaN(K)?0:R.x-u.project([U,r-K]).x,this._radiusY=R.y-T.y}else{var he=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(he).x}this._updateBounds()}});function yy(r,o,u){return new Zl(r,o,u)}var An=Qn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,o){P(this,o),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var o=1/0,u=null,h=us,p,_,T=0,j=this._parts.length;T<j;T++)for(var R=this._parts[T],U=1,K=R.length;U<K;U++){p=R[U-1],_=R[U];var he=h(r,p,_,!0);he<o&&(o=he,u=h(r,p,_))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,o){return o=o||this._defaultShape(),r=ue(r),o.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ae,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Kt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var o=[],u=Kt(r),h=0,p=r.length;h<p;h++)u?(o[h]=ue(r[h]),this._bounds.extend(o[h])):o[h]=this._convertLatLngs(r[h]);return o},_project:function(){var r=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),o=new M(r,r);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(r,o,u){var h=r[0]instanceof _e,p=r.length,_,T;if(h){for(T=[],_=0;_<p;_++)T[_]=this._map.latLngToLayerPoint(r[_]),u.extend(T[_]);o.push(T)}else for(_=0;_<p;_++)this._projectLatlngs(r[_],o,u)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,h,p,_,T,j,R;for(u=0,p=0,_=this._rings.length;u<_;u++)for(R=this._rings[u],h=0,T=R.length;h<T-1;h++)j=Sh(R[h],R[h+1],r,h,!0),j&&(o[p]=o[p]||[],o[p].push(j[0]),(j[1]!==R[h+1]||h===T-2)&&(o[p].push(j[1]),p++))}},_simplifyPoints:function(){for(var r=this._parts,o=this.options.smoothFactor,u=0,h=r.length;u<h;u++)r[u]=wh(r[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,o){var u,h,p,_,T,j,R=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(u=0,_=this._parts.length;u<_;u++)for(j=this._parts[u],h=0,T=j.length,p=T-1;h<T;p=h++)if(!(!o&&h===0)&&xh(r,j[p],j[h])<=R)return!0;return!1}});function wy(r,o){return new An(r,o)}An._flat=Eh;var oi=An.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var o=An.prototype._convertLatLngs.call(this,r),u=o.length;return u>=2&&o[0]instanceof _e&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(r){An.prototype._setLatLngs.call(this,r),Kt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Kt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,o=this.options.weight,u=new M(o,o);if(r=new te(r.min.subtract(u),r.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,p=this._rings.length,_;h<p;h++)_=_h(this._rings[h],r,!0),_.length&&this._parts.push(_)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var o=!1,u,h,p,_,T,j,R,U;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(_=0,R=this._parts.length;_<R;_++)for(u=this._parts[_],T=0,U=u.length,j=U-1;T<U;j=T++)h=u[T],p=u[j],h.y>r.y!=p.y>r.y&&r.x<(p.x-h.x)*(r.y-h.y)/(p.y-h.y)+h.x&&(o=!o);return o||An.prototype._containsPoint.call(this,r,!0)}});function xy(r,o){return new oi(r,o)}var Rn=Nn.extend({initialize:function(r,o){P(this,o),this._layers={},r&&this.addData(r)},addData:function(r){var o=b(r)?r:r.features,u,h,p;if(o){for(u=0,h=o.length;u<h;u++)p=o[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var _=this.options;if(_.filter&&!_.filter(r))return this;var T=Lo(r,_);return T?(T.feature=Ro(r),T.defaultOptions=T.options,this.resetStyle(T),_.onEachFeature&&_.onEachFeature(r,T),this.addLayer(T)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(o){this._setLayerStyle(o,r)},this)},_setLayerStyle:function(r,o){r.setStyle&&(typeof o=="function"&&(o=o(r.feature)),r.setStyle(o))}});function Lo(r,o){var u=r.type==="Feature"?r.geometry:r,h=u?u.coordinates:null,p=[],_=o&&o.pointToLayer,T=o&&o.coordsToLatLng||Vl,j,R,U,K;if(!h&&!u)return null;switch(u.type){case"Point":return j=T(h),Th(_,r,j,o);case"MultiPoint":for(U=0,K=h.length;U<K;U++)j=T(h[U]),p.push(Th(_,r,j,o));return new Nn(p);case"LineString":case"MultiLineString":return R=No(h,u.type==="LineString"?0:1,T),new An(R,o);case"Polygon":case"MultiPolygon":return R=No(h,u.type==="Polygon"?1:2,T),new oi(R,o);case"GeometryCollection":for(U=0,K=u.geometries.length;U<K;U++){var he=Lo({geometry:u.geometries[U],type:"Feature",properties:r.properties},o);he&&p.push(he)}return new Nn(p);case"FeatureCollection":for(U=0,K=u.features.length;U<K;U++){var Se=Lo(u.features[U],o);Se&&p.push(Se)}return new Nn(p);default:throw new Error("Invalid GeoJSON object.")}}function Th(r,o,u,h){return r?r(o,u):new Oo(u,h&&h.markersInheritOptions&&h)}function Vl(r){return new _e(r[1],r[0],r[2])}function No(r,o,u){for(var h=[],p=0,_=r.length,T;p<_;p++)T=o?No(r[p],o-1,u):(u||Vl)(r[p]),h.push(T);return h}function ql(r,o){return r=ue(r),r.alt!==void 0?[y(r.lng,o),y(r.lat,o),y(r.alt,o)]:[y(r.lng,o),y(r.lat,o)]}function Ao(r,o,u,h){for(var p=[],_=0,T=r.length;_<T;_++)p.push(o?Ao(r[_],Kt(r[_])?0:o-1,u,h):ql(r[_],h));return!o&&u&&p.length>0&&p.push(p[0].slice()),p}function ai(r,o){return r.feature?s({},r.feature,{geometry:o}):Ro(o)}function Ro(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Gl={toGeoJSON:function(r){return ai(this,{type:"Point",coordinates:ql(this.getLatLng(),r)})}};Oo.include(Gl),Zl.include(Gl),jo.include(Gl),An.include({toGeoJSON:function(r){var o=!Kt(this._latlngs),u=Ao(this._latlngs,o?1:0,!1,r);return ai(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),oi.include({toGeoJSON:function(r){var o=!Kt(this._latlngs),u=o&&!Kt(this._latlngs[0]),h=Ao(this._latlngs,u?2:o?1:0,!0,r);return o||(h=[h]),ai(this,{type:(u?"Multi":"")+"Polygon",coordinates:h})}}),ii.include({toMultiPoint:function(r){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(r).geometry.coordinates)}),ai(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(r){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(r);var u=o==="GeometryCollection",h=[];return this.eachLayer(function(p){if(p.toGeoJSON){var _=p.toGeoJSON(r);if(u)h.push(_.geometry);else{var T=Ro(_);T.type==="FeatureCollection"?h.push.apply(h,T.features):h.push(T)}}}),u?ai(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function Oh(r,o){return new Rn(r,o)}var by=Oh,Io=an.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,o,u){this._url=r,this._bounds=be(o),P(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Fe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&ni(this._image),this},bringToBack:function(){return this._map&&ri(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=be(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",o=this._image=r?this._url:Te("img");if(xe(o,"leaflet-image-layer"),this._zoomAnimated&&xe(o,"leaflet-zoom-animated"),this.options.className&&xe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(r){var o=this._map.getZoomScale(r.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Cr(this._image,u,o)},_reset:function(){var r=this._image,o=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();Ye(r,o.min),r.style.width=u.x+"px",r.style.height=u.y+"px"},_updateOpacity:function(){Gt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),Sy=function(r,o,u){return new Io(r,o,u)},jh=Io.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",o=this._image=r?this._url:Te("video");if(xe(o,"leaflet-image-layer"),this._zoomAnimated&&xe(o,"leaflet-zoom-animated"),this.options.className&&xe(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onloadeddata=l(this.fire,this,"load"),r){for(var u=o.getElementsByTagName("source"),h=[],p=0;p<u.length;p++)h.push(u[p].src);this._url=u.length>0?h:[o.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var _=0;_<this._url.length;_++){var T=Te("source");T.src=this._url[_],o.appendChild(T)}}});function Ey(r,o,u){return new jh(r,o,u)}var Lh=Io.extend({_initImage:function(){var r=this._image=this._url;xe(r,"leaflet-image-layer"),this._zoomAnimated&&xe(r,"leaflet-zoom-animated"),this.options.className&&xe(r,this.options.className),r.onselectstart=v,r.onmousemove=v}});function ky(r,o,u){return new Lh(r,o,u)}var Sn=an.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,o){r&&(r instanceof _e||b(r))?(this._latlng=ue(r),P(this,o)):(P(this,r),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Gt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Gt(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Gt(this._container,0),this._removeTimeout=setTimeout(l(Fe,void 0,this._container),200)):Fe(this._container),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=ue(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ni(this._container),this},bringToBack:function(){return this._map&&ri(this._container),this},_prepareOpen:function(r){var o=this._source;if(!o._map)return!1;if(o instanceof Nn){o=null;var u=this._source._layers;for(var h in u)if(u[h]._map){o=u[h];break}if(!o)return!1;this._source=o}if(!r)if(o.getCenter)r=o.getCenter();else if(o.getLatLng)r=o.getLatLng();else if(o.getBounds)r=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")r.innerHTML=o;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),o=F(this.options.offset),u=this._getAnchor();this._zoomAnimated?Ye(this._container,r.add(u)):o=o.add(r).add(u);var h=this._containerBottom=-o.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=h+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});Pe.include({_initOverlay:function(r,o,u,h){var p=o;return p instanceof r||(p=new r(h).setContent(o)),u&&p.setLatLng(u),p}}),an.include({_initOverlay:function(r,o,u,h){var p=u;return p instanceof r?(P(p,h),p._source=this):(p=o&&!h?o:new r(h,this),p.setContent(u)),p}});var Mo=Sn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Sn.prototype.openOn.call(this,r)},onAdd:function(r){Sn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qn||this._source.on("preclick",Or))},onRemove:function(r){Sn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qn||this._source.off("preclick",Or))},getEvents:function(){var r=Sn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",o=this._container=Te("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=Te("div",r+"-content-wrapper",o);if(this._contentNode=Te("div",r+"-content",u),as(o),zl(this._contentNode),ye(o,"contextmenu",Or),this._tipContainer=Te("div",r+"-tip-container",o),this._tip=Te("div",r+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=Te("a",r+"-close-button",o);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',ye(h,"click",function(p){ut(p),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,o=r.style;o.width="",o.whiteSpace="nowrap";var u=r.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var h=r.offsetHeight,p=this.options.maxHeight,_="leaflet-popup-scrolled";p&&h>p?(o.height=p+"px",xe(r,_)):Ke(r,_),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),u=this._getAnchor();Ye(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,o=parseInt(rs(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,h=this._containerWidth,p=new M(this._containerLeft,-u-this._containerBottom);p._add(Tr(this._container));var _=r.layerPointToContainerPoint(p),T=F(this.options.autoPanPadding),j=F(this.options.autoPanPaddingTopLeft||T),R=F(this.options.autoPanPaddingBottomRight||T),U=r.getSize(),K=0,he=0;_.x+h+R.x>U.x&&(K=_.x+h-U.x+R.x),_.x-K-j.x<0&&(K=_.x-j.x),_.y+u+R.y>U.y&&(he=_.y+u-U.y+R.y),_.y-he-j.y<0&&(he=_.y-j.y),(K||he)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([K,he]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Py=function(r,o){return new Mo(r,o)};Pe.mergeOptions({closePopupOnClick:!0}),Pe.include({openPopup:function(r,o,u){return this._initOverlay(Mo,r,o,u).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),an.include({bindPopup:function(r,o){return this._popup=this._initOverlay(Mo,this._popup,r,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Nn||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){jr(r);var o=r.layer||r.target;if(this._popup._source===o&&!(o instanceof Qn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=o,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var zo=Sn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Sn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Sn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Sn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",o=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Te("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var o,u,h=this._map,p=this._container,_=h.latLngToContainerPoint(h.getCenter()),T=h.layerPointToContainerPoint(r),j=this.options.direction,R=p.offsetWidth,U=p.offsetHeight,K=F(this.options.offset),he=this._getAnchor();j==="top"?(o=R/2,u=U):j==="bottom"?(o=R/2,u=0):j==="center"?(o=R/2,u=U/2):j==="right"?(o=0,u=U/2):j==="left"?(o=R,u=U/2):T.x<_.x?(j="right",o=0,u=U/2):(j="left",o=R+(K.x+he.x)*2,u=U/2),r=r.subtract(F(o,u,!0)).add(K).add(he),Ke(p,"leaflet-tooltip-right"),Ke(p,"leaflet-tooltip-left"),Ke(p,"leaflet-tooltip-top"),Ke(p,"leaflet-tooltip-bottom"),xe(p,"leaflet-tooltip-"+j),Ye(p,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Gt(this._container,r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(o)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Cy=function(r,o){return new zo(r,o)};Pe.include({openTooltip:function(r,o,u){return this._initOverlay(zo,r,o,u).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),an.include({bindTooltip:function(r,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(zo,this._tooltip,r,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var o=r?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Nn||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&(ye(o,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ye(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var o=r.latlng,u,h;this._tooltip.options.sticky&&r.originalEvent&&(u=this._map.mouseEventToContainerPoint(r.originalEvent),h=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(o)}});var Nh=si.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var o=r&&r.tagName==="DIV"?r:document.createElement("div"),u=this.options;if(u.html instanceof Element?(So(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var h=F(u.bgPos);o.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Ty(r){return new Nh(r)}si.Default=cs;var ds=an.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){P(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Fe(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ni(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ri(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof M?r:new M(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var o=this.getPane().children,u=-r(-1/0,1/0),h=0,p=o.length,_;h<p;h++)_=o[h].style.zIndex,o[h]!==this._container&&_&&(u=r(u,+_));isFinite(u)&&(this.options.zIndex=u+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Gt(this._container,this.options.opacity);var r=+new Date,o=!1,u=!1;for(var h in this._tiles){var p=this._tiles[h];if(!(!p.current||!p.loaded)){var _=Math.min(1,(r-p.loaded)/200);Gt(p.el,_),_<1?o=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(Y(this._fadeFrame),this._fadeFrame=we(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,o=this.options.maxZoom;if(r!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===r?(this._levels[u].el.style.zIndex=o-Math.abs(r-u),this._onUpdateLevel(u)):(Fe(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var h=this._levels[r],p=this._map;return h||(h=this._levels[r]={},h.el=Te("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=o,h.origin=p.project(p.unproject(p.getPixelOrigin()),r).round(),h.zoom=r,this._setZoomTransform(h,p.getCenter(),p.getZoom()),v(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var r,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)o=this._tiles[r],o.retain=o.current;for(r in this._tiles)if(o=this._tiles[r],o.current&&!o.active){var h=o.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var o in this._tiles)this._tiles[o].coords.z===r&&this._removeTile(o)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Fe(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,o,u,h){var p=Math.floor(r/2),_=Math.floor(o/2),T=u-1,j=new M(+p,+_);j.z=+T;var R=this._tileCoordsToKey(j),U=this._tiles[R];return U&&U.active?(U.retain=!0,!0):(U&&U.loaded&&(U.retain=!0),T>h?this._retainParent(p,_,T,h):!1)},_retainChildren:function(r,o,u,h){for(var p=2*r;p<2*r+2;p++)for(var _=2*o;_<2*o+2;_++){var T=new M(p,_);T.z=u+1;var j=this._tileCoordsToKey(T),R=this._tiles[j];if(R&&R.active){R.retain=!0;continue}else R&&R.loaded&&(R.retain=!0);u+1<h&&this._retainChildren(p,_,u+1,h)}},_resetView:function(r){var o=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var o=this.options;return o.minNativeZoom!==void 0&&r<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<r?o.maxNativeZoom:r},_setView:function(r,o,u,h){var p=Math.round(o);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var _=this.options.updateWhenZooming&&p!==this._tileZoom;(!h||_)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(r),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(r,o)},_setZoomTransforms:function(r,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],r,o)},_setZoomTransform:function(r,o,u){var h=this._map.getZoomScale(u,r.zoom),p=r.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(o,u)).round();se.any3d?Cr(r.el,p,h):Ye(r.el,p)},_resetGrid:function(){var r=this._map,o=r.options.crs,u=this._tileSize=this.getTileSize(),h=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,o.wrapLng[0]],h).x/u.x),Math.ceil(r.project([0,o.wrapLng[1]],h).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([o.wrapLat[0],0],h).y/u.x),Math.ceil(r.project([o.wrapLat[1],0],h).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),h=o.getZoomScale(u,this._tileZoom),p=o.project(r,this._tileZoom).floor(),_=o.getSize().divideBy(h*2);return new te(p.subtract(_),p.add(_))},_update:function(r){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(r===void 0&&(r=o.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(r),p=this._pxBoundsToTileRange(h),_=p.getCenter(),T=[],j=this.options.keepBuffer,R=new te(p.getBottomLeft().subtract([j,-j]),p.getTopRight().add([j,-j]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var U in this._tiles){var K=this._tiles[U].coords;(K.z!==this._tileZoom||!R.contains(new M(K.x,K.y)))&&(this._tiles[U].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(r,u);return}for(var he=p.min.y;he<=p.max.y;he++)for(var Se=p.min.x;Se<=p.max.x;Se++){var bt=new M(Se,he);if(bt.z=this._tileZoom,!!this._isValidTile(bt)){var ot=this._tiles[this._tileCoordsToKey(bt)];ot?ot.current=!0:T.push(bt)}}if(T.sort(function(Nt,ui){return Nt.distanceTo(_)-ui.distanceTo(_)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Jt=document.createDocumentFragment();for(Se=0;Se<T.length;Se++)this._addTile(T[Se],Jt);this._level.el.appendChild(Jt)}}}},_isValidTile:function(r){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(r.x<u.min.x||r.x>u.max.x)||!o.wrapLat&&(r.y<u.min.y||r.y>u.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(r);return be(this.options.bounds).overlaps(h)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var o=this._map,u=this.getTileSize(),h=r.scaleBy(u),p=h.add(u),_=o.unproject(h,r.z),T=o.unproject(p,r.z);return[_,T]},_tileCoordsToBounds:function(r){var o=this._tileCoordsToNwSe(r),u=new Ae(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var o=r.split(":"),u=new M(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(r){var o=this._tiles[r];o&&(Fe(o.el),delete this._tiles[r],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){xe(r,"leaflet-tile");var o=this.getTileSize();r.style.width=o.x+"px",r.style.height=o.y+"px",r.onselectstart=v,r.onmousemove=v,se.ielt9&&this.options.opacity<1&&Gt(r,this.options.opacity)},_addTile:function(r,o){var u=this._getTilePos(r),h=this._tileCoordsToKey(r),p=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(p),this.createTile.length<2&&we(l(this._tileReady,this,r,null,p)),Ye(p,u),this._tiles[h]={el:p,coords:r,current:!0},o.appendChild(p),this.fire("tileloadstart",{tile:p,coords:r})},_tileReady:function(r,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:r});var h=this._tileCoordsToKey(r);u=this._tiles[h],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Gt(u.el,0),Y(this._fadeFrame),this._fadeFrame=we(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(xe(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?we(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var o=new M(this._wrapX?g(r.x,this._wrapX):r.x,this._wrapY?g(r.y,this._wrapY):r.y);return o.z=r.z,o},_pxBoundsToTileRange:function(r){var o=this.getTileSize();return new te(r.min.unscaleBy(o).floor(),r.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Oy(r){return new ds(r)}var li=ds.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,o){this._url=r,o=P(this,o),o.detectRetina&&se.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,o){return this._url===r&&o===void 0&&(o=!0),this._url=r,o||this.redraw(),this},createTile:function(r,o){var u=document.createElement("img");return ye(u,"load",l(this._tileOnLoad,this,o,u)),ye(u,"error",l(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(r),u},getTileUrl:function(r){var o={r:se.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-r.y;this.options.tms&&(o.y=u),o["-y"]=u}return w(this._url,s(o,this.options))},_tileOnLoad:function(r,o){se.ielt9?setTimeout(l(r,this,null,o),0):r(null,o)},_tileOnError:function(r,o,u){var h=this.options.errorTileUrl;h&&o.getAttribute("src")!==h&&(o.src=h),r(u,o)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,h=this.options.zoomOffset;return u&&(r=o-r),r+h},_getSubdomain:function(r){var o=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var r,o;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(o=this._tiles[r].el,o.onload=v,o.onerror=v,!o.complete)){o.src=A;var u=this._tiles[r].coords;Fe(o),delete this._tiles[r],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(r){var o=this._tiles[r];if(o)return o.el.setAttribute("src",A),ds.prototype._removeTile.call(this,r)},_tileReady:function(r,o,u){if(!(!this._map||u&&u.getAttribute("src")===A))return ds.prototype._tileReady.call(this,r,o,u)}});function Ah(r,o){return new li(r,o)}var Rh=li.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,o){this._url=r;var u=s({},this.defaultWmsParams);for(var h in o)h in this.options||(u[h]=o[h]);o=P(this,o);var p=o.detectRetina&&se.retina?2:1,_=this.getTileSize();u.width=_.x*p,u.height=_.y*p,this.wmsParams=u},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,li.prototype.onAdd.call(this,r)},getTileUrl:function(r){var o=this._tileCoordsToNwSe(r),u=this._crs,h=ve(u.project(o[0]),u.project(o[1])),p=h.min,_=h.max,T=(this._wmsVersion>=1.3&&this._crs===Ph?[p.y,p.x,_.y,_.x]:[p.x,p.y,_.x,_.y]).join(","),j=li.prototype.getTileUrl.call(this,r);return j+C(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(r,o){return s(this.wmsParams,r),o||this.redraw(),this}});function jy(r,o){return new Rh(r,o)}li.WMS=Rh,Ah.wms=jy;var In=an.extend({options:{padding:.1},initialize:function(r){P(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,o){var u=this._map.getZoomScale(o,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,o),_=h.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(r,o));se.any3d?Cr(this._container,_,u):Ye(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-r)).round();this._bounds=new te(u,u.add(o.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ih=In.extend({options:{tolerance:0},getEvents:function(){var r=In.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){In.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ye(r,"mousemove",this._onMouseMove,this),ye(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ye(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){Y(this._redrawRequest),delete this._ctx,Fe(this._container),Ie(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var o in this._layers)r=this._layers[o],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){In.prototype._update.call(this);var r=this._bounds,o=this._container,u=r.getSize(),h=se.retina?2:1;Ye(o,r.min),o.width=h*u.x,o.height=h*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){In.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var o=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var o=r._order,u=o.next,h=o.prev;u?u.prev=h:this._drawLast=h,h?h.next=u:this._drawFirst=u,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var o=r.options.dashArray.split(/[, ]+/),u=[],h,p;for(p=0;p<o.length;p++){if(h=Number(o[p]),isNaN(h))return;u.push(h)}r.options._dashArray=u}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||we(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var o=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(r._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(r._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var o=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)r=h.layer,(!o||r._pxBounds&&r._pxBounds.intersects(o))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,o){if(this._drawing){var u,h,p,_,T=r._parts,j=T.length,R=this._ctx;if(j){for(R.beginPath(),u=0;u<j;u++){for(h=0,p=T[u].length;h<p;h++)_=T[u][h],R[h?"lineTo":"moveTo"](_.x,_.y);o&&R.closePath()}this._fillStroke(R,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var o=r._point,u=this._ctx,h=Math.max(Math.round(r._radius),1),p=(Math.max(Math.round(r._radiusY),1)||h)/h;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(o.x,o.y/p,h,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,r)}},_fillStroke:function(r,o){var u=o.options;u.fill&&(r.globalAlpha=u.fillOpacity,r.fillStyle=u.fillColor||u.color,r.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(r.setLineDash&&r.setLineDash(o.options&&o.options._dashArray||[]),r.globalAlpha=u.opacity,r.lineWidth=u.weight,r.strokeStyle=u.color,r.lineCap=u.lineCap,r.lineJoin=u.lineJoin,r.stroke())},_onClick:function(r){for(var o=this._map.mouseEventToLayerPoint(r),u,h,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(o)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(u))&&(h=u);this._fireEvent(h?[h]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,o)}},_handleMouseOut:function(r){var o=this._hoveredLayer;o&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([o],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,o){if(!this._mouseHoverThrottled){for(var u,h,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(o)&&(h=u);h!==this._hoveredLayer&&(this._handleMouseOut(r),h&&(xe(this._container,"leaflet-interactive"),this._fireEvent([h],r,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,o,u){this._map._fireDOMEvent(o,u||o.type,r)},_bringToFront:function(r){var o=r._order;if(o){var u=o.next,h=o.prev;if(u)u.prev=h;else return;h?h.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(r)}},_bringToBack:function(r){var o=r._order;if(o){var u=o.next,h=o.prev;if(h)h.next=u;else return;u?u.prev=h:h&&(this._drawLast=h),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(r)}}});function Mh(r){return se.canvas?new Ih(r):null}var hs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ly={_initContainer:function(){this._container=Te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(In.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var o=r._container=hs("shape");xe(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",r._path=hs("path"),o.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var o=r._container;this._container.appendChild(o),r.options.interactive&&r.addInteractiveTarget(o)},_removePath:function(r){var o=r._container;Fe(o),r.removeInteractiveTarget(o),delete this._layers[d(r)]},_updateStyle:function(r){var o=r._stroke,u=r._fill,h=r.options,p=r._container;p.stroked=!!h.stroke,p.filled=!!h.fill,h.stroke?(o||(o=r._stroke=hs("stroke")),p.appendChild(o),o.weight=h.weight+"px",o.color=h.color,o.opacity=h.opacity,h.dashArray?o.dashStyle=b(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=h.lineCap.replace("butt","flat"),o.joinstyle=h.lineJoin):o&&(p.removeChild(o),r._stroke=null),h.fill?(u||(u=r._fill=hs("fill")),p.appendChild(u),u.color=h.fillColor||h.color,u.opacity=h.fillOpacity):u&&(p.removeChild(u),r._fill=null)},_updateCircle:function(r){var o=r._point.round(),u=Math.round(r._radius),h=Math.round(r._radiusY||u);this._setPath(r,r._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+h+" 0,"+65535*360)},_setPath:function(r,o){r._path.v=o},_bringToFront:function(r){ni(r._container)},_bringToBack:function(r){ri(r._container)}},Do=se.vml?hs:je,fs=In.extend({_initContainer:function(){this._container=Do("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Do("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Fe(this._container),Ie(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){In.prototype._update.call(this);var r=this._bounds,o=r.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),Ye(u,r.min),u.setAttribute("viewBox",[r.min.x,r.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(r){var o=r._path=Do("path");r.options.className&&xe(o,r.options.className),r.options.interactive&&xe(o,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Fe(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var o=r._path,u=r.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(r,o){this._setPath(r,yt(r._parts,o))},_updateCircle:function(r){var o=r._point,u=Math.max(Math.round(r._radius),1),h=Math.max(Math.round(r._radiusY),1)||u,p="a"+u+","+h+" 0 1,0 ",_=r._empty()?"M0 0":"M"+(o.x-u)+","+o.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(r,_)},_setPath:function(r,o){r._path.setAttribute("d",o)},_bringToFront:function(r){ni(r._path)},_bringToBack:function(r){ri(r._path)}});se.vml&&fs.include(Ly);function zh(r){return se.svg||se.vml?new fs(r):null}Pe.include({getRenderer:function(r){var o=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var o=this._paneRenderers[r];return o===void 0&&(o=this._createRenderer({pane:r}),this._paneRenderers[r]=o),o},_createRenderer:function(r){return this.options.preferCanvas&&Mh(r)||zh(r)}});var Dh=oi.extend({initialize:function(r,o){oi.prototype.initialize.call(this,this._boundsToLatLngs(r),o)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=be(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Ny(r,o){return new Dh(r,o)}fs.create=Do,fs.pointsToPath=yt,Rn.geometryToLayer=Lo,Rn.coordsToLatLng=Vl,Rn.coordsToLatLngs=No,Rn.latLngToCoords=ql,Rn.latLngsToCoords=Ao,Rn.getFeature=ai,Rn.asFeature=Ro,Pe.mergeOptions({boxZoom:!0});var Bh=bn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Fe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),is(),Ol(),this._startPoint=this._map.mouseEventToContainerPoint(r),ye(document,{contextmenu:jr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Te("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var o=new te(this._point,this._startPoint),u=o.getSize();Ye(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Fe(this._box),Ke(this._container,"leaflet-crosshair")),ss(),jl(),Ie(document,{contextmenu:jr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new Ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Pe.addInitHook("addHandler","boxZoom",Bh),Pe.mergeOptions({doubleClickZoom:!0});var Uh=bn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var o=this._map,u=o.getZoom(),h=o.options.zoomDelta,p=r.originalEvent.shiftKey?u-h:u+h;o.options.doubleClickZoom==="center"?o.setZoom(p):o.setZoomAround(r.containerPoint,p)}});Pe.addInitHook("addHandler","doubleClickZoom",Uh),Pe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $h=bn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Jn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ke(this._map._container,"leaflet-grab"),Ke(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=be(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,o){return r-(r-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;r.x<o.min.x&&(r.x=this._viscousLimit(r.x,o.min.x)),r.y<o.min.y&&(r.y=this._viscousLimit(r.y,o.min.y)),r.x>o.max.x&&(r.x=this._viscousLimit(r.x,o.max.x)),r.y>o.max.y&&(r.y=this._viscousLimit(r.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,o=Math.round(r/2),u=this._initialWorldOffset,h=this._draggable._newPos.x,p=(h-o+u)%r+o-u,_=(h+o+u)%r-o-u,T=Math.abs(p+u)<Math.abs(_+u)?p:_;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(r){var o=this._map,u=o.options,h=!u.inertia||r.noInertia||this._times.length<2;if(o.fire("dragend",r),h)o.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),_=(this._lastTime-this._times[0])/1e3,T=u.easeLinearity,j=p.multiplyBy(T/_),R=j.distanceTo([0,0]),U=Math.min(u.inertiaMaxSpeed,R),K=j.multiplyBy(U/R),he=U/(u.inertiaDeceleration*T),Se=K.multiplyBy(-he/2).round();!Se.x&&!Se.y?o.fire("moveend"):(Se=o._limitOffset(Se,o.options.maxBounds),we(function(){o.panBy(Se,{duration:he,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});Pe.addInitHook("addHandler","dragging",$h),Pe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Fh=bn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ye(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ie(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,o=document.documentElement,u=r.scrollTop||o.scrollTop,h=r.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(h,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var o=this._panKeys={},u=this.keyCodes,h,p;for(h=0,p=u.left.length;h<p;h++)o[u.left[h]]=[-1*r,0];for(h=0,p=u.right.length;h<p;h++)o[u.right[h]]=[r,0];for(h=0,p=u.down.length;h<p;h++)o[u.down[h]]=[0,r];for(h=0,p=u.up.length;h<p;h++)o[u.up[h]]=[0,-1*r]},_setZoomDelta:function(r){var o=this._zoomKeys={},u=this.keyCodes,h,p;for(h=0,p=u.zoomIn.length;h<p;h++)o[u.zoomIn[h]]=r;for(h=0,p=u.zoomOut.length;h<p;h++)o[u.zoomOut[h]]=-r},_addHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=r.keyCode,u=this._map,h;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(h=this._panKeys[o],r.shiftKey&&(h=F(h).multiplyBy(3)),u.options.maxBounds&&(h=u._limitOffset(F(h),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(h)));u.panTo(p)}else u.panBy(h)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;jr(r)}}});Pe.addInitHook("addHandler","keyboard",Fh),Pe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Wh=bn.extend({addHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var o=fh(r),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var h=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),h),jr(r)},_performZoom:function(){var r=this._map,o=r.getZoom(),u=this._map.options.zoomSnap||0;r._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,_=u?Math.ceil(p/u)*u:p,T=r._limitZoom(o+(this._delta>0?_:-_))-o;this._delta=0,this._startTime=null,T&&(r.options.scrollWheelZoom==="center"?r.setZoom(o+T):r.setZoomAround(this._lastMousePos,o+T))}});Pe.addInitHook("addHandler","scrollWheelZoom",Wh);var Ay=600;Pe.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var Hh=bn.extend({addHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var o=r.touches[0];this._startPos=this._newPos=new M(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ye(document,"touchend",ut),ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Ay),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Ie(document,"touchend",ut),Ie(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)},_onMove:function(r){var o=r.touches[0];this._newPos=new M(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,o){var u=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});Pe.addInitHook("addHandler","tapHold",Hh),Pe.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var Zh=bn.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var o=this._map;if(!(!r.touches||r.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(r.touches[0]),h=o.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(h)._divideBy(2))),this._startDist=u.distanceTo(h),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),ut(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(r.touches[0]),h=o.mouseEventToContainerPoint(r.touches[1]),p=u.distanceTo(h)/this._startDist;if(this._zoom=o.getScaleZoom(p,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&p<1||this._zoom>o.getMaxZoom()&&p>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var _=u._add(h)._divideBy(2)._subtract(this._centerPoint);if(p===1&&_.x===0&&_.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(_),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Y(this._animRequest);var T=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=we(T,this,!0),ut(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Y(this._animRequest),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Pe.addInitHook("addHandler","touchZoom",Zh),Pe.BoxZoom=Bh,Pe.DoubleClickZoom=Uh,Pe.Drag=$h,Pe.Keyboard=Fh,Pe.ScrollWheelZoom=Wh,Pe.TapHold=Hh,Pe.TouchZoom=Zh,n.Bounds=te,n.Browser=se,n.CRS=qe,n.Canvas=Ih,n.Circle=Zl,n.CircleMarker=jo,n.Class=Z,n.Control=on,n.DivIcon=Nh,n.DivOverlay=Sn,n.DomEvent=Q_,n.DomUtil=K_,n.Draggable=Jn,n.Evented=Ne,n.FeatureGroup=Nn,n.GeoJSON=Rn,n.GridLayer=ds,n.Handler=bn,n.Icon=si,n.ImageOverlay=Io,n.LatLng=_e,n.LatLngBounds=Ae,n.Layer=an,n.LayerGroup=ii,n.LineUtil=cy,n.Map=Pe,n.Marker=Oo,n.Mixin=iy,n.Path=Qn,n.Point=M,n.PolyUtil=sy,n.Polygon=oi,n.Polyline=An,n.Popup=Mo,n.PosAnimation=ph,n.Projection=dy,n.Rectangle=Dh,n.Renderer=In,n.SVG=fs,n.SVGOverlay=Lh,n.TileLayer=li,n.Tooltip=zo,n.Transformation=sn,n.Util=Oe,n.VideoOverlay=jh,n.bind=l,n.bounds=ve,n.canvas=Mh,n.circle=yy,n.circleMarker=_y,n.control=ls,n.divIcon=Ty,n.extend=s,n.featureGroup=my,n.geoJSON=Oh,n.geoJson=by,n.gridLayer=Oy,n.icon=gy,n.imageOverlay=Sy,n.latLng=ue,n.latLngBounds=be,n.layerGroup=py,n.map=Y_,n.marker=vy,n.point=F,n.polygon=xy,n.polyline=wy,n.popup=Py,n.rectangle=Ny,n.setOptions=P,n.stamp=d,n.svg=zh,n.svgOverlay=ky,n.tileLayer=Ah,n.tooltip=Cy,n.transformation=Lt,n.version=i,n.videoOverlay=Ey;var Ry=window.L;n.noConflict=function(){return window.L=Ry,this},window.L=n})})(Fc,Fc.exports);var xl=Fc.exports;function C_(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function T_(t,e){return e==null?function(i,s){const a=E.useRef();return a.current||(a.current=t(i,s)),a}:function(i,s){const a=E.useRef();a.current||(a.current=t(i,s));const l=E.useRef(i),{instance:c}=a.current;return E.useEffect(function(){l.current!==i&&(e(c,i,l.current),l.current=i)},[c,i,s]),a}}function nk(t,e){E.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function O_(t){return function(n){const i=k_(),s=t(P_(n,i),i);return KE(i.map,n.attribution),tk(s.current,n.eventHandlers),nk(s.current,i),s}}function rk(t,e){const n=T_(t,e),i=O_(n);return XE(i)}function ik(t,e){const n=T_(t,e),i=O_(n);return ek(i)}function sk(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Qd(){return k_().map}function j_(t){const e=Qd();return E.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Wc(){return Wc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wc.apply(this,arguments)}function ok({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:a,placeholder:l,style:c,whenReady:d,zoom:f,...g},v){const[y]=E.useState({className:s,id:a,style:c}),[x,k]=E.useState(null);E.useImperativeHandle(v,()=>(x==null?void 0:x.map)??null,[x]);const P=E.useCallback(S=>{if(S!==null&&x===null){const w=new xl.Map(S,g);n!=null&&f!=null?w.setView(n,f):t!=null&&w.fitBounds(t,e),d!=null&&w.whenReady(d),k(QE(w))}},[]);E.useEffect(()=>()=>{x==null||x.map.remove()},[x]);const C=x?$s.createElement(E_,{value:x},i):l??null;return $s.createElement("div",Wc({},y,{ref:P}),C)}const L_=E.forwardRef(ok),ak=rk(function({position:e,...n},i){const s=new xl.Marker(e,n);return C_(s,YE(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),N_=ik(function({url:e,...n},i){const s=new xl.TileLayer(e,P_(n,i));return C_(s,i)},function(e,n,i){sk(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),lk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",uk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",ck=new xl.Icon({iconUrl:lk,shadowUrl:uk,iconSize:[25,41],iconAnchor:[12,41]});function dk({center:t,zoom:e=13}){const n=Qd();return E.useEffect(()=>{n.setView(t,e)},[n,t,e]),null}function hk({position:t,onLocationSelect:e}){const[n,i]=E.useState(t);return E.useEffect(()=>{i(t)},[t]),j_({click(s){const{lat:a,lng:l}=s.latlng;i([a,l]),e(a,l)}}),m.jsx(ak,{position:n,icon:ck})}function A_({latitude:t,longitude:e,onLocationSelect:n,height:i="400px",initialSearchQuery:s,externalSearchQuery:a,syncSearchQuery:l,onLocationNameUpdate:c}){const[d,f]=E.useState(s||""),[g,v]=E.useState([]),[y,x]=E.useState(!1),[k,P]=E.useState(!1),[C,S]=E.useState([t,e]),w=E.useRef();E.useEffect(()=>{S([t,e])},[t,e]),E.useEffect(()=>{l!==void 0&&f(l)},[l]);const b=E.useCallback(async I=>{if(!I.trim()){v([]),P(!1);return}x(!0);try{const $=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(I)}&limit=5`,{headers:{"User-Agent":"USKSocial/1.0"}});if($.ok){const Q=await $.json();v(Q),P(!0)}else console.error("Geocoding failed:",$.statusText),v([])}catch($){console.error("Error searching location:",$),v([])}finally{x(!1)}},[]);E.useEffect(()=>{a&&a.trim()&&(f(a),b(a))},[a,b]);const O=I=>{f(I),w.current&&clearTimeout(w.current),I.trim()?w.current=setTimeout(()=>{b(I)},500):(v([]),P(!1))},A=I=>{const $=parseFloat(I.lat),Q=parseFloat(I.lon);S([$,Q]),f(I.display_name),P(!1),v([]),n($,Q),c&&c(I.display_name)},D=E.useCallback(I=>{I.key==="Enter"&&d.trim()&&(I.preventDefault(),b(d))},[d,b]);return m.jsxs("div",{className:"w-full border border-gray-300 rounded-md overflow-hidden",style:{height:i},children:[m.jsxs("div",{className:"relative bg-white border-b border-gray-300",children:[m.jsxs("div",{className:"px-3 py-2",children:[m.jsx("input",{type:"text",value:d,onChange:I=>O(I.target.value),onKeyPress:D,onFocus:()=>d&&g.length>0&&P(!0),placeholder:"Search for a location...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900 text-sm"}),y&&m.jsx("div",{className:"absolute right-6 top-1/2 transform -translate-y-1/2",children:m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700"})})]}),k&&g.length>0&&m.jsx("div",{className:"absolute z-[1000] w-full bg-white border-t border-gray-300 max-h-48 overflow-y-auto shadow-lg",children:g.map(I=>m.jsx("button",{type:"button",onClick:()=>A(I),className:"w-full text-left px-4 py-2 hover:bg-gray-100 border-b border-gray-200 last:border-b-0 text-sm text-gray-700",children:m.jsx("div",{className:"font-medium",children:I.display_name})},I.place_id))})]}),m.jsxs(L_,{center:C,zoom:13,style:{height:"calc(100% - 80px)",width:"100%"},scrollWheelZoom:!0,className:"map-picker",children:[m.jsx(dk,{center:C,zoom:13}),m.jsx(N_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',className:"map-tiles-minimal"}),m.jsx(hk,{position:C,onLocationSelect:n})]}),m.jsx("div",{className:"bg-gray-100 px-3 py-2 text-sm text-gray-600 border-t border-gray-300",children:"Click on the map to select location"})]})}function Yd(t){if(!t)return"";if(t.includes("-")){const[l,c,d]=t.split("T")[0].split("-").map(Number),f=new Date(l,c-1,d),g=String(f.getDate()).padStart(2,"0"),v=String(f.getMonth()+1).padStart(2,"0"),y=f.getFullYear();return`${g}/${v}/${y}`}const e=new Date(t),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=String(n.getDate()).padStart(2,"0"),s=String(n.getMonth()+1).padStart(2,"0"),a=n.getFullYear();return`${i}/${s}/${a}`}function co({onSuccess:t,onCancel:e,initialEventId:n,sketch:i}){const{profile:s}=Jd(),{events:a}=b_(),l=!!i,[c,d]=E.useState((i==null?void 0:i.title)||""),[f,g]=E.useState((i==null?void 0:i.description)||""),[v,y]=E.useState(null),[x,k]=E.useState((i==null?void 0:i.image_url)||null),[P,C]=E.useState((i==null?void 0:i.latitude)||6.2476),[S,w]=E.useState((i==null?void 0:i.longitude)||-75.5658),[b,O]=E.useState((i==null?void 0:i.location_name)||""),[A,D]=E.useState((i==null?void 0:i.event_id)||n||""),[I,$]=E.useState(i!=null&&i.sketch_date?i.sketch_date.split("T")[0]:new Date().toISOString().split("T")[0]),[Q,X]=E.useState("Medelln"),[we,Y]=E.useState("Colombia"),[Oe,Z]=E.useState(""),[le,ee]=E.useState(!1),[Ne,M]=E.useState(null),[ce,F]=E.useState(!1),[te,ve]=E.useState(!1),Ae=E.useRef(null),be=E.useRef(null);E.useEffect(()=>{if(i){if(d(i.title||""),g(i.description||""),k(i.image_url||null),C(i.latitude||6.2476),w(i.longitude||-75.5658),O(i.location_name||""),D(i.event_id||""),i.sketch_date&&$(i.sketch_date.split("T")[0]),i.event_id){const q=a.find(je=>je.id===i.event_id);q&&(X(q.city||"Medelln"),Y(q.country||"Colombia"))}}else navigator.geolocation&&navigator.geolocation.getCurrentPosition(q=>{C(q.coords.latitude),w(q.coords.longitude)},()=>{})},[i,a]);const _e=(q,je)=>{C(q),w(je),Z("")};E.useEffect(()=>{D(n||"")},[n]),E.useEffect(()=>{if(A){const q=a.find(je=>je.id===A);q&&(q.event_date&&$(q.event_date.split("T")[0]),C(q.latitude),w(q.longitude),O(q.location_name||""),X(q.city||"Medelln"),Y(q.country||"Colombia")),ee(!1)}else $(new Date().toISOString().split("T")[0]),navigator.geolocation?navigator.geolocation.getCurrentPosition(q=>{C(q.coords.latitude),w(q.coords.longitude)},()=>{C(6.2476),w(-75.5658)}):(C(6.2476),w(-75.5658)),O(""),X("Medelln"),Y("Colombia")},[A,a]);const ue=q=>{if(q.size>10*1024*1024){M("Image size must be less than 10MB");return}if(!q.type.match(/^image\/(jpeg|jpg|png|webp)$/)){M("Image must be JPEG, PNG, or WebP format");return}y(q),M(null);const je=new FileReader;je.onloadend=()=>{k(je.result)},je.readAsDataURL(q)},qe=q=>{var yt;const je=(yt=q.target.files)==null?void 0:yt[0];je&&ue(je)},jt=q=>{q.preventDefault(),q.stopPropagation(),ve(!0)},rn=q=>{q.preventDefault(),q.stopPropagation(),ve(!1)},yn=q=>{var yt;q.preventDefault(),q.stopPropagation(),ve(!1);const je=(yt=q.dataTransfer.files)==null?void 0:yt[0];je&&ue(je)},sn=()=>{var q;(q=Ae.current)==null||q.click()},Lt=(q,je)=>!isNaN(q)&&!isNaN(je)&&q>=-90&&q<=90&&je>=-180&&je<=180,On=async q=>{var je,yt;if(q.preventDefault(),M(null),!s){M("Please set a username first (use the username box in the top-right corner)");return}if(!l&&!v){M("Please select an image");return}if(!Lt(P,S)){M("Please provide valid coordinates (latitude: -90 to 90, longitude: -180 to 180)");return}F(!0);try{l?(console.log("[SketchUpload]  Starting sketch update..."),console.log("[SketchUpload] Sketch ID:",i.id)):console.log("[SketchUpload]  Starting sketch upload..."),console.log("[SketchUpload] Profile ID:",s.id),console.log("[SketchUpload] Title:",c),console.log("[SketchUpload] Coordinates:",P,S),console.log("[SketchUpload] Event ID:",A||"none");let N=(i==null?void 0:i.image_url)||"",B=(i==null?void 0:i.thumbnail_url)||"";if(v){const H=v.name.split(".").pop(),V=`${Date.now()}-${Math.random()}.${H}`,de=`${s.id}/${V}`;console.log("[SketchUpload]  Uploading image to storage..."),console.log("[SketchUpload] File path:",de);const{error:ne}=await Ee.storage.from("sketches").upload(de,v);if(ne)throw console.error("[SketchUpload]  Storage upload failed:",ne),console.error("[SketchUpload] Error details:",{message:ne.message}),ne;console.log("[SketchUpload]  Image uploaded successfully"),console.log("[SketchUpload]  Getting public URL...");const{data:{publicUrl:ie}}=Ee.storage.from("sketches").getPublicUrl(de);if(N=ie,B=ie,l&&(i!=null&&i.image_url))try{const G=i.image_url.split("/"),me=G.slice(G.indexOf("sketches")+1).join("/");if(await Ee.storage.from("sketches").remove([me]),i.thumbnail_url&&i.thumbnail_url!==i.image_url){const ae=i.thumbnail_url.split("/"),ge=ae.slice(ae.indexOf("sketches")+1).join("/");await Ee.storage.from("sketches").remove([ge])}}catch(G){console.warn("[SketchUpload]  Failed to delete old image:",G)}}const z={title:c,description:f||null,image_url:N,thumbnail_url:B,latitude:P,longitude:S,location_name:b||null,event_id:A||null,sketch_date:I};if(l){console.log("[SketchUpload]  Updating sketch record..."),console.log("[SketchUpload] Sketch data:",{...z,image_url:"..."});const{data:H,error:V}=await Ee.from("sketches").update(z).eq("id",i.id).select();if(V)throw console.error("[SketchUpload]  Database update failed:",V),console.error("[SketchUpload] Error details:",{message:V.message,code:V.code,details:V.details,hint:V.hint}),V;console.log("[SketchUpload]  Sketch updated successfully!"),console.log("[SketchUpload] Updated sketch ID:",(je=H==null?void 0:H[0])==null?void 0:je.id)}else{console.log("[SketchUpload]  Inserting sketch record..."),console.log("[SketchUpload] Sketch data:",{...z,image_url:"..."});const{data:H,error:V}=await Ee.from("sketches").insert({...z,user_id:s.id}).select();if(V)throw console.error("[SketchUpload]  Database insert failed:",V),console.error("[SketchUpload] Error details:",{message:V.message,code:V.code,details:V.details,hint:V.hint}),V.code==="23503"||V.message.includes("foreign key constraint")?new Error("Your profile is not set up correctly. Please complete your profile setup and try again."):V;console.log("[SketchUpload]  Sketch uploaded successfully!"),console.log("[SketchUpload] Inserted sketch ID:",(yt=H==null?void 0:H[0])==null?void 0:yt.id)}t==null||t()}catch(N){console.error("[SketchUpload]  Operation failed with exception:",N);const B=N.message||(l?"Failed to update sketch":"Failed to upload sketch");console.error("[SketchUpload] Error message:",B),M(B)}finally{F(!1)}};return m.jsxs("div",{className:"w-full",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:l?"Editar Sketch":"Subir Sketch"}),m.jsxs("form",{onSubmit:On,className:"space-y-4",children:[Ne&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:Ne}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Ttulo ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx("input",{id:"title",type:"text",value:c,onChange:q=>d(q.target.value),required:!0,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Mi dibujito a rapidgrafo"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),m.jsx("textarea",{id:"description",value:f,onChange:q=>g(q.target.value),rows:3,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Mientras dibujaba se arrim un gamn..."})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-2",children:["Imagen ",!l&&m.jsx("span",{className:"text-red-500",children:"*"}),l&&m.jsx("span",{className:"text-gray-500 text-xs ml-2",children:"(Opcional - deja vaco para mantener la imagen actual)"})]}),m.jsx("input",{ref:Ae,id:"image",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:qe,required:!l,className:"hidden"}),x?m.jsxs("div",{className:"relative group",children:[m.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-gray-300 shadow-lg",children:[m.jsx("img",{src:x,alt:"Preview",className:"w-full h-auto max-h-96 object-contain bg-gray-100"}),m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 flex items-center justify-center",children:m.jsx("button",{type:"button",onClick:sn,className:"opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 bg-white text-gray-800 px-6 py-3 rounded-lg font-semibold shadow-lg hover:bg-gray-100",children:"Cambiar Imagen"})})]}),v&&m.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm text-gray-600 bg-gray-50 px-3 py-2 rounded",children:[m.jsxs("span",{className:"flex items-center",children:[m.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),v.name]}),m.jsxs("span",{className:"text-gray-500",children:[(v.size/1024).toFixed(2)," KB"]})]})]}):m.jsxs("div",{ref:be,onDragOver:jt,onDragLeave:rn,onDrop:yn,onClick:sn,className:`
                relative border-2 border-dashed rounded-lg p-8 text-center cursor-pointer
                transition-all duration-300 ease-in-out
                ${te?"border-blue-500 bg-blue-50 scale-105 shadow-lg":"border-gray-300 bg-gray-50 hover:border-gray-400 hover:bg-gray-100 hover:shadow-md"}
              `,children:[m.jsx("div",{className:"absolute inset-0 rounded-lg opacity-0 hover:opacity-100 transition-opacity duration-300 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50"}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("div",{className:"mx-auto w-16 h-16 mb-4 flex items-center justify-center",children:m.jsx("svg",{className:`w-full h-full transition-transform duration-300 ${te?"scale-110":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),m.jsx("p",{className:"text-gray-700 font-medium text-lg mb-1",children:te?"Suelta la imagen aqu":"Arrastra una imagen o haz clic para seleccionar"}),m.jsx("p",{className:"text-gray-500 text-sm",children:"PNG, JPG, WEBP hasta 10MB"}),m.jsxs("div",{className:"flex justify-center mt-4 space-x-2",children:[m.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse",style:{animationDelay:"0s"}}),m.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),m.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"event",className:"block text-sm font-medium text-gray-700 mb-1",children:"Asociar a Evento (Opcional)"}),m.jsxs("select",{id:"event",value:A,onChange:q=>D(q.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",children:[m.jsx("option",{value:"",children:"Sin Evento"}),a.map(q=>m.jsxs("option",{value:q.id,children:[q.event_date?Yd(q.event_date):"Sin fecha"," - ",q.title]},q.id))]})]}),!A&&m.jsxs("div",{className:"border border-gray-300 rounded-md overflow-hidden",children:[m.jsxs("button",{type:"button",onClick:()=>ee(!le),className:"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 flex items-center justify-between transition-colors",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Avanzados (Opcional)"}),m.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${le?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),le&&m.jsxs("div",{className:"p-4 space-y-4 bg-white border-t border-gray-200",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"sketchDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha del Sketch"}),m.jsx("input",{id:"sketchDate",type:"date",value:I,onChange:q=>$(q.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"locationName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Lugar"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{id:"locationName",type:"text",value:b,onChange:q=>O(q.target.value),className:"flex-1 px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"La Candelaria",onKeyPress:q=>{q.key==="Enter"&&b.trim()&&(q.preventDefault(),Z(b))}}),m.jsx("button",{type:"button",onClick:()=>{b.trim()&&Z(b)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors whitespace-nowrap",title:"Buscar ubicacin en el mapa",children:" Buscar"})]}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Ingresa un nombre de lugar y haz clic en Buscar para encontrarlo en el mapa"})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ubicacin ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx(A_,{latitude:P,longitude:S,onLocationSelect:_e,height:"300px",externalSearchQuery:Oe,syncSearchQuery:b,onLocationNameUpdate:O}),m.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Seleccionado: ",P.toFixed(4),", ",S.toFixed(4)]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad"}),m.jsx("input",{id:"city",type:"text",value:Q,onChange:q=>X(q.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Medelln"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pas"}),m.jsx("input",{id:"country",type:"text",value:we,onChange:q=>Y(q.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Colombia"})]})]})]})]}),m.jsxs("div",{className:"flex space-x-4",children:[e&&m.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:ce,className:"flex-1 bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:ce?l?"Actualizando...":"Subiendo...":l?"Actualizar Sketch":"Subir Sketch"})]})]})]})}function fk({onSuccess:t,onCancel:e}){const{profile:n}=Jd(),{selectedGroup:i}=yl(),[s,a]=E.useState(""),[l,c]=E.useState(""),[d,f]=E.useState(""),[g,v]=E.useState(6.2476),[y,x]=E.useState(-75.5658),[k,P]=E.useState(""),[C,S]=E.useState("Medelln"),[w,b]=E.useState("Colombia"),[O,A]=E.useState(null),[D,I]=E.useState(!1),[$,Q]=E.useState(""),X=(Y,Oe)=>{v(Y),x(Oe),Q("")},we=async Y=>{var Oe;if(Y.preventDefault(),A(null),!n){A("Por favor configura un nombre de usuario primero (usa la caja de nombre de usuario en la esquina superior derecha)");return}if(!i){A("Por favor selecciona un grupo primero");return}if(!s.trim()){A("Por favor ingresa un ttulo para el evento");return}if(!g||!y||isNaN(g)||isNaN(y)){A("Por favor selecciona una ubicacin en el mapa");return}I(!0);try{console.log("[EventCreate]  Creating event..."),console.log("[EventCreate] Profile ID:",n.id),console.log("[EventCreate] Title:",s),console.log("[EventCreate] Coordinates:",g,y),console.log("[EventCreate] Location:",k||"none"),console.log("[EventCreate] City/Country:",C,w);const Z={title:s,description:l||null,event_date:d||null,latitude:g,longitude:y,location_name:k||null,city:C||null,country:w||null,group_id:i.id,created_by:n.id};console.log("[EventCreate]  Inserting event record..."),console.log("[EventCreate] Event data:",Z);const{data:le,error:ee}=await Ee.from("events").insert(Z).select();if(ee)throw console.error("[EventCreate]  Event insert failed:",ee),console.error("[EventCreate] Error details:",{message:ee.message,code:ee.code,details:ee.details,hint:ee.hint}),ee.code==="23503"||ee.message.includes("foreign key constraint")?new Error("Tu perfil no est configurado correctamente. Por favor completa la configuracin de tu perfil e intenta de nuevo."):ee;if(!le||le.length===0)throw console.error("[EventCreate]  Event was not created - no data returned"),new Error("El evento no fue creado. Por favor verifica los permisos de la base de datos.");console.log("[EventCreate]  Event created successfully!"),console.log("[EventCreate] Event ID:",(Oe=le[0])==null?void 0:Oe.id),t==null||t()}catch(Z){console.error("[EventCreate]  Event creation failed with exception:",Z);const le=Z.message||Z.error_description||"Error al crear el evento. Por favor revisa la consola para ms detalles.";console.error("[EventCreate] Error message:",le),A(le)}finally{I(!1)}};return m.jsxs("div",{className:"w-full",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Crear Evento"}),m.jsxs("form",{onSubmit:we,className:"space-y-4",children:[O&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:O}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Ttulo del Evento ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx("input",{id:"title",type:"text",value:s,onChange:Y=>a(Y.target.value),required:!0,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Encuentro de Urban Sketching"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),m.jsx("textarea",{id:"description",value:l,onChange:Y=>c(Y.target.value),rows:3,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Cuntanos sobre el evento..."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"eventDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha del Evento"}),m.jsx("input",{id:"eventDate",type:"date",value:d,onChange:Y=>f(Y.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"locationName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Lugar"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{id:"locationName",type:"text",value:k,onChange:Y=>P(Y.target.value),className:"flex-1 px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"La Candelaria",onKeyPress:Y=>{Y.key==="Enter"&&k.trim()&&(Y.preventDefault(),Q(k))}}),m.jsx("button",{type:"button",onClick:()=>{k.trim()&&Q(k)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors whitespace-nowrap",title:"Buscar ubicacin en el mapa",children:" Buscar"})]}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Ingresa un nombre de lugar y haz clic en Buscar para encontrarlo en el mapa"})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ubicacin ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx(A_,{latitude:g,longitude:y,onLocationSelect:X,height:"300px",externalSearchQuery:$,syncSearchQuery:k,onLocationNameUpdate:P}),m.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Seleccionado: ",g.toFixed(4),", ",y.toFixed(4)]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad"}),m.jsx("input",{id:"city",type:"text",value:C,onChange:Y=>S(Y.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Medelln"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pas"}),m.jsx("input",{id:"country",type:"text",value:w,onChange:Y=>b(Y.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Colombia"})]})]}),m.jsxs("div",{className:"flex space-x-4",children:[e&&m.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:D,className:"flex-1 bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:D?"Creando...":"Crear Evento"})]})]})]})}function Xd({sketch:t,onClick:e}){return m.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:e,children:[m.jsx("div",{className:"aspect-square overflow-hidden bg-gray-200",children:m.jsx("img",{src:t.thumbnail_url||t.image_url,alt:t.title,className:"w-full h-full object-cover"})}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-1 truncate",children:t.title}),t.profiles&&m.jsxs(Et,{to:`/profile/${t.profiles.username}`,onClick:n=>n.stopPropagation(),className:"text-sm text-gray-600 hover:text-blue-600",children:["@",t.profiles.username]}),t.location_name&&m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.location_name}),m.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(t.sketch_date).toLocaleDateString()})]})]})}function bl({sketch:t,onClose:e,onUpdate:n,onEdit:i}){var v,y;const{user:s}=wo(),a=Ji(),l=(s==null?void 0:s.id)===t.user_id,c=E.useRef(null),d=async()=>{if(confirm("Ests seguro de que quieres eliminar este sketch?"))try{const x=t.image_url.split("/"),k=x.slice(x.indexOf("sketches")+1).join("/");if(t.thumbnail_url&&t.thumbnail_url!==t.image_url){const C=t.thumbnail_url.split("/"),S=C.slice(C.indexOf("sketches")+1).join("/");await Ee.storage.from("sketches").remove([S]).catch(()=>{})}await Ee.storage.from("sketches").remove([k]);const{error:P}=await Ee.from("sketches").delete().eq("id",t.id);if(P)throw P;n==null||n(),e()}catch(x){alert("Error al eliminar el sketch"),console.error("Error deleting sketch:",x)}},f=()=>{i==null||i(t)},g=()=>{t.latitude&&t.longitude&&(a(`/map?lat=${t.latitude}&lng=${t.longitude}&zoom=15`),e())};return m.jsx("div",{ref:c,className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onMouseDown:x=>{var k,P;x.target===x.currentTarget?(k=c.current)==null||k.setAttribute("data-mousedown","true"):(P=c.current)==null||P.removeAttribute("data-mousedown")},onClick:x=>{var k,P;x.target===x.currentTarget&&((k=c.current)==null?void 0:k.getAttribute("data-mousedown"))==="true"&&e(),(P=c.current)==null||P.removeAttribute("data-mousedown")},children:m.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:x=>x.stopPropagation(),children:[m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 z-10",children:""}),m.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-auto"})]}),m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:t.title}),t.description&&m.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),m.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[((v=t.profiles)==null?void 0:v.avatar_url)&&m.jsx("img",{src:t.profiles.avatar_url,alt:t.profiles.username,className:"w-10 h-10 rounded-full"}),m.jsxs("div",{children:[(y=t.profiles)!=null&&y.username?m.jsx(Et,{to:`/profile/${t.profiles.username}`,onClick:x=>{x.stopPropagation(),e()},className:"font-medium text-gray-800 hover:text-blue-600",children:t.profiles.username}):m.jsx("p",{className:"font-medium text-gray-800",children:"Unknown"}),m.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.uploaded_at).toLocaleDateString()})]})]}),(t.location_name||t.latitude&&t.longitude)&&m.jsx("div",{className:"mb-4",children:m.jsxs("p",{className:"text-sm text-gray-600",children:[" ",t.location_name||`${t.latitude}, ${t.longitude}`]})}),m.jsxs("div",{className:"flex space-x-4",children:[t.latitude&&t.longitude&&m.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Ver en Mapa"}),l&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:f,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors flex items-center gap-2",children:[m.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar"]}),m.jsxs("button",{onClick:d,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors flex items-center gap-2",children:[m.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar"]})]})]})]})]})})}function pk({event:t,onClose:e}){const{sketches:n,loading:i,refetch:s}=wl(),[a,l]=E.useState(null),[c,d]=E.useState(null),f=E.useRef(null),g=E.useRef(null),v=n.filter(y=>y.event_id===t.id);return m.jsxs("div",{ref:f,className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onMouseDown:y=>{var x,k;y.target===y.currentTarget?(x=f.current)==null||x.setAttribute("data-mousedown","true"):(k=f.current)==null||k.removeAttribute("data-mousedown")},onClick:y=>{var x,k;y.target===y.currentTarget&&((x=f.current)==null?void 0:x.getAttribute("data-mousedown"))==="true"&&e(),(k=f.current)==null||k.removeAttribute("data-mousedown")},children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg max-w-6xl w-full my-12 max-h-[90vh] overflow-y-auto shadow-lg",onClick:y=>y.stopPropagation(),children:[m.jsxs("div",{className:"sticky top-0 bg-gray-50 border-b border-gray-300 p-4 flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:t.title}),t.location_name&&m.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" ",t.location_name]})]}),m.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),m.jsx("div",{className:"p-6",children:i?m.jsx("div",{className:"text-center py-12",children:"Cargando sketches..."}):v.length===0?m.jsx("div",{className:"text-center py-12 text-gray-500",children:"No hay sketches subidos para este encuentro an."}):m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:v.map(y=>m.jsx(Xd,{sketch:y,onClick:()=>l(y)},y.id))})})]}),a&&m.jsx(bl,{sketch:a,onClose:()=>l(null),onUpdate:()=>{s(),l(null)},onEdit:y=>{l(null),d(y)}}),c&&m.jsx("div",{ref:g,className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onMouseDown:y=>{var x,k;y.target===y.currentTarget?(x=g.current)==null||x.setAttribute("data-mousedown","true"):(k=g.current)==null||k.removeAttribute("data-mousedown")},onClick:y=>{var x,k;y.target===y.currentTarget&&((x=g.current)==null?void 0:x.getAttribute("data-mousedown"))==="true"&&d(null),(k=g.current)==null||k.removeAttribute("data-mousedown")},children:m.jsxs("div",{className:"bg-gray-50 rounded-lg max-w-2xl w-full my-12 max-h-[90vh] overflow-y-auto shadow-lg",onClick:y=>y.stopPropagation(),children:[m.jsxs("div",{className:"p-4 border-b border-gray-300 flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Editar Sketch"}),m.jsx("button",{onClick:()=>d(null),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none","aria-label":"Cerrar",children:""})]}),m.jsx("div",{className:"p-6",children:m.jsx(co,{sketch:c,onSuccess:()=>{d(null),s()},onCancel:()=>d(null)})})]})})]})}function mk(){const{events:t}=b_(),{sketches:e,refetch:n}=wl(),{user:i}=wo(),s=Ji(),[a,l]=E.useState(!1),[c,d]=E.useState(!1),[f,g]=E.useState(void 0),[v,y]=E.useState(null),[x,k]=E.useState(null),[P,C]=E.useState(null),S=E.useRef(null),w=E.useRef(null),b=E.useRef(null),O=E.useRef(null),A=e.slice(0,12),D=E.useMemo(()=>{const Z=new Map;return e.forEach(le=>{le.event_id&&Z.set(le.event_id,(Z.get(le.event_id)||0)+1)}),Z},[e]),I=E.useMemo(()=>{const Z=new Map;return e.forEach(le=>{if(le.user_id){const ee=le.profiles,Ne=(ee==null?void 0:ee.username)||le.user_id,M=Z.get(le.user_id)||{sketchCount:0};Z.set(le.user_id,{username:Ne,sketchCount:M.sketchCount+1})}}),Array.from(Z.values()).sort((le,ee)=>ee.sketchCount-le.sketchCount)},[e]),$=250,Q=75,X=65,we=(Z,le)=>{const ee=S.current;if(!ee)return;const Ne=ee.getBoundingClientRect(),M=Ne.left+Ne.width/2,ce=Ne.top+Ne.height/2,F=Z-M,te=le-ce,ve=Math.sqrt(F*F+te*te),Ae=Math.sqrt(Ne.width*Ne.width+Ne.height*Ne.height)/2+80,be=Math.max(0,Math.min(1,1-ve/Ae)),_e=be*40,ue=Math.min(90,Q+be*15),qe=Math.min(80,X+be*15),rn=`hsl(${($+_e)%360}, ${ue}%, ${qe}%)`,yn=be*30,sn=1+be*.1;ee.style.backgroundColor=rn,ee.style.transform=`scale(${sn})`,ee.style.boxShadow=`0 0 ${yn}px ${rn}, 0 4px 20px rgba(0, 0, 0, 0.3)`},Y=Z=>{we(Z.clientX,Z.clientY)},Oe=()=>{const Z=S.current;if(!Z)return;const le=`hsl(${$}, ${Q}%, ${X}%)`;Z.style.backgroundColor=le,Z.style.transform="scale(1)",Z.style.boxShadow="0 4px 20px rgba(0, 0, 0, 0.3)"};return m.jsxs("div",{className:"min-h-screen",children:[m.jsx("div",{className:"flex justify-center items-center pt-8 pb-8",children:m.jsxs("div",{className:"flex space-x-4",onMouseMove:Y,onMouseLeave:Oe,children:[m.jsx("button",{ref:S,onClick:()=>{if(!i){s("/auth");return}g(void 0),d(!0)},className:"text-white px-8 py-4 rounded-lg text-lg font-semibold transition-all duration-200 shadow-lg relative overflow-hidden",style:{backgroundColor:`hsl(${$}, ${Q}%, ${X}%)`},children:m.jsx("span",{className:"relative z-10",children:"Subir un Sketch"})}),m.jsx("button",{onClick:()=>s("/map"),className:"bg-gray-700 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-800 transition-colors shadow-md",children:"Ir al Mapa"})]})}),a&&m.jsx("div",{ref:w,className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onMouseDown:Z=>{var le,ee;Z.target===Z.currentTarget?(le=w.current)==null||le.setAttribute("data-mousedown","true"):(ee=w.current)==null||ee.removeAttribute("data-mousedown")},onClick:Z=>{var le,ee;Z.target===Z.currentTarget&&((le=w.current)==null?void 0:le.getAttribute("data-mousedown"))==="true"&&l(!1),(ee=w.current)==null||ee.removeAttribute("data-mousedown")},children:m.jsxs("div",{className:"bg-gray-50 rounded-lg max-w-2xl w-full my-12 max-h-[90vh] overflow-y-auto shadow-lg",onClick:Z=>Z.stopPropagation(),children:[m.jsxs("div",{className:"p-4 border-b border-gray-300 flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Crear Evento"}),m.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none","aria-label":"Cerrar",children:""})]}),m.jsx("div",{className:"p-6",children:m.jsx(fk,{onSuccess:()=>{l(!1),window.location.reload()},onCancel:()=>l(!1)})})]})}),c&&m.jsx("div",{ref:b,className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onMouseDown:Z=>{var le,ee;Z.target===Z.currentTarget?(le=b.current)==null||le.setAttribute("data-mousedown","true"):(ee=b.current)==null||ee.removeAttribute("data-mousedown")},onClick:Z=>{var le,ee;Z.target===Z.currentTarget&&((le=b.current)==null?void 0:le.getAttribute("data-mousedown"))==="true"&&d(!1),(ee=b.current)==null||ee.removeAttribute("data-mousedown")},children:m.jsxs("div",{className:"bg-gray-50 rounded-lg max-w-2xl w-full my-12 max-h-[90vh] overflow-y-auto shadow-lg",onClick:Z=>Z.stopPropagation(),children:[m.jsxs("div",{className:"p-4 border-b border-gray-300 flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Subir Sketch"}),m.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none","aria-label":"Cerrar",children:""})]}),m.jsx("div",{className:"p-6",children:m.jsx(co,{initialEventId:f,onSuccess:()=>{d(!1),g(void 0),window.location.reload()},onCancel:()=>{d(!1),g(void 0)}})})]})}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[A.length>0&&m.jsxs("section",{className:"mb-12",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Sketches Recientes"}),m.jsx(Et,{to:"/map",className:"text-gray-700 hover:text-gray-900 font-medium",children:"Ver todos en el Mapa "})]}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:A.map(Z=>m.jsx(Xd,{sketch:Z,onClick:()=>y(Z)},Z.id))})]}),t.length>0&&m.jsxs("section",{className:"mb-12",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Encuentros"}),m.jsx("button",{onClick:()=>{if(!i){s("/auth");return}l(!0)},className:"bg-gray-700 text-white px-6 py-2 rounded-lg text-sm font-semibold hover:bg-gray-800 transition-colors shadow-md",children:"Crear Evento"})]}),m.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-h-[60vh] overflow-y-auto",children:m.jsx("div",{className:"space-y-1",children:t.map(Z=>{const le=D.get(Z.id)||0;return m.jsxs("div",{className:"text-sm text-gray-700 cursor-pointer hover:bg-gray-100 rounded px-3 py-2 transition-colors",onClick:()=>C(Z),children:[Z.event_date&&m.jsxs("span",{className:"text-gray-500",children:[Yd(Z.event_date)," -"," "]}),m.jsx("span",{className:"font-medium",children:Z.title}),le>0&&m.jsxs("span",{className:"text-gray-500",children:[" (",le,")"]})]},Z.id)})})})]}),I.length>0&&m.jsxs("section",{children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Sketchers"}),m.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-h-[60vh] overflow-y-auto",children:m.jsx("div",{className:"space-y-1",children:I.map(Z=>m.jsxs(Et,{to:`/profile/${Z.username}`,className:"block text-sm text-gray-700 cursor-pointer hover:bg-gray-100 rounded px-3 py-2 transition-colors",children:[m.jsx("span",{className:"font-medium",children:Z.username}),Z.sketchCount>0&&m.jsxs("span",{className:"text-gray-500",children:[" (",Z.sketchCount,")"]})]},Z.username))})})]})]}),v&&m.jsx(bl,{sketch:v,onClose:()=>y(null),onUpdate:()=>{n(),y(null)},onEdit:Z=>{y(null),k(Z)}}),x&&m.jsx("div",{ref:O,className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onMouseDown:Z=>{var le,ee;Z.target===Z.currentTarget?(le=O.current)==null||le.setAttribute("data-mousedown","true"):(ee=O.current)==null||ee.removeAttribute("data-mousedown")},onClick:Z=>{var le,ee;Z.target===Z.currentTarget&&((le=O.current)==null?void 0:le.getAttribute("data-mousedown"))==="true"&&k(null),(ee=O.current)==null||ee.removeAttribute("data-mousedown")},children:m.jsxs("div",{className:"bg-gray-50 rounded-lg max-w-2xl w-full my-12 max-h-[90vh] overflow-y-auto shadow-lg",onClick:Z=>Z.stopPropagation(),children:[m.jsxs("div",{className:"p-4 border-b border-gray-300 flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Editar Sketch"}),m.jsx("button",{onClick:()=>k(null),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none","aria-label":"Cerrar",children:""})]}),m.jsx("div",{className:"p-6",children:m.jsx(co,{sketch:x,onSuccess:()=>{k(null),n()},onCancel:()=>k(null)})})]})}),P&&m.jsx(pk,{event:P,onClose:()=>C(null)})]})}function gk({onMapMove:t,onMapZoom:e,externalCenter:n,externalZoom:i,onMapReady:s}){const a=Qd();return E.useEffect(()=>{s(a)},[a,s]),j_({moveend(){const l=a.getCenter();t([l.lat,l.lng])},zoomend(){e(a.getZoom())}}),E.useEffect(()=>{if(n&&i){const l=a.getCenter(),c=a.getZoom(),d=Math.abs(l.lat-n[0])>1e-4||Math.abs(l.lng-n[1])>1e-4,f=Math.abs(c-i)>.1;(d||f)&&a.setView(n,i,{animate:!0})}},[a,n,i]),E.useEffect(()=>{const l=a.getCenter();t([l.lat,l.lng]),e(a.getZoom())},[a,t,e]),null}function vk({sketches:t,initialCenter:e=[6.2476,-75.5658],initialZoom:n=12,onSketchClick:i}){const s=E.useRef(null),a=E.useRef(null),[l,c]=E.useState(e),[d,f]=E.useState(n),[g,v]=E.useState(new Map),[y,x]=E.useState(null),[k,P]=E.useState(null),[C,S]=E.useState(null),[w,b]=E.useState(null),[O,A]=E.useState(null),[D,I]=E.useState(new Map),$=E.useRef(new Map),Q=E.useRef(),X=E.useRef(null),we=E.useRef(0),Y=E.useRef(0),Oe=E.useRef(new Map);E.useEffect(()=>{(async()=>{const B=new Set;if(t.forEach(H=>{H.event_id&&B.add(H.event_id)}),B.size===0)return;const{data:z}=await Ee.from("events").select("*").in("id",Array.from(B));if(z){const H=new Map;z.forEach(V=>H.set(V.id,V)),v(H)}})()},[t]),E.useEffect(()=>{const N=new URLSearchParams(window.location.search),B=N.get("lat"),z=N.get("lng"),H=N.get("zoom");B&&z&&(c([parseFloat(B),parseFloat(z)]),H&&f(parseInt(H)))},[]);const Z=E.useCallback(N=>{c(N)},[]),le=E.useCallback(N=>{f(N)},[]),ee=E.useCallback(N=>{X.current=N;const B=s.current;if(B){const z=N.getContainer(),H=z.getBoundingClientRect();B.width=H.width,B.height=H.height,B.style.width=H.width+"px",B.style.height=H.height+"px",N.on("resize",()=>{const V=z.getBoundingClientRect();B.width=V.width,B.height=V.height,B.style.width=V.width+"px",B.style.height=V.height+"px"})}},[]),Ne=E.useCallback((N,B)=>{const z=X.current;if(!z)return[-1e3,-1e3];try{const H={lat:N,lng:B},V=z.latLngToContainerPoint(H),de=V.x,ne=V.y;return[de,ne]}catch(H){return console.warn("Error converting lat/lng to pixel:",H),[-1e3,-1e3]}},[]),M=E.useCallback(N=>{let B=0;for(let de=0;de<N.length;de++)B=N.charCodeAt(de)+((B<<5)-B);const z=(B%360+360)%360,H=60+B%30,V=65+B%15;return`hsl(${z}, ${H}%, ${V}%)`},[]),ce=E.useMemo(()=>{const N=new Map;return t.forEach(z=>{z.event_id&&(N.has(z.event_id)||N.set(z.event_id,[]),N.get(z.event_id).push(z))}),Array.from(g.values()).filter(z=>N.has(z.id)).map(z=>{var H;return{event:z,sketchCount:((H=N.get(z.id))==null?void 0:H.length)||0}}).sort((z,H)=>{const V=z.event.event_date?new Date(z.event.event_date).getTime():0;return(H.event.event_date?new Date(H.event.event_date).getTime():0)-V})},[t,g]),F=E.useCallback(()=>{if(!s.current)return[];const B=[];return t.forEach(z=>{if(!z.event_id&&z.latitude&&z.longitude){const[H,V]=Ne(z.latitude,z.longitude);H!==-1e3&&V!==-1e3&&B.push({sketch:z,x:H,y:V})}}),B},[t,Ne]),te=E.useCallback(()=>{const N=new Map;if(t.forEach(G=>{G.event_id&&G.latitude&&G.longitude&&(N.has(G.event_id)||N.set(G.event_id,[]),N.get(G.event_id).push(G))}),!s.current)return[];const z=[];N.forEach((G,me)=>{const ae=g.get(me);if(!ae||!ae.latitude||!ae.longitude)return;const[ge,fe]=Ne(ae.latitude,ae.longitude);if(ge===-1e3&&fe===-1e3)return;const $e=20+Math.min(G.length*3,40);z.push({eventId:me,event:ae,sketches:G,x:ge,y:fe,radius:$e,mergedCount:1,color:M(me)})});const H=80,V=Math.pow(2,12-d),de=H*Math.max(.5,Math.min(2,V)),ne=[],ie=new Set;return z.forEach((G,me)=>{if(ie.has(G.eventId))return;const ae=[G];if(z.forEach((ge,fe)=>{if(me!==fe&&!ie.has(ge.eventId)){const $e=G.x-ge.x,wt=G.y-ge.y;Math.sqrt($e*$e+wt*wt)<de&&(ae.push(ge),ie.add(ge.eventId))}}),ae.length>1){const ge=ae.reduce((Re,Qe)=>Re+Qe.sketches.length,0),fe=ae.reduce((Re,Qe)=>Re+Qe.x,0)/ae.length,$e=ae.reduce((Re,Qe)=>Re+Qe.y,0)/ae.length,wt=25+Math.min(ge*2,50);ne.push({eventId:G.eventId,event:G.event,sketches:ae.flatMap(Re=>Re.sketches),x:fe,y:$e,radius:wt,mergedCount:ae.length,color:G.color,mergedEvents:ae.map(Re=>Re.event),mergedEventIds:ae.map(Re=>Re.eventId)})}else ne.push(G);ie.add(G.eventId)}),ne},[t,g,Ne,M,d]),ve=E.useCallback((N,B)=>{const z=s.current;if(!z)return null;const H=z.getBoundingClientRect(),V=N-H.left,de=B-H.top,ne=te(),ie=F();for(const{sketch:G,x:me,y:ae}of ie){const ge=me-V,fe=ae-de;if(Math.sqrt(ge*ge+fe*fe)<15)return{orphanSketch:G}}for(const G of ne){const me=G.x-V,ae=G.y-de;if(Math.sqrt(me*me+ae*ae)<G.radius)return{blob:G}}if(C){const G=ne.find(me=>me.eventId===C);if(G)for(const[me,ae]of D.entries()){const ge=ae.x-V,fe=ae.y-de;if(Math.sqrt(ge*ge+fe*fe)<20)return{blob:G,sketchId:me}}}return null},[te,F,C,D]),Ae=E.useCallback((N,B,z,H,V,de)=>{const ne=1+de*.3,ie=H*ne,G=N.createRadialGradient(B,z,0,B,z,ie),ae=V.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(ae){const[,ft,xt,Vt]=ae,Ln=parseInt(ft),qn=parseInt(xt),pt=parseInt(Vt),qt=de*60,Gn=(Ln+qt)%360;G.addColorStop(0,`hsla(${Gn}, ${qn}%, ${Math.min(pt+20,95)}%, 0.9)`),G.addColorStop(.3,`hsla(${(Gn+30)%360}, ${qn+10}%, ${pt+10}%, 0.7)`),G.addColorStop(.6,`hsla(${(Gn-20+360)%360}, ${qn-5}%, ${pt}%, 0.5)`),G.addColorStop(1,`hsla(${Gn}, ${qn}%, ${Math.max(pt-10,60)}%, 0.3)`)}N.fillStyle=G,N.beginPath(),N.arc(B,z,ie,0,Math.PI*2),N.fill(),N.save(),N.beginPath(),N.arc(B,z,ie,0,Math.PI*2),N.clip();const ge=N.getImageData(B-ie,z-ie,ie*2,ie*2),fe=ge.data,$e=ie*2,wt=ie*2;let Qe=(B*73+z*37)%1e4;const jn=()=>(Qe=(Qe*9301+49297)%233280,Qe/233280);for(let ft=0;ft<wt;ft++)for(let xt=0;xt<$e;xt++){const Vt=xt-ie,Ln=ft-ie;if(Math.sqrt(Vt*Vt+Ln*Ln)<=ie){const pt=(ft*$e+xt)*4,qt=(jn()-.5)*20;fe[pt]=Math.max(0,Math.min(255,fe[pt]+qt)),fe[pt+1]=Math.max(0,Math.min(255,fe[pt+1]+qt)),fe[pt+2]=Math.max(0,Math.min(255,fe[pt+2]+qt))}}N.putImageData(ge,B-ie,z-ie),N.restore()},[]),be=E.useCallback((N,B,z,H,V)=>{const ie=15*(1+V*.2),me="hsl(200, 60%, 70%)".match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(me){const[,ge,fe,$e]=me,wt=parseInt(ge),Re=parseInt(fe),Qe=parseInt($e),jn=V*40,ft=(wt+jn)%360,xt=N.createRadialGradient(B,z,0,B,z,ie);xt.addColorStop(0,`hsla(${ft}, ${Re}%, ${Math.min(Qe+15,95)}%, 0.8)`),xt.addColorStop(.5,`hsla(${(ft+20)%360}, ${Re+5}%, ${Qe}%, 0.6)`),xt.addColorStop(1,`hsla(${ft}, ${Re}%, ${Math.max(Qe-10,60)}%, 0.3)`),N.fillStyle=xt,N.beginPath(),N.arc(B,z,ie,0,Math.PI*2),N.fill()}const ae=H.thumbnail_url||H.image_url;if(ae){const ge=$.current.get(ae);if(ge&&ge.complete){N.save(),N.beginPath(),N.arc(B,z,ie-2,0,Math.PI*2),N.clip();const fe=ie*2-4;N.drawImage(ge,B-fe/2,z-fe/2,fe,fe),N.restore()}}},[]),_e=E.useRef(),ue=E.useCallback((N,B)=>{const z=Math.sin(N*12.9898+B*78.233)*43758.5453;return(z-Math.floor(z))*2-1},[]),qe=E.useCallback(N=>N*N*(3-2*N),[]),jt=E.useCallback((N,B)=>{const z=Math.floor(N),H=Math.floor(B),V=z+1,de=H+1,ne=ue(z,H),ie=ue(V,H),G=ue(z,de),me=ue(V,de),ae=N-z,ge=B-H,fe=qe(ae),$e=qe(ge),wt=ne*(1-fe)+ie*fe,Re=G*(1-fe)+me*fe;return wt*(1-$e)+Re*$e},[ue,qe]),rn=E.useCallback((N,B,z=3)=>{let H=0,V=.5,de=1,ne=0;for(let ie=0;ie<z;ie++)H+=jt(N*de,B*de)*V,ne+=V,V*=.5,de*=2;return(H/ne+1)/2},[jt]),yn=E.useCallback(N=>1-Math.pow(1-N,3),[]),sn=E.useCallback((N,B,z,H,V,de)=>{const ne=[],ie=Math.PI*2/Math.max(B.length,1),G=100,me=new Map,ae=Oe.current.get(V)||de;Oe.current.has(V)||Oe.current.set(V,de);const ge=.8,fe=de-ae,$e=Math.min(1,fe/ge),wt=yn($e);return B.forEach((Re,Qe)=>{const jn=Qe*ie,ft=de*.5,xt=.7,Vt=30,Ln=.15,pt=(rn(Qe*.3,ft*Ln,3)-.5)*xt,qt=jn+pt,Sl=(rn(Qe*.3+100,ft*Ln+50,3)-.5)*Vt,ts=(G+Sl)*wt,Er=z+Math.cos(qt)*ts,kr=H+Math.sin(qt)*ts;ne.push({sketch:Re,x:Er,y:kr,angle:qt,distance:ts}),me.set(Re.id,{x:Er,y:kr});const Kn=40,xo=Re.thumbnail_url||Re.image_url;if(N.fillStyle="#fff",N.beginPath(),N.arc(Er,kr,Kn/2,0,Math.PI*2),N.fill(),N.strokeStyle="#333",N.lineWidth=2,N.stroke(),xo){const Pr=$.current.get(xo);Pr&&Pr.complete&&(N.save(),N.beginPath(),N.arc(Er,kr,Kn/2-1,0,Math.PI*2),N.clip(),N.drawImage(Pr,Er-Kn/2,kr-Kn/2,Kn,Kn),N.restore())}}),I(me),ne},[rn,yn]),Lt=E.useCallback(()=>{const N=s.current;if(!N)return;const B=N.getContext("2d");if(!B)return;if(!X.current){Q.current=requestAnimationFrame(Lt);return}const z=performance.now()/1e3;(Y.current===0||z-Y.current>1)&&(Y.current=z);const H=z-Y.current;we.current+=H,Y.current=z,B.clearRect(0,0,N.width,N.height);const V=te(),de=F();V.forEach(ne=>{const ie=C===ne.eventId;let G=0;if(O){const me=ne.x-O.x,ae=ne.y-O.y,ge=Math.sqrt(me*me+ae*ae);G=Math.max(0,1-ge/150)}Ae(B,ne.x,ne.y,ne.radius,ne.color,G),ne.mergedCount>1&&(B.fillStyle="#fff",B.font="bold 14px sans-serif",B.textAlign="center",B.textBaseline="middle",B.fillText(ne.mergedCount.toString(),ne.x,ne.y)),ie&&sn(B,ne.sketches,ne.x,ne.y,ne.eventId,we.current)}),de.forEach(({sketch:ne,x:ie,y:G})=>{let me=0;if(O){const ae=ie-O.x,ge=G-O.y,fe=Math.sqrt(ae*ae+ge*ge);me=Math.max(0,1-fe/100)}be(B,ie,G,ne,me)}),Q.current=requestAnimationFrame(Lt)},[te,F,C,O,Ae,sn,be]);E.useEffect(()=>{_e.current=Lt},[Lt]),E.useEffect(()=>{if(C){const B=te().find(z=>z.eventId===C);B&&B.sketches.forEach(z=>{const H=z.thumbnail_url||z.image_url;if(H&&!$.current.has(H)){const V=new Image;V.crossOrigin="anonymous",V.onload=()=>{$.current.set(H,V),_e.current&&(Q.current&&cancelAnimationFrame(Q.current),Q.current=requestAnimationFrame(_e.current))},V.src=H}})}F().forEach(({sketch:B})=>{const z=B.thumbnail_url||B.image_url;if(z&&!$.current.has(z)){const H=new Image;H.crossOrigin="anonymous",H.onload=()=>{$.current.set(z,H),_e.current&&(Q.current&&cancelAnimationFrame(Q.current),Q.current=requestAnimationFrame(_e.current))},H.src=z}})},[C,te,F]),E.useEffect(()=>{const N=s.current;if(!N)return;const B=()=>{var de;const V=(de=X.current)==null?void 0:de.getContainer();if(V){const ne=V.getBoundingClientRect();N.width=ne.width,N.height=ne.height,N.style.width=ne.width+"px",N.style.height=ne.height+"px"}else{const ne=N.parentElement;if(ne){const ie=ne.getBoundingClientRect();N.width=ie.width,N.height=ie.height,N.style.width=ie.width+"px",N.style.height=ie.height+"px"}}};B();const z=setInterval(()=>{X.current&&(B(),clearInterval(z))},100);window.addEventListener("resize",B);const H=X.current;return H&&H.on("resize",B),Lt(),()=>{clearInterval(z),window.removeEventListener("resize",B),H&&H.off("resize",B),Q.current&&cancelAnimationFrame(Q.current)}},[Lt]);const On=E.useCallback(N=>{const B=s.current;if(!B)return;const z=B.getBoundingClientRect(),H=N.clientX-z.left,V=N.clientY-z.top;A({x:H,y:V});const de=te(),ne=F();let ie=!1;for(const{sketch:G,x:me,y:ae}of ne){const ge=me-H,fe=ae-V;if(Math.sqrt(ge*ge+fe*fe)<15){P(G.id),x(null),ie=!0;break}}if(!ie)for(const G of de){const me=G.x-H,ae=G.y-V;if(Math.sqrt(me*me+ae*ae)<G.radius){G.mergedCount===1&&(x(G.eventId),P(null),ie=!0);break}}ie||(x(null),P(null))},[te,F]),q=E.useCallback(N=>{if(N.length<2)return d;let B=N[0].latitude,z=N[0].latitude,H=N[0].longitude,V=N[0].longitude;N.forEach(fe=>{B=Math.min(B,fe.latitude),z=Math.max(z,fe.latitude),H=Math.min(H,fe.longitude),V=Math.max(V,fe.longitude)});const de=z-B,ne=V-H,ie=Math.max(de,ne),G=s.current;if(!G)return d+3;const me=200,ae=Math.pow(2,d)*.001,ge=ie*ae*Math.min(G.width,G.height);if(ge<me){const fe=Math.ceil(Math.log2(me/ge));return Math.min(20,d+Math.max(2,fe))}return d+2},[d]),je=E.useCallback(N=>{const B=ve(N.clientX,N.clientY);if(!B){S(null),b(null);return}N.stopPropagation(),N.preventDefault();const{blob:z,sketchId:H,orphanSketch:V}=B;if(V){b(V),i==null||i(V);return}if(z){if(H){const de=z.sketches.find(ne=>ne.id===H);if(de){b(de),i==null||i(de);return}}if(z.mergedCount>1&&z.mergedEvents){const de=z.mergedEvents.reduce((G,me)=>G+me.latitude,0)/z.mergedEvents.length,ne=z.mergedEvents.reduce((G,me)=>G+me.longitude,0)/z.mergedEvents.length;c([de,ne]);const ie=q(z.mergedEvents);f(ie),S(null),b(null);return}C===z.eventId?(S(null),b(null),Oe.current.delete(z.eventId)):(S(z.eventId),b(null))}},[ve,C,q,i]),yt=E.useCallback(N=>{ve(N.clientX,N.clientY)&&(N.stopPropagation(),N.preventDefault())},[ve]);return E.useEffect(()=>{if(!X.current)return;const N=X.current.getContainer();if(N)return N.addEventListener("mousemove",On,!0),N.addEventListener("click",je,!0),N.addEventListener("mousedown",yt,!0),()=>{N.removeEventListener("mousemove",On,!0),N.removeEventListener("click",je,!0),N.removeEventListener("mousedown",yt,!0)}},[On,je,yt]),m.jsxs("div",{className:"relative w-full h-screen bg-gray-900",children:[m.jsx("div",{ref:a,className:"absolute inset-0 z-10",children:m.jsxs(L_,{center:e,zoom:n,style:{height:"100%",width:"100%"},zoomControl:!0,attributionControl:!1,scrollWheelZoom:!0,doubleClickZoom:!0,dragging:!0,touchZoom:!0,boxZoom:!0,children:[m.jsx(gk,{onMapMove:Z,onMapZoom:le,externalCenter:l,externalZoom:d,onMapReady:ee}),m.jsx(N_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",className:"map-tiles-dark"})]})}),m.jsx("canvas",{ref:s,className:"absolute top-0 left-0",style:{display:"block",pointerEvents:"none",zIndex:1e3,width:"100%",height:"100%"}}),ce.length>0&&m.jsxs("div",{className:"absolute bg-white bg-opacity-95 backdrop-blur-sm rounded-lg shadow-xl border border-gray-200 p-2.5 z-50",style:{width:"260px",maxHeight:"30vh",overflowY:"auto",right:"1rem",top:"1rem"},children:[m.jsx("h3",{className:"text-xs font-semibold text-gray-800 mb-1.5 uppercase tracking-wide",children:"Eventos"}),m.jsx("div",{className:"space-y-0.5",children:ce.map(({event:N,sketchCount:B})=>m.jsxs("div",{className:`text-xs text-gray-700 cursor-pointer hover:bg-gray-100 rounded px-2 py-1 transition-colors ${C===N.id?"bg-gray-200 font-semibold":""}`,onClick:()=>{C===N.id?S(null):(S(N.id),N.latitude&&N.longitude&&(c([N.latitude,N.longitude]),f(Math.max(d,14))))},children:[N.event_date&&m.jsxs("span",{className:"text-gray-500",children:[Yd(N.event_date)," -"," "]}),m.jsx("span",{className:"font-medium",children:N.title}),B>0&&m.jsxs("span",{className:"text-gray-500",children:[" (",B,")"]})]},N.id))})]}),y&&(()=>{const N=g.get(y),B=te().find(H=>H.eventId===y),z=(B==null?void 0:B.sketches.length)||0;return m.jsxs("div",{className:"absolute pointer-events-none bg-black bg-opacity-75 text-white px-3 py-1 rounded text-sm",style:{left:O?`${O.x+10}px`:"0",top:O?`${O.y+10}px`:"0",zIndex:1500},children:[(N==null?void 0:N.title)||"Event",z>0&&` (${z})`]})})(),k&&(()=>{const N=t.find(B=>B.id===k);return N?m.jsx("div",{className:"absolute pointer-events-none bg-black bg-opacity-75 text-white px-3 py-1 rounded text-sm",style:{left:O?`${O.x+10}px`:"0",top:O?`${O.y+10}px`:"0",zIndex:1500},children:N.title}):null})(),w&&m.jsxs("div",{className:"fixed bottom-4 right-4 bg-white rounded-lg shadow-2xl overflow-hidden max-w-sm w-full",style:{maxHeight:"60vh",zIndex:2e3},children:[m.jsx("button",{onClick:()=>b(null),className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-70 z-10 transition-all",children:""}),m.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:"60vh"},children:[m.jsx("img",{src:w.image_url,alt:w.title,className:"w-full h-auto"}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:w.title}),w.profiles&&m.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[w.profiles.avatar_url&&m.jsx("img",{src:w.profiles.avatar_url,alt:w.profiles.username,className:"w-10 h-10 rounded-full flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["@",w.profiles.username]}),w.description&&m.jsx("p",{className:"text-sm text-gray-600 mt-1 break-words",children:w.description})]})]}),w.location_name&&m.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" ",w.location_name]}),m.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(w.sketch_date||w.uploaded_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})}function _k(){const{sketches:t,loading:e,refetch:n}=wl(),[i,s]=E.useState(null),[a,l]=E.useState(null),c=E.useRef(null);if(e)return m.jsx("div",{className:"flex items-center justify-center bg-gray-50",style:{height:"calc(100vh - 64px)",overflow:"hidden"},children:m.jsx("div",{className:"text-center",children:m.jsx("p",{className:"text-gray-600",children:"Loading map..."})})});const d=t.filter(f=>f.latitude&&f.longitude);return m.jsxs("div",{className:"relative w-full",style:{height:"calc(100vh - 64px)",overflow:"hidden"},children:[m.jsx(vk,{sketches:d}),i&&m.jsx(bl,{sketch:i,onClose:()=>s(null),onUpdate:()=>{n(),s(null)},onEdit:f=>{s(null),l(f)}}),a&&m.jsx("div",{ref:c,className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onMouseDown:f=>{var g,v;f.target===f.currentTarget?(g=c.current)==null||g.setAttribute("data-mousedown","true"):(v=c.current)==null||v.removeAttribute("data-mousedown")},onClick:f=>{var g,v;f.target===f.currentTarget&&((g=c.current)==null?void 0:g.getAttribute("data-mousedown"))==="true"&&l(null),(v=c.current)==null||v.removeAttribute("data-mousedown")},children:m.jsxs("div",{className:"bg-gray-50 rounded-lg max-w-2xl w-full my-12 max-h-[90vh] overflow-y-auto shadow-lg",onClick:f=>f.stopPropagation(),children:[m.jsxs("div",{className:"p-4 border-b border-gray-300 flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Editar Sketch"}),m.jsx("button",{onClick:()=>l(null),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none","aria-label":"Cerrar",children:""})]}),m.jsx("div",{className:"p-6",children:m.jsx(co,{sketch:a,onSuccess:()=>{l(null),n()},onCancel:()=>l(null)})})]})})]})}function yk({userId:t}){const{sketches:e,loading:n,refetch:i}=wl(t),[s,a]=E.useState(null),[l,c]=E.useState(null);return n?m.jsx("div",{className:"text-center py-12",children:"Loading sketches..."}):e.length===0?m.jsx("div",{className:"text-center py-12 text-gray-500",children:"No sketches uploaded yet."}):m.jsxs(m.Fragment,{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Sketches"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(d=>m.jsx(Xd,{sketch:d,onClick:()=>a(d)},d.id))}),s&&m.jsx(bl,{sketch:s,onClose:()=>a(null),onUpdate:()=>{i(),a(null)},onEdit:d=>{a(null),c(d)}}),l&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:d=>{d.target===d.currentTarget&&c(null)},children:m.jsxs("div",{className:"bg-gray-50 rounded-lg max-w-2xl w-full my-12 max-h-[90vh] overflow-y-auto shadow-lg",onClick:d=>d.stopPropagation(),children:[m.jsxs("div",{className:"p-4 border-b border-gray-300 flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Editar Sketch"}),m.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none","aria-label":"Cerrar",children:""})]}),m.jsx("div",{className:"p-6",children:m.jsx(co,{sketch:l,onSuccess:()=>{c(null),i()},onCancel:()=>c(null)})})]})})]})}function wk(){const{username:t}=qx(),{profile:e,username:n}=Jd(),i=Ji(),[s,a]=E.useState(null),[l,c]=E.useState(!0),[d,f]=E.useState(!1),[g,v]=E.useState({username:"",full_name:"",bio:"",city:"",country:""}),y=t||n,x=!t||y&&y.toLowerCase()===(n==null?void 0:n.toLowerCase());E.useEffect(()=>{k()},[t,n]);const k=async()=>{try{c(!0);const C=t||n;if(!C){console.log("[ProfilePage] No target username");return}console.log("[ProfilePage]  Fetching profile for username:",C);const{data:S,error:w}=await Ee.from("profiles").select("*").eq("username",C.toLowerCase()).single();if(w){w.code==="PGRST116"||w.message.includes("No rows returned")?(console.log("[ProfilePage]  Profile not found in database"),console.log("[ProfilePage] User is authenticated but has no profile record"),a(null)):(console.error("[ProfilePage]  Error fetching profile:",w),console.error("[ProfilePage] Error details:",{message:w.message,code:w.code,details:w.details,hint:w.hint}),a(null));return}S?(console.log("[ProfilePage]  Profile fetched:",S.username),a(S),x&&v({username:S.username||"",full_name:S.full_name||"",bio:S.bio||"",city:S.city||"",country:S.country||""})):(console.log("[ProfilePage]  No profile data returned"),a(null))}catch(C){console.error("[ProfilePage]  Exception fetching profile:",C),a(null)}finally{c(!1)}},P=async()=>{if(!(!e||!s||!x))try{const C={username:g.username,full_name:g.full_name||null,bio:g.bio||null,city:g.city||null,country:g.country||null},{error:S}=await Ee.from("profiles").update(C).eq("id",s.id);if(S)throw S;C.username&&C.username!==s.username&&i(`/profile/${C.username}`,{replace:!0}),await k(),f(!1)}catch(C){alert(C.message||"Failed to update profile")}};return l?m.jsx("div",{className:"text-center py-12",children:"Loading profile..."}):s?m.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[m.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 mb-8",children:m.jsxs("div",{className:"flex items-start space-x-6",children:[s.avatar_url&&m.jsx("img",{src:s.avatar_url,alt:s.username,className:"w-32 h-32 rounded-full object-cover"}),m.jsx("div",{className:"flex-1",children:d?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),m.jsx("input",{type:"text",value:g.username,onChange:C=>v({...g,username:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),m.jsx("input",{type:"text",value:g.full_name,onChange:C=>v({...g,full_name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),m.jsx("textarea",{value:g.bio,onChange:C=>v({...g,bio:C.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),m.jsx("input",{type:"text",value:g.city,onChange:C=>v({...g,city:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),m.jsx("input",{type:"text",value:g.country,onChange:C=>v({...g,country:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{onClick:P,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"}),m.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:s.full_name||s.username}),m.jsxs("p",{className:"text-gray-600 mb-4",children:["@",s.username]}),s.bio&&m.jsx("p",{className:"text-gray-700 mb-4",children:s.bio}),(s.city||s.country)&&m.jsxs("p",{className:"text-gray-600 mb-2",children:[" ",[s.city,s.country].filter(Boolean).join(", ")]}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Joined ",new Date(s.created_at).toLocaleDateString()]}),x&&m.jsx("button",{onClick:()=>f(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Editar Perfil"})]})})]})}),m.jsx(yk,{userId:s.id})]}):x&&e?m.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:m.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Profile Not Found"}),m.jsx("p",{className:"text-gray-700 mb-6",children:"You are authenticated, but you don't have a profile in the database yet. You need to complete your profile setup before you can use all features."}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("p",{className:"text-sm text-gray-600",children:[m.jsx("strong",{children:"What's happening:"})," Your authentication session is stored locally, but your profile record wasn't created in the database. This is why you see this message even though you're logged in."]}),m.jsx("button",{onClick:()=>window.location.href="/login",className:"px-6 py-3 bg-gray-700 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Go to Profile Setup"})]})]})}):m.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:m.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Profile Not Found"}),m.jsx("p",{className:"text-gray-700",children:"This user profile doesn't exist."})]})})}function xk(){return m.jsx(wk,{})}const $p="usk_username";function bk({onSuccess:t,onSwitchToSignup:e}){const[n,i]=E.useState(""),[s,a]=E.useState(""),[l,c]=E.useState(null),[d,f]=E.useState(!1),{signIn:g}=wo(),v=async y=>{y.preventDefault(),c(null),f(!0);try{console.log("[LoginForm]  Attempting sign in...");const{data:x,error:k}=await g(n,s);if(k)throw console.error("[LoginForm]  Sign in failed:",k),k;if(!x.user)throw new Error("Sign in succeeded but no user data returned");console.log("[LoginForm]  Sign in successful, fetching profile...");const{data:P,error:C}=await Ee.from("profiles").select("username").eq("id",x.user.id).maybeSingle();C&&console.error("[LoginForm]  Error fetching profile (non-fatal):",C),P!=null&&P.username?(console.log("[LoginForm]  Updating localStorage with username:",P.username),localStorage.setItem($p,P.username)):(console.log("[LoginForm]  No profile found for user, clearing localStorage"),localStorage.removeItem($p)),console.log("[LoginForm]  Login complete"),t==null||t()}catch(x){console.error("[LoginForm]  Sign in error:",x),c(x.message||"Failed to sign in")}finally{f(!1)}};return m.jsxs("div",{className:"max-w-md mx-auto bg-gray-50 p-8 rounded-lg shadow-sm border border-gray-300",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Login"}),m.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),m.jsx("input",{id:"email",type:"email",value:n,onChange:y=>i(y.target.value),required:!0,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"your@email.com"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),m.jsx("input",{id:"password",type:"password",value:s,onChange:y=>a(y.target.value),required:!0,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:""})]}),m.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Signing in...":"Sign In"}),e&&m.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",m.jsx("button",{type:"button",onClick:e,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up"})]})]})]})}const Fp="usk_username";function Sk({onSuccess:t,onSwitchToLogin:e}){const[n,i]=E.useState(""),[s,a]=E.useState(""),[l,c]=E.useState(""),[d,f]=E.useState(""),[g,v]=E.useState(null),[y,x]=E.useState(!1),[k,P]=E.useState("idle"),C=E.useRef(null);E.useEffect(()=>{C.current&&clearTimeout(C.current);const w=s.trim();if(!w){P("idle");return}if(!/^[a-zA-Z0-9_-]{3,20}$/.test(w)){P("invalid");return}return P("checking"),C.current=setTimeout(async()=>{try{const{data:O,error:A}=await Ee.from("profiles").select("id").eq("username",w.toLowerCase()).maybeSingle();if(A&&A.code!=="PGRST116"){console.error("[SignupForm]  Error checking username:",A),P("idle");return}P(O?"taken":"available")}catch(O){console.error("[SignupForm]  Username check error:",O),P("idle")}},500),()=>{C.current&&clearTimeout(C.current)}},[s]);const S=async w=>{w.preventDefault(),v(null);const b=s.trim(),O=n.trim().toLowerCase();if(!b){v("Username is required");return}if(!/^[a-zA-Z0-9_-]{3,20}$/.test(b)){v("Username must be 3-20 characters and contain only letters, numbers, underscores, or hyphens");return}if(k==="taken"){v("Username is already taken. Please choose another.");return}if(k==="checking"){v("Please wait while we check username availability...");return}if(!O){v("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O)){v("Please enter a valid email address");return}if(!l){v("Password is required");return}if(l.length<6){v("Password must be at least 6 characters");return}if(l!==d){v("Passwords do not match");return}x(!0);try{console.log("[SignupForm]  Step 1: Creating auth user...");const{data:I,error:$}=await Ee.auth.signUp({email:O,password:l,options:{emailRedirectTo:void 0,data:{username:b}}});if($)throw console.error("[SignupForm]  Auth signup failed:",$),$.message.includes("already registered")?new Error("This email is already registered. Please sign in instead."):new Error($.message||"Failed to create account. Please try again.");if(!I.user)throw new Error("Account creation failed. No user data returned.");console.log("[SignupForm]  Auth user created:",I.user.id),console.log("[SignupForm]  Step 2: Checking if profile already exists...");const{data:Q,error:X}=await Ee.from("profiles").select("id, username").eq("id",I.user.id).maybeSingle();if(X&&X.code!=="PGRST116")throw console.error("[SignupForm]  Error checking existing profile:",X),new Error("Failed to check profile. Please try again.");if(console.log("[SignupForm]  Step 3: Creating/updating profile..."),Q){console.log("[SignupForm]  Profile exists, updating username...");const{data:we,error:Y}=await Ee.from("profiles").update({username:b.toLowerCase(),email:O}).eq("id",I.user.id).select().single();if(Y)throw console.error("[SignupForm]  Profile update failed:",Y),Y.code==="23505"&&Y.message.includes("username")?new Error("Username is already taken. Please choose another."):new Error(Y.message||"Failed to update profile. Please try again.");if(!we)throw new Error("Profile update failed. No data returned.");console.log("[SignupForm]  Profile updated:",we.id)}else{const{data:we,error:Y}=await Ee.from("profiles").insert({id:I.user.id,username:b.toLowerCase(),email:O,full_name:null,bio:null,city:null,country:null,avatar_url:null}).select().single();if(Y){if(console.error("[SignupForm]  Profile creation failed:",Y),Y.code==="23505"){if(Y.message.includes("username"))throw new Error("Username is already taken. Please choose another.");{console.log("[SignupForm]  Profile exists (primary key conflict), updating...");const{data:Oe,error:Z}=await Ee.from("profiles").update({username:b.toLowerCase(),email:O}).eq("id",I.user.id).select().single();if(Z)throw new Error(Z.message||"Failed to create profile. Please try again.");console.log("[SignupForm]  Profile updated after conflict:",Oe==null?void 0:Oe.id),Oe!=null&&Oe.username&&(console.log("[SignupForm]  Updating localStorage with username:",Oe.username),localStorage.setItem(Fp,Oe.username)),t==null||t(),x(!1);return}}throw Y.code==="23503"?new Error("Failed to create profile. Please contact support."):new Error(Y.message||"Failed to create profile. Please try again.")}if(!we)throw new Error("Profile creation failed. No data returned.");console.log("[SignupForm]  Profile created:",we.id)}console.log("[SignupForm]  Updating localStorage with username:",b.toLowerCase()),localStorage.setItem(Fp,b.toLowerCase()),console.log("[SignupForm]  Sign up and profile creation successful!"),t==null||t()}catch(I){console.error("[SignupForm]  Sign up error:",I),v(I.message||"Failed to sign up. Please try again.")}finally{x(!1)}};return m.jsxs("div",{className:"max-w-md mx-auto bg-gray-50 p-8 rounded-lg shadow-sm border border-gray-300",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Sign Up"}),m.jsxs("form",{onSubmit:S,className:"space-y-4",children:[g&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:g}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:["Username ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"username",type:"text",value:s,onChange:w=>a(w.target.value),required:!0,className:`w-full px-4 py-2 bg-white border rounded-md focus:ring-2 focus:border-gray-500 text-gray-900 ${k==="available"?"border-green-500 focus:ring-green-500":k==="taken"||k==="invalid"?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-500"}`,placeholder:"pedroNelGomez",pattern:"[a-zA-Z0-9_-]{3,20}"}),k==="checking"&&m.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-gray-500",children:"Checking..."}),k==="available"&&m.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-green-600",children:" Available"}),k==="taken"&&m.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-red-600",children:" Taken"}),k==="invalid"&&s.trim()&&m.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-red-600",children:"Invalid format"})]}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:k==="invalid"&&s.trim()?"Username must be 3-20 characters and contain only letters, numbers, underscores, or hyphens":"3-20 characters, letters, numbers, underscores, or hyphens"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),m.jsx("input",{id:"email",type:"email",value:n,onChange:w=>i(w.target.value),required:!0,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"your@email.com"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),m.jsx("input",{id:"password",type:"password",value:l,onChange:w=>c(w.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:""})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),m.jsx("input",{id:"confirmPassword",type:"password",value:d,onChange:w=>f(w.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:""})]}),m.jsx("button",{type:"submit",disabled:y,className:"w-full bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:y?"Creating account...":"Sign Up"}),e&&m.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",m.jsx("button",{type:"button",onClick:e,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Login"})]})]})]})}function Ek(){const[t,e]=E.useState("login"),n=Ji(),i=()=>{n("/")};return m.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"max-w-md mx-auto",children:t==="login"?m.jsx(bk,{onSuccess:i,onSwitchToSignup:()=>e("signup")}):m.jsx(Sk,{onSuccess:i,onSwitchToLogin:()=>e("login")})})})}function kk(){return m.jsx("div",{className:"bg-gray-50 flex items-center justify-center px-4",style:{height:"calc(100vh - 64px)"},children:m.jsx("div",{className:"max-w-3xl w-full",children:m.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8 md:p-12",children:m.jsxs("p",{className:"text-gray-700 text-lg leading-relaxed",children:["Este sitio fue creado por Agustn Vallejo, un sketcher de Medelln, Colombia. Es un proyecto personal para compartir dibujos con mis compaeros de ciudad. Espero lo disfruten!",m.jsx("br",{}),m.jsx("br",{}),"Redes:"," ",m.jsx("a",{href:"https://www.instagram.com/agusvallejov/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 font-medium underline decoration-2 underline-offset-2 transition-colors",children:"Instagram"})," y ",m.jsx("a",{href:"https://github.com/agustinvallejo",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 font-medium underline decoration-2 underline-offset-2 transition-colors",children:"GitHub"})]})})})})}function Pk(){return m.jsx(VE,{children:m.jsx(gb,{children:m.jsxs("div",{className:"min-h-screen flex flex-col",children:[m.jsx(GE,{}),m.jsx("main",{className:"flex-grow",children:m.jsxs(ub,{children:[m.jsx(gi,{path:"/",element:m.jsx(mk,{})}),m.jsx(gi,{path:"/map",element:m.jsx(_k,{})}),m.jsx(gi,{path:"/profile/:username",element:m.jsx(xk,{})}),m.jsx(gi,{path:"/auth",element:m.jsx(Ek,{})}),m.jsx(gi,{path:"/info",element:m.jsx(kk,{})})]})})]})})})}console.log=()=>{},console.debug=()=>{},console.info=()=>{},console.warn=()=>{};Au.createRoot(document.getElementById("root")).render(m.jsx($s.StrictMode,{children:m.jsx(Pk,{})}));

function Dp(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(i,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $y(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}var Up={exports:{}},Ka={},$p={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oo=Symbol.for("react.element"),Fy=Symbol.for("react.portal"),Wy=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),Hy=Symbol.for("react.profiler"),Vy=Symbol.for("react.provider"),qy=Symbol.for("react.context"),Ky=Symbol.for("react.forward_ref"),Gy=Symbol.for("react.suspense"),Jy=Symbol.for("react.memo"),Qy=Symbol.for("react.lazy"),Zd=Symbol.iterator;function Yy(t){return t===null||typeof t!="object"?null:(t=Zd&&t[Zd]||t["@@iterator"],typeof t=="function"?t:null)}var Fp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wp=Object.assign,Zp={};function Wi(t,e,n){this.props=t,this.context=e,this.refs=Zp,this.updater=n||Fp}Wi.prototype.isReactComponent={};Wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hp(){}Hp.prototype=Wi.prototype;function $c(t,e,n){this.props=t,this.context=e,this.refs=Zp,this.updater=n||Fp}var Fc=$c.prototype=new Hp;Fc.constructor=$c;Wp(Fc,Wi.prototype);Fc.isPureReactComponent=!0;var Hd=Array.isArray,Vp=Object.prototype.hasOwnProperty,Wc={current:null},qp={key:!0,ref:!0,__self:!0,__source:!0};function Kp(t,e,n){var i,s={},a=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)Vp.call(e,i)&&!qp.hasOwnProperty(i)&&(s[i]=e[i]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var h=Array(c),f=0;f<c;f++)h[f]=arguments[f+2];s.children=h}if(t&&t.defaultProps)for(i in c=t.defaultProps,c)s[i]===void 0&&(s[i]=c[i]);return{$$typeof:oo,type:t,key:a,ref:l,props:s,_owner:Wc.current}}function Xy(t,e){return{$$typeof:oo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zc(t){return typeof t=="object"&&t!==null&&t.$$typeof===oo}function e0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vd=/\/+/g;function ql(t,e){return typeof t=="object"&&t!==null&&t.key!=null?e0(""+t.key):e.toString(36)}function oa(t,e,n,i,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case oo:case Fy:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+ql(l,0):i,Hd(s)?(n="",t!=null&&(n=t.replace(Vd,"$&/")+"/"),oa(s,e,n,"",function(f){return f})):s!=null&&(Zc(s)&&(s=Xy(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Vd,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",Hd(t))for(var c=0;c<t.length;c++){a=t[c];var h=i+ql(a,c);l+=oa(a,e,n,h,s)}else if(h=Yy(t),typeof h=="function")for(t=h.call(t),c=0;!(a=t.next()).done;)a=a.value,h=i+ql(a,c++),l+=oa(a,e,n,h,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Ro(t,e,n){if(t==null)return t;var i=[],s=0;return oa(t,i,"","",function(a){return e.call(n,a,s++)}),i}function t0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},aa={transition:null},n0={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:aa,ReactCurrentOwner:Wc};function Gp(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Ro,forEach:function(t,e,n){Ro(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ro(t,function(){e++}),e},toArray:function(t){return Ro(t,function(e){return e})||[]},only:function(t){if(!Zc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=Wi;_e.Fragment=Wy;_e.Profiler=Hy;_e.PureComponent=$c;_e.StrictMode=Zy;_e.Suspense=Gy;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n0;_e.act=Gp;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Wp({},t.props),s=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=Wc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)Vp.call(e,h)&&!qp.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){c=Array(h);for(var f=0;f<h;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:oo,type:t.type,key:s,ref:a,props:i,_owner:l}};_e.createContext=function(t){return t={$$typeof:qy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Vy,_context:t},t.Consumer=t};_e.createElement=Kp;_e.createFactory=function(t){var e=Kp.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:Ky,render:t}};_e.isValidElement=Zc;_e.lazy=function(t){return{$$typeof:Qy,_payload:{_status:-1,_result:t},_init:t0}};_e.memo=function(t,e){return{$$typeof:Jy,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=aa.transition;aa.transition={};try{t()}finally{aa.transition=e}};_e.unstable_act=Gp;_e.useCallback=function(t,e){return St.current.useCallback(t,e)};_e.useContext=function(t){return St.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return St.current.useDeferredValue(t)};_e.useEffect=function(t,e){return St.current.useEffect(t,e)};_e.useId=function(){return St.current.useId()};_e.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return St.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};_e.useRef=function(t){return St.current.useRef(t)};_e.useState=function(t){return St.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return St.current.useTransition()};_e.version="18.3.1";$p.exports=_e;var P=$p.exports;const zs=$y(P),r0=Dp({__proto__:null,default:zs},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0=P,s0=Symbol.for("react.element"),o0=Symbol.for("react.fragment"),a0=Object.prototype.hasOwnProperty,l0=i0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u0={key:!0,ref:!0,__self:!0,__source:!0};function Jp(t,e,n){var i,s={},a=null,l=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)a0.call(e,i)&&!u0.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:s0,type:t,key:a,ref:l,props:s,_owner:l0.current}}Ka.Fragment=o0;Ka.jsx=Jp;Ka.jsxs=Jp;Up.exports=Ka;var v=Up.exports,Lu={},Qp={exports:{}},Dt={},Yp={exports:{}},Xp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,re){var F=M.length;M.push(re);e:for(;0<F;){var ie=F-1>>>1,fe=M[ie];if(0<s(fe,re))M[ie]=re,M[F]=fe,F=ie;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var re=M[0],F=M.pop();if(F!==re){M[0]=F;e:for(var ie=0,fe=M.length,H=fe>>>1;ie<H;){var ae=2*(ie+1)-1,le=M[ae],ee=ae+1,Ie=M[ee];if(0>s(le,F))ee<fe&&0>s(Ie,le)?(M[ie]=Ie,M[ee]=F,ie=ee):(M[ie]=le,M[ae]=F,ie=ae);else if(ee<fe&&0>s(Ie,F))M[ie]=Ie,M[ee]=F,ie=ee;else break e}}return re}function s(M,re){var F=M.sortIndex-re.sortIndex;return F!==0?F:M.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],f=[],m=1,g=null,w=3,b=!1,k=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(M){for(var re=n(f);re!==null;){if(re.callback===null)i(f);else if(re.startTime<=M)i(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=n(f)}}function O(M){if(E=!1,x(M),!k)if(n(h)!==null)k=!0,ye(A);else{var re=n(f);re!==null&&We(O,re.startTime-M)}}function A(M,re){k=!1,E&&(E=!1,S(B),B=-1),b=!0;var F=w;try{for(x(re),g=n(h);g!==null&&(!(g.expirationTime>re)||M&&!oe());){var ie=g.callback;if(typeof ie=="function"){g.callback=null,w=g.priorityLevel;var fe=ie(g.expirationTime<=re);re=t.unstable_now(),typeof fe=="function"?g.callback=fe:g===n(h)&&i(h),x(re)}else i(h);g=n(h)}if(g!==null)var H=!0;else{var ae=n(f);ae!==null&&We(O,ae.startTime-re),H=!1}return H}finally{g=null,w=F,b=!1}}var z=!1,I=null,B=-1,U=5,G=-1;function oe(){return!(t.unstable_now()-G<U)}function K(){if(I!==null){var M=t.unstable_now();G=M;var re=!0;try{re=I(!0,M)}finally{re?Ce():(z=!1,I=null)}}else z=!1}var Ce;if(typeof y=="function")Ce=function(){y(K)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Ye=Te.port2;Te.port1.onmessage=K,Ce=function(){Ye.postMessage(null)}}else Ce=function(){T(K,0)};function ye(M){I=M,z||(z=!0,Ce())}function We(M,re){B=T(function(){M(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,ye(A))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(M){switch(w){case 1:case 2:case 3:var re=3;break;default:re=w}var F=w;w=re;try{return M()}finally{w=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,re){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var F=w;w=M;try{return re()}finally{w=F}},t.unstable_scheduleCallback=function(M,re,F){var ie=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ie+F:ie):F=ie,M){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=F+fe,M={id:m++,callback:re,priorityLevel:M,startTime:F,expirationTime:fe,sortIndex:-1},F>ie?(M.sortIndex=F,e(f,M),n(h)===null&&M===n(f)&&(E?(S(B),B=-1):E=!0,We(O,F-ie))):(M.sortIndex=fe,e(h,M),k||b||(k=!0,ye(A))),M},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(M){var re=w;return function(){var F=w;w=re;try{return M.apply(this,arguments)}finally{w=F}}}})(Xp);Yp.exports=Xp;var c0=Yp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0=P,zt=c0;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var em=new Set,Ds={};function Zr(t,e){Ri(t,e),Ri(t+"Capture",e)}function Ri(t,e){for(Ds[t]=e,t=0;t<e.length;t++)em.add(e[t])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ju=Object.prototype.hasOwnProperty,d0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qd={},Kd={};function f0(t){return ju.call(Kd,t)?!0:ju.call(qd,t)?!1:d0.test(t)?Kd[t]=!0:(qd[t]=!0,!1)}function p0(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function m0(t,e,n,i){if(e===null||typeof e>"u"||p0(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,n,i,s,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hc=/[\-:]([a-z])/g;function Vc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hc,Vc);ct[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hc,Vc);ct[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hc,Vc);ct[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function qc(t,e,n,i){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(m0(e,n,s,i)&&(n=null),i||s===null?f0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Fn=h0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ao=Symbol.for("react.element"),mi=Symbol.for("react.portal"),gi=Symbol.for("react.fragment"),Kc=Symbol.for("react.strict_mode"),Nu=Symbol.for("react.profiler"),tm=Symbol.for("react.provider"),nm=Symbol.for("react.context"),Gc=Symbol.for("react.forward_ref"),Iu=Symbol.for("react.suspense"),Ru=Symbol.for("react.suspense_list"),Jc=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),rm=Symbol.for("react.offscreen"),Gd=Symbol.iterator;function cs(t){return t===null||typeof t!="object"?null:(t=Gd&&t[Gd]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Kl;function ws(t){if(Kl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kl=e&&e[1]||""}return`
`+Kl+t}var Gl=!1;function Jl(t,e){if(!t||Gl)return"";Gl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),a=i.stack.split(`
`),l=s.length-1,c=a.length-1;1<=l&&0<=c&&s[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(s[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||s[l]!==a[c]){var h=`
`+s[l].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=l&&0<=c);break}}}finally{Gl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ws(t):""}function g0(t){switch(t.tag){case 5:return ws(t.type);case 16:return ws("Lazy");case 13:return ws("Suspense");case 19:return ws("SuspenseList");case 0:case 2:case 15:return t=Jl(t.type,!1),t;case 11:return t=Jl(t.type.render,!1),t;case 1:return t=Jl(t.type,!0),t;default:return""}}function Au(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gi:return"Fragment";case mi:return"Portal";case Nu:return"Profiler";case Kc:return"StrictMode";case Iu:return"Suspense";case Ru:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nm:return(t.displayName||"Context")+".Consumer";case tm:return(t._context.displayName||"Context")+".Provider";case Gc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jc:return e=t.displayName||null,e!==null?e:Au(t.type)||"Memo";case Jn:e=t._payload,t=t._init;try{return Au(t(e))}catch{}}return null}function v0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Au(e);case 8:return e===Kc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function im(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _0(t){var e=im(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mo(t){t._valueTracker||(t._valueTracker=_0(t))}function sm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=im(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function _a(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mu(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jd(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function om(t,e){e=e.checked,e!=null&&qc(t,"checked",e,!1)}function zu(t,e){om(t,e);var n=fr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Du(t,e.type,n):e.hasOwnProperty("defaultValue")&&Du(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Du(t,e,n){(e!=="number"||_a(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xs=Array.isArray;function Ci(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+fr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(xs(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fr(n)}}function am(t,e){var n=fr(e.value),i=fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Xd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zo,um=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zo=zo||document.createElement("div"),zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y0=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(t){y0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ks[e]=ks[t]})});function cm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ks.hasOwnProperty(t)&&ks[t]?(""+e).trim():e+"px"}function hm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=cm(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var w0=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(t,e){if(e){if(w0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Fu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wu=null;function Qc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zu=null,Ti=null,Oi=null;function ef(t){if(t=uo(t)){if(typeof Zu!="function")throw Error($(280));var e=t.stateNode;e&&(e=Xa(e),Zu(t.stateNode,t.type,e))}}function dm(t){Ti?Oi?Oi.push(t):Oi=[t]:Ti=t}function fm(){if(Ti){var t=Ti,e=Oi;if(Oi=Ti=null,ef(t),e)for(t=0;t<e.length;t++)ef(e[t])}}function pm(t,e){return t(e)}function mm(){}var Ql=!1;function gm(t,e,n){if(Ql)return t(e,n);Ql=!0;try{return pm(t,e,n)}finally{Ql=!1,(Ti!==null||Oi!==null)&&(mm(),fm())}}function Us(t,e){var n=t.stateNode;if(n===null)return null;var i=Xa(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Hu=!1;if(Dn)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){Hu=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{Hu=!1}function x0(t,e,n,i,s,a,l,c,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var Ps=!1,ya=null,wa=!1,Vu=null,b0={onError:function(t){Ps=!0,ya=t}};function S0(t,e,n,i,s,a,l,c,h){Ps=!1,ya=null,x0.apply(b0,arguments)}function E0(t,e,n,i,s,a,l,c,h){if(S0.apply(this,arguments),Ps){if(Ps){var f=ya;Ps=!1,ya=null}else throw Error($(198));wa||(wa=!0,Vu=f)}}function Hr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tf(t){if(Hr(t)!==t)throw Error($(188))}function k0(t){var e=t.alternate;if(!e){if(e=Hr(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return tf(s),t;if(a===i)return tf(s),e;a=a.sibling}throw Error($(188))}if(n.return!==i.return)n=s,i=a;else{for(var l=!1,c=s.child;c;){if(c===n){l=!0,n=s,i=a;break}if(c===i){l=!0,i=s,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,i=s;break}if(c===i){l=!0,i=a,n=s;break}c=c.sibling}if(!l)throw Error($(189))}}if(n.alternate!==i)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function _m(t){return t=k0(t),t!==null?ym(t):null}function ym(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ym(t);if(e!==null)return e;t=t.sibling}return null}var wm=zt.unstable_scheduleCallback,nf=zt.unstable_cancelCallback,P0=zt.unstable_shouldYield,C0=zt.unstable_requestPaint,Ve=zt.unstable_now,T0=zt.unstable_getCurrentPriorityLevel,Yc=zt.unstable_ImmediatePriority,xm=zt.unstable_UserBlockingPriority,xa=zt.unstable_NormalPriority,O0=zt.unstable_LowPriority,bm=zt.unstable_IdlePriority,Ga=null,xn=null;function L0(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Ga,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:I0,j0=Math.log,N0=Math.LN2;function I0(t){return t>>>=0,t===0?32:31-(j0(t)/N0|0)|0}var Do=64,Bo=4194304;function bs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ba(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes,l=n&268435455;if(l!==0){var c=l&~s;c!==0?i=bs(c):(a&=l,a!==0&&(i=bs(a)))}else l=n&~s,l!==0?i=bs(l):a!==0&&(i=bs(a));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-un(e),s=1<<n,i|=t[n],e&=~s;return i}function R0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A0(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-un(a),c=1<<l,h=s[l];h===-1?(!(c&n)||c&i)&&(s[l]=R0(c,e)):h<=e&&(t.expiredLanes|=c),a&=~c}}function qu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sm(){var t=Do;return Do<<=1,!(Do&4194240)&&(Do=64),t}function Yl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ao(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function M0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-un(n),a=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~a}}function Xc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-un(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Pe=0;function Em(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var km,eh,Pm,Cm,Tm,Ku=!1,Uo=[],ir=null,sr=null,or=null,$s=new Map,Fs=new Map,Yn=[],z0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rf(t,e){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":$s.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(e.pointerId)}}function ds(t,e,n,i,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},e!==null&&(e=uo(e),e!==null&&eh(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function D0(t,e,n,i,s){switch(e){case"focusin":return ir=ds(ir,t,e,n,i,s),!0;case"dragenter":return sr=ds(sr,t,e,n,i,s),!0;case"mouseover":return or=ds(or,t,e,n,i,s),!0;case"pointerover":var a=s.pointerId;return $s.set(a,ds($s.get(a)||null,t,e,n,i,s)),!0;case"gotpointercapture":return a=s.pointerId,Fs.set(a,ds(Fs.get(a)||null,t,e,n,i,s)),!0}return!1}function Om(t){var e=Ir(t.target);if(e!==null){var n=Hr(e);if(n!==null){if(e=n.tag,e===13){if(e=vm(n),e!==null){t.blockedOn=e,Tm(t.priority,function(){Pm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function la(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Wu=i,n.target.dispatchEvent(i),Wu=null}else return e=uo(n),e!==null&&eh(e),t.blockedOn=n,!1;e.shift()}return!0}function sf(t,e,n){la(t)&&n.delete(e)}function B0(){Ku=!1,ir!==null&&la(ir)&&(ir=null),sr!==null&&la(sr)&&(sr=null),or!==null&&la(or)&&(or=null),$s.forEach(sf),Fs.forEach(sf)}function fs(t,e){t.blockedOn===e&&(t.blockedOn=null,Ku||(Ku=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,B0)))}function Ws(t){function e(s){return fs(s,t)}if(0<Uo.length){fs(Uo[0],t);for(var n=1;n<Uo.length;n++){var i=Uo[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ir!==null&&fs(ir,t),sr!==null&&fs(sr,t),or!==null&&fs(or,t),$s.forEach(e),Fs.forEach(e),n=0;n<Yn.length;n++)i=Yn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)Om(n),n.blockedOn===null&&Yn.shift()}var Li=Fn.ReactCurrentBatchConfig,Sa=!0;function U0(t,e,n,i){var s=Pe,a=Li.transition;Li.transition=null;try{Pe=1,th(t,e,n,i)}finally{Pe=s,Li.transition=a}}function $0(t,e,n,i){var s=Pe,a=Li.transition;Li.transition=null;try{Pe=4,th(t,e,n,i)}finally{Pe=s,Li.transition=a}}function th(t,e,n,i){if(Sa){var s=Gu(t,e,n,i);if(s===null)lu(t,e,i,Ea,n),rf(t,i);else if(D0(s,t,e,n,i))i.stopPropagation();else if(rf(t,i),e&4&&-1<z0.indexOf(t)){for(;s!==null;){var a=uo(s);if(a!==null&&km(a),a=Gu(t,e,n,i),a===null&&lu(t,e,i,Ea,n),a===s)break;s=a}s!==null&&i.stopPropagation()}else lu(t,e,i,null,n)}}var Ea=null;function Gu(t,e,n,i){if(Ea=null,t=Qc(i),t=Ir(t),t!==null)if(e=Hr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ea=t,null}function Lm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T0()){case Yc:return 1;case xm:return 4;case xa:case O0:return 16;case bm:return 536870912;default:return 16}default:return 16}}var tr=null,nh=null,ua=null;function jm(){if(ua)return ua;var t,e=nh,n=e.length,i,s="value"in tr?tr.value:tr.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[a-i];i++);return ua=s.slice(t,1<i?1-i:void 0)}function ca(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $o(){return!0}function of(){return!1}function Bt(t){function e(n,i,s,a,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?$o:of,this.isPropagationStopped=of,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),e}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rh=Bt(Zi),lo=Fe({},Zi,{view:0,detail:0}),F0=Bt(lo),Xl,eu,ps,Ja=Fe({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ih,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ps&&(ps&&t.type==="mousemove"?(Xl=t.screenX-ps.screenX,eu=t.screenY-ps.screenY):eu=Xl=0,ps=t),Xl)},movementY:function(t){return"movementY"in t?t.movementY:eu}}),af=Bt(Ja),W0=Fe({},Ja,{dataTransfer:0}),Z0=Bt(W0),H0=Fe({},lo,{relatedTarget:0}),tu=Bt(H0),V0=Fe({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),q0=Bt(V0),K0=Fe({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),G0=Bt(K0),J0=Fe({},Zi,{data:0}),lf=Bt(J0),Q0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ew(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=X0[t])?!!e[t]:!1}function ih(){return ew}var tw=Fe({},lo,{key:function(t){if(t.key){var e=Q0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ih,charCode:function(t){return t.type==="keypress"?ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nw=Bt(tw),rw=Fe({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uf=Bt(rw),iw=Fe({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ih}),sw=Bt(iw),ow=Fe({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),aw=Bt(ow),lw=Fe({},Ja,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uw=Bt(lw),cw=[9,13,27,32],sh=Dn&&"CompositionEvent"in window,Cs=null;Dn&&"documentMode"in document&&(Cs=document.documentMode);var hw=Dn&&"TextEvent"in window&&!Cs,Nm=Dn&&(!sh||Cs&&8<Cs&&11>=Cs),cf=" ",hf=!1;function Im(t,e){switch(t){case"keyup":return cw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vi=!1;function dw(t,e){switch(t){case"compositionend":return Rm(e);case"keypress":return e.which!==32?null:(hf=!0,cf);case"textInput":return t=e.data,t===cf&&hf?null:t;default:return null}}function fw(t,e){if(vi)return t==="compositionend"||!sh&&Im(t,e)?(t=jm(),ua=nh=tr=null,vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nm&&e.locale!=="ko"?null:e.data;default:return null}}var pw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function df(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pw[t.type]:e==="textarea"}function Am(t,e,n,i){dm(i),e=ka(e,"onChange"),0<e.length&&(n=new rh("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ts=null,Zs=null;function mw(t){Vm(t,0)}function Qa(t){var e=wi(t);if(sm(e))return t}function gw(t,e){if(t==="change")return e}var Mm=!1;if(Dn){var nu;if(Dn){var ru="oninput"in document;if(!ru){var ff=document.createElement("div");ff.setAttribute("oninput","return;"),ru=typeof ff.oninput=="function"}nu=ru}else nu=!1;Mm=nu&&(!document.documentMode||9<document.documentMode)}function pf(){Ts&&(Ts.detachEvent("onpropertychange",zm),Zs=Ts=null)}function zm(t){if(t.propertyName==="value"&&Qa(Zs)){var e=[];Am(e,Zs,t,Qc(t)),gm(mw,e)}}function vw(t,e,n){t==="focusin"?(pf(),Ts=e,Zs=n,Ts.attachEvent("onpropertychange",zm)):t==="focusout"&&pf()}function _w(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qa(Zs)}function yw(t,e){if(t==="click")return Qa(e)}function ww(t,e){if(t==="input"||t==="change")return Qa(e)}function xw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:xw;function Hs(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!ju.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function mf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gf(t,e){var n=mf(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mf(n)}}function Dm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Bm(){for(var t=window,e=_a();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_a(t.document)}return e}function oh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bw(t){var e=Bm(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dm(n.ownerDocument.documentElement,n)){if(i!==null&&oh(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!t.extend&&a>i&&(s=i,i=a,a=s),s=gf(n,a);var l=gf(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sw=Dn&&"documentMode"in document&&11>=document.documentMode,_i=null,Ju=null,Os=null,Qu=!1;function vf(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qu||_i==null||_i!==_a(i)||(i=_i,"selectionStart"in i&&oh(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Os&&Hs(Os,i)||(Os=i,i=ka(Ju,"onSelect"),0<i.length&&(e=new rh("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=_i)))}function Fo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yi={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionend:Fo("Transition","TransitionEnd")},iu={},Um={};Dn&&(Um=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function Ya(t){if(iu[t])return iu[t];if(!yi[t])return t;var e=yi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Um)return iu[t]=e[n];return t}var $m=Ya("animationend"),Fm=Ya("animationiteration"),Wm=Ya("animationstart"),Zm=Ya("transitionend"),Hm=new Map,_f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){Hm.set(t,e),Zr(e,[t])}for(var su=0;su<_f.length;su++){var ou=_f[su],Ew=ou.toLowerCase(),kw=ou[0].toUpperCase()+ou.slice(1);mr(Ew,"on"+kw)}mr($m,"onAnimationEnd");mr(Fm,"onAnimationIteration");mr(Wm,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(Zm,"onTransitionEnd");Ri("onMouseEnter",["mouseout","mouseover"]);Ri("onMouseLeave",["mouseout","mouseover"]);Ri("onPointerEnter",["pointerout","pointerover"]);Ri("onPointerLeave",["pointerout","pointerover"]);Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ss));function yf(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,E0(i,e,void 0,t),t.currentTarget=null}function Vm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var l=i.length-1;0<=l;l--){var c=i[l],h=c.instance,f=c.currentTarget;if(c=c.listener,h!==a&&s.isPropagationStopped())break e;yf(s,c,f),a=h}else for(l=0;l<i.length;l++){if(c=i[l],h=c.instance,f=c.currentTarget,c=c.listener,h!==a&&s.isPropagationStopped())break e;yf(s,c,f),a=h}}}if(wa)throw t=Vu,wa=!1,Vu=null,t}function Re(t,e){var n=e[nc];n===void 0&&(n=e[nc]=new Set);var i=t+"__bubble";n.has(i)||(qm(e,t,2,!1),n.add(i))}function au(t,e,n){var i=0;e&&(i|=4),qm(n,t,i,e)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function Vs(t){if(!t[Wo]){t[Wo]=!0,em.forEach(function(n){n!=="selectionchange"&&(Pw.has(n)||au(n,!1,t),au(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wo]||(e[Wo]=!0,au("selectionchange",!1,e))}}function qm(t,e,n,i){switch(Lm(e)){case 1:var s=U0;break;case 4:s=$0;break;default:s=th}n=s.bind(null,e,n,t),s=void 0,!Hu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function lu(t,e,n,i,s){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var c=i.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;l=l.return}for(;c!==null;){if(l=Ir(c),l===null)return;if(h=l.tag,h===5||h===6){i=a=l;continue e}c=c.parentNode}}i=i.return}gm(function(){var f=a,m=Qc(n),g=[];e:{var w=Hm.get(t);if(w!==void 0){var b=rh,k=t;switch(t){case"keypress":if(ca(n)===0)break e;case"keydown":case"keyup":b=nw;break;case"focusin":k="focus",b=tu;break;case"focusout":k="blur",b=tu;break;case"beforeblur":case"afterblur":b=tu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=af;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=sw;break;case $m:case Fm:case Wm:b=q0;break;case Zm:b=aw;break;case"scroll":b=F0;break;case"wheel":b=uw;break;case"copy":case"cut":case"paste":b=G0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=uf}var E=(e&4)!==0,T=!E&&t==="scroll",S=E?w!==null?w+"Capture":null:w;E=[];for(var y=f,x;y!==null;){x=y;var O=x.stateNode;if(x.tag===5&&O!==null&&(x=O,S!==null&&(O=Us(y,S),O!=null&&E.push(qs(y,O,x)))),T)break;y=y.return}0<E.length&&(w=new b(w,k,null,n,m),g.push({event:w,listeners:E}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",w&&n!==Wu&&(k=n.relatedTarget||n.fromElement)&&(Ir(k)||k[Bn]))break e;if((b||w)&&(w=m.window===m?m:(w=m.ownerDocument)?w.defaultView||w.parentWindow:window,b?(k=n.relatedTarget||n.toElement,b=f,k=k?Ir(k):null,k!==null&&(T=Hr(k),k!==T||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=f),b!==k)){if(E=af,O="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(E=uf,O="onPointerLeave",S="onPointerEnter",y="pointer"),T=b==null?w:wi(b),x=k==null?w:wi(k),w=new E(O,y+"leave",b,n,m),w.target=T,w.relatedTarget=x,O=null,Ir(m)===f&&(E=new E(S,y+"enter",k,n,m),E.target=x,E.relatedTarget=T,O=E),T=O,b&&k)t:{for(E=b,S=k,y=0,x=E;x;x=oi(x))y++;for(x=0,O=S;O;O=oi(O))x++;for(;0<y-x;)E=oi(E),y--;for(;0<x-y;)S=oi(S),x--;for(;y--;){if(E===S||S!==null&&E===S.alternate)break t;E=oi(E),S=oi(S)}E=null}else E=null;b!==null&&wf(g,w,b,E,!1),k!==null&&T!==null&&wf(g,T,k,E,!0)}}e:{if(w=f?wi(f):window,b=w.nodeName&&w.nodeName.toLowerCase(),b==="select"||b==="input"&&w.type==="file")var A=gw;else if(df(w))if(Mm)A=ww;else{A=_w;var z=vw}else(b=w.nodeName)&&b.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(A=yw);if(A&&(A=A(t,f))){Am(g,A,n,m);break e}z&&z(t,w,f),t==="focusout"&&(z=w._wrapperState)&&z.controlled&&w.type==="number"&&Du(w,"number",w.value)}switch(z=f?wi(f):window,t){case"focusin":(df(z)||z.contentEditable==="true")&&(_i=z,Ju=f,Os=null);break;case"focusout":Os=Ju=_i=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,vf(g,n,m);break;case"selectionchange":if(Sw)break;case"keydown":case"keyup":vf(g,n,m)}var I;if(sh)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else vi?Im(t,n)&&(B="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(Nm&&n.locale!=="ko"&&(vi||B!=="onCompositionStart"?B==="onCompositionEnd"&&vi&&(I=jm()):(tr=m,nh="value"in tr?tr.value:tr.textContent,vi=!0)),z=ka(f,B),0<z.length&&(B=new lf(B,t,null,n,m),g.push({event:B,listeners:z}),I?B.data=I:(I=Rm(n),I!==null&&(B.data=I)))),(I=hw?dw(t,n):fw(t,n))&&(f=ka(f,"onBeforeInput"),0<f.length&&(m=new lf("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=I))}Vm(g,e)})}function qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ka(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Us(t,n),a!=null&&i.unshift(qs(t,a,s)),a=Us(t,e),a!=null&&i.push(qs(t,a,s))),t=t.return}return i}function oi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wf(t,e,n,i,s){for(var a=e._reactName,l=[];n!==null&&n!==i;){var c=n,h=c.alternate,f=c.stateNode;if(h!==null&&h===i)break;c.tag===5&&f!==null&&(c=f,s?(h=Us(n,a),h!=null&&l.unshift(qs(n,h,c))):s||(h=Us(n,a),h!=null&&l.push(qs(n,h,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Cw=/\r\n?/g,Tw=/\u0000|\uFFFD/g;function xf(t){return(typeof t=="string"?t:""+t).replace(Cw,`
`).replace(Tw,"")}function Zo(t,e,n){if(e=xf(e),xf(t)!==e&&n)throw Error($(425))}function Pa(){}var Yu=null,Xu=null;function ec(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tc=typeof setTimeout=="function"?setTimeout:void 0,Ow=typeof clearTimeout=="function"?clearTimeout:void 0,bf=typeof Promise=="function"?Promise:void 0,Lw=typeof queueMicrotask=="function"?queueMicrotask:typeof bf<"u"?function(t){return bf.resolve(null).then(t).catch(jw)}:tc;function jw(t){setTimeout(function(){throw t})}function uu(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Ws(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ws(e)}function ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hi=Math.random().toString(36).slice(2),wn="__reactFiber$"+Hi,Ks="__reactProps$"+Hi,Bn="__reactContainer$"+Hi,nc="__reactEvents$"+Hi,Nw="__reactListeners$"+Hi,Iw="__reactHandles$"+Hi;function Ir(t){var e=t[wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bn]||n[wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sf(t);t!==null;){if(n=t[wn])return n;t=Sf(t)}return e}t=n,n=t.parentNode}return null}function uo(t){return t=t[wn]||t[Bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Xa(t){return t[Ks]||null}var rc=[],xi=-1;function gr(t){return{current:t}}function Ae(t){0>xi||(t.current=rc[xi],rc[xi]=null,xi--)}function Ne(t,e){xi++,rc[xi]=t.current,t.current=e}var pr={},pt=gr(pr),Tt=gr(!1),Br=pr;function Ai(t,e){var n=t.type.contextTypes;if(!n)return pr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ot(t){return t=t.childContextTypes,t!=null}function Ca(){Ae(Tt),Ae(pt)}function Ef(t,e,n){if(pt.current!==pr)throw Error($(168));Ne(pt,e),Ne(Tt,n)}function Km(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error($(108,v0(t)||"Unknown",s));return Fe({},n,i)}function Ta(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pr,Br=pt.current,Ne(pt,t),Ne(Tt,Tt.current),!0}function kf(t,e,n){var i=t.stateNode;if(!i)throw Error($(169));n?(t=Km(t,e,Br),i.__reactInternalMemoizedMergedChildContext=t,Ae(Tt),Ae(pt),Ne(pt,t)):Ae(Tt),Ne(Tt,n)}var In=null,el=!1,cu=!1;function Gm(t){In===null?In=[t]:In.push(t)}function Rw(t){el=!0,Gm(t)}function vr(){if(!cu&&In!==null){cu=!0;var t=0,e=Pe;try{var n=In;for(Pe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}In=null,el=!1}catch(s){throw In!==null&&(In=In.slice(t+1)),wm(Yc,vr),s}finally{Pe=e,cu=!1}}return null}var bi=[],Si=0,Oa=null,La=0,Ht=[],Vt=0,Ur=null,An=1,Mn="";function Tr(t,e){bi[Si++]=La,bi[Si++]=Oa,Oa=t,La=e}function Jm(t,e,n){Ht[Vt++]=An,Ht[Vt++]=Mn,Ht[Vt++]=Ur,Ur=t;var i=An;t=Mn;var s=32-un(i)-1;i&=~(1<<s),n+=1;var a=32-un(e)+s;if(30<a){var l=s-s%5;a=(i&(1<<l)-1).toString(32),i>>=l,s-=l,An=1<<32-un(e)+s|n<<s|i,Mn=a+t}else An=1<<a|n<<s|i,Mn=t}function ah(t){t.return!==null&&(Tr(t,1),Jm(t,1,0))}function lh(t){for(;t===Oa;)Oa=bi[--Si],bi[Si]=null,La=bi[--Si],bi[Si]=null;for(;t===Ur;)Ur=Ht[--Vt],Ht[Vt]=null,Mn=Ht[--Vt],Ht[Vt]=null,An=Ht[--Vt],Ht[Vt]=null}var Mt=null,At=null,Me=!1,ln=null;function Qm(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,At=ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,At=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ur!==null?{id:An,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,At=null,!0):!1;default:return!1}}function ic(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sc(t){if(Me){var e=At;if(e){var n=e;if(!Pf(t,e)){if(ic(t))throw Error($(418));e=ar(n.nextSibling);var i=Mt;e&&Pf(t,e)?Qm(i,n):(t.flags=t.flags&-4097|2,Me=!1,Mt=t)}}else{if(ic(t))throw Error($(418));t.flags=t.flags&-4097|2,Me=!1,Mt=t}}}function Cf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function Ho(t){if(t!==Mt)return!1;if(!Me)return Cf(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ec(t.type,t.memoizedProps)),e&&(e=At)){if(ic(t))throw Ym(),Error($(418));for(;e;)Qm(t,e),e=ar(e.nextSibling)}if(Cf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){At=ar(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}At=null}}else At=Mt?ar(t.stateNode.nextSibling):null;return!0}function Ym(){for(var t=At;t;)t=ar(t.nextSibling)}function Mi(){At=Mt=null,Me=!1}function uh(t){ln===null?ln=[t]:ln.push(t)}var Aw=Fn.ReactCurrentBatchConfig;function ms(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var i=n.stateNode}if(!i)throw Error($(147,t));var s=i,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var c=s.refs;l===null?delete c[a]:c[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Vo(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tf(t){var e=t._init;return e(t._payload)}function Xm(t){function e(S,y){if(t){var x=S.deletions;x===null?(S.deletions=[y],S.flags|=16):x.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function i(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function s(S,y){return S=hr(S,y),S.index=0,S.sibling=null,S}function a(S,y,x){return S.index=x,t?(x=S.alternate,x!==null?(x=x.index,x<y?(S.flags|=2,y):x):(S.flags|=2,y)):(S.flags|=1048576,y)}function l(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,y,x,O){return y===null||y.tag!==6?(y=vu(x,S.mode,O),y.return=S,y):(y=s(y,x),y.return=S,y)}function h(S,y,x,O){var A=x.type;return A===gi?m(S,y,x.props.children,O,x.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Jn&&Tf(A)===y.type)?(O=s(y,x.props),O.ref=ms(S,y,x),O.return=S,O):(O=va(x.type,x.key,x.props,null,S.mode,O),O.ref=ms(S,y,x),O.return=S,O)}function f(S,y,x,O){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=_u(x,S.mode,O),y.return=S,y):(y=s(y,x.children||[]),y.return=S,y)}function m(S,y,x,O,A){return y===null||y.tag!==7?(y=Dr(x,S.mode,O,A),y.return=S,y):(y=s(y,x),y.return=S,y)}function g(S,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=vu(""+y,S.mode,x),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ao:return x=va(y.type,y.key,y.props,null,S.mode,x),x.ref=ms(S,null,y),x.return=S,x;case mi:return y=_u(y,S.mode,x),y.return=S,y;case Jn:var O=y._init;return g(S,O(y._payload),x)}if(xs(y)||cs(y))return y=Dr(y,S.mode,x,null),y.return=S,y;Vo(S,y)}return null}function w(S,y,x,O){var A=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return A!==null?null:c(S,y,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ao:return x.key===A?h(S,y,x,O):null;case mi:return x.key===A?f(S,y,x,O):null;case Jn:return A=x._init,w(S,y,A(x._payload),O)}if(xs(x)||cs(x))return A!==null?null:m(S,y,x,O,null);Vo(S,x)}return null}function b(S,y,x,O,A){if(typeof O=="string"&&O!==""||typeof O=="number")return S=S.get(x)||null,c(y,S,""+O,A);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ao:return S=S.get(O.key===null?x:O.key)||null,h(y,S,O,A);case mi:return S=S.get(O.key===null?x:O.key)||null,f(y,S,O,A);case Jn:var z=O._init;return b(S,y,x,z(O._payload),A)}if(xs(O)||cs(O))return S=S.get(x)||null,m(y,S,O,A,null);Vo(y,O)}return null}function k(S,y,x,O){for(var A=null,z=null,I=y,B=y=0,U=null;I!==null&&B<x.length;B++){I.index>B?(U=I,I=null):U=I.sibling;var G=w(S,I,x[B],O);if(G===null){I===null&&(I=U);break}t&&I&&G.alternate===null&&e(S,I),y=a(G,y,B),z===null?A=G:z.sibling=G,z=G,I=U}if(B===x.length)return n(S,I),Me&&Tr(S,B),A;if(I===null){for(;B<x.length;B++)I=g(S,x[B],O),I!==null&&(y=a(I,y,B),z===null?A=I:z.sibling=I,z=I);return Me&&Tr(S,B),A}for(I=i(S,I);B<x.length;B++)U=b(I,S,B,x[B],O),U!==null&&(t&&U.alternate!==null&&I.delete(U.key===null?B:U.key),y=a(U,y,B),z===null?A=U:z.sibling=U,z=U);return t&&I.forEach(function(oe){return e(S,oe)}),Me&&Tr(S,B),A}function E(S,y,x,O){var A=cs(x);if(typeof A!="function")throw Error($(150));if(x=A.call(x),x==null)throw Error($(151));for(var z=A=null,I=y,B=y=0,U=null,G=x.next();I!==null&&!G.done;B++,G=x.next()){I.index>B?(U=I,I=null):U=I.sibling;var oe=w(S,I,G.value,O);if(oe===null){I===null&&(I=U);break}t&&I&&oe.alternate===null&&e(S,I),y=a(oe,y,B),z===null?A=oe:z.sibling=oe,z=oe,I=U}if(G.done)return n(S,I),Me&&Tr(S,B),A;if(I===null){for(;!G.done;B++,G=x.next())G=g(S,G.value,O),G!==null&&(y=a(G,y,B),z===null?A=G:z.sibling=G,z=G);return Me&&Tr(S,B),A}for(I=i(S,I);!G.done;B++,G=x.next())G=b(I,S,B,G.value,O),G!==null&&(t&&G.alternate!==null&&I.delete(G.key===null?B:G.key),y=a(G,y,B),z===null?A=G:z.sibling=G,z=G);return t&&I.forEach(function(K){return e(S,K)}),Me&&Tr(S,B),A}function T(S,y,x,O){if(typeof x=="object"&&x!==null&&x.type===gi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ao:e:{for(var A=x.key,z=y;z!==null;){if(z.key===A){if(A=x.type,A===gi){if(z.tag===7){n(S,z.sibling),y=s(z,x.props.children),y.return=S,S=y;break e}}else if(z.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Jn&&Tf(A)===z.type){n(S,z.sibling),y=s(z,x.props),y.ref=ms(S,z,x),y.return=S,S=y;break e}n(S,z);break}else e(S,z);z=z.sibling}x.type===gi?(y=Dr(x.props.children,S.mode,O,x.key),y.return=S,S=y):(O=va(x.type,x.key,x.props,null,S.mode,O),O.ref=ms(S,y,x),O.return=S,S=O)}return l(S);case mi:e:{for(z=x.key;y!==null;){if(y.key===z)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(S,y.sibling),y=s(y,x.children||[]),y.return=S,S=y;break e}else{n(S,y);break}else e(S,y);y=y.sibling}y=_u(x,S.mode,O),y.return=S,S=y}return l(S);case Jn:return z=x._init,T(S,y,z(x._payload),O)}if(xs(x))return k(S,y,x,O);if(cs(x))return E(S,y,x,O);Vo(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(S,y.sibling),y=s(y,x),y.return=S,S=y):(n(S,y),y=vu(x,S.mode,O),y.return=S,S=y),l(S)):n(S,y)}return T}var zi=Xm(!0),eg=Xm(!1),ja=gr(null),Na=null,Ei=null,ch=null;function hh(){ch=Ei=Na=null}function dh(t){var e=ja.current;Ae(ja),t._currentValue=e}function oc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ji(t,e){Na=t,ch=Ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(ch!==t)if(t={context:t,memoizedValue:e,next:null},Ei===null){if(Na===null)throw Error($(308));Ei=t,Na.dependencies={lanes:0,firstContext:t}}else Ei=Ei.next=t;return e}var Rr=null;function fh(t){Rr===null?Rr=[t]:Rr.push(t)}function tg(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,fh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Un(t,i)}function Un(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qn=!1;function ph(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ng(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,xe&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Un(t,n)}return s=i.interleaved,s===null?(e.next=e,fh(i)):(e.next=s.next,s.next=e),i.interleaved=e,Un(t,n)}function ha(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xc(t,n)}}function Of(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ia(t,e,n,i){var s=t.updateQueue;Qn=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var h=c,f=h.next;h.next=null,l===null?a=f:l.next=f,l=h;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==l&&(c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=h))}if(a!==null){var g=s.baseState;l=0,m=f=h=null,c=a;do{var w=c.lane,b=c.eventTime;if((i&w)===w){m!==null&&(m=m.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var k=t,E=c;switch(w=e,b=n,E.tag){case 1:if(k=E.payload,typeof k=="function"){g=k.call(b,g,w);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=E.payload,w=typeof k=="function"?k.call(b,g,w):k,w==null)break e;g=Fe({},g,w);break e;case 2:Qn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,w=s.effects,w===null?s.effects=[c]:w.push(c))}else b={eventTime:b,lane:w,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(f=m=b,h=g):m=m.next=b,l|=w;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;w=c,c=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(m===null&&(h=g),s.baseState=h,s.firstBaseUpdate=f,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Fr|=l,t.lanes=l,t.memoizedState=g}}function Lf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error($(191,s));s.call(i)}}}var co={},bn=gr(co),Gs=gr(co),Js=gr(co);function Ar(t){if(t===co)throw Error($(174));return t}function mh(t,e){switch(Ne(Js,e),Ne(Gs,t),Ne(bn,co),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uu(e,t)}Ae(bn),Ne(bn,e)}function Di(){Ae(bn),Ae(Gs),Ae(Js)}function rg(t){Ar(Js.current);var e=Ar(bn.current),n=Uu(e,t.type);e!==n&&(Ne(Gs,t),Ne(bn,n))}function gh(t){Gs.current===t&&(Ae(bn),Ae(Gs))}var Ue=gr(0);function Ra(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hu=[];function vh(){for(var t=0;t<hu.length;t++)hu[t]._workInProgressVersionPrimary=null;hu.length=0}var da=Fn.ReactCurrentDispatcher,du=Fn.ReactCurrentBatchConfig,$r=0,$e=null,et=null,it=null,Aa=!1,Ls=!1,Qs=0,Mw=0;function ht(){throw Error($(321))}function _h(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function yh(t,e,n,i,s,a){if($r=a,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,da.current=t===null||t.memoizedState===null?Uw:$w,t=n(i,s),Ls){a=0;do{if(Ls=!1,Qs=0,25<=a)throw Error($(301));a+=1,it=et=null,e.updateQueue=null,da.current=Fw,t=n(i,s)}while(Ls)}if(da.current=Ma,e=et!==null&&et.next!==null,$r=0,it=et=$e=null,Aa=!1,e)throw Error($(300));return t}function wh(){var t=Qs!==0;return Qs=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?$e.memoizedState=it=t:it=it.next=t,it}function Jt(){if(et===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=it===null?$e.memoizedState:it.next;if(e!==null)it=e,et=t;else{if(t===null)throw Error($(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},it===null?$e.memoizedState=it=t:it=it.next=t}return it}function Ys(t,e){return typeof e=="function"?e(t):e}function fu(t){var e=Jt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=et,s=i.baseQueue,a=n.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}i.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,i=i.baseState;var c=l=null,h=null,f=a;do{var m=f.lane;if(($r&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(c=h=g,l=i):h=h.next=g,$e.lanes|=m,Fr|=m}f=f.next}while(f!==null&&f!==a);h===null?l=i:h.next=c,hn(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do a=s.lane,$e.lanes|=a,Fr|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pu(t){var e=Jt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do a=t(a,l.action),l=l.next;while(l!==s);hn(a,e.memoizedState)||(Ct=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function ig(){}function sg(t,e){var n=$e,i=Jt(),s=e(),a=!hn(i.memoizedState,s);if(a&&(i.memoizedState=s,Ct=!0),i=i.queue,xh(lg.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Xs(9,ag.bind(null,n,i,s,e),void 0,null),st===null)throw Error($(349));$r&30||og(n,e,s)}return s}function og(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ag(t,e,n,i){e.value=n,e.getSnapshot=i,ug(e)&&cg(t)}function lg(t,e,n){return n(function(){ug(e)&&cg(t)})}function ug(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function cg(t){var e=Un(t,1);e!==null&&cn(e,t,1,-1)}function jf(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:t},e.queue=t,t=t.dispatch=Bw.bind(null,$e,t),[e.memoizedState,t]}function Xs(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function hg(){return Jt().memoizedState}function fa(t,e,n,i){var s=yn();$e.flags|=t,s.memoizedState=Xs(1|e,n,void 0,i===void 0?null:i)}function tl(t,e,n,i){var s=Jt();i=i===void 0?null:i;var a=void 0;if(et!==null){var l=et.memoizedState;if(a=l.destroy,i!==null&&_h(i,l.deps)){s.memoizedState=Xs(e,n,a,i);return}}$e.flags|=t,s.memoizedState=Xs(1|e,n,a,i)}function Nf(t,e){return fa(8390656,8,t,e)}function xh(t,e){return tl(2048,8,t,e)}function dg(t,e){return tl(4,2,t,e)}function fg(t,e){return tl(4,4,t,e)}function pg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mg(t,e,n){return n=n!=null?n.concat([t]):null,tl(4,4,pg.bind(null,e,t),n)}function bh(){}function gg(t,e){var n=Jt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&_h(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function vg(t,e){var n=Jt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&_h(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function _g(t,e,n){return $r&21?(hn(n,e)||(n=Sm(),$e.lanes|=n,Fr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function zw(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var i=du.transition;du.transition={};try{t(!1),e()}finally{Pe=n,du.transition=i}}function yg(){return Jt().memoizedState}function Dw(t,e,n){var i=cr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},wg(t))xg(e,n);else if(n=tg(t,e,n,i),n!==null){var s=bt();cn(n,t,i,s),bg(n,e,i)}}function Bw(t,e,n){var i=cr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(wg(t))xg(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,c=a(l,n);if(s.hasEagerState=!0,s.eagerState=c,hn(c,l)){var h=e.interleaved;h===null?(s.next=s,fh(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}n=tg(t,e,s,i),n!==null&&(s=bt(),cn(n,t,i,s),bg(n,e,i))}}function wg(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function xg(t,e){Ls=Aa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bg(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xc(t,n)}}var Ma={readContext:Gt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},Uw={readContext:Gt,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:Nf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fa(4194308,4,pg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fa(4194308,4,t,e)},useInsertionEffect:function(t,e){return fa(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=yn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Dw.bind(null,$e,t),[i.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:jf,useDebugValue:bh,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=jf(!1),e=t[0];return t=zw.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=$e,s=yn();if(Me){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),st===null)throw Error($(349));$r&30||og(i,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,Nf(lg.bind(null,i,a,t),[t]),i.flags|=2048,Xs(9,ag.bind(null,i,a,n,e),void 0,null),n},useId:function(){var t=yn(),e=st.identifierPrefix;if(Me){var n=Mn,i=An;n=(i&~(1<<32-un(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Mw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$w={readContext:Gt,useCallback:gg,useContext:Gt,useEffect:xh,useImperativeHandle:mg,useInsertionEffect:dg,useLayoutEffect:fg,useMemo:vg,useReducer:fu,useRef:hg,useState:function(){return fu(Ys)},useDebugValue:bh,useDeferredValue:function(t){var e=Jt();return _g(e,et.memoizedState,t)},useTransition:function(){var t=fu(Ys)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:ig,useSyncExternalStore:sg,useId:yg,unstable_isNewReconciler:!1},Fw={readContext:Gt,useCallback:gg,useContext:Gt,useEffect:xh,useImperativeHandle:mg,useInsertionEffect:dg,useLayoutEffect:fg,useMemo:vg,useReducer:pu,useRef:hg,useState:function(){return pu(Ys)},useDebugValue:bh,useDeferredValue:function(t){var e=Jt();return et===null?e.memoizedState=t:_g(e,et.memoizedState,t)},useTransition:function(){var t=pu(Ys)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:ig,useSyncExternalStore:sg,useId:yg,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ac(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nl={isMounted:function(t){return(t=t._reactInternals)?Hr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=bt(),s=cr(t),a=zn(i,s);a.payload=e,n!=null&&(a.callback=n),e=lr(t,a,s),e!==null&&(cn(e,t,s,i),ha(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=bt(),s=cr(t),a=zn(i,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=lr(t,a,s),e!==null&&(cn(e,t,s,i),ha(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bt(),i=cr(t),s=zn(n,i);s.tag=2,e!=null&&(s.callback=e),e=lr(t,s,i),e!==null&&(cn(e,t,i,n),ha(e,t,i))}};function If(t,e,n,i,s,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,l):e.prototype&&e.prototype.isPureReactComponent?!Hs(n,i)||!Hs(s,a):!0}function Sg(t,e,n){var i=!1,s=pr,a=e.contextType;return typeof a=="object"&&a!==null?a=Gt(a):(s=Ot(e)?Br:pt.current,i=e.contextTypes,a=(i=i!=null)?Ai(t,s):pr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nl,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Rf(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&nl.enqueueReplaceState(e,e.state,null)}function lc(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ph(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Gt(a):(a=Ot(e)?Br:pt.current,s.context=Ai(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(ac(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&nl.enqueueReplaceState(s,s.state,null),Ia(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Bi(t,e){try{var n="",i=e;do n+=g0(i),i=i.return;while(i);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function mu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ww=typeof WeakMap=="function"?WeakMap:Map;function Eg(t,e,n){n=zn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Da||(Da=!0,yc=i),uc(t,e)},n}function kg(t,e,n){n=zn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){uc(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){uc(t,e),typeof i!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Af(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Ww;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=rx.bind(null,t,e,n),e.then(t,t))}function Mf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zf(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zn(-1,1),e.tag=2,lr(n,e,1))),n.lanes|=1),t)}var Zw=Fn.ReactCurrentOwner,Ct=!1;function wt(t,e,n,i){e.child=t===null?eg(e,null,n,i):zi(e,t.child,n,i)}function Df(t,e,n,i,s){n=n.render;var a=e.ref;return ji(e,s),i=yh(t,e,n,i,a,s),n=wh(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Me&&n&&ah(e),e.flags|=1,wt(t,e,i,s),e.child)}function Bf(t,e,n,i,s){if(t===null){var a=n.type;return typeof a=="function"&&!Lh(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Pg(t,e,a,i,s)):(t=va(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:Hs,n(l,i)&&t.ref===e.ref)return $n(t,e,s)}return e.flags|=1,t=hr(a,i),t.ref=e.ref,t.return=e,e.child=t}function Pg(t,e,n,i,s){if(t!==null){var a=t.memoizedProps;if(Hs(a,i)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=i=a,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,$n(t,e,s)}return cc(t,e,n,i,s)}function Cg(t,e,n){var i=e.pendingProps,s=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Pi,Nt),Nt|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(Pi,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:n,Ne(Pi,Nt),Nt|=i}else a!==null?(i=a.baseLanes|n,e.memoizedState=null):i=n,Ne(Pi,Nt),Nt|=i;return wt(t,e,s,n),e.child}function Tg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cc(t,e,n,i,s){var a=Ot(n)?Br:pt.current;return a=Ai(e,a),ji(e,s),n=yh(t,e,n,i,a,s),i=wh(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Me&&i&&ah(e),e.flags|=1,wt(t,e,n,s),e.child)}function Uf(t,e,n,i,s){if(Ot(n)){var a=!0;Ta(e)}else a=!1;if(ji(e,s),e.stateNode===null)pa(t,e),Sg(e,n,i),lc(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var h=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=Gt(f):(f=Ot(n)?Br:pt.current,f=Ai(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";g||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==i||h!==f)&&Rf(e,l,i,f),Qn=!1;var w=e.memoizedState;l.state=w,Ia(e,i,l,s),h=e.memoizedState,c!==i||w!==h||Tt.current||Qn?(typeof m=="function"&&(ac(e,n,m,i),h=e.memoizedState),(c=Qn||If(e,n,c,i,w,h,f))?(g||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),l.props=i,l.state=h,l.context=f,i=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,ng(t,e),c=e.memoizedProps,f=e.type===e.elementType?c:rn(e.type,c),l.props=f,g=e.pendingProps,w=l.context,h=n.contextType,typeof h=="object"&&h!==null?h=Gt(h):(h=Ot(n)?Br:pt.current,h=Ai(e,h));var b=n.getDerivedStateFromProps;(m=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==g||w!==h)&&Rf(e,l,i,h),Qn=!1,w=e.memoizedState,l.state=w,Ia(e,i,l,s);var k=e.memoizedState;c!==g||w!==k||Tt.current||Qn?(typeof b=="function"&&(ac(e,n,b,i),k=e.memoizedState),(f=Qn||If(e,n,f,i,w,k,h)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,k,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,k,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),l.props=i,l.state=k,l.context=h,i=f):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),i=!1)}return hc(t,e,n,i,a,s)}function hc(t,e,n,i,s,a){Tg(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&kf(e,n,!1),$n(t,e,a);i=e.stateNode,Zw.current=e;var c=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=zi(e,t.child,null,a),e.child=zi(e,null,c,a)):wt(t,e,c,a),e.memoizedState=i.state,s&&kf(e,n,!0),e.child}function Og(t){var e=t.stateNode;e.pendingContext?Ef(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ef(t,e.context,!1),mh(t,e.containerInfo)}function $f(t,e,n,i,s){return Mi(),uh(s),e.flags|=256,wt(t,e,n,i),e.child}var dc={dehydrated:null,treeContext:null,retryLane:0};function fc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lg(t,e,n){var i=e.pendingProps,s=Ue.current,a=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ne(Ue,s&1),t===null)return sc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=sl(l,i,0,null),t=Dr(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=fc(n),e.memoizedState=dc,t):Sh(e,l));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return Hw(t,e,l,i,c,s,n);if(a){a=i.fallback,l=e.mode,s=t.child,c=s.sibling;var h={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=hr(s,h),i.subtreeFlags=s.subtreeFlags&14680064),c!==null?a=hr(c,a):(a=Dr(a,l,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=t.child.memoizedState,l=l===null?fc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=dc,i}return a=t.child,t=a.sibling,i=hr(a,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Sh(t,e){return e=sl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qo(t,e,n,i){return i!==null&&uh(i),zi(e,t.child,null,n),t=Sh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Hw(t,e,n,i,s,a,l){if(n)return e.flags&256?(e.flags&=-257,i=mu(Error($(422))),qo(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=i.fallback,s=e.mode,i=sl({mode:"visible",children:i.children},s,0,null),a=Dr(a,s,l,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,e.mode&1&&zi(e,t.child,null,l),e.child.memoizedState=fc(l),e.memoizedState=dc,a);if(!(e.mode&1))return qo(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var c=i.dgst;return i=c,a=Error($(419)),i=mu(a,i,void 0),qo(t,e,l,i)}if(c=(l&t.childLanes)!==0,Ct||c){if(i=st,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Un(t,s),cn(i,t,s,-1))}return Oh(),i=mu(Error($(421))),qo(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ix.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,At=ar(s.nextSibling),Mt=e,Me=!0,ln=null,t!==null&&(Ht[Vt++]=An,Ht[Vt++]=Mn,Ht[Vt++]=Ur,An=t.id,Mn=t.overflow,Ur=e),e=Sh(e,i.children),e.flags|=4096,e)}function Ff(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),oc(t.return,e,n)}function gu(t,e,n,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=s)}function jg(t,e,n){var i=e.pendingProps,s=i.revealOrder,a=i.tail;if(wt(t,e,i.children,n),i=Ue.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ff(t,n,e);else if(t.tag===19)Ff(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ne(Ue,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ra(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),gu(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ra(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}gu(e,!0,n,null,a);break;case"together":gu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Vw(t,e,n){switch(e.tag){case 3:Og(e),Mi();break;case 5:rg(e);break;case 1:Ot(e.type)&&Ta(e);break;case 4:mh(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Ne(ja,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ne(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?Lg(t,e,n):(Ne(Ue,Ue.current&1),t=$n(t,e,n),t!==null?t.sibling:null);Ne(Ue,Ue.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return jg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(Ue,Ue.current),i)break;return null;case 22:case 23:return e.lanes=0,Cg(t,e,n)}return $n(t,e,n)}var Ng,pc,Ig,Rg;Ng=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pc=function(){};Ig=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Ar(bn.current);var a=null;switch(n){case"input":s=Mu(t,s),i=Mu(t,i),a=[];break;case"select":s=Fe({},s,{value:void 0}),i=Fe({},i,{value:void 0}),a=[];break;case"textarea":s=Bu(t,s),i=Bu(t,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Pa)}$u(n,i);var l;n=null;for(f in s)if(!i.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var c=s[f];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ds.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in i){var h=i[f];if(c=s!=null?s[f]:void 0,i.hasOwnProperty(f)&&h!==c&&(h!=null||c!=null))if(f==="style")if(c){for(l in c)!c.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in h)h.hasOwnProperty(l)&&c[l]!==h[l]&&(n||(n={}),n[l]=h[l])}else n||(a||(a=[]),a.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(a=a||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(a=a||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Ds.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Re("scroll",t),a||c===h||(a=[])):(a=a||[]).push(f,h))}n&&(a=a||[]).push("style",n);var f=a;(e.updateQueue=f)&&(e.flags|=4)}};Rg=function(t,e,n,i){n!==i&&(e.flags|=4)};function gs(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function qw(t,e,n){var i=e.pendingProps;switch(lh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Ot(e.type)&&Ca(),dt(e),null;case 3:return i=e.stateNode,Di(),Ae(Tt),Ae(pt),vh(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ho(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(bc(ln),ln=null))),pc(t,e),dt(e),null;case 5:gh(e);var s=Ar(Js.current);if(n=e.type,t!==null&&e.stateNode!=null)Ig(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return dt(e),null}if(t=Ar(bn.current),Ho(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[wn]=e,i[Ks]=a,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",i),Re("close",i);break;case"iframe":case"object":case"embed":Re("load",i);break;case"video":case"audio":for(s=0;s<Ss.length;s++)Re(Ss[s],i);break;case"source":Re("error",i);break;case"img":case"image":case"link":Re("error",i),Re("load",i);break;case"details":Re("toggle",i);break;case"input":Jd(i,a),Re("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Re("invalid",i);break;case"textarea":Yd(i,a),Re("invalid",i)}$u(n,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?i.textContent!==c&&(a.suppressHydrationWarning!==!0&&Zo(i.textContent,c,t),s=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Zo(i.textContent,c,t),s=["children",""+c]):Ds.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Re("scroll",i)}switch(n){case"input":Mo(i),Qd(i,a,!0);break;case"textarea":Mo(i),Xd(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Pa)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[wn]=e,t[Ks]=i,Ng(t,e,!1,!1),e.stateNode=t;e:{switch(l=Fu(n,i),n){case"dialog":Re("cancel",t),Re("close",t),s=i;break;case"iframe":case"object":case"embed":Re("load",t),s=i;break;case"video":case"audio":for(s=0;s<Ss.length;s++)Re(Ss[s],t);s=i;break;case"source":Re("error",t),s=i;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=i;break;case"details":Re("toggle",t),s=i;break;case"input":Jd(t,i),s=Mu(t,i),Re("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Fe({},i,{value:void 0}),Re("invalid",t);break;case"textarea":Yd(t,i),s=Bu(t,i),Re("invalid",t);break;default:s=i}$u(n,s),c=s;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];a==="style"?hm(t,h):a==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&um(t,h)):a==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Bs(t,h):typeof h=="number"&&Bs(t,""+h):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ds.hasOwnProperty(a)?h!=null&&a==="onScroll"&&Re("scroll",t):h!=null&&qc(t,a,h,l))}switch(n){case"input":Mo(t),Qd(t,i,!1);break;case"textarea":Mo(t),Xd(t);break;case"option":i.value!=null&&t.setAttribute("value",""+fr(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?Ci(t,!!i.multiple,a,!1):i.defaultValue!=null&&Ci(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Pa)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)Rg(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(n=Ar(Js.current),Ar(bn.current),Ho(e)){if(i=e.stateNode,n=e.memoizedProps,i[wn]=e,(a=i.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:Zo(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zo(i.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[wn]=e,e.stateNode=i}return dt(e),null;case 13:if(Ae(Ue),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&At!==null&&e.mode&1&&!(e.flags&128))Ym(),Mi(),e.flags|=98560,a=!1;else if(a=Ho(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error($(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error($(317));a[wn]=e}else Mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),a=!1}else ln!==null&&(bc(ln),ln=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?tt===0&&(tt=3):Oh())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return Di(),pc(t,e),t===null&&Vs(e.stateNode.containerInfo),dt(e),null;case 10:return dh(e.type._context),dt(e),null;case 17:return Ot(e.type)&&Ca(),dt(e),null;case 19:if(Ae(Ue),a=e.memoizedState,a===null)return dt(e),null;if(i=(e.flags&128)!==0,l=a.rendering,l===null)if(i)gs(a,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Ra(t),l!==null){for(e.flags|=128,gs(a,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)a=n,t=i,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Ue,Ue.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ve()>Ui&&(e.flags|=128,i=!0,gs(a,!1),e.lanes=4194304)}else{if(!i)if(t=Ra(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Me)return dt(e),null}else 2*Ve()-a.renderingStartTime>Ui&&n!==1073741824&&(e.flags|=128,i=!0,gs(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(n=a.last,n!==null?n.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ve(),e.sibling=null,n=Ue.current,Ne(Ue,i?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Th(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Nt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Kw(t,e){switch(lh(e),e.tag){case 1:return Ot(e.type)&&Ca(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Di(),Ae(Tt),Ae(pt),vh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gh(e),null;case 13:if(Ae(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Ue),null;case 4:return Di(),null;case 10:return dh(e.type._context),null;case 22:case 23:return Th(),null;case 24:return null;default:return null}}var Ko=!1,ft=!1,Gw=typeof WeakSet=="function"?WeakSet:Set,q=null;function ki(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ze(t,e,i)}else n.current=null}function mc(t,e,n){try{n()}catch(i){Ze(t,e,i)}}var Wf=!1;function Jw(t,e){if(Yu=Sa,t=Bm(),oh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,c=-1,h=-1,f=0,m=0,g=t,w=null;t:for(;;){for(var b;g!==n||s!==0&&g.nodeType!==3||(c=l+s),g!==a||i!==0&&g.nodeType!==3||(h=l+i),g.nodeType===3&&(l+=g.nodeValue.length),(b=g.firstChild)!==null;)w=g,g=b;for(;;){if(g===t)break t;if(w===n&&++f===s&&(c=l),w===a&&++m===i&&(h=l),(b=g.nextSibling)!==null)break;g=w,w=g.parentNode}g=b}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xu={focusedElem:t,selectionRange:n},Sa=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var E=k.memoizedProps,T=k.memoizedState,S=e.stateNode,y=S.getSnapshotBeforeUpdate(e.elementType===e.type?E:rn(e.type,E),T);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(O){Ze(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return k=Wf,Wf=!1,k}function js(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&mc(e,n,a)}s=s.next}while(s!==i)}}function rl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function gc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ag(t){var e=t.alternate;e!==null&&(t.alternate=null,Ag(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wn],delete e[Ks],delete e[nc],delete e[Nw],delete e[Iw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Mg(t){return t.tag===5||t.tag===3||t.tag===4}function Zf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pa));else if(i!==4&&(t=t.child,t!==null))for(vc(t,e,n),t=t.sibling;t!==null;)vc(t,e,n),t=t.sibling}function _c(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(_c(t,e,n),t=t.sibling;t!==null;)_c(t,e,n),t=t.sibling}var lt=null,on=!1;function Kn(t,e,n){for(n=n.child;n!==null;)zg(t,e,n),n=n.sibling}function zg(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Ga,n)}catch{}switch(n.tag){case 5:ft||ki(n,e);case 6:var i=lt,s=on;lt=null,Kn(t,e,n),lt=i,on=s,lt!==null&&(on?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(on?(t=lt,n=n.stateNode,t.nodeType===8?uu(t.parentNode,n):t.nodeType===1&&uu(t,n),Ws(t)):uu(lt,n.stateNode));break;case 4:i=lt,s=on,lt=n.stateNode.containerInfo,on=!0,Kn(t,e,n),lt=i,on=s;break;case 0:case 11:case 14:case 15:if(!ft&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&mc(n,e,l),s=s.next}while(s!==i)}Kn(t,e,n);break;case 1:if(!ft&&(ki(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(c){Ze(n,e,c)}Kn(t,e,n);break;case 21:Kn(t,e,n);break;case 22:n.mode&1?(ft=(i=ft)||n.memoizedState!==null,Kn(t,e,n),ft=i):Kn(t,e,n);break;default:Kn(t,e,n)}}function Hf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Gw),e.forEach(function(i){var s=sx.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function en(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var a=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:lt=c.stateNode,on=!1;break e;case 3:lt=c.stateNode.containerInfo,on=!0;break e;case 4:lt=c.stateNode.containerInfo,on=!0;break e}c=c.return}if(lt===null)throw Error($(160));zg(a,l,s),lt=null,on=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(f){Ze(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dg(e,t),e=e.sibling}function Dg(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),_n(t),i&4){try{js(3,t,t.return),rl(3,t)}catch(E){Ze(t,t.return,E)}try{js(5,t,t.return)}catch(E){Ze(t,t.return,E)}}break;case 1:en(e,t),_n(t),i&512&&n!==null&&ki(n,n.return);break;case 5:if(en(e,t),_n(t),i&512&&n!==null&&ki(n,n.return),t.flags&32){var s=t.stateNode;try{Bs(s,"")}catch(E){Ze(t,t.return,E)}}if(i&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,l=n!==null?n.memoizedProps:a,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&om(s,a),Fu(c,l);var f=Fu(c,a);for(l=0;l<h.length;l+=2){var m=h[l],g=h[l+1];m==="style"?hm(s,g):m==="dangerouslySetInnerHTML"?um(s,g):m==="children"?Bs(s,g):qc(s,m,g,f)}switch(c){case"input":zu(s,a);break;case"textarea":am(s,a);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?Ci(s,!!a.multiple,b,!1):w!==!!a.multiple&&(a.defaultValue!=null?Ci(s,!!a.multiple,a.defaultValue,!0):Ci(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ks]=a}catch(E){Ze(t,t.return,E)}}break;case 6:if(en(e,t),_n(t),i&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(E){Ze(t,t.return,E)}}break;case 3:if(en(e,t),_n(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ws(e.containerInfo)}catch(E){Ze(t,t.return,E)}break;case 4:en(e,t),_n(t);break;case 13:en(e,t),_n(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Ph=Ve())),i&4&&Hf(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(f=ft)||m,en(e,t),ft=f):en(e,t),_n(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(q=t,m=t.child;m!==null;){for(g=q=m;q!==null;){switch(w=q,b=w.child,w.tag){case 0:case 11:case 14:case 15:js(4,w,w.return);break;case 1:ki(w,w.return);var k=w.stateNode;if(typeof k.componentWillUnmount=="function"){i=w,n=w.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(E){Ze(i,n,E)}}break;case 5:ki(w,w.return);break;case 22:if(w.memoizedState!==null){qf(g);continue}}b!==null?(b.return=w,q=b):qf(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{s=g.stateNode,f?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=g.stateNode,h=g.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=cm("display",l))}catch(E){Ze(t,t.return,E)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(E){Ze(t,t.return,E)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:en(e,t),_n(t),i&4&&Hf(t);break;case 21:break;default:en(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Mg(n)){var i=n;break e}n=n.return}throw Error($(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Bs(s,""),i.flags&=-33);var a=Zf(t);_c(t,a,s);break;case 3:case 4:var l=i.stateNode.containerInfo,c=Zf(t);vc(t,c,l);break;default:throw Error($(161))}}catch(h){Ze(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qw(t,e,n){q=t,Bg(t)}function Bg(t,e,n){for(var i=(t.mode&1)!==0;q!==null;){var s=q,a=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||Ko;if(!l){var c=s.alternate,h=c!==null&&c.memoizedState!==null||ft;c=Ko;var f=ft;if(Ko=l,(ft=h)&&!f)for(q=s;q!==null;)l=q,h=l.child,l.tag===22&&l.memoizedState!==null?Kf(s):h!==null?(h.return=l,q=h):Kf(s);for(;a!==null;)q=a,Bg(a),a=a.sibling;q=s,Ko=c,ft=f}Vf(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,q=a):Vf(t)}}function Vf(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||rl(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ft)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Lf(e,a,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lf(e,l,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Ws(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ft||e.flags&512&&gc(e)}catch(w){Ze(e,e.return,w)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function qf(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Kf(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(h){Ze(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(h){Ze(e,s,h)}}var a=e.return;try{gc(e)}catch(h){Ze(e,a,h)}break;case 5:var l=e.return;try{gc(e)}catch(h){Ze(e,l,h)}}}catch(h){Ze(e,e.return,h)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var Yw=Math.ceil,za=Fn.ReactCurrentDispatcher,Eh=Fn.ReactCurrentOwner,Kt=Fn.ReactCurrentBatchConfig,xe=0,st=null,Je=null,ut=0,Nt=0,Pi=gr(0),tt=0,eo=null,Fr=0,il=0,kh=0,Ns=null,Pt=null,Ph=0,Ui=1/0,jn=null,Da=!1,yc=null,ur=null,Go=!1,nr=null,Ba=0,Is=0,wc=null,ma=-1,ga=0;function bt(){return xe&6?Ve():ma!==-1?ma:ma=Ve()}function cr(t){return t.mode&1?xe&2&&ut!==0?ut&-ut:Aw.transition!==null?(ga===0&&(ga=Sm()),ga):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:Lm(t.type)),t):1}function cn(t,e,n,i){if(50<Is)throw Is=0,wc=null,Error($(185));ao(t,n,i),(!(xe&2)||t!==st)&&(t===st&&(!(xe&2)&&(il|=n),tt===4&&Xn(t,ut)),Lt(t,i),n===1&&xe===0&&!(e.mode&1)&&(Ui=Ve()+500,el&&vr()))}function Lt(t,e){var n=t.callbackNode;A0(t,e);var i=ba(t,t===st?ut:0);if(i===0)n!==null&&nf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&nf(n),e===1)t.tag===0?Rw(Gf.bind(null,t)):Gm(Gf.bind(null,t)),Lw(function(){!(xe&6)&&vr()}),n=null;else{switch(Em(i)){case 1:n=Yc;break;case 4:n=xm;break;case 16:n=xa;break;case 536870912:n=bm;break;default:n=xa}n=qg(n,Ug.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ug(t,e){if(ma=-1,ga=0,xe&6)throw Error($(327));var n=t.callbackNode;if(Ni()&&t.callbackNode!==n)return null;var i=ba(t,t===st?ut:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ua(t,i);else{e=i;var s=xe;xe|=2;var a=Fg();(st!==t||ut!==e)&&(jn=null,Ui=Ve()+500,zr(t,e));do try{tx();break}catch(c){$g(t,c)}while(!0);hh(),za.current=a,xe=s,Je!==null?e=0:(st=null,ut=0,e=tt)}if(e!==0){if(e===2&&(s=qu(t),s!==0&&(i=s,e=xc(t,s))),e===1)throw n=eo,zr(t,0),Xn(t,i),Lt(t,Ve()),n;if(e===6)Xn(t,i);else{if(s=t.current.alternate,!(i&30)&&!Xw(s)&&(e=Ua(t,i),e===2&&(a=qu(t),a!==0&&(i=a,e=xc(t,a))),e===1))throw n=eo,zr(t,0),Xn(t,i),Lt(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:Or(t,Pt,jn);break;case 3:if(Xn(t,i),(i&130023424)===i&&(e=Ph+500-Ve(),10<e)){if(ba(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=tc(Or.bind(null,t,Pt,jn),e);break}Or(t,Pt,jn);break;case 4:if(Xn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-un(i);a=1<<l,l=e[l],l>s&&(s=l),i&=~a}if(i=s,i=Ve()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Yw(i/1960))-i,10<i){t.timeoutHandle=tc(Or.bind(null,t,Pt,jn),i);break}Or(t,Pt,jn);break;case 5:Or(t,Pt,jn);break;default:throw Error($(329))}}}return Lt(t,Ve()),t.callbackNode===n?Ug.bind(null,t):null}function xc(t,e){var n=Ns;return t.current.memoizedState.isDehydrated&&(zr(t,e).flags|=256),t=Ua(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&bc(e)),t}function bc(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function Xw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],a=s.getSnapshot;s=s.value;try{if(!hn(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xn(t,e){for(e&=~kh,e&=~il,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),i=1<<n;t[n]=-1,e&=~i}}function Gf(t){if(xe&6)throw Error($(327));Ni();var e=ba(t,0);if(!(e&1))return Lt(t,Ve()),null;var n=Ua(t,e);if(t.tag!==0&&n===2){var i=qu(t);i!==0&&(e=i,n=xc(t,i))}if(n===1)throw n=eo,zr(t,0),Xn(t,e),Lt(t,Ve()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Or(t,Pt,jn),Lt(t,Ve()),null}function Ch(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Ui=Ve()+500,el&&vr())}}function Wr(t){nr!==null&&nr.tag===0&&!(xe&6)&&Ni();var e=xe;xe|=1;var n=Kt.transition,i=Pe;try{if(Kt.transition=null,Pe=1,t)return t()}finally{Pe=i,Kt.transition=n,xe=e,!(xe&6)&&vr()}}function Th(){Nt=Pi.current,Ae(Pi)}function zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ow(n)),Je!==null)for(n=Je.return;n!==null;){var i=n;switch(lh(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ca();break;case 3:Di(),Ae(Tt),Ae(pt),vh();break;case 5:gh(i);break;case 4:Di();break;case 13:Ae(Ue);break;case 19:Ae(Ue);break;case 10:dh(i.type._context);break;case 22:case 23:Th()}n=n.return}if(st=t,Je=t=hr(t.current,null),ut=Nt=e,tt=0,eo=null,kh=il=Fr=0,Pt=Ns=null,Rr!==null){for(e=0;e<Rr.length;e++)if(n=Rr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,a=n.pending;if(a!==null){var l=a.next;a.next=s,i.next=l}n.pending=i}Rr=null}return t}function $g(t,e){do{var n=Je;try{if(hh(),da.current=Ma,Aa){for(var i=$e.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Aa=!1}if($r=0,it=et=$e=null,Ls=!1,Qs=0,Eh.current=null,n===null||n.return===null){tt=1,eo=e,Je=null;break}e:{var a=t,l=n.return,c=n,h=e;if(e=ut,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=c,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var w=m.alternate;w?(m.updateQueue=w.updateQueue,m.memoizedState=w.memoizedState,m.lanes=w.lanes):(m.updateQueue=null,m.memoizedState=null)}var b=Mf(l);if(b!==null){b.flags&=-257,zf(b,l,c,a,e),b.mode&1&&Af(a,f,e),e=b,h=f;var k=e.updateQueue;if(k===null){var E=new Set;E.add(h),e.updateQueue=E}else k.add(h);break e}else{if(!(e&1)){Af(a,f,e),Oh();break e}h=Error($(426))}}else if(Me&&c.mode&1){var T=Mf(l);if(T!==null){!(T.flags&65536)&&(T.flags|=256),zf(T,l,c,a,e),uh(Bi(h,c));break e}}a=h=Bi(h,c),tt!==4&&(tt=2),Ns===null?Ns=[a]:Ns.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var S=Eg(a,h,e);Of(a,S);break e;case 1:c=h;var y=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ur===null||!ur.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e;var O=kg(a,c,e);Of(a,O);break e}}a=a.return}while(a!==null)}Zg(n)}catch(A){e=A,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function Fg(){var t=za.current;return za.current=Ma,t===null?Ma:t}function Oh(){(tt===0||tt===3||tt===2)&&(tt=4),st===null||!(Fr&268435455)&&!(il&268435455)||Xn(st,ut)}function Ua(t,e){var n=xe;xe|=2;var i=Fg();(st!==t||ut!==e)&&(jn=null,zr(t,e));do try{ex();break}catch(s){$g(t,s)}while(!0);if(hh(),xe=n,za.current=i,Je!==null)throw Error($(261));return st=null,ut=0,tt}function ex(){for(;Je!==null;)Wg(Je)}function tx(){for(;Je!==null&&!P0();)Wg(Je)}function Wg(t){var e=Vg(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?Zg(t):Je=e,Eh.current=null}function Zg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Kw(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Je=null;return}}else if(n=qw(n,e,Nt),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);tt===0&&(tt=5)}function Or(t,e,n){var i=Pe,s=Kt.transition;try{Kt.transition=null,Pe=1,nx(t,e,n,i)}finally{Kt.transition=s,Pe=i}return null}function nx(t,e,n,i){do Ni();while(nr!==null);if(xe&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(M0(t,a),t===st&&(Je=st=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Go||(Go=!0,qg(xa,function(){return Ni(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Kt.transition,Kt.transition=null;var l=Pe;Pe=1;var c=xe;xe|=4,Eh.current=null,Jw(t,n),Dg(n,t),bw(Xu),Sa=!!Yu,Xu=Yu=null,t.current=n,Qw(n),C0(),xe=c,Pe=l,Kt.transition=a}else t.current=n;if(Go&&(Go=!1,nr=t,Ba=s),a=t.pendingLanes,a===0&&(ur=null),L0(n.stateNode),Lt(t,Ve()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Da)throw Da=!1,t=yc,yc=null,t;return Ba&1&&t.tag!==0&&Ni(),a=t.pendingLanes,a&1?t===wc?Is++:(Is=0,wc=t):Is=0,vr(),null}function Ni(){if(nr!==null){var t=Em(Ba),e=Kt.transition,n=Pe;try{if(Kt.transition=null,Pe=16>t?16:t,nr===null)var i=!1;else{if(t=nr,nr=null,Ba=0,xe&6)throw Error($(331));var s=xe;for(xe|=4,q=t.current;q!==null;){var a=q,l=a.child;if(q.flags&16){var c=a.deletions;if(c!==null){for(var h=0;h<c.length;h++){var f=c[h];for(q=f;q!==null;){var m=q;switch(m.tag){case 0:case 11:case 15:js(8,m,a)}var g=m.child;if(g!==null)g.return=m,q=g;else for(;q!==null;){m=q;var w=m.sibling,b=m.return;if(Ag(m),m===f){q=null;break}if(w!==null){w.return=b,q=w;break}q=b}}}var k=a.alternate;if(k!==null){var E=k.child;if(E!==null){k.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}q=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,q=l;else e:for(;q!==null;){if(a=q,a.flags&2048)switch(a.tag){case 0:case 11:case 15:js(9,a,a.return)}var S=a.sibling;if(S!==null){S.return=a.return,q=S;break e}q=a.return}}var y=t.current;for(q=y;q!==null;){l=q;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,q=x;else e:for(l=y;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:rl(9,c)}}catch(A){Ze(c,c.return,A)}if(c===l){q=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,q=O;break e}q=c.return}}if(xe=s,vr(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Ga,t)}catch{}i=!0}return i}finally{Pe=n,Kt.transition=e}}return!1}function Jf(t,e,n){e=Bi(n,e),e=Eg(t,e,1),t=lr(t,e,1),e=bt(),t!==null&&(ao(t,1,e),Lt(t,e))}function Ze(t,e,n){if(t.tag===3)Jf(t,t,n);else for(;e!==null;){if(e.tag===3){Jf(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ur===null||!ur.has(i))){t=Bi(n,t),t=kg(e,t,1),e=lr(e,t,1),t=bt(),e!==null&&(ao(e,1,t),Lt(e,t));break}}e=e.return}}function rx(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ut&n)===n&&(tt===4||tt===3&&(ut&130023424)===ut&&500>Ve()-Ph?zr(t,0):kh|=n),Lt(t,e)}function Hg(t,e){e===0&&(t.mode&1?(e=Bo,Bo<<=1,!(Bo&130023424)&&(Bo=4194304)):e=1);var n=bt();t=Un(t,e),t!==null&&(ao(t,e,n),Lt(t,n))}function ix(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Hg(t,n)}function sx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),Hg(t,n)}var Vg;Vg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,Vw(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Me&&e.flags&1048576&&Jm(e,La,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;pa(t,e),t=e.pendingProps;var s=Ai(e,pt.current);ji(e,n),s=yh(null,e,i,t,s,n);var a=wh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(i)?(a=!0,Ta(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ph(e),s.updater=nl,e.stateNode=s,s._reactInternals=e,lc(e,i,t,n),e=hc(null,e,i,!0,a,n)):(e.tag=0,Me&&a&&ah(e),wt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(pa(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=ax(i),t=rn(i,t),s){case 0:e=cc(null,e,i,t,n);break e;case 1:e=Uf(null,e,i,t,n);break e;case 11:e=Df(null,e,i,t,n);break e;case 14:e=Bf(null,e,i,rn(i.type,t),n);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:rn(i,s),cc(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:rn(i,s),Uf(t,e,i,s,n);case 3:e:{if(Og(e),t===null)throw Error($(387));i=e.pendingProps,a=e.memoizedState,s=a.element,ng(t,e),Ia(e,i,null,n);var l=e.memoizedState;if(i=l.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Bi(Error($(423)),e),e=$f(t,e,i,n,s);break e}else if(i!==s){s=Bi(Error($(424)),e),e=$f(t,e,i,n,s);break e}else for(At=ar(e.stateNode.containerInfo.firstChild),Mt=e,Me=!0,ln=null,n=eg(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mi(),i===s){e=$n(t,e,n);break e}wt(t,e,i,n)}e=e.child}return e;case 5:return rg(e),t===null&&sc(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,l=s.children,ec(i,s)?l=null:a!==null&&ec(i,a)&&(e.flags|=32),Tg(t,e),wt(t,e,l,n),e.child;case 6:return t===null&&sc(e),null;case 13:return Lg(t,e,n);case 4:return mh(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=zi(e,null,i,n):wt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:rn(i,s),Df(t,e,i,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,a=e.memoizedProps,l=s.value,Ne(ja,i._currentValue),i._currentValue=l,a!==null)if(hn(a.value,l)){if(a.children===s.children&&!Tt.current){e=$n(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var h=c.firstContext;h!==null;){if(h.context===i){if(a.tag===1){h=zn(-1,n&-n),h.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}a.lanes|=n,h=a.alternate,h!==null&&(h.lanes|=n),oc(a.return,n,e),c.lanes|=n;break}h=h.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error($(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),oc(l,n,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ji(e,n),s=Gt(s),i=i(s),e.flags|=1,wt(t,e,i,n),e.child;case 14:return i=e.type,s=rn(i,e.pendingProps),s=rn(i.type,s),Bf(t,e,i,s,n);case 15:return Pg(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:rn(i,s),pa(t,e),e.tag=1,Ot(i)?(t=!0,Ta(e)):t=!1,ji(e,n),Sg(e,i,s),lc(e,i,s,n),hc(null,e,i,!0,t,n);case 19:return jg(t,e,n);case 22:return Cg(t,e,n)}throw Error($(156,e.tag))};function qg(t,e){return wm(t,e)}function ox(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,i){return new ox(t,e,n,i)}function Lh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ax(t){if(typeof t=="function")return Lh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gc)return 11;if(t===Jc)return 14}return 2}function hr(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function va(t,e,n,i,s,a){var l=2;if(i=t,typeof t=="function")Lh(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case gi:return Dr(n.children,s,a,e);case Kc:l=8,s|=8;break;case Nu:return t=qt(12,n,e,s|2),t.elementType=Nu,t.lanes=a,t;case Iu:return t=qt(13,n,e,s),t.elementType=Iu,t.lanes=a,t;case Ru:return t=qt(19,n,e,s),t.elementType=Ru,t.lanes=a,t;case rm:return sl(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tm:l=10;break e;case nm:l=9;break e;case Gc:l=11;break e;case Jc:l=14;break e;case Jn:l=16,i=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=qt(l,n,e,s),e.elementType=t,e.type=i,e.lanes=a,e}function Dr(t,e,n,i){return t=qt(7,t,i,e),t.lanes=n,t}function sl(t,e,n,i){return t=qt(22,t,i,e),t.elementType=rm,t.lanes=n,t.stateNode={isHidden:!1},t}function vu(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function _u(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lx(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jh(t,e,n,i,s,a,l,c,h){return t=new lx(t,e,n,c,h),e===1?(e=1,a===!0&&(e|=8)):e=0,a=qt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ph(a),t}function ux(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mi,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Kg(t){if(!t)return pr;t=t._reactInternals;e:{if(Hr(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Ot(n))return Km(t,n,e)}return e}function Gg(t,e,n,i,s,a,l,c,h){return t=jh(n,i,!0,t,s,a,l,c,h),t.context=Kg(null),n=t.current,i=bt(),s=cr(n),a=zn(i,s),a.callback=e??null,lr(n,a,s),t.current.lanes=s,ao(t,s,i),Lt(t,i),t}function ol(t,e,n,i){var s=e.current,a=bt(),l=cr(s);return n=Kg(n),e.context===null?e.context=n:e.pendingContext=n,e=zn(a,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=lr(s,e,l),t!==null&&(cn(t,s,l,a),ha(t,s,l)),l}function $a(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nh(t,e){Qf(t,e),(t=t.alternate)&&Qf(t,e)}function cx(){return null}var Jg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ih(t){this._internalRoot=t}al.prototype.render=Ih.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));ol(t,e,null,null)};al.prototype.unmount=Ih.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wr(function(){ol(null,t,null,null)}),e[Bn]=null}};function al(t){this._internalRoot=t}al.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yn.length&&e!==0&&e<Yn[n].priority;n++);Yn.splice(n,0,t),n===0&&Om(t)}};function Rh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ll(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yf(){}function hx(t,e,n,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var f=$a(l);a.call(f)}}var l=Gg(e,i,t,0,null,!1,!1,"",Yf);return t._reactRootContainer=l,t[Bn]=l.current,Vs(t.nodeType===8?t.parentNode:t),Wr(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var c=i;i=function(){var f=$a(h);c.call(f)}}var h=jh(t,0,!1,null,null,!1,!1,"",Yf);return t._reactRootContainer=h,t[Bn]=h.current,Vs(t.nodeType===8?t.parentNode:t),Wr(function(){ol(e,h,n,i)}),h}function ul(t,e,n,i,s){var a=n._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var c=s;s=function(){var h=$a(l);c.call(h)}}ol(e,l,t,s)}else l=hx(n,e,t,s,i);return $a(l)}km=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bs(e.pendingLanes);n!==0&&(Xc(e,n|1),Lt(e,Ve()),!(xe&6)&&(Ui=Ve()+500,vr()))}break;case 13:Wr(function(){var i=Un(t,1);if(i!==null){var s=bt();cn(i,t,1,s)}}),Nh(t,1)}};eh=function(t){if(t.tag===13){var e=Un(t,134217728);if(e!==null){var n=bt();cn(e,t,134217728,n)}Nh(t,134217728)}};Pm=function(t){if(t.tag===13){var e=cr(t),n=Un(t,e);if(n!==null){var i=bt();cn(n,t,e,i)}Nh(t,e)}};Cm=function(){return Pe};Tm=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};Zu=function(t,e,n){switch(e){case"input":if(zu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Xa(i);if(!s)throw Error($(90));sm(i),zu(i,s)}}}break;case"textarea":am(t,n);break;case"select":e=n.value,e!=null&&Ci(t,!!n.multiple,e,!1)}};pm=Ch;mm=Wr;var dx={usingClientEntryPoint:!1,Events:[uo,wi,Xa,dm,fm,Ch]},vs={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fx={bundleType:vs.bundleType,version:vs.version,rendererPackageName:vs.rendererPackageName,rendererConfig:vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_m(t),t===null?null:t.stateNode},findFiberByHostInstance:vs.findFiberByHostInstance||cx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jo.isDisabled&&Jo.supportsFiber)try{Ga=Jo.inject(fx),xn=Jo}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dx;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rh(e))throw Error($(200));return ux(t,e,null,n)};Dt.createRoot=function(t,e){if(!Rh(t))throw Error($(299));var n=!1,i="",s=Jg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=jh(t,1,!1,null,null,n,!1,i,s),t[Bn]=e.current,Vs(t.nodeType===8?t.parentNode:t),new Ih(e)};Dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=_m(e),t=t===null?null:t.stateNode,t};Dt.flushSync=function(t){return Wr(t)};Dt.hydrate=function(t,e,n){if(!ll(e))throw Error($(200));return ul(null,t,e,!0,n)};Dt.hydrateRoot=function(t,e,n){if(!Rh(t))throw Error($(405));var i=n!=null&&n.hydratedSources||null,s=!1,a="",l=Jg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Gg(e,null,t,1,n??null,s,!1,a,l),t[Bn]=e.current,Vs(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new al(e)};Dt.render=function(t,e,n){if(!ll(e))throw Error($(200));return ul(null,t,e,!1,n)};Dt.unmountComponentAtNode=function(t){if(!ll(t))throw Error($(40));return t._reactRootContainer?(Wr(function(){ul(null,null,t,!1,function(){t._reactRootContainer=null,t[Bn]=null})}),!0):!1};Dt.unstable_batchedUpdates=Ch;Dt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ll(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return ul(t,e,n,!1,i)};Dt.version="18.3.1-next-f1338f8080-20240426";function Qg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qg)}catch(t){console.error(t)}}Qg(),Qp.exports=Dt;var px=Qp.exports,Xf=px;Lu.createRoot=Xf.createRoot,Lu.hydrateRoot=Xf.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function to(){return to=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},to.apply(this,arguments)}var rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rr||(rr={}));const ep="popstate";function mx(t){t===void 0&&(t={});function e(s,a){let{pathname:l="/",search:c="",hash:h=""}=Vr(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Sc("",{pathname:l,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){let l=s.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let h=s.location.href,f=h.indexOf("#");c=f===-1?h:h.slice(0,f)}return c+"#"+(typeof a=="string"?a:Fa(a))}function i(s,a){Ah(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return vx(e,n,i,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ah(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gx(){return Math.random().toString(36).substr(2,8)}function tp(t,e){return{usr:t.state,key:t.key,idx:e}}function Sc(t,e,n,i){return n===void 0&&(n=null),to({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vr(e):e,{state:n,key:e&&e.key||i||gx()})}function Fa(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Vr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function vx(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,l=s.history,c=rr.Pop,h=null,f=m();f==null&&(f=0,l.replaceState(to({},l.state,{idx:f}),""));function m(){return(l.state||{idx:null}).idx}function g(){c=rr.Pop;let T=m(),S=T==null?null:T-f;f=T,h&&h({action:c,location:E.location,delta:S})}function w(T,S){c=rr.Push;let y=Sc(E.location,T,S);n&&n(y,T),f=m()+1;let x=tp(y,f),O=E.createHref(y);try{l.pushState(x,"",O)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(O)}a&&h&&h({action:c,location:E.location,delta:1})}function b(T,S){c=rr.Replace;let y=Sc(E.location,T,S);n&&n(y,T),f=m();let x=tp(y,f),O=E.createHref(y);l.replaceState(x,"",O),a&&h&&h({action:c,location:E.location,delta:0})}function k(T){let S=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof T=="string"?T:Fa(T);return y=y.replace(/ $/,"%20"),Qe(S,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,S)}let E={get action(){return c},get location(){return t(s,l)},listen(T){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(ep,g),h=T,()=>{s.removeEventListener(ep,g),h=null}},createHref(T){return e(s,T)},createURL:k,encodeLocation(T){let S=k(T);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:w,replace:b,go(T){return l.go(T)}};return E}var np;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(np||(np={}));function _x(t,e,n){return n===void 0&&(n="/"),yx(t,e,n)}function yx(t,e,n,i){let s=typeof e=="string"?Vr(e):e,a=Mh(s.pathname||"/",n);if(a==null)return null;let l=Yg(t);wx(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let f=Nx(a);c=Ox(l[h],f)}return c}function Yg(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(a,l,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};h.relativePath.startsWith("/")&&(Qe(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=dr([i,h.relativePath]),m=n.concat(h);a.children&&a.children.length>0&&(Qe(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Yg(a.children,e,m,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:Cx(f,a.index),routesMeta:m})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,l);else for(let h of Xg(a.path))s(a,l,h)}),e}function Xg(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let l=Xg(i.join("/")),c=[];return c.push(...l.map(h=>h===""?a:[a,h].join("/"))),s&&c.push(...l),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function wx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Tx(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const xx=/^:[\w-]+$/,bx=3,Sx=2,Ex=1,kx=10,Px=-2,rp=t=>t==="*";function Cx(t,e){let n=t.split("/"),i=n.length;return n.some(rp)&&(i+=Px),e&&(i+=Sx),n.filter(s=>!rp(s)).reduce((s,a)=>s+(xx.test(a)?bx:a===""?Ex:kx),i)}function Tx(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function Ox(t,e,n){let{routesMeta:i}=t,s={},a="/",l=[];for(let c=0;c<i.length;++c){let h=i[c],f=c===i.length-1,m=a==="/"?e:e.slice(a.length)||"/",g=Lx({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),w=h.route;if(!g)return null;Object.assign(s,g.params),l.push({params:s,pathname:dr([a,g.pathname]),pathnameBase:Mx(dr([a,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(a=dr([a,g.pathnameBase]))}return l}function Lx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=jx(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:i.reduce((f,m,g)=>{let{paramName:w,isOptional:b}=m;if(w==="*"){let E=c[g]||"";l=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const k=c[g];return b&&!k?f[w]=void 0:f[w]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:t}}function jx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ah(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(i.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function Nx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ah(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Mh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Ix(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?Vr(t):t;return{pathname:n?n.startsWith("/")?n:Rx(n,e):e,search:zx(i),hash:Dx(s)}}function Rx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function yu(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ax(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ev(t,e){let n=Ax(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function tv(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=Vr(t):(s=to({},t),Qe(!s.pathname||!s.pathname.includes("?"),yu("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),yu("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),yu("#","search","hash",s)));let a=t===""||s.pathname==="",l=a?"/":s.pathname,c;if(l==null)c=n;else{let g=e.length-1;if(!i&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),g-=1;s.pathname=w.join("/")}c=g>=0?e[g]:"/"}let h=Ix(s,c),f=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const dr=t=>t.join("/").replace(/\/\/+/g,"/"),Mx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Dx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Bx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nv=["post","put","patch","delete"];new Set(nv);const Ux=["get",...nv];new Set(Ux);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function no(){return no=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},no.apply(this,arguments)}const zh=P.createContext(null),$x=P.createContext(null),qr=P.createContext(null),cl=P.createContext(null),_r=P.createContext({outlet:null,matches:[],isDataRoute:!1}),rv=P.createContext(null);function Fx(t,e){let{relative:n}=e===void 0?{}:e;ho()||Qe(!1);let{basename:i,navigator:s}=P.useContext(qr),{hash:a,pathname:l,search:c}=sv(t,{relative:n}),h=l;return i!=="/"&&(h=l==="/"?i:dr([i,l])),s.createHref({pathname:h,search:c,hash:a})}function ho(){return P.useContext(cl)!=null}function fo(){return ho()||Qe(!1),P.useContext(cl).location}function iv(t){P.useContext(qr).static||P.useLayoutEffect(t)}function Vi(){let{isDataRoute:t}=P.useContext(_r);return t?nb():Wx()}function Wx(){ho()||Qe(!1);let t=P.useContext(zh),{basename:e,future:n,navigator:i}=P.useContext(qr),{matches:s}=P.useContext(_r),{pathname:a}=fo(),l=JSON.stringify(ev(s,n.v7_relativeSplatPath)),c=P.useRef(!1);return iv(()=>{c.current=!0}),P.useCallback(function(f,m){if(m===void 0&&(m={}),!c.current)return;if(typeof f=="number"){i.go(f);return}let g=tv(f,JSON.parse(l),a,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:dr([e,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[e,i,l,a,t])}function Zx(){let{matches:t}=P.useContext(_r),e=t[t.length-1];return e?e.params:{}}function sv(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=P.useContext(qr),{matches:s}=P.useContext(_r),{pathname:a}=fo(),l=JSON.stringify(ev(s,i.v7_relativeSplatPath));return P.useMemo(()=>tv(t,JSON.parse(l),a,n==="path"),[t,l,a,n])}function Hx(t,e){return Vx(t,e)}function Vx(t,e,n,i){ho()||Qe(!1);let{navigator:s}=P.useContext(qr),{matches:a}=P.useContext(_r),l=a[a.length-1],c=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let f=fo(),m;if(e){var g;let T=typeof e=="string"?Vr(e):e;h==="/"||(g=T.pathname)!=null&&g.startsWith(h)||Qe(!1),m=T}else m=f;let w=m.pathname||"/",b=w;if(h!=="/"){let T=h.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(T.length).join("/")}let k=_x(t,{pathname:b}),E=Qx(k&&k.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:dr([h,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:dr([h,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,n,i);return e&&E?P.createElement(cl.Provider,{value:{location:no({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:rr.Pop}},E):E}function qx(){let t=tb(),e=Bx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,null)}const Kx=P.createElement(qx,null);class Gx extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(_r.Provider,{value:this.props.routeContext},P.createElement(rv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jx(t){let{routeContext:e,match:n,children:i}=t,s=P.useContext(zh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(_r.Provider,{value:e},i)}function Qx(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let m=l.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);m>=0||Qe(!1),l=l.slice(0,Math.min(l.length,m+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<l.length;m++){let g=l[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:w,errors:b}=n,k=g.route.loader&&w[g.route.id]===void 0&&(!b||b[g.route.id]===void 0);if(g.route.lazy||k){h=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((m,g,w)=>{let b,k=!1,E=null,T=null;n&&(b=c&&g.route.id?c[g.route.id]:void 0,E=g.route.errorElement||Kx,h&&(f<0&&w===0?(rb("route-fallback"),k=!0,T=null):f===w&&(k=!0,T=g.route.hydrateFallbackElement||null)));let S=e.concat(l.slice(0,w+1)),y=()=>{let x;return b?x=E:k?x=T:g.route.Component?x=P.createElement(g.route.Component,null):g.route.element?x=g.route.element:x=m,P.createElement(Jx,{match:g,routeContext:{outlet:m,matches:S,isDataRoute:n!=null},children:x})};return n&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?P.createElement(Gx,{location:n.location,revalidation:n.revalidation,component:E,error:b,children:y(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):y()},null)}var ov=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ov||{}),av=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(av||{});function Yx(t){let e=P.useContext(zh);return e||Qe(!1),e}function Xx(t){let e=P.useContext($x);return e||Qe(!1),e}function eb(t){let e=P.useContext(_r);return e||Qe(!1),e}function lv(t){let e=eb(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function tb(){var t;let e=P.useContext(rv),n=Xx(),i=lv();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function nb(){let{router:t}=Yx(ov.UseNavigateStable),e=lv(av.UseNavigateStable),n=P.useRef(!1);return iv(()=>{n.current=!0}),P.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,no({fromRouteId:e},a)))},[t,e])}const ip={};function rb(t,e,n){ip[t]||(ip[t]=!0)}function ib(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function di(t){Qe(!1)}function sb(t){let{basename:e="/",children:n=null,location:i,navigationType:s=rr.Pop,navigator:a,static:l=!1,future:c}=t;ho()&&Qe(!1);let h=e.replace(/^\/*/,"/"),f=P.useMemo(()=>({basename:h,navigator:a,static:l,future:no({v7_relativeSplatPath:!1},c)}),[h,c,a,l]);typeof i=="string"&&(i=Vr(i));let{pathname:m="/",search:g="",hash:w="",state:b=null,key:k="default"}=i,E=P.useMemo(()=>{let T=Mh(m,h);return T==null?null:{location:{pathname:T,search:g,hash:w,state:b,key:k},navigationType:s}},[h,m,g,w,b,k,s]);return E==null?null:P.createElement(qr.Provider,{value:f},P.createElement(cl.Provider,{children:n,value:E}))}function ob(t){let{children:e,location:n}=t;return Hx(Ec(e),n)}new Promise(()=>{});function Ec(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(i,s)=>{if(!P.isValidElement(i))return;let a=[...e,s];if(i.type===P.Fragment){n.push.apply(n,Ec(i.props.children,a));return}i.type!==di&&Qe(!1),!i.props.index||!i.props.children||Qe(!1);let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Ec(i.props.children,a)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},kc.apply(this,arguments)}function ab(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function lb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ub(t,e){return t.button===0&&(!e||e==="_self")&&!lb(t)}const cb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hb="6";try{window.__reactRouterVersion=hb}catch{}const db="startTransition",sp=r0[db];function fb(t){let{basename:e,children:n,future:i,window:s}=t,a=P.useRef();a.current==null&&(a.current=mx({window:s,v5Compat:!0}));let l=a.current,[c,h]=P.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},m=P.useCallback(g=>{f&&sp?sp(()=>h(g)):h(g)},[h,f]);return P.useLayoutEffect(()=>l.listen(m),[l,m]),P.useEffect(()=>ib(i),[i]),P.createElement(sb,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const pb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rn=P.forwardRef(function(e,n){let{onClick:i,relative:s,reloadDocument:a,replace:l,state:c,target:h,to:f,preventScrollReset:m,viewTransition:g}=e,w=ab(e,cb),{basename:b}=P.useContext(qr),k,E=!1;if(typeof f=="string"&&mb.test(f)&&(k=f,pb))try{let x=new URL(window.location.href),O=f.startsWith("//")?new URL(x.protocol+f):new URL(f),A=Mh(O.pathname,b);O.origin===x.origin&&A!=null?f=A+O.search+O.hash:E=!0}catch{}let T=Fx(f,{relative:s}),S=gb(f,{replace:l,state:c,target:h,preventScrollReset:m,relative:s,viewTransition:g});function y(x){i&&i(x),x.defaultPrevented||S(x)}return P.createElement("a",kc({},w,{href:k||T,onClick:E||a?i:y,ref:n,target:h}))});var op;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(op||(op={}));var ap;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ap||(ap={}));function gb(t,e){let{target:n,replace:i,state:s,preventScrollReset:a,relative:l,viewTransition:c}=e===void 0?{}:e,h=Vi(),f=fo(),m=sv(t,{relative:l});return P.useCallback(g=>{if(ub(g,n)){g.preventDefault();let w=i!==void 0?i:Fa(f)===Fa(m);h(t,{replace:w,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[f,h,m,i,s,n,t,a,l,c])}var Pc=function(t,e){return Pc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},Pc(t,e)};function uv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Pc(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Wa=function(){return Wa=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wa.apply(this,arguments)};function qi(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function cv(t,e,n,i){var s=arguments.length,a=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(l=t[c])&&(a=(s<3?l(a):s>3?l(e,n,a):l(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a}function hv(t,e){return function(n,i){e(n,i,t)}}function dv(t,e,n,i,s,a){function l(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=i.kind,h=c==="getter"?"get":c==="setter"?"set":"value",f=!e&&t?i.static?t:t.prototype:null,m=e||(f?Object.getOwnPropertyDescriptor(f,i.name):{}),g,w=!1,b=n.length-1;b>=0;b--){var k={};for(var E in i)k[E]=E==="access"?{}:i[E];for(var E in i.access)k.access[E]=i.access[E];k.addInitializer=function(S){if(w)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(S||null))};var T=(0,n[b])(c==="accessor"?{get:m.get,set:m.set}:m[h],k);if(c==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(g=l(T.get))&&(m.get=g),(g=l(T.set))&&(m.set=g),(g=l(T.init))&&s.unshift(g)}else(g=l(T))&&(c==="field"?s.unshift(g):m[h]=g)}f&&Object.defineProperty(f,i.name,m),w=!0}function fv(t,e,n){for(var i=arguments.length>2,s=0;s<e.length;s++)n=i?e[s].call(t,n):e[s].call(t);return i?n:void 0}function pv(t){return typeof t=="symbol"?t:"".concat(t)}function mv(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function gv(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Q(t,e,n,i){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function c(m){try{f(i.next(m))}catch(g){l(g)}}function h(m){try{f(i.throw(m))}catch(g){l(g)}}function f(m){m.done?a(m.value):s(m.value).then(c,h)}f((i=i.apply(t,e||[])).next())})}function vv(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=c(0),l.throw=c(1),l.return=c(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(m){return h([f,m])}}function h(f){if(i)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(n=0)),n;)try{if(i=1,s&&(a=f[0]&2?s.return:f[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,f[1])).done)return a;switch(s=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,s=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(m){f=[6,m],s=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var hl=Object.create?function(t,e,n,i){i===void 0&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]};function _v(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&hl(e,t,n)}function Za(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dh(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function yv(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Dh(arguments[e]));return t}function wv(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),s=0,e=0;e<n;e++)for(var a=arguments[e],l=0,c=a.length;l<c;l++,s++)i[s]=a[l];return i}function xv(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}function $i(t){return this instanceof $i?(this.v=t,this):new $i(t)}function bv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(b){return function(k){return Promise.resolve(k).then(b,g)}}function c(b,k){i[b]&&(s[b]=function(E){return new Promise(function(T,S){a.push([b,E,T,S])>1||h(b,E)})},k&&(s[b]=k(s[b])))}function h(b,k){try{f(i[b](k))}catch(E){w(a[0][3],E)}}function f(b){b.value instanceof $i?Promise.resolve(b.value.v).then(m,g):w(a[0][2],b)}function m(b){h("next",b)}function g(b){h("throw",b)}function w(b,k){b(k),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Sv(t){var e,n;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,a){e[s]=t[s]?function(l){return(n=!n)?{value:$i(t[s](l)),done:!1}:a?a(l):l}:a}}function Ev(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Za=="function"?Za(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,h){l=t[a](l),s(c,h,l.done,l.value)})}}function s(a,l,c,h){Promise.resolve(h).then(function(f){a({value:f,done:c})},l)}}function kv(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var vb=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Cc=function(t){return Cc=Object.getOwnPropertyNames||function(e){var n=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[n.length]=i);return n},Cc(t)};function Pv(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Cc(t),i=0;i<n.length;i++)n[i]!=="default"&&hl(e,t,n[i]);return vb(e,t),e}function Cv(t){return t&&t.__esModule?t:{default:t}}function Tv(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}function Ov(t,e,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function Lv(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function jv(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],n&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:i,async:n})}else n&&t.stack.push({async:!0});return e}var _b=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var i=new Error(n);return i.name="SuppressedError",i.error=t,i.suppressed=e,i};function Nv(t){function e(a){t.error=t.hasError?new _b(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,i=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&i===1)return i=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(a).then(s,function(l){return e(l),s()})}else i|=1}catch(l){e(l)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Iv(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,s,a,l){return i?e?".jsx":".js":s&&(!a||!l)?n:s+a+"."+l.toLowerCase()+"js"}):t}const yb={__extends:uv,__assign:Wa,__rest:qi,__decorate:cv,__param:hv,__esDecorate:dv,__runInitializers:fv,__propKey:pv,__setFunctionName:mv,__metadata:gv,__awaiter:Q,__generator:vv,__createBinding:hl,__exportStar:_v,__values:Za,__read:Dh,__spread:yv,__spreadArrays:wv,__spreadArray:xv,__await:$i,__asyncGenerator:bv,__asyncDelegator:Sv,__asyncValues:Ev,__makeTemplateObject:kv,__importStar:Pv,__importDefault:Cv,__classPrivateFieldGet:Tv,__classPrivateFieldSet:Ov,__classPrivateFieldIn:Lv,__addDisposableResource:jv,__disposeResources:Nv,__rewriteRelativeImportExtension:Iv},wb=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:jv,get __assign(){return Wa},__asyncDelegator:Sv,__asyncGenerator:bv,__asyncValues:Ev,__await:$i,__awaiter:Q,__classPrivateFieldGet:Tv,__classPrivateFieldIn:Lv,__classPrivateFieldSet:Ov,__createBinding:hl,__decorate:cv,__disposeResources:Nv,__esDecorate:dv,__exportStar:_v,__extends:uv,__generator:vv,__importDefault:Cv,__importStar:Pv,__makeTemplateObject:kv,__metadata:gv,__param:hv,__propKey:pv,__read:Dh,__rest:qi,__rewriteRelativeImportExtension:Iv,__runInitializers:fv,__setFunctionName:mv,__spread:yv,__spreadArray:xv,__spreadArrays:wv,__values:Za,default:yb},Symbol.toStringTag,{value:"Module"})),xb="modulepreload",bb=function(t){return"/usk-social/"+t},lp={},Ki=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(h=>{if(h=bb(h),h in lp)return;lp[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":xb,f||(g.as="script"),g.crossOrigin="",g.href=h,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((w,b)=>{g.addEventListener("load",w),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},Sb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ki(async()=>{const{default:i}=await Promise.resolve().then(()=>Kr);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class Bh extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class up extends Bh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class cp extends Bh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class hp extends Bh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Tc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Tc||(Tc={}));class Eb{constructor(e,{headers:n={},customFetch:i,region:s=Tc.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Sb(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Q(this,arguments,void 0,function*(n,i={}){var s;try{const{headers:a,method:l,body:c,signal:h}=i;let f={},{region:m}=i;m||(m=this.region);const g=new URL(`${this.url}/${n}`);m&&m!=="any"&&(f["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let w;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",w=c):typeof c=="string"?(f["Content-Type"]="text/plain",w=c):typeof FormData<"u"&&c instanceof FormData?w=c:(f["Content-Type"]="application/json",w=JSON.stringify(c)):w=c;const b=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:w,signal:h}).catch(S=>{throw S.name==="AbortError"?S:new up(S)}),k=b.headers.get("x-relay-error");if(k&&k==="true")throw new cp(b);if(!b.ok)throw new hp(b);let E=((s=b.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),T;return E==="application/json"?T=yield b.json():E==="application/octet-stream"||E==="application/pdf"?T=yield b.blob():E==="text/event-stream"?T=b:E==="multipart/form-data"?T=yield b.formData():T=yield b.text(),{data:T,error:null,response:b}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new up(a)}:{data:null,error:a,response:a instanceof hp||a instanceof cp?a.context:void 0}}})}}var xt={};const Gi=Bp(wb);var Qo={},Yo={},Xo={},ea={},ta={},kb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fi=kb();const Pb=Fi.fetch,Rv=Fi.fetch.bind(Fi),Av=Fi.Headers,Cb=Fi.Request,Tb=Fi.Response,Kr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Av,Request:Cb,Response:Tb,default:Rv,fetch:Pb},Symbol.toStringTag,{value:"Module"})),Ob=Bp(Kr);var na={},dp;function Mv(){if(dp)return na;dp=1,Object.defineProperty(na,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return na.default=t,na}var fp;function zv(){if(fp)return ta;fp=1,Object.defineProperty(ta,"__esModule",{value:!0});const t=Gi,e=t.__importDefault(Ob),n=t.__importDefault(Mv());class i{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let h=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var m,g,w,b;let k=null,E=null,T=null,S=f.status,y=f.statusText;if(f.ok){if(this.method!=="HEAD"){const z=await f.text();z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?E=z:E=JSON.parse(z))}const O=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),A=(w=f.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");O&&A&&A.length>1&&(T=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(k={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,T=null,S=406,y="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const O=await f.text();try{k=JSON.parse(O),Array.isArray(k)&&f.status===404&&(E=[],k=null,S=200,y="OK")}catch{f.status===404&&O===""?(S=204,y="No Content"):k={message:O}}if(k&&this.isMaybeSingle&&(!((b=k==null?void 0:k.details)===null||b===void 0)&&b.includes("0 rows"))&&(k=null,S=200,y="OK"),k&&this.shouldThrowOnError)throw new n.default(k)}return{error:k,data:E,count:T,status:S,statusText:y}});return this.shouldThrowOnError||(h=h.catch(f=>{var m,g,w;return{error:{message:`${(m=f==null?void 0:f.name)!==null&&m!==void 0?m:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(g=f==null?void 0:f.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(w=f==null?void 0:f.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,l)}returns(){return this}overrideTypes(){return this}}return ta.default=i,ta}var pp;function Dv(){if(pp)return ea;pp=1,Object.defineProperty(ea,"__esModule",{value:!0});const e=Gi.__importDefault(zv());class n extends e.default{select(s){let a=!1;const l=(s??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:l,foreignTable:c,referencedTable:h=c}={}){const f=h?`${h}.order`:"order",m=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${m?`${m},`:""}${s}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this}range(s,a,{foreignTable:l,referencedTable:c=l}={}){const h=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${s}`),this.url.searchParams.set(f,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:l=!1,buffers:c=!1,wal:h=!1,format:f="text"}={}){var m;const g=[s?"analyze":null,a?"verbose":null,l?"settings":null,c?"buffers":null,h?"wal":null].filter(Boolean).join("|"),w=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${w}"; options=${g};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return ea.default=n,ea}var mp;function Uh(){if(mp)return Xo;mp=1,Object.defineProperty(Xo,"__esModule",{value:!0});const e=Gi.__importDefault(Dv()),n=new RegExp("[,()]");class i extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const c=Array.from(new Set(l)).map(h=>typeof h=="string"&&n.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:c,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const m=c===void 0?"":`(${c})`;return this.url.searchParams.append(a,`${f}fts${m}.${l}`),this}match(a){return Object.entries(a).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(a,l,c){return this.url.searchParams.append(a,`not.${l}.${c}`),this}or(a,{foreignTable:l,referencedTable:c=l}={}){const h=c?`${c}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,l,c){return this.url.searchParams.append(a,`${l}.${c}`),this}}return Xo.default=i,Xo}var gp;function Bv(){if(gp)return Yo;gp=1,Object.defineProperty(Yo,"__esModule",{value:!0});const e=Gi.__importDefault(Uh());class n{constructor(s,{headers:a={},schema:l,fetch:c}){this.url=s,this.headers=new Headers(a),this.schema=l,this.fetch=c}select(s,a){const{head:l=!1,count:c}=a??{},h=l?"HEAD":"GET";let f=!1;const m=(s??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",m),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:l=!0}={}){var c;const h="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:l=!1,count:c,defaultToNull:h=!0}={}){var f;const m="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),c&&this.headers.append("Prefer",`count=${c}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((w,b)=>w.concat(Object.keys(b)),[]);if(g.length>0){const w=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(s,{count:a}={}){var l;const c="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var a;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Yo.default=n,Yo}var vp;function Lb(){if(vp)return Qo;vp=1,Object.defineProperty(Qo,"__esModule",{value:!0});const t=Gi,e=t.__importDefault(Bv()),n=t.__importDefault(Uh());class i{constructor(a,{headers:l={},schema:c,fetch:h}={}){this.url=a,this.headers=new Headers(l),this.schemaName=c,this.fetch=h}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new i(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:c=!1,get:h=!1,count:f}={}){var m;let g;const w=new URL(`${this.url}/rpc/${a}`);let b;c||h?(g=c?"HEAD":"GET",Object.entries(l).filter(([E,T])=>T!==void 0).map(([E,T])=>[E,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([E,T])=>{w.searchParams.append(E,T)})):(g="POST",b=l);const k=new Headers(this.headers);return f&&k.set("Prefer",`count=${f}`),new n.default({method:g,url:w,headers:k,schema:this.schemaName,body:b,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return Qo.default=i,Qo}Object.defineProperty(xt,"__esModule",{value:!0});var Uv=xt.PostgrestError=Jv=xt.PostgrestBuilder=Kv=xt.PostgrestTransformBuilder=Vv=xt.PostgrestFilterBuilder=Zv=xt.PostgrestQueryBuilder=Fv=xt.PostgrestClient=void 0;const Ji=Gi,$v=Ji.__importDefault(Lb());var Fv=xt.PostgrestClient=$v.default;const Wv=Ji.__importDefault(Bv());var Zv=xt.PostgrestQueryBuilder=Wv.default;const Hv=Ji.__importDefault(Uh());var Vv=xt.PostgrestFilterBuilder=Hv.default;const qv=Ji.__importDefault(Dv());var Kv=xt.PostgrestTransformBuilder=qv.default;const Gv=Ji.__importDefault(zv());var Jv=xt.PostgrestBuilder=Gv.default;const Qv=Ji.__importDefault(Mv());Uv=xt.PostgrestError=Qv.default;var Yv=xt.default={PostgrestClient:$v.default,PostgrestQueryBuilder:Wv.default,PostgrestFilterBuilder:Hv.default,PostgrestTransformBuilder:qv.default,PostgrestBuilder:Gv.default,PostgrestError:Qv.default};const jb=Dp({__proto__:null,get PostgrestBuilder(){return Jv},get PostgrestClient(){return Fv},get PostgrestError(){return Uv},get PostgrestFilterBuilder(){return Vv},get PostgrestQueryBuilder(){return Zv},get PostgrestTransformBuilder(){return Kv},default:Yv},[xt]),{PostgrestClient:Nb,PostgrestQueryBuilder:Ck,PostgrestFilterBuilder:Tk,PostgrestTransformBuilder:Ok,PostgrestBuilder:Lk,PostgrestError:jk}=Yv||jb;class Ib{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Rb="2.78.0",Ab=`realtime-js/${Rb}`,Mb="1.0.0",Oc=1e4,zb=1e3,Db=100;var Rs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Rs||(Rs={}));var Xe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Xe||(Xe={}));var an;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(an||(an={}));var Lc;(function(t){t.websocket="websocket"})(Lc||(Lc={}));var jr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(jr||(jr={}));class Bb{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const s=n.getUint8(1),a=n.getUint8(2);let l=this.HEADER_LENGTH+2;const c=i.decode(e.slice(l,l+s));l=l+s;const h=i.decode(e.slice(l,l+a));l=l+a;const f=JSON.parse(i.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:h,payload:f}}}class Xv{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var je;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(je||(je={}));const _p=(t,e,n={})=>{var i;const s=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=Ub(l,t,e,s),a),{}):{}},Ub=(t,e,n,i)=>{const s=e.find(c=>c.name===t),a=s==null?void 0:s.type,l=n[t];return a&&!i.includes(a)?e_(a,l):jc(l)},e_=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Zb(e,n)}switch(t){case je.bool:return $b(e);case je.float4:case je.float8:case je.int2:case je.int4:case je.int8:case je.numeric:case je.oid:return Fb(e);case je.json:case je.jsonb:return Wb(e);case je.timestamp:return Hb(e);case je.abstime:case je.date:case je.daterange:case je.int4range:case je.int8range:case je.money:case je.reltime:case je.text:case je.time:case je.timestamptz:case je.timetz:case je.tsrange:case je.tstzrange:return jc(e);default:return jc(e)}},jc=t=>t,$b=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Fb=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Wb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Zb=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(c=>e_(e,c))}return t},Hb=t=>typeof t=="string"?t.replace(" ","T"):t,t_=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class wu{constructor(e,n,i={},s=Oc){this.channel=e,this.event=n,this.payload=i,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yp;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(yp||(yp={}));class As{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},s=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=As.syncState(this.state,s,a,l),this.pendingDiffs.forEach(h=>{this.state=As.syncDiff(this.state,h,a,l)}),this.pendingDiffs=[],c()}),this.channel._on(i.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=As.syncDiff(this.state,s,a,l),c())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,s){const a=this.cloneDeep(e),l=this.transformState(n),c={},h={};return this.map(a,(f,m)=>{l[f]||(h[f]=m)}),this.map(l,(f,m)=>{const g=a[f];if(g){const w=m.map(T=>T.presence_ref),b=g.map(T=>T.presence_ref),k=m.filter(T=>b.indexOf(T.presence_ref)<0),E=g.filter(T=>w.indexOf(T.presence_ref)<0);k.length>0&&(c[f]=k),E.length>0&&(h[f]=E)}else c[f]=m}),this.syncDiff(a,{joins:c,leaves:h},i,s)}static syncDiff(e,n,i,s){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),s||(s=()=>{}),this.map(a,(c,h)=>{var f;const m=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(h),m.length>0){const g=e[c].map(b=>b.presence_ref),w=m.filter(b=>g.indexOf(b.presence_ref)<0);e[c].unshift(...w)}i(c,m,h)}),this.map(l,(c,h)=>{let f=e[c];if(!f)return;const m=h.map(g=>g.presence_ref);f=f.filter(g=>m.indexOf(g.presence_ref)<0),e[c]=f,s(c,f,h),f.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const s=e[i];return"metas"in s?n[i]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[i]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wp;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(wp||(wp={}));var Ms;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ms||(Ms={}));var Nn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Nn||(Nn={}));class $h{constructor(e,n={config:{}},i){var s,a;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new wu(this,an.join,this.params,this.timeout),this.rejoinTimer=new Xv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(an.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new As(this),this.broadcastEndpointURL=t_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:l,presence:c,private:h}}=this.params,f=(s=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&s!==void 0?s:[],m=!!this.bindings[Ms.PRESENCE]&&this.bindings[Ms.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},w={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:m}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(Nn.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(Nn.CLOSED)),this.updateJoinPayload(Object.assign({config:w},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var k;if(this.socket.setAuth(),b===void 0){e==null||e(Nn.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,T=(k=E==null?void 0:E.length)!==null&&k!==void 0?k:0,S=[];for(let y=0;y<T;y++){const x=E[y],{filter:{event:O,schema:A,table:z,filter:I}}=x,B=b&&b[y];if(B&&B.event===O&&B.schema===A&&B.table===z&&B.filter===I)S.push(Object.assign(Object.assign({},x),{id:B.id}));else{this.unsubscribe(),this.state=Xe.errored,e==null||e(Nn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(Nn.SUBSCRIBED);return}}).receive("error",b=>{this.state=Xe.errored,e==null||e(Nn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Nn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===Xe.joined&&e===Ms.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var s;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let h=c.statusText;try{const f=await c.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}async send(e,n={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,c,h;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(an.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(s=>{i=new wu(this,an.leave,{},e),i.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xe.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const s=new AbortController,a=setTimeout(()=>s.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),l}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new wu(this,e,n,i);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Db){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var s,a;const l=e.toLocaleLowerCase(),{close:c,error:h,leave:f,join:m}=an;if(i&&[c,h,f,m].indexOf(l)>=0&&i!==this._joinRef())return;let w=this._onMessage(l,n,i);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var k,E,T;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((T=(E=b.filter)===null||E===void 0?void 0:E.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===l}).map(b=>b.callback(w,i)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var k,E,T,S,y,x;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const O=b.id,A=(k=b.filter)===null||k===void 0?void 0:k.event;return O&&((E=n.ids)===null||E===void 0?void 0:E.includes(O))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((T=n.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const O=(y=(S=b==null?void 0:b.filter)===null||S===void 0?void 0:S.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return O==="*"||O===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof w=="object"&&"ids"in w){const k=w.data,{schema:E,table:T,commit_timestamp:S,type:y,errors:x}=k;w=Object.assign(Object.assign({},{schema:E,table:T,commit_timestamp:S,eventType:y,new:{},old:{},errors:x}),this._getPayloadRecords(k))}b.callback(w,i)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:i};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&$h.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(an.close,{},e)}_onError(e){this._on(an.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=_p(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=_p(e.columns,e.old_record)),n}}const xu=()=>{},ra={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Vb=[1e3,2e3,5e3,1e4],qb=1e4,Kb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gb{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Oc,this.transport=null,this.heartbeatIntervalMs=ra.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xu,this.ref=0,this.reconnectTimer=null,this.logger=xu,this.conn=null,this.sendBuffer=[],this.serializer=new Bb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>Ki(async()=>{const{default:c}=await Promise.resolve().then(()=>Kr);return{default:c}},void 0).then(({default:c})=>c(...l)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Lc.websocket}`,this.httpEndpoint=t_(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ib.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Mb}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Rs.connecting:return jr.Connecting;case Rs.open:return jr.Open;case Rs.closing:return jr.Closing;default:return jr.Closed}}isConnected(){return this.connectionState()===jr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===i);if(s)return s;{const a=new $h(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:i,payload:s,ref:a}=e,l=()=>{this.encode(e,c=>{var h;(h=this.conn)===null||h===void 0||h.send(c)})};this.log("push",`${n} ${i} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(zb,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ra.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:s,payload:a,ref:l}=n,c=l?`(${l})`:"",h=a.status||"";this.log("receive",`${h} ${i} ${s} ${c}`.trim(),a),this.channels.filter(f=>f._isMember(i)).forEach(f=>f._trigger(s,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(an.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${i}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([Kb],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:Ab};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(an.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Xv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ra.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,s,a,l,c,h,f,m;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:Oc,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ra.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:xu,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:g=>Vb[g-1]||qb,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(g,w)=>w(JSON.stringify(g)),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Fh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Be(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Jb extends Fh{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Nc extends Fh{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Wh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ki(async()=>{const{default:i}=await Promise.resolve().then(()=>Kr);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},Qb=()=>Q(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ki(()=>Promise.resolve().then(()=>Kr),void 0)).Response:Response}),Ic=t=>{if(Array.isArray(t))return t.map(n=>Ic(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Ic(i)}),e},Yb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},bu=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Xb=(t,e,n)=>Q(void 0,void 0,void 0,function*(){const i=yield Qb();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const a=t.status||500,l=(s==null?void 0:s.statusCode)||a+"";e(new Jb(bu(s),a,l))}).catch(s=>{e(new Nc(bu(s),s))}):e(new Nc(bu(t),t))}),eS=(t,e,n,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?s:(Yb(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function po(t,e,n,i,s,a){return Q(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(n,eS(e,i,s,a)).then(h=>{if(!h.ok)throw h;return i!=null&&i.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>Xb(h,c,i))})})}function ro(t,e,n,i){return Q(this,void 0,void 0,function*(){return po(t,"GET",e,n,i)})}function sn(t,e,n,i,s){return Q(this,void 0,void 0,function*(){return po(t,"POST",e,i,s,n)})}function Rc(t,e,n,i,s){return Q(this,void 0,void 0,function*(){return po(t,"PUT",e,i,s,n)})}function tS(t,e,n,i){return Q(this,void 0,void 0,function*(){return po(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function Zh(t,e,n,i,s){return Q(this,void 0,void 0,function*(){return po(t,"DELETE",e,i,s,n)})}class nS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Q(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Be(e))return{data:null,error:e};throw e}})}}var n_;class rS{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[n_]="BlobDownloadBuilder",this.promise=null}asStream(){return new nS(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Q(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Be(e))return{data:null,error:e};throw e}})}}n_=Symbol.toStringTag;const iS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class sS{constructor(e,n={},i,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=i,this.fetch=Wh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,i,s){return Q(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},xp),s);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&i instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",i)):typeof FormData<"u"&&i instanceof FormData?(a=i,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=i,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,h&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),s!=null&&s.headers&&(c=Object.assign(Object.assign({},c),s.headers));const f=this._removeEmptyFolders(n),m=this._getFinalPath(f),g=yield(e=="PUT"?Rc:sn)(this.fetch,`${this.url}/object/${m}`,a,Object.assign({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Be(a))return{data:null,error:a};throw a}})}upload(e,n,i){return Q(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,s){return Q(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",n);try{let h;const f=Object.assign({upsert:xp.upsert},s),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&i instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",i)):typeof FormData<"u"&&i instanceof FormData?(h=i,h.append("cacheControl",f.cacheControl)):(h=i,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const g=yield Rc(this.fetch,c.toString(),h,{headers:m});return{data:{path:a,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Be(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return Q(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield sn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:s}),l=new URL(this.url+a.url),c=l.searchParams.get("token");if(!c)throw new Fh("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}})}update(e,n,i){return Q(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return Q(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}copy(e,n,i){return Q(this,void 0,void 0,function*(){try{return{data:{path:(yield sn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,i){return Q(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield sn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,i){return Q(this,void 0,void 0,function*(){try{const s=yield sn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=a?`?${a}`:"",c=this._getFinalPath(e),h=()=>ro(this.fetch,`${this.url}/${s}/${c}${l}`,{headers:this.headers,noResolveJson:!0});return new rS(h,this.shouldThrowOnError)}info(e){return Q(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield ro(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ic(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}})}exists(e){return Q(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield tS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Be(i)&&i instanceof Nc){const s=i.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&s.push(h);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${i}${f}`)}}}remove(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Zh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}list(e,n,i){return Q(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},iS),n),{prefix:e||""});return{data:yield sn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},i),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}listV2(e,n){return Q(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield sn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const r_="2.78.0",i_={"X-Client-Info":`storage-js/${r_}`};class oS{constructor(e,n={},i,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},i_),n),this.fetch=Wh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Q(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield ro(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}getBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield ro(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}createBucket(e){return Q(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Be(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return Q(this,void 0,void 0,function*(){try{return{data:yield Rc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Be(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Zh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class aS{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},i_),n),this.fetch=Wh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}listBuckets(e){return Q(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const i=n.toString(),s=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield ro(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Zh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}}const Hh={"X-Client-Info":`storage-js/${r_}`,"Content-Type":"application/json"};class s_ extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function It(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Su extends s_{constructor(e,n,i){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lS extends s_{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var bp;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(bp||(bp={}));const Vh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ki(async()=>{const{default:i}=await Promise.resolve().then(()=>Kr);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},uS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Sp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),cS=(t,e,n)=>Q(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new Su(Sp(l),s,c))}).catch(()=>{const l=s+"",c=a.statusText||`HTTP ${s} error`;e(new Su(c,s,l))});else{const l=s+"",c=a.statusText||`HTTP ${s} error`;e(new Su(c,s,l))}}else e(new lS(Sp(t),t))}),hS=(t,e,n,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return i?(uS(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,Object.assign(Object.assign({},s),n)):s};function dS(t,e,n,i,s,a){return Q(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(n,hS(e,i,s,a)).then(h=>{if(!h.ok)throw h;if(i!=null&&i.noResolveJson)return h;const f=h.headers.get("content-type");return!f||!f.includes("application/json")?{}:h.json()}).then(h=>l(h)).catch(h=>cS(h,c,i))})})}function Rt(t,e,n,i,s){return Q(this,void 0,void 0,function*(){return dS(t,"POST",e,i,s,n)})}class fS{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hh),n),this.fetch=Vh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Q(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Q(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i))return{data:null,error:i};throw i}})}listIndexes(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Q(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i))return{data:null,error:i};throw i}})}}class pS{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hh),n),this.fetch=Vh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Q(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Rt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}getVectors(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}listVectors(e){return Q(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Rt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}queryVectors(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Q(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Rt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}}class mS{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hh),n),this.fetch=Vh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}getBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}listBuckets(){return Q(this,arguments,void 0,function*(e={}){try{return{data:yield Rt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Q(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}}class gS extends mS{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new vS(this.url,this.headers,e,this.fetch)}}class vS extends fS{constructor(e,n,i,s){super(e,n,s),this.vectorBucketName=i}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Q(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Q(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Q(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Q(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new _S(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class _S extends pS{constructor(e,n,i,s,a){super(e,n,a),this.vectorBucketName=i,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Q(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Q(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Q(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Q(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Q(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class yS extends oS{constructor(e,n={},i,s){super(e,n,i,s)}from(e){return new sS(this.url,this.headers,e,this.fetch)}get vectors(){return new gS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new aS(this.url+"/iceberg",this.headers,this.fetch)}}const wS="2.78.0";let Es="";typeof Deno<"u"?Es="deno":typeof document<"u"?Es="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Es="react-native":Es="node";const xS={"X-Client-Info":`supabase-js-${Es}/${wS}`},bS={headers:xS},SS={schema:"public"},ES={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kS={},PS=t=>{let e;return t?e=t:typeof fetch>"u"?e=Rv:e=fetch,(...n)=>e(...n)},CS=()=>typeof Headers>"u"?Av:Headers,TS=(t,e,n)=>{const i=PS(n),s=CS();return async(a,l)=>{var c;const h=(c=await e())!==null&&c!==void 0?c:t;let f=new s(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),i(a,Object.assign(Object.assign({},l),{headers:f}))}};function OS(t){return t.endsWith("/")?t:t+"/"}function LS(t,e){var n,i;const{db:s,auth:a,realtime:l,global:c}=t,{db:h,auth:f,realtime:m,global:g}=e,w={db:Object.assign(Object.assign({},h),s),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},m),l),storage:{},global:Object.assign(Object.assign(Object.assign({},g),c),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(i=c==null?void 0:c.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function jS(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(OS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const o_="2.78.0",fi=30*1e3,Ac=3,Eu=Ac*fi,NS="http://localhost:9999",IS="supabase.auth.token",RS={"X-Client-Info":`gotrue-js/${o_}`},Mc="X-Supabase-Api-Version",a_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,MS=10*60*1e3;class io extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function ne(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class zS extends io{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function DS(t){return ne(t)&&t.name==="AuthApiError"}class Nr extends io{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class yr extends io{constructor(e,n,i,s){super(e,i,s),this.name=n,this.status=i}}class tn extends yr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function BS(t){return ne(t)&&t.name==="AuthSessionMissingError"}class ai extends yr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ia extends yr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class sa extends yr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function US(t){return ne(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ep extends yr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zc extends yr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ku(t){return ne(t)&&t.name==="AuthRetryableFetchError"}class kp extends yr{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Dc extends yr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ha="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pp=` 	
\r=`.split(""),$S=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Pp.length;e+=1)t[Pp[e].charCodeAt(0)]=-2;for(let e=0;e<Ha.length;e+=1)t[Ha[e].charCodeAt(0)]=e;return t})();function Cp(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Ha[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Ha[i]),e.queuedBits-=6}}function l_(t,e,n){const i=$S[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Tp(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{ZS(l,i,n)};for(let l=0;l<t.length;l+=1)l_(t.charCodeAt(l),s,a);return e.join("")}function FS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function WS(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const s=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}FS(i,e)}}function ZS(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ii(t){const e=[],n={queue:0,queuedBits:0},i=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)l_(t.charCodeAt(s),n,i);return new Uint8Array(e)}function HS(t){const e=[];return WS(t,n=>e.push(n)),new Uint8Array(e)}function Mr(t){const e=[],n={queue:0,queuedBits:0},i=s=>{e.push(s)};return t.forEach(s=>Cp(s,n,i)),Cp(null,n,i),e.join("")}function VS(t){return Math.round(Date.now()/1e3)+t}function qS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const yt=()=>typeof window<"u"&&typeof document<"u",Pr={tested:!1,writable:!1},u_=()=>{if(!yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pr.tested)return Pr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pr.tested=!0,Pr.writable=!0}catch{Pr.tested=!0,Pr.writable=!1}return Pr.writable};function KS(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((i,s)=>{e[s]=i}),e}const c_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ki(async()=>{const{default:i}=await Promise.resolve().then(()=>Kr);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},GS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pi=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Cr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Gn=async(t,e)=>{await t.removeItem(e)};class dl{constructor(){this.promise=new dl.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}dl.promiseConstructor=Promise;function Pu(t){const e=t.split(".");if(e.length!==3)throw new Dc("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!AS.test(e[i]))throw new Dc("JWT not in base64url format");return{header:JSON.parse(Tp(e[0])),payload:JSON.parse(Tp(e[1])),signature:Ii(e[2]),raw:{header:e[0],payload:e[1]}}}async function JS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function QS(t,e){return new Promise((i,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){i(l);return}}catch(l){if(!e(a,l)){s(l);return}}})()})}function YS(t){return("0"+t.toString(16)).substr(-2)}function XS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*i));return s}return crypto.getRandomValues(e),Array.from(e,YS).join("")}async function eE(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(i);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function tE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await eE(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function li(t,e,n=!1){const i=XS();let s=i;n&&(s+="/PASSWORD_RECOVERY"),await pi(t,`${e}-code-verifier`,s);const a=await tE(i);return[a,i===a?"plain":"s256"]}const nE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rE(t){const e=t.headers.get(Mc);if(!e||!e.match(nE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function iE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function sE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const oE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ui(t){if(!oE.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Cu(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function aE(t,e){return new Proxy(t,{get:(n,i,s)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,s)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,s)}})}function Op(t){return JSON.parse(JSON.stringify(t))}const Lr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lE=[502,503,504];async function Lp(t){var e;if(!GS(t))throw new zc(Lr(t),0);if(lE.includes(t.status))throw new zc(Lr(t),t.status);let n;try{n=await t.json()}catch(a){throw new Nr(Lr(a),a)}let i;const s=rE(t);if(s&&s.getTime()>=a_["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new kp(Lr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new tn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new kp(Lr(n),t.status,n.weak_password.reasons);throw new zS(Lr(n),t.status||500,i)}const uE=(t,e,n,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),n))};async function he(t,e,n,i){var s;const a=Object.assign({},i==null?void 0:i.headers);a[Mc]||(a[Mc]=a_["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const l=(s=i==null?void 0:i.query)!==null&&s!==void 0?s:{};i!=null&&i.redirectTo&&(l.redirect_to=i.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await cE(t,e,n+c,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(h):{data:Object.assign({},h),error:null}}async function cE(t,e,n,i,s,a){const l=uE(e,i,s,a);let c;try{c=await t(n,Object.assign({},l))}catch(h){throw console.error(h),new zc(Lr(h),0)}if(c.ok||await Lp(c),i!=null&&i.noResolveJson)return c;try{return await c.json()}catch(h){await Lp(h)}}function nn(t){var e;let n=null;fE(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=VS(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function jp(t){const e=nn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function er(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function hE(t){return{data:t,error:null}}function dE(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:s,verification_type:a}=t,l=qi(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:i,redirect_to:s,verification_type:a},h=Object.assign({},l);return{data:{properties:c,user:h},error:null}}function Np(t){return t}function fE(t){return t.access_token&&t.refresh_token&&t.expires_in}const Tu=["global","local","others"];class pE{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=c_(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Tu[0]){if(Tu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tu.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:er})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=qi(e,["options"]),s=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(s.new_email=i==null?void 0:i.newEmail,delete s.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:dE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ne(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:er})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,s,a,l,c,h;try{const f={nextPage:null,lastPage:0,total:0},m=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Np});if(m.error)throw m.error;const g=await m.json(),w=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(h=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(k=>{const E=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(k.split(";")[1].split("=")[1]);f[`${T}Page`]=E}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(ne(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){ui(e);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:er})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ui(e);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:er})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){ui(e);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:er})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){ui(e.userId);try{const{data:n,error:i}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:i}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ui(e.userId),ui(e.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,s,a,l,c,h;try{const f={nextPage:null,lastPage:0,total:0},m=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Np});if(m.error)throw m.error;const g=await m.json(),w=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(h=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(k=>{const E=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(k.split(";")[1].split("=")[1]);f[`${T}Page`]=E}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(ne(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}}function Ip(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ci={debug:!!(globalThis&&u_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class h_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mE extends h_{}async function gE(t,e,n){ci.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),ci.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async s=>{if(s){ci.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{ci.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ci.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new mE(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ci.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function vE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function d_(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function _E(t){return parseInt(t,16)}function yE(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function wE(t){var e;const{chainId:n,domain:i,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:c,requestId:h,resources:f,scheme:m,uri:g,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=d_(t.address),k=m?`${m}://${i}`:i,E=t.statement?`${t.statement}
`:"",T=`${k} wants you to sign in with your Ethereum account:
${b}

${E}`;let S=`URI: ${g}
Version: ${w}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(S+=`
Expiration Time: ${s.toISOString()}`),c&&(S+=`
Not Before: ${c.toISOString()}`),h&&(S+=`
Request ID: ${h}`),f){let y=`
Resources:`;for(const x of f){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);y+=`
- ${x}`}S+=y}return`${T}
${S}`}class Ge extends Error{constructor({message:e,code:n,cause:i,name:s}){var a;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(a=s??(i instanceof Error?i.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Va extends Ge{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function xE({error:t,options:e}){var n,i,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ge({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ge({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ge({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ge({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ge({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ge({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Ge({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ge({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(f_(l)){if(a.rp.id!==l)return new Ge({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ge({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function bE({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ge({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ge({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(f_(i)){if(n.rpId!==i)return new Ge({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class SE{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const EE=new SE;function kE(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:i}=t,s=qi(t,["challenge","user","excludeCredentials"]),a=Ii(e).buffer,l=Object.assign(Object.assign({},n),{id:Ii(n.id).buffer}),c=Object.assign(Object.assign({},s),{challenge:a,user:l});if(i&&i.length>0){c.excludeCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const f=i[h];c.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:Ii(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function PE(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,i=qi(t,["challenge","allowCredentials"]),s=Ii(e).buffer,a=Object.assign(Object.assign({},i),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},c),{id:Ii(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function CE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Mr(new Uint8Array(t.response.attestationObject)),clientDataJSON:Mr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function TE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,i=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Mr(new Uint8Array(s.authenticatorData)),clientDataJSON:Mr(new Uint8Array(s.clientDataJSON)),signature:Mr(new Uint8Array(s.signature)),userHandle:s.userHandle?Mr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function f_(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Rp(){var t,e;return!!(yt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function OE(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Va("Browser returned unexpected credential type",e)}:{data:null,error:new Va("Empty credential response",e)}}catch(e){return{data:null,error:xE({error:e,options:t})}}}async function LE(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Va("Browser returned unexpected credential type",e)}:{data:null,error:new Va("Empty credential response",e)}}catch(e){return{data:null,error:bE({error:e,options:t})}}}const jE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},NE={userVerification:"preferred",hints:["security-key"]};function qa(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),i={};for(const s of t)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))i[a]=l;else if(n(l))i[a]=l;else if(e(l)){const c=i[a];e(c)?i[a]=qa(c,l):i[a]=qa(l)}else i[a]=l}return i}function IE(t,e){return qa(jE,t,e||{})}function RE(t,e){return qa(NE,t,e||{})}class AE{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:s},a){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:c};const h=s??EE.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${i}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=IE(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:m,error:g}=await OE({publicKey:f,signal:h});return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const f=RE(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:m,error:g}=await LE(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:h}));return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new Nr("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!n)return{data:null,error:new io("rpId is required for WebAuthn authentication")};try{if(!Rp())return{data:null,error:new Nr("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:s},{request:a});if(!l)return{data:null,error:c};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:i,credential_response:h.credential_response}})}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new Nr("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!n)return{data:null,error:new io("rpId is required for WebAuthn registration")};try{if(!Rp())return{data:null,error:new Nr("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:c};const{data:h,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:s},{create:a});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:i,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new Nr("Unexpected error in register",l)}}}}vE();const ME={url:NS,storageKey:IS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ap(t,e,n){return await n()}const hi={};class so{get jwks(){var e,n;return(n=(e=hi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){hi[this.storageKey]=Object.assign(Object.assign({},hi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=hi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){hi[this.storageKey]=Object.assign(Object.assign({},hi[this.storageKey]),{cachedAt:e})}constructor(e){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=so.nextInstanceID,so.nextInstanceID+=1,this.instanceID>0&&yt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},ME),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new pE({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=c_(s.fetch),this.lock=s.lock||Ap,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:yt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=gE:this.lock=Ap,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new AE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:u_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ip(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Ip(this.memoryStorage)),yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${o_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=KS(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),yt()&&this.detectSessionInUrl&&i!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),US(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ne(n)?{error:n}:{error:new Nr("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,s;try{const a=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:nn}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,i,s;try{let a;if("email"in e){const{email:m,password:g,options:w}=e;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await li(this.storage,this.storageKey)),a=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:m,password:g,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:b,code_challenge_method:k},xform:nn})}else if("phone"in e){const{phone:m,password:g,options:w}=e;a=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(i=w==null?void 0:w.data)!==null&&i!==void 0?i:{},channel:(s=w==null?void 0:w.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:nn})}else throw new ia("You must provide either an email or phone number and a password");const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:c}=e;n=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:jp})}else if("phone"in e){const{phone:a,password:l,options:c}=e;n=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:jp})}else throw new ia("You must provide either an email or phone number and a password");const{data:i,error:s}=n;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new ai}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,s,a,l,c,h,f,m,g,w;let b,k;if("message"in e)b=e.message,k=e.signature;else{const{chain:E,wallet:T,statement:S,options:y}=e;let x;if(yt())if(typeof T=="object")x=T;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")x=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=T}const O=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),A=await x.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=d_(A[0]);let I=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!I){const U=await x.request({method:"eth_chainId"});I=_E(U)}const B={domain:O.host,address:z,statement:S,uri:O.href,version:"1",chainId:I,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(h=y==null?void 0:y.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=y==null?void 0:y.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(m=y==null?void 0:y.signInWithEthereum)===null||m===void 0?void 0:m.resources};b=wE(B),k=await x.request({method:"personal_sign",params:[yE(b),z]})}try{const{data:E,error:T}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:k},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:nn});if(T)throw T;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new ai}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:T})}catch(E){if(ne(E))return{data:{user:null,session:null},error:E};throw E}}async signInWithSolana(e){var n,i,s,a,l,c,h,f,m,g,w,b;let k,E;if("message"in e)k=e.message,E=e.signature;else{const{chain:T,wallet:S,statement:y,options:x}=e;let O;if(yt())if(typeof S=="object")O=S;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))O=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=S}const A=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const z=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),y?{statement:y}:null));let I;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")I=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)I=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)k=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),E=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${A.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(i=x==null?void 0:x.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((h=x==null?void 0:x.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((f=x==null?void 0:x.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((g=(m=x==null?void 0:x.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...x.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const z=await O.signMessage(new TextEncoder().encode(k),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=z}}try{const{data:T,error:S}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Mr(E)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:nn});if(S)throw S;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new ai}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:S})}catch(T){if(ne(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const n=await Cr(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(n??"").split("/");try{const{data:a,error:l}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:nn});if(await Gn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new ai}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(ne(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:i,token:s,access_token:a,nonce:l}=e,c=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:nn}),{data:h,error:f}=c;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new ai}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:f})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,s,a,l;try{if("email"in e){const{email:c,options:h}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await li(this.storage,this.storageKey));const{error:g}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(i=h==null?void 0:h.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:c,options:h}=e,{data:f,error:m}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new ia("You must provide either an email or phone number.")}catch(c){if(ne(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var n,i;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:c}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:nn});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,f=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,i,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await li(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:hE})}catch(a){if(ne(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new tn;const{error:s}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:s,options:a}=e,{error:l}=await he(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:i,type:s,options:a}=e,{data:l,error:c}=await he(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new ia("You must provide either an email or phone number and a type")}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Cr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Eu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await Cr(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Cu()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=aE(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:er}):await this._useSession(async n=>{var i,s,a;const{data:l,error:c}=n;if(c)throw c;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tn}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:er})})}catch(n){if(ne(n))return BS(n)&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:s,error:a}=i;if(a)throw a;if(!s.session)throw new tn;const l=s.session;let c=null,h=null;this.flowType==="pkce"&&e.email!=null&&([c,h]=await li(this.storage,this.storageKey));const{data:f,error:m}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:h}),jwt:l.access_token,xform:er});if(m)throw m;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new tn;const n=Date.now()/1e3;let i=n,s=!0,a=null;const{payload:l}=Pu(e.access_token);if(l.exp&&(i=l.exp,s=i<=n),s){const{data:c,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(ne(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:l,error:c}=n;if(c)throw c;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new tn;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!yt())throw new sa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new sa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ep("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sa("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ep("No code detected.");const{data:y,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:c,expires_at:h,token_type:f}=e;if(!a||!c||!l||!f)throw new sa("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(c);let w=m+g;h&&(w=parseInt(h));const b=w-m;b*1e3<=fi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const k=w-g;m-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,w,m):m-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,w,m);const{data:E,error:T}=await this._getUser(a);if(T)throw T;const S={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:g,expires_at:w,refresh_token:l,token_type:f,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(i){if(ne(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Cr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:s,error:a}=n;if(a)return{error:a};const l=(i=s.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(DS(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=qS(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,s;try{const{data:{session:a},error:l}=n;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await li(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(ne(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:s}=await this._useSession(async a=>{var l,c,h,f,m;const{data:g,error:w}=a;if(w)throw w;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return yt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(ne(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:l,provider:c,token:h,access_token:f,nonce:m}=e,g=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=a==null?void 0:a.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:h,access_token:f,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nn}),{data:w,error:b}=g;return b?{data:{user:null,session:null},error:b}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new ai}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),{data:w,error:b})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,s;const{data:a,error:l}=n;if(l)throw l;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await QS(async s=>(s>0&&await JS(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nn})),(s,a)=>{const l=200*Math.pow(2,s);return a&&ku(a)&&Date.now()+l-i<fi})}catch(i){if(this._debug(n,"error",i),ne(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),yt()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const s=await Cr(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Cr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await pi(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Cu()}else if(s&&!s.user&&!s.user){const l=await Cr(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Gn(this.storage,this.storageKey+"-user"),await pi(this.storage,this.storageKey,s)):s.user=Cu()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Eu;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Eu}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),ku(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(s.access_token);!c&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new tn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new dl;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new tn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={data:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(s,"error",a),ne(a)){const l={data:null,error:a};return ku(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,i=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(h){a.push(h)}});if(await Promise.all(l),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await pi(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Op(s);await pi(this.storage,this.storageKey,a)}else{const s=Op(n);await pi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Gn(this.storage,this.storageKey),await Gn(this.storage,this.storageKey+"-code-verifier"),await Gn(this.storage,this.storageKey+"-user"),this.userStorage&&await Gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((i.expires_at*1e3-e)/fi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${fi}ms, refresh threshold is ${Ac} ticks`),s<=Ac&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof h_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const s=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,l]=await li(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);s.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:s,error:a}=n;return a?{data:null,error:a}:await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,s;const{data:a,error:l}=n;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:f}=await he(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&h.type==="totp"&&(!((s=h==null?void 0:h.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?CE(e.webauthn.credential_response):TE(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:h}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:h})})}catch(n){if(ne(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const l=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:kE(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:PE(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ne(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:i},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Pu(i.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(e=i.user.factors)===null||e===void 0?void 0:e.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;return s?{data:null,error:s}:i?await he(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):{data:null,error:new tn}})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;if(a)return{data:null,error:a};if(!s)return{data:null,error:new tn};const l=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&yt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;if(a)return{data:null,error:a};if(!s)return{data:null,error:new tn};const l=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&yt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(c=>c.kid===e);if(i)return i;const s=Date.now();if(i=this.jwks.keys.find(c=>c.kid===e),i&&this.jwks_cached_at+MS>s)return i;const{data:a,error:l}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,i=a.keys.find(c=>c.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:b,error:k}=await this.getSession();if(k||!b.session)return{data:null,error:k};i=b.session.access_token}const{header:s,payload:a,signature:l,raw:{header:c,payload:h}}=Pu(i);n!=null&&n.allowExpired||iE(a.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:a,header:s,signature:l},error:null}}const m=sE(s.alg),g=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,l,HS(`${c}.${h}`)))throw new Dc("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}}so.nextInstanceID=0;const zE=so;class DE extends zE{constructor(e){super(e)}}class BE{constructor(e,n,i){var s,a,l;this.supabaseUrl=e,this.supabaseKey=n;const c=jS(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:SS,realtime:kS,auth:Object.assign(Object.assign({},ES),{storageKey:h}),global:bS},m=LS(i??{},f);this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=m.global.headers)!==null&&a!==void 0?a:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,m.global.fetch),this.fetch=TS(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new Nb(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new yS(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Eb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:s,userStorage:a,storageKey:l,flowType:c,lock:h,debug:f},m,g){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new DE({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),m),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:s,userStorage:a,flowType:c,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Gb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const UE=(t,e,n)=>new BE(t,e,n);function $E(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}$E()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const p_="https://fbbufxevwvqnrervhshd.supabase.co",FE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZiYnVmeGV2d3ZxbnJlcnZoc2hkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMDI4MzksImV4cCI6MjA3NzY3ODgzOX0.ZmxvgXQWlWnMyq1sQU6oJps3ty0AiwEj1o_0FlMLVh0";console.log("[Supabase Client] Initializing...");console.log("[Supabase Client] URL present:",!0);console.log("[Supabase Client] Anon Key present:",!0);console.log("[Supabase Client]  Environment variables loaded");console.log("[Supabase Client] URL:",p_.substring(0,30)+"...");const Se=UE(p_,FE);(async()=>{try{const{error:t}=await Se.from("profiles").select("count",{count:"exact",head:!0});t?(console.error("[Supabase Client]  Connection test failed:",t),console.error("[Supabase Client] Error details:",{message:t.message,code:t.code,details:t.details,hint:t.hint})):console.log("[Supabase Client]  Connection successful! Database is reachable.")}catch(t){console.error("[Supabase Client]  Connection test exception:",t)}})();function m_(){const[t,e]=P.useState([]),[n,i]=P.useState(!0),[s,a]=P.useState(null);P.useEffect(()=>{l()},[]);const l=async()=>{try{console.log("[useGroups]  Fetching groups..."),i(!0);const{data:c,error:h}=await Se.from("groups").select("*").order("name",{ascending:!0});if(h)throw console.error("[useGroups]  Error fetching groups:",h),console.error("[useGroups] Error details:",{message:h.message,code:h.code,details:h.details,hint:h.hint}),h;console.log("[useGroups]  Successfully fetched groups:",(c==null?void 0:c.length)||0,"groups"),e(c||[]),a(null)}catch(c){console.error("[useGroups]  Exception fetching groups:",c),a(c)}finally{i(!1)}};return{groups:t,loading:n,error:s,refetch:l}}const g_=P.createContext(void 0),_s="usk-social-selected-group";function WE({children:t}){const{groups:e,loading:n}=m_(),[i,s]=P.useState(null),[a,l]=P.useState(!0);P.useEffect(()=>{if(n)return;const h=localStorage.getItem(_s);if(h&&e.length>0){const m=e.find(g=>g.id===h);if(m){s(m),l(!1);return}}const f=e.find(m=>m.name.toLowerCase().includes("medelln")||m.name.toLowerCase().includes("medellin"));f?(s(f),localStorage.setItem(_s,f.id),l(!1)):(e.length>0&&(s(e[0]),localStorage.setItem(_s,e[0].id)),l(!1))},[e,n]);const c=h=>{s(h),h?localStorage.setItem(_s,h.id):localStorage.removeItem(_s)};return v.jsx(g_.Provider,{value:{selectedGroup:i,setSelectedGroup:c,loading:a},children:t})}function fl(){const t=P.useContext(g_);if(t===void 0)throw new Error("useSelectedGroup must be used within a SelectedGroupProvider");return t}function pl(){const[t,e]=P.useState(null),[n,i]=P.useState(!0);return P.useEffect(()=>{console.log("[useAuth] Getting initial session..."),Se.auth.getSession().then(({data:{session:h},error:f})=>{var m;f?(console.error("[useAuth]  Error getting session:",f),console.error("[useAuth] Error details:",{message:f.message,status:f.status})):console.log("[useAuth]  Session retrieved:",h?`User: ${(m=h.user)==null?void 0:m.email}`:"No session"),e((h==null?void 0:h.user)??null),i(!1)}),console.log("[useAuth] Setting up auth state listener...");const{data:{subscription:c}}=Se.auth.onAuthStateChange((h,f)=>{var m;console.log("[useAuth] Auth state changed:",h,f?`User: ${(m=f.user)==null?void 0:m.email}`:"No session"),e((f==null?void 0:f.user)??null),i(!1)});return()=>{console.log("[useAuth] Cleaning up auth state listener"),c.unsubscribe()}},[]),{user:t,loading:n,signUp:async(c,h,f)=>{console.log("[useAuth]  Signing up user:",c,f?`with username: ${f}`:"");const{data:m,error:g}=await Se.auth.signUp({email:c,password:h,options:{emailRedirectTo:void 0,data:f?{username:f}:void 0}});return g?(console.error("[useAuth]  Sign up failed:",g),console.error("[useAuth] Error details:",{message:g.message,status:g.status})):console.log("[useAuth]  Sign up successful:",m.user?`User ID: ${m.user.id}`:"No user data"),{data:m,error:g}},signIn:async(c,h)=>{console.log("[useAuth]  Signing in user with email:",c);const{data:f,error:m}=await Se.auth.signInWithPassword({email:c.trim(),password:h});return m?(console.error("[useAuth]  Sign in failed:",m),console.error("[useAuth] Error details:",{message:m.message,status:m.status})):console.log("[useAuth]  Sign in successful:",f.user?`User ID: ${f.user.id}`:"No user data"),{data:f,error:m}},signOut:async()=>{console.log("[useAuth]  Signing out user");const{error:c}=await Se.auth.signOut();return c?(console.error("[useAuth]  Sign out failed:",c),console.error("[useAuth] Error details:",{message:c.message,status:c.status})):(console.log("[useAuth]  Sign out successful"),localStorage.removeItem("usk_username"),console.log("[useAuth]  Cleared localStorage username")),{error:c}}}}const ys="usk_username";function ZE(){const{user:t}=pl(),[e,n]=P.useState(null),[i,s]=P.useState(!0);return P.useEffect(()=>{if(!t){n(null),s(!1),localStorage.removeItem(ys);return}(async()=>{console.log("[useProfile]  Fetching profile for user:",t.id),s(!0);try{const{error:c}=await Se.from("profiles").select("id, username").limit(1);if(c){console.error("[useProfile]  Cannot query profiles table:",c),console.error("[useProfile] This might be an RLS (Row Level Security) issue"),console.error("[useProfile] Error code:",c.code),console.error("[useProfile] Error message:",c.message),n(null),s(!1);return}const{data:h,error:f}=await Se.from("profiles").select("*").eq("id",t.id).maybeSingle();if(f)if(f.code==="PGRST116"){if(console.log("[useProfile]  No profile found for user ID:",t.id),t.email){const{data:m}=await Se.from("profiles").select("id, username, email").eq("email",t.email).maybeSingle();m&&(console.log("[useProfile]  Found profile with matching email but different ID:",m),console.log("[useProfile] Profile ID in DB:",m.id),console.log("[useProfile] User ID from auth:",t.id))}n(null)}else console.error("[useProfile]  Error fetching profile:",f),console.error("[useProfile] Error details:",{message:f.message,code:f.code,details:f.details,hint:f.hint}),n(null);else h?(console.log("[useProfile]  Profile found:",{id:h.id,username:h.username,email:h.email}),n(h),h.username&&(localStorage.setItem(ys,h.username),console.log("[useProfile]  Synced localStorage with username:",h.username))):(console.log("[useProfile]  No profile data returned (null)"),n(null),localStorage.removeItem(ys))}catch(c){console.error("[useProfile]  Exception fetching profile:",c),n(null)}finally{s(!1)}})();const l=Se.channel(`profile:${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:`id=eq.${t.id}`},c=>{if(console.log("[useProfile]  Profile changed:",c),c.eventType==="UPDATE"||c.eventType==="INSERT"){const h=c.new;n(h),h.username&&(localStorage.setItem(ys,h.username),console.log("[useProfile]  Synced localStorage with updated username:",h.username))}else c.eventType==="DELETE"&&(n(null),localStorage.removeItem(ys))}).subscribe();return()=>{Se.removeChannel(l)}},[t]),{profile:e,username:(e==null?void 0:e.username)||null,loading:i}}function HE(){const{user:t,signOut:e}=pl(),{profile:n,username:i}=ZE(),{selectedGroup:s,setSelectedGroup:a}=fl(),{groups:l}=m_(),c=Vi(),h=fo(),[f,m]=P.useState(!1),[g,w]=P.useState(!1),b=P.useRef(null),k=P.useRef(null),E=h.pathname==="/info"||h.pathname.startsWith("/profile/"),T=async()=>{const{error:y}=await e();m(!1),y||c("/",{replace:!0})};P.useEffect(()=>{const y=x=>{b.current&&!b.current.contains(x.target)&&m(!1),k.current&&!k.current.contains(x.target)&&w(!1)};return(f||g)&&document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[f,g]);const S=()=>n!=null&&n.full_name?n.full_name.charAt(0).toUpperCase():i?i.charAt(0).toUpperCase():"U";return v.jsx("nav",{className:"sticky top-0 z-50 bg-gray-100 shadow-sm border-b border-gray-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex justify-between items-center h-16",children:[v.jsxs(Rn,{to:"/",className:"flex items-center space-x-2",children:[v.jsx("img",{src:"/logo2.png",alt:"USK Social Logo",className:"h-10 w-10 object-contain"}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("span",{className:"text-2xl font-bold text-gray-800",children:"USK Social"}),s&&!E&&v.jsxs("div",{className:"relative flex items-center",ref:k,children:[v.jsx("div",{className:"h-6 w-px bg-gray-400 mx-2"}),v.jsxs("button",{onClick:y=>{y.preventDefault(),w(!g)},className:"flex items-center space-x-1 px-2 py-1 rounded-md hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400",children:[v.jsx("span",{className:"text-lg font-semibold text-gray-700",children:s.city||s.name}),v.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${g?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&v.jsx("div",{className:"absolute left-0 mt-2 w-56 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200 max-h-96 overflow-y-auto",children:l.map(y=>v.jsxs("button",{onClick:()=>{a(y),w(!1),window.location.reload()},className:`block w-full text-left px-4 py-2 text-sm transition-colors ${(s==null?void 0:s.id)===y.id?"bg-gray-100 text-gray-900 font-semibold":"text-gray-700 hover:bg-gray-100"}`,children:[v.jsx("div",{className:"font-medium",children:y.name}),y.city&&v.jsxs("div",{className:"text-xs text-gray-500",children:[y.city,y.country?`, ${y.country}`:""]})]},y.id))})]})]})]}),v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx(Rn,{to:"/",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Inicio"}),v.jsx(Rn,{to:"/map",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:" Mapa"}),v.jsx(Rn,{to:"/info",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Info"}),t?n&&i?v.jsxs("div",{className:"relative",ref:b,children:[v.jsxs("button",{onClick:()=>m(!f),className:"flex items-center space-x-2 px-3 py-2 rounded-md hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-400 flex items-center justify-center text-white font-semibold text-sm overflow-hidden",children:n.avatar_url?v.jsx("img",{src:n.avatar_url,alt:i,className:"w-full h-full object-cover"}):v.jsx("span",{children:S()})}),v.jsx("span",{className:"text-gray-700 text-sm font-medium",children:i}),v.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&v.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[v.jsx(Rn,{to:`/profile/${n.username}`,onClick:()=>m(!1),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Perfil"}),v.jsx("button",{onClick:T,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:"Cerrar Sesin"})]})]}):v.jsx("span",{className:"text-gray-500 text-sm",children:"Loading..."}):v.jsx(Rn,{to:"/auth",className:"text-blue-600 hover:text-blue-700 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Iniciar Sesin"})]})]})})})}function v_(){const{selectedGroup:t}=fl(),[e,n]=P.useState([]),[i,s]=P.useState(!0),[a,l]=P.useState(null),c=P.useCallback(async()=>{if(t)try{console.log("[useEvents]  Fetching events for group:",t.id),s(!0);let h=Se.from("events").select("*").eq("group_id",t.id).order("event_date",{ascending:!1});const{data:f,error:m}=await h;if(m)throw console.error("[useEvents]  Error fetching events:",m),console.error("[useEvents] Error details:",{message:m.message,code:m.code,details:m.details,hint:m.hint}),m;console.log("[useEvents]  Successfully fetched events:",(f==null?void 0:f.length)||0,"events"),n(f||[]),l(null)}catch(h){console.error("[useEvents]  Exception fetching events:",h),l(h)}finally{s(!1)}},[t]);return P.useEffect(()=>{t?c():(n([]),s(!1))},[t,c]),{events:e,loading:i,error:a,refetch:c}}function ml(t){const{selectedGroup:e}=fl(),[n,i]=P.useState([]),[s,a]=P.useState(!0),[l,c]=P.useState(null),h=P.useCallback(async()=>{if(t){try{console.log("[useSketches]  Fetching sketches for user:",t),a(!0);const{data:f,error:m}=await Se.from("sketches").select(`
            *,
            profiles:user_id (username, avatar_url),
            events:event_id (title, location_name, group_id)
          `).eq("user_id",t).order("uploaded_at",{ascending:!1});if(m)throw console.error("[useSketches]  Error fetching sketches:",m),m;console.log("[useSketches]  Successfully fetched sketches:",(f==null?void 0:f.length)||0,"sketches"),i(f||[]),c(null)}catch(f){console.error("[useSketches]  Exception fetching sketches:",f),c(f)}finally{a(!1)}return}if(!e){i([]),a(!1);return}try{console.log("[useSketches]  Fetching sketches for group:",e.id),a(!0);const{data:f,error:m}=await Se.from("sketches").select(`
          *,
          profiles:user_id (username, avatar_url),
          events:event_id (title, location_name, group_id)
        `).order("uploaded_at",{ascending:!1});if(m)throw console.error("[useSketches]  Error fetching sketches:",m),m;const g=(f||[]).filter(w=>{if(!w.event_id)return!0;const b=w.events;return(b==null?void 0:b.group_id)===e.id});console.log("[useSketches]  Successfully fetched sketches:",g.length,"sketches"),i(g),c(null)}catch(f){console.error("[useSketches]  Exception fetching sketches:",f),c(f)}finally{a(!1)}},[t,e]);return P.useEffect(()=>{h()},[h]),{sketches:n,loading:s,error:l,refetch:h}}const Ou="usk_username";function gl(){const[t,e]=P.useState(""),[n,i]=P.useState(null),[s,a]=P.useState(!0);P.useEffect(()=>{const h=localStorage.getItem(Ou);h?(e(h),l(h)):a(!1)},[]);const l=async h=>{if(!h.trim()){i(null),a(!1);return}console.log("[useUsername]  Looking up profile for username:",h),a(!0);try{const{data:f,error:m}=await Se.from("profiles").select("*").eq("username",h.trim().toLowerCase()).single();if(m&&m.code!=="PGRST116"){console.error("[useUsername]  Error fetching profile:",m),i(null),a(!1);return}if(f){console.log("[useUsername]  Found existing profile:",f.id),i(f),a(!1);return}console.log("[useUsername]  Creating new profile for username:",h);const g=crypto.randomUUID(),{data:w,error:b}=await Se.from("profiles").insert({id:g,username:h.trim().toLowerCase(),full_name:null,bio:null,city:null,country:null,avatar_url:null}).select().single();b?(console.error("[useUsername]  Error creating profile:",b),console.error("[useUsername] Error details:",{message:b.message,code:b.code,details:b.details,hint:b.hint}),i(null)):w?(console.log("[useUsername]  Profile created:",w.id),i(w)):i(null)}catch(f){console.error("[useUsername]  Exception in fetchOrCreateProfile:",f),i(null)}finally{a(!1)}};return{username:t,profile:n,loading:s,setUsername:h=>{const f=h.trim();e(f),f?(localStorage.setItem(Ou,f),l(f)):(localStorage.removeItem(Ou),i(null))}}}function VE({onSuccess:t,onCancel:e,initialEventId:n}){const{profile:i}=gl(),{events:s}=v_(),[a,l]=P.useState(""),[c,h]=P.useState(""),[f,m]=P.useState(null),[g,w]=P.useState(null),[b,k]=P.useState(""),[E,T]=P.useState(""),[S,y]=P.useState(""),[x,O]=P.useState(n||""),[A,z]=P.useState(new Date().toISOString().split("T")[0]),[I,B]=P.useState(null),[U,G]=P.useState(!1),[oe,K]=P.useState(!1),Ce=P.useRef(null),Te=P.useRef(null);P.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(H=>{k(H.coords.latitude.toString()),T(H.coords.longitude.toString())},()=>{})},[]),P.useEffect(()=>{O(n||"")},[n]),P.useEffect(()=>{if(x){const H=s.find(ae=>ae.id===x);H&&(H.event_date&&z(H.event_date.split("T")[0]),k(H.latitude.toString()),T(H.longitude.toString()),y(H.location_name||""))}else z(new Date().toISOString().split("T")[0]),navigator.geolocation?navigator.geolocation.getCurrentPosition(H=>{k(H.coords.latitude.toString()),T(H.coords.longitude.toString())},()=>{k(""),T("")}):(k(""),T("")),y("")},[x,s]);const Ye=H=>{if(H.size>10*1024*1024){B("Image size must be less than 10MB");return}if(!H.type.match(/^image\/(jpeg|jpg|png|webp)$/)){B("Image must be JPEG, PNG, or WebP format");return}m(H),B(null);const ae=new FileReader;ae.onloadend=()=>{w(ae.result)},ae.readAsDataURL(H)},ye=H=>{var le;const ae=(le=H.target.files)==null?void 0:le[0];ae&&Ye(ae)},We=H=>{H.preventDefault(),H.stopPropagation(),K(!0)},M=H=>{H.preventDefault(),H.stopPropagation(),K(!1)},re=H=>{var le;H.preventDefault(),H.stopPropagation(),K(!1);const ae=(le=H.dataTransfer.files)==null?void 0:le[0];ae&&Ye(ae)},F=()=>{var H;(H=Ce.current)==null||H.click()},ie=(H,ae)=>{const le=parseFloat(H),ee=parseFloat(ae);return!isNaN(le)&&!isNaN(ee)&&le>=-90&&le<=90&&ee>=-180&&ee<=180},fe=async H=>{var ae;if(H.preventDefault(),B(null),!i){B("Please set a username first (use the username box in the top-right corner)");return}if(!f){B("Please select an image");return}if(!b||!E||!ie(b,E)){B("Please provide valid coordinates (latitude: -90 to 90, longitude: -180 to 180)");return}G(!0);try{console.log("[SketchUpload]  Starting sketch upload..."),console.log("[SketchUpload] Profile ID:",i.id),console.log("[SketchUpload] Title:",a),console.log("[SketchUpload] Image file:",f.name,`(${(f.size/1024).toFixed(2)} KB)`),console.log("[SketchUpload] Coordinates:",b,E),console.log("[SketchUpload] Event ID:",x||"none");const le=f.name.split(".").pop(),ee=`${Date.now()}-${Math.random()}.${le}`,Ie=`${i.id}/${ee}`;console.log("[SketchUpload]  Uploading image to storage..."),console.log("[SketchUpload] File path:",Ie);const{error:ot}=await Se.storage.from("sketches").upload(Ie,f);if(ot)throw console.error("[SketchUpload]  Storage upload failed:",ot),console.error("[SketchUpload] Error details:",{message:ot.message}),ot;console.log("[SketchUpload]  Image uploaded successfully"),console.log("[SketchUpload]  Getting public URL...");const{data:{publicUrl:Sn}}=Se.storage.from("sketches").getPublicUrl(Ie);console.log("[SketchUpload] Public URL:",Sn);const En=Sn,dn={user_id:i.id,title:a,description:c||null,image_url:Sn,thumbnail_url:En,latitude:parseFloat(b),longitude:parseFloat(E),location_name:S||null,event_id:x||null,sketch_date:A};console.log("[SketchUpload]  Inserting sketch record..."),console.log("[SketchUpload] Sketch data:",{...dn,image_url:"..."});const{data:Ut,error:R}=await Se.from("sketches").insert(dn).select();if(R)throw console.error("[SketchUpload]  Database insert failed:",R),console.error("[SketchUpload] Error details:",{message:R.message,code:R.code,details:R.details,hint:R.hint}),R.code==="23503"||R.message.includes("foreign key constraint")?new Error("Your profile is not set up correctly. Please complete your profile setup and try again."):R;console.log("[SketchUpload]  Sketch uploaded successfully!"),console.log("[SketchUpload] Inserted sketch ID:",(ae=Ut==null?void 0:Ut[0])==null?void 0:ae.id),t==null||t()}catch(le){console.error("[SketchUpload]  Upload failed with exception:",le);const ee=le.message||"Failed to upload sketch";console.error("[SketchUpload] Error message:",ee),B(ee)}finally{G(!1)}};return v.jsxs("div",{className:"w-full",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Subir Sketch"}),v.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[I&&v.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:I}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Ttulo ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{id:"title",type:"text",value:a,onChange:H=>l(H.target.value),required:!0,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Mi dibujito a rapidgrafo"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),v.jsx("textarea",{id:"description",value:c,onChange:H=>h(H.target.value),rows:3,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Mientras dibujaba se arrim un gamn..."})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-2",children:["Imagen ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{ref:Ce,id:"image",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:ye,required:!0,className:"hidden"}),g?v.jsxs("div",{className:"relative group",children:[v.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-gray-300 shadow-lg",children:[v.jsx("img",{src:g,alt:"Preview",className:"w-full h-auto max-h-96 object-contain bg-gray-100"}),v.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 flex items-center justify-center",children:v.jsx("button",{type:"button",onClick:F,className:"opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 bg-white text-gray-800 px-6 py-3 rounded-lg font-semibold shadow-lg hover:bg-gray-100",children:"Cambiar Imagen"})})]}),f&&v.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm text-gray-600 bg-gray-50 px-3 py-2 rounded",children:[v.jsxs("span",{className:"flex items-center",children:[v.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f.name]}),v.jsxs("span",{className:"text-gray-500",children:[(f.size/1024).toFixed(2)," KB"]})]})]}):v.jsxs("div",{ref:Te,onDragOver:We,onDragLeave:M,onDrop:re,onClick:F,className:`
                relative border-2 border-dashed rounded-lg p-8 text-center cursor-pointer
                transition-all duration-300 ease-in-out
                ${oe?"border-blue-500 bg-blue-50 scale-105 shadow-lg":"border-gray-300 bg-gray-50 hover:border-gray-400 hover:bg-gray-100 hover:shadow-md"}
              `,children:[v.jsx("div",{className:"absolute inset-0 rounded-lg opacity-0 hover:opacity-100 transition-opacity duration-300 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"mx-auto w-16 h-16 mb-4 flex items-center justify-center",children:v.jsx("svg",{className:`w-full h-full transition-transform duration-300 ${oe?"scale-110":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),v.jsx("p",{className:"text-gray-700 font-medium text-lg mb-1",children:oe?"Suelta la imagen aqu":"Arrastra una imagen o haz clic para seleccionar"}),v.jsx("p",{className:"text-gray-500 text-sm",children:"PNG, JPG, WEBP hasta 10MB"}),v.jsxs("div",{className:"flex justify-center mt-4 space-x-2",children:[v.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse",style:{animationDelay:"0s"}}),v.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),v.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"event",className:"block text-sm font-medium text-gray-700 mb-1",children:"Asociar a Evento (Opcional)"}),v.jsxs("select",{id:"event",value:x,onChange:H=>O(H.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",children:[v.jsx("option",{value:""}),s.map(H=>v.jsx("option",{value:H.id,children:H.title},H.id))]})]}),v.jsxs("div",{className:"flex space-x-4",children:[e&&v.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Cancelar"}),v.jsx("button",{type:"submit",disabled:U,className:"flex-1 bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:U?"Subiendo...":"Subir Sketch"})]})]})]})}function qE(t,e){const n=P.useRef(e);P.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const KE=1;function GE(t){return Object.freeze({__version:KE,map:t})}function JE(t,e){return Object.freeze({...t,...e})}const __=P.createContext(null),y_=__.Provider;function w_(){const t=P.useContext(__);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function QE(t){function e(n,i){const{instance:s,context:a}=t(n).current;return P.useImperativeHandle(i,()=>s),n.children==null?null:zs.createElement(y_,{value:a},n.children)}return P.forwardRef(e)}function YE(t){function e(n,i){const{instance:s}=t(n).current;return P.useImperativeHandle(i,()=>s),null}return P.forwardRef(e)}function XE(t,e){const n=P.useRef();P.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function x_(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Bc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Uy,function(n){var i="1.9.4";function s(r){var o,u,d,p;for(u=1,d=arguments.length;u<d;u++){p=arguments[u];for(o in p)r[o]=p[o]}return r}var a=Object.create||function(){function r(){}return function(o){return r.prototype=o,new r}}();function l(r,o){var u=Array.prototype.slice;if(r.bind)return r.bind.apply(r,u.call(arguments,1));var d=u.call(arguments,2);return function(){return r.apply(o,d.length?d.concat(u.call(arguments)):arguments)}}var c=0;function h(r){return"_leaflet_id"in r||(r._leaflet_id=++c),r._leaflet_id}function f(r,o,u){var d,p,_,C;return C=function(){d=!1,p&&(_.apply(u,p),p=!1)},_=function(){d?p=arguments:(r.apply(u,arguments),setTimeout(C,o),d=!0)},_}function m(r,o,u){var d=o[1],p=o[0],_=d-p;return r===d&&u?r:((r-p)%_+_)%_+p}function g(){return!1}function w(r,o){if(o===!1)return r;var u=Math.pow(10,o===void 0?6:o);return Math.round(r*u)/u}function b(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function k(r){return b(r).split(/\s+/)}function E(r,o){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var u in o)r.options[u]=o[u];return r.options}function T(r,o,u){var d=[];for(var p in r)d.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(r[p]));return(!o||o.indexOf("?")===-1?"?":"&")+d.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function y(r,o){return r.replace(S,function(u,d){var p=o[d];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(o)),p})}var x=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function O(r,o){for(var u=0;u<r.length;u++)if(r[u]===o)return u;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var I=0;function B(r){var o=+new Date,u=Math.max(0,16-(o-I));return I=o+u,window.setTimeout(r,u)}var U=window.requestAnimationFrame||z("RequestAnimationFrame")||B,G=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function oe(r,o,u){if(u&&U===B)r.call(o);else return U.call(window,l(r,o))}function K(r){r&&G.call(window,r)}var Ce={__proto__:null,extend:s,create:a,bind:l,get lastId(){return c},stamp:h,throttle:f,wrapNum:m,falseFn:g,formatNum:w,trim:b,splitWords:k,setOptions:E,getParamString:T,template:y,isArray:x,indexOf:O,emptyImageUrl:A,requestFn:U,cancelFn:G,requestAnimFrame:oe,cancelAnimFrame:K};function Te(){}Te.extend=function(r){var o=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,d=a(u);d.constructor=o,o.prototype=d;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(o[p]=this[p]);return r.statics&&s(o,r.statics),r.includes&&(Ye(r.includes),s.apply(null,[d].concat(r.includes))),s(d,r),delete d.statics,delete d.includes,d.options&&(d.options=u.options?a(u.options):{},s(d.options,r.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var _=0,C=d._initHooks.length;_<C;_++)d._initHooks[_].call(this)}},o},Te.include=function(r){var o=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=o,this.mergeOptions(r.options)),this},Te.mergeOptions=function(r){return s(this.prototype.options,r),this},Te.addInitHook=function(r){var o=Array.prototype.slice.call(arguments,1),u=typeof r=="function"?r:function(){this[r].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Ye(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=x(r)?r:[r];for(var o=0;o<r.length;o++)r[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ye={on:function(r,o,u){if(typeof r=="object")for(var d in r)this._on(d,r[d],o);else{r=k(r);for(var p=0,_=r.length;p<_;p++)this._on(r[p],o,u)}return this},off:function(r,o,u){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var d in r)this._off(d,r[d],o);else{r=k(r);for(var p=arguments.length===1,_=0,C=r.length;_<C;_++)p?this._off(r[_]):this._off(r[_],o,u)}return this},_on:function(r,o,u,d){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(r,o,u)===!1){u===this&&(u=void 0);var p={fn:o,ctx:u};d&&(p.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(p)}},_off:function(r,o,u){var d,p,_;if(this._events&&(d=this._events[r],!!d)){if(arguments.length===1){if(this._firingCount)for(p=0,_=d.length;p<_;p++)d[p].fn=g;delete this._events[r];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var C=this._listens(r,o,u);if(C!==!1){var j=d[C];this._firingCount&&(j.fn=g,this._events[r]=d=d.slice()),d.splice(C,1)}}},fire:function(r,o,u){if(!this.listens(r,u))return this;var d=s({},o,{type:r,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var p=this._events[r];if(p){this._firingCount=this._firingCount+1||1;for(var _=0,C=p.length;_<C;_++){var j=p[_],N=j.fn;j.once&&this.off(r,N,j.ctx),N.call(j.ctx||this,d)}this._firingCount--}}return u&&this._propagateEvent(d),this},listens:function(r,o,u,d){typeof r!="string"&&console.warn('"string" type argument expected');var p=o;typeof o!="function"&&(d=!!o,p=void 0,u=void 0);var _=this._events&&this._events[r];if(_&&_.length&&this._listens(r,p,u)!==!1)return!0;if(d){for(var C in this._eventParents)if(this._eventParents[C].listens(r,o,u,d))return!0}return!1},_listens:function(r,o,u){if(!this._events)return!1;var d=this._events[r]||[];if(!o)return!!d.length;u===this&&(u=void 0);for(var p=0,_=d.length;p<_;p++)if(d[p].fn===o&&d[p].ctx===u)return p;return!1},once:function(r,o,u){if(typeof r=="object")for(var d in r)this._on(d,r[d],o,!0);else{r=k(r);for(var p=0,_=r.length;p<_;p++)this._on(r[p],o,u,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[h(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[h(r)],this},_propagateEvent:function(r){for(var o in this._eventParents)this._eventParents[o].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};ye.addEventListener=ye.on,ye.removeEventListener=ye.clearAllEventListeners=ye.off,ye.addOneTimeEventListener=ye.once,ye.fireEvent=ye.fire,ye.hasEventListeners=ye.listens;var We=Te.extend(ye);function M(r,o,u){this.x=u?Math.round(r):r,this.y=u?Math.round(o):o}var re=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};M.prototype={clone:function(){return new M(this.x,this.y)},add:function(r){return this.clone()._add(F(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(F(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new M(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new M(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(r){r=F(r);var o=r.x-this.x,u=r.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(r){return r=F(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=F(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function F(r,o,u){return r instanceof M?r:x(r)?new M(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new M(r.x,r.y):new M(r,o,u)}function ie(r,o){if(r)for(var u=o?[r,o]:r,d=0,p=u.length;d<p;d++)this.extend(u[d])}ie.prototype={extend:function(r){var o,u;if(!r)return this;if(r instanceof M||typeof r[0]=="number"||"x"in r)o=u=F(r);else if(r=fe(r),o=r.min,u=r.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(r){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var o,u;return typeof r[0]=="number"||r instanceof M?r=F(r):r=fe(r),r instanceof ie?(o=r.min,u=r.max):o=u=r,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(r){r=fe(r);var o=this.min,u=this.max,d=r.min,p=r.max,_=p.x>=o.x&&d.x<=u.x,C=p.y>=o.y&&d.y<=u.y;return _&&C},overlaps:function(r){r=fe(r);var o=this.min,u=this.max,d=r.min,p=r.max,_=p.x>o.x&&d.x<u.x,C=p.y>o.y&&d.y<u.y;return _&&C},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var o=this.min,u=this.max,d=Math.abs(o.x-u.x)*r,p=Math.abs(o.y-u.y)*r;return fe(F(o.x-d,o.y-p),F(u.x+d,u.y+p))},equals:function(r){return r?(r=fe(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function fe(r,o){return!r||r instanceof ie?r:new ie(r,o)}function H(r,o){if(r)for(var u=o?[r,o]:r,d=0,p=u.length;d<p;d++)this.extend(u[d])}H.prototype={extend:function(r){var o=this._southWest,u=this._northEast,d,p;if(r instanceof le)d=r,p=r;else if(r instanceof H){if(d=r._southWest,p=r._northEast,!d||!p)return this}else return r?this.extend(ee(r)||ae(r)):this;return!o&&!u?(this._southWest=new le(d.lat,d.lng),this._northEast=new le(p.lat,p.lng)):(o.lat=Math.min(d.lat,o.lat),o.lng=Math.min(d.lng,o.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(r){var o=this._southWest,u=this._northEast,d=Math.abs(o.lat-u.lat)*r,p=Math.abs(o.lng-u.lng)*r;return new H(new le(o.lat-d,o.lng-p),new le(u.lat+d,u.lng+p))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof le||"lat"in r?r=ee(r):r=ae(r);var o=this._southWest,u=this._northEast,d,p;return r instanceof H?(d=r.getSouthWest(),p=r.getNorthEast()):d=p=r,d.lat>=o.lat&&p.lat<=u.lat&&d.lng>=o.lng&&p.lng<=u.lng},intersects:function(r){r=ae(r);var o=this._southWest,u=this._northEast,d=r.getSouthWest(),p=r.getNorthEast(),_=p.lat>=o.lat&&d.lat<=u.lat,C=p.lng>=o.lng&&d.lng<=u.lng;return _&&C},overlaps:function(r){r=ae(r);var o=this._southWest,u=this._northEast,d=r.getSouthWest(),p=r.getNorthEast(),_=p.lat>o.lat&&d.lat<u.lat,C=p.lng>o.lng&&d.lng<u.lng;return _&&C},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,o){return r?(r=ae(r),this._southWest.equals(r.getSouthWest(),o)&&this._northEast.equals(r.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ae(r,o){return r instanceof H?r:new H(r,o)}function le(r,o,u){if(isNaN(r)||isNaN(o))throw new Error("Invalid LatLng object: ("+r+", "+o+")");this.lat=+r,this.lng=+o,u!==void 0&&(this.alt=+u)}le.prototype={equals:function(r,o){if(!r)return!1;r=ee(r);var u=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return u<=(o===void 0?1e-9:o)},toString:function(r){return"LatLng("+w(this.lat,r)+", "+w(this.lng,r)+")"},distanceTo:function(r){return ot.distance(this,ee(r))},wrap:function(){return ot.wrapLatLng(this)},toBounds:function(r){var o=180*r/40075017,u=o/Math.cos(Math.PI/180*this.lat);return ae([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function ee(r,o,u){return r instanceof le?r:x(r)&&typeof r[0]!="object"?r.length===3?new le(r[0],r[1],r[2]):r.length===2?new le(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new le(r.lat,"lng"in r?r.lng:r.lon,r.alt):o===void 0?null:new le(r,o,u)}var Ie={latLngToPoint:function(r,o){var u=this.projection.project(r),d=this.scale(o);return this.transformation._transform(u,d)},pointToLatLng:function(r,o){var u=this.scale(o),d=this.transformation.untransform(r,u);return this.projection.unproject(d)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(r),d=this.transformation.transform(o.min,u),p=this.transformation.transform(o.max,u);return new ie(d,p)},infinite:!1,wrapLatLng:function(r){var o=this.wrapLng?m(r.lng,this.wrapLng,!0):r.lng,u=this.wrapLat?m(r.lat,this.wrapLat,!0):r.lat,d=r.alt;return new le(u,o,d)},wrapLatLngBounds:function(r){var o=r.getCenter(),u=this.wrapLatLng(o),d=o.lat-u.lat,p=o.lng-u.lng;if(d===0&&p===0)return r;var _=r.getSouthWest(),C=r.getNorthEast(),j=new le(_.lat-d,_.lng-p),N=new le(C.lat-d,C.lng-p);return new H(j,N)}},ot=s({},Ie,{wrapLng:[-180,180],R:6371e3,distance:function(r,o){var u=Math.PI/180,d=r.lat*u,p=o.lat*u,_=Math.sin((o.lat-r.lat)*u/2),C=Math.sin((o.lng-r.lng)*u/2),j=_*_+Math.cos(d)*Math.cos(p)*C*C,N=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*N}}),Sn=6378137,En={R:Sn,MAX_LATITUDE:85.0511287798,project:function(r){var o=Math.PI/180,u=this.MAX_LATITUDE,d=Math.max(Math.min(u,r.lat),-u),p=Math.sin(d*o);return new M(this.R*r.lng*o,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(r){var o=180/Math.PI;return new le((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*o,r.x*o/this.R)},bounds:function(){var r=Sn*Math.PI;return new ie([-r,-r],[r,r])}()};function dn(r,o,u,d){if(x(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=o,this._c=u,this._d=d}dn.prototype={transform:function(r,o){return this._transform(r.clone(),o)},_transform:function(r,o){return o=o||1,r.x=o*(this._a*r.x+this._b),r.y=o*(this._c*r.y+this._d),r},untransform:function(r,o){return o=o||1,new M((r.x/o-this._b)/this._a,(r.y/o-this._d)/this._c)}};function Ut(r,o,u,d){return new dn(r,o,u,d)}var R=s({},ot,{code:"EPSG:3857",projection:En,transformation:function(){var r=.5/(Math.PI*En.R);return Ut(r,.5,-r,.5)}()}),W=s({},R,{code:"EPSG:900913"});function Z(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function J(r,o){var u="",d,p,_,C,j,N;for(d=0,_=r.length;d<_;d++){for(j=r[d],p=0,C=j.length;p<C;p++)N=j[p],u+=(p?"L":"M")+N.x+" "+N.y;u+=o?te.svg?"z":"x":""}return u||"M0 0"}var ue=document.documentElement.style,Y="ActiveXObject"in window,ge=Y&&!document.addEventListener,X="msLaunchUri"in navigator&&!("documentMode"in document),se=pn("webkit"),ke=pn("android"),ve=pn("android 2")||pn("android 3"),Oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ee=ke&&pn("Google")&&Oe<537&&!("AudioNode"in window),nt=!!window.opera,jt=!X&&pn("chrome"),ze=pn("gecko")&&!se&&!nt&&!Y,mt=!jt&&pn("safari"),Gr=pn("phantom"),$t="OTransition"in ue,fn=navigator.platform.indexOf("Win")===0,kn=Y&&"transition"in ue,Qt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ve,Pn="MozPerspective"in ue,gt=!window.L_DISABLE_3D&&(kn||Qt||Pn)&&!$t&&!Gr,vt=typeof orientation<"u"||pn("mobile"),wr=vt&&se,yl=vt&&Qt,Jr=!window.PointerEvent&&window.MSPointerEvent,Wn=!!(window.PointerEvent||Jr),Zn="ontouchstart"in window||!!window.TouchEvent,Hn=!window.L_NO_TOUCH&&(Zn||Wn),mo=vt&&nt,Qi=vt&&ze,T_=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,O_=function(){var r=!1;try{var o=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",g,o),window.removeEventListener("testPassiveEventSupport",g,o)}catch{}return r}(),L_=function(){return!!document.createElement("canvas").getContext}(),wl=!!(document.createElementNS&&Z("svg").createSVGRect),j_=!!wl&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),N_=!wl&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var o=r.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),I_=navigator.platform.indexOf("Mac")===0,R_=navigator.platform.indexOf("Linux")===0;function pn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var te={ie:Y,ielt9:ge,edge:X,webkit:se,android:ke,android23:ve,androidStock:Ee,opera:nt,chrome:jt,gecko:ze,safari:mt,phantom:Gr,opera12:$t,win:fn,ie3d:kn,webkit3d:Qt,gecko3d:Pn,any3d:gt,mobile:vt,mobileWebkit:wr,mobileWebkit3d:yl,msPointer:Jr,pointer:Wn,touch:Hn,touchNative:Zn,mobileOpera:mo,mobileGecko:Qi,retina:T_,passiveEvents:O_,canvas:L_,svg:wl,vml:N_,inlineSvg:j_,mac:I_,linux:R_},Gh=te.msPointer?"MSPointerDown":"pointerdown",Jh=te.msPointer?"MSPointerMove":"pointermove",Qh=te.msPointer?"MSPointerUp":"pointerup",Yh=te.msPointer?"MSPointerCancel":"pointercancel",xl={touchstart:Gh,touchmove:Jh,touchend:Qh,touchcancel:Yh},Xh={touchstart:U_,touchmove:go,touchend:go,touchcancel:go},Qr={},ed=!1;function A_(r,o,u){return o==="touchstart"&&B_(),Xh[o]?(u=Xh[o].bind(this,u),r.addEventListener(xl[o],u,!1),u):(console.warn("wrong event specified:",o),g)}function M_(r,o,u){if(!xl[o]){console.warn("wrong event specified:",o);return}r.removeEventListener(xl[o],u,!1)}function z_(r){Qr[r.pointerId]=r}function D_(r){Qr[r.pointerId]&&(Qr[r.pointerId]=r)}function td(r){delete Qr[r.pointerId]}function B_(){ed||(document.addEventListener(Gh,z_,!0),document.addEventListener(Jh,D_,!0),document.addEventListener(Qh,td,!0),document.addEventListener(Yh,td,!0),ed=!0)}function go(r,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in Qr)o.touches.push(Qr[u]);o.changedTouches=[o],r(o)}}function U_(r,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&at(o),go(r,o)}function $_(r){var o={},u,d;for(d in r)u=r[d],o[d]=u&&u.bind?u.bind(r):u;return r=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var F_=200;function W_(r,o){r.addEventListener("dblclick",o);var u=0,d;function p(_){if(_.detail!==1){d=_.detail;return}if(!(_.pointerType==="mouse"||_.sourceCapabilities&&!_.sourceCapabilities.firesTouchEvents)){var C=od(_);if(!(C.some(function(N){return N instanceof HTMLLabelElement&&N.attributes.for})&&!C.some(function(N){return N instanceof HTMLInputElement||N instanceof HTMLSelectElement}))){var j=Date.now();j-u<=F_?(d++,d===2&&o($_(_))):d=1,u=j}}}return r.addEventListener("click",p),{dblclick:o,simDblclick:p}}function Z_(r,o){r.removeEventListener("dblclick",o.dblclick),r.removeEventListener("click",o.simDblclick)}var bl=yo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Yi=yo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),nd=Yi==="webkitTransition"||Yi==="OTransition"?Yi+"End":"transitionend";function rd(r){return typeof r=="string"?document.getElementById(r):r}function Xi(r,o){var u=r.style[o]||r.currentStyle&&r.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(r,null);u=d?d[o]:null}return u==="auto"?null:u}function be(r,o,u){var d=document.createElement(r);return d.className=o||"",u&&u.appendChild(d),d}function De(r){var o=r.parentNode;o&&o.removeChild(r)}function vo(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Yr(r){var o=r.parentNode;o&&o.lastChild!==r&&o.appendChild(r)}function Xr(r){var o=r.parentNode;o&&o.firstChild!==r&&o.insertBefore(r,o.firstChild)}function Sl(r,o){if(r.classList!==void 0)return r.classList.contains(o);var u=_o(r);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function pe(r,o){if(r.classList!==void 0)for(var u=k(o),d=0,p=u.length;d<p;d++)r.classList.add(u[d]);else if(!Sl(r,o)){var _=_o(r);El(r,(_?_+" ":"")+o)}}function He(r,o){r.classList!==void 0?r.classList.remove(o):El(r,b((" "+_o(r)+" ").replace(" "+o+" "," ")))}function El(r,o){r.className.baseVal===void 0?r.className=o:r.className.baseVal=o}function _o(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Ft(r,o){"opacity"in r.style?r.style.opacity=o:"filter"in r.style&&H_(r,o)}function H_(r,o){var u=!1,d="DXImageTransform.Microsoft.Alpha";try{u=r.filters.item(d)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):r.style.filter+=" progid:"+d+"(opacity="+o+")"}function yo(r){for(var o=document.documentElement.style,u=0;u<r.length;u++)if(r[u]in o)return r[u];return!1}function xr(r,o,u){var d=o||new M(0,0);r.style[bl]=(te.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(u?" scale("+u+")":"")}function qe(r,o){r._leaflet_pos=o,te.any3d?xr(r,o):(r.style.left=o.x+"px",r.style.top=o.y+"px")}function br(r){return r._leaflet_pos||new M(0,0)}var es,ts,kl;if("onselectstart"in document)es=function(){de(window,"selectstart",at)},ts=function(){Le(window,"selectstart",at)};else{var ns=yo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);es=function(){if(ns){var r=document.documentElement.style;kl=r[ns],r[ns]="none"}},ts=function(){ns&&(document.documentElement.style[ns]=kl,kl=void 0)}}function Pl(){de(window,"dragstart",at)}function Cl(){Le(window,"dragstart",at)}var wo,Tl;function Ol(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(xo(),wo=r,Tl=r.style.outlineStyle,r.style.outlineStyle="none",de(window,"keydown",xo))}function xo(){wo&&(wo.style.outlineStyle=Tl,wo=void 0,Tl=void 0,Le(window,"keydown",xo))}function id(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Ll(r){var o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}var V_={__proto__:null,TRANSFORM:bl,TRANSITION:Yi,TRANSITION_END:nd,get:rd,getStyle:Xi,create:be,remove:De,empty:vo,toFront:Yr,toBack:Xr,hasClass:Sl,addClass:pe,removeClass:He,setClass:El,getClass:_o,setOpacity:Ft,testProp:yo,setTransform:xr,setPosition:qe,getPosition:br,get disableTextSelection(){return es},get enableTextSelection(){return ts},disableImageDrag:Pl,enableImageDrag:Cl,preventOutline:Ol,restoreOutline:xo,getSizedParentNode:id,getScale:Ll};function de(r,o,u,d){if(o&&typeof o=="object")for(var p in o)Nl(r,p,o[p],u);else{o=k(o);for(var _=0,C=o.length;_<C;_++)Nl(r,o[_],u,d)}return this}var mn="_leaflet_events";function Le(r,o,u,d){if(arguments.length===1)sd(r),delete r[mn];else if(o&&typeof o=="object")for(var p in o)Il(r,p,o[p],u);else if(o=k(o),arguments.length===2)sd(r,function(j){return O(o,j)!==-1});else for(var _=0,C=o.length;_<C;_++)Il(r,o[_],u,d);return this}function sd(r,o){for(var u in r[mn]){var d=u.split(/\d/)[0];(!o||o(d))&&Il(r,d,null,null,u)}}var jl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Nl(r,o,u,d){var p=o+h(u)+(d?"_"+h(d):"");if(r[mn]&&r[mn][p])return this;var _=function(j){return u.call(d||r,j||window.event)},C=_;!te.touchNative&&te.pointer&&o.indexOf("touch")===0?_=A_(r,o,_):te.touch&&o==="dblclick"?_=W_(r,_):"addEventListener"in r?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?r.addEventListener(jl[o]||o,_,te.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(_=function(j){j=j||window.event,Al(r,j)&&C(j)},r.addEventListener(jl[o],_,!1)):r.addEventListener(o,C,!1):r.attachEvent("on"+o,_),r[mn]=r[mn]||{},r[mn][p]=_}function Il(r,o,u,d,p){p=p||o+h(u)+(d?"_"+h(d):"");var _=r[mn]&&r[mn][p];if(!_)return this;!te.touchNative&&te.pointer&&o.indexOf("touch")===0?M_(r,o,_):te.touch&&o==="dblclick"?Z_(r,_):"removeEventListener"in r?r.removeEventListener(jl[o]||o,_,!1):r.detachEvent("on"+o,_),r[mn][p]=null}function Sr(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Rl(r){return Nl(r,"wheel",Sr),this}function rs(r){return de(r,"mousedown touchstart dblclick contextmenu",Sr),r._leaflet_disable_click=!0,this}function at(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Er(r){return at(r),Sr(r),this}function od(r){if(r.composedPath)return r.composedPath();for(var o=[],u=r.target;u;)o.push(u),u=u.parentNode;return o}function ad(r,o){if(!o)return new M(r.clientX,r.clientY);var u=Ll(o),d=u.boundingClientRect;return new M((r.clientX-d.left)/u.x-o.clientLeft,(r.clientY-d.top)/u.y-o.clientTop)}var q_=te.linux&&te.chrome?window.devicePixelRatio:te.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ld(r){return te.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/q_:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Al(r,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==r;)u=u.parentNode}catch{return!1}return u!==r}var K_={__proto__:null,on:de,off:Le,stopPropagation:Sr,disableScrollPropagation:Rl,disableClickPropagation:rs,preventDefault:at,stop:Er,getPropagationPath:od,getMousePosition:ad,getWheelDelta:ld,isExternalTarget:Al,addListener:de,removeListener:Le},ud=We.extend({run:function(r,o,u,d){this.stop(),this._el=r,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=br(r),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=oe(this._animate,this),this._step()},_step:function(r){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),r):(this._runFrame(1),this._complete())},_runFrame:function(r,o){var u=this._startPos.add(this._offset.multiplyBy(r));o&&u._round(),qe(this._el,u),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),we=We.extend({options:{crs:R,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,o){o=E(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(ee(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Yi&&te.any3d&&!te.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),de(this._proxy,nd,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),r=this._limitCenter(ee(r),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var d=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,o,u.zoom):this._tryAnimatedPan(r,u.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(r,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(r,o){return this._loaded?this.setView(this.getCenter(),r,{zoom:o}):(this._zoom=r,this)},zoomIn:function(r,o){return r=r||(te.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,o)},zoomOut:function(r,o){return r=r||(te.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,o)},setZoomAround:function(r,o,u){var d=this.getZoomScale(o),p=this.getSize().divideBy(2),_=r instanceof M?r:this.latLngToContainerPoint(r),C=_.subtract(p).multiplyBy(1-1/d),j=this.containerPointToLatLng(p.add(C));return this.setView(j,o,{zoom:u})},_getBoundsCenterZoom:function(r,o){o=o||{},r=r.getBounds?r.getBounds():ae(r);var u=F(o.paddingTopLeft||o.padding||[0,0]),d=F(o.paddingBottomRight||o.padding||[0,0]),p=this.getBoundsZoom(r,!1,u.add(d));if(p=typeof o.maxZoom=="number"?Math.min(o.maxZoom,p):p,p===1/0)return{center:r.getCenter(),zoom:p};var _=d.subtract(u).divideBy(2),C=this.project(r.getSouthWest(),p),j=this.project(r.getNorthEast(),p),N=this.unproject(C.add(j).divideBy(2).add(_),p);return{center:N,zoom:p}},fitBounds:function(r,o){if(r=ae(r),!r.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(r,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,o){return this.setView(r,this._zoom,{pan:o})},panBy:function(r,o){if(r=F(r).round(),o=o||{},!r.x&&!r.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ud,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){pe(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,o,u){if(u=u||{},u.animate===!1||!te.any3d)return this.setView(r,o,u);this._stop();var d=this.project(this.getCenter()),p=this.project(r),_=this.getSize(),C=this._zoom;r=ee(r),o=o===void 0?C:o;var j=Math.max(_.x,_.y),N=j*this.getZoomScale(C,o),D=p.distanceTo(d)||1,V=1.42,ce=V*V;function me(Ke){var Io=Ke?-1:1,My=Ke?N:j,zy=N*N-j*j+Io*ce*ce*D*D,Dy=2*My*ce*D,Vl=zy/Dy,Wd=Math.sqrt(Vl*Vl+1)-Vl,By=Wd<1e-9?-18:Math.log(Wd);return By}function _t(Ke){return(Math.exp(Ke)-Math.exp(-Ke))/2}function rt(Ke){return(Math.exp(Ke)+Math.exp(-Ke))/2}function Zt(Ke){return _t(Ke)/rt(Ke)}var kt=me(0);function si(Ke){return j*(rt(kt)/rt(kt+V*Ke))}function Ny(Ke){return j*(rt(kt)*Zt(kt+V*Ke)-_t(kt))/ce}function Iy(Ke){return 1-Math.pow(1-Ke,1.5)}var Ry=Date.now(),$d=(me(1)-kt)/V,Ay=u.duration?1e3*u.duration:1e3*$d*.8;function Fd(){var Ke=(Date.now()-Ry)/Ay,Io=Iy(Ke)*$d;Ke<=1?(this._flyToFrame=oe(Fd,this),this._move(this.unproject(d.add(p.subtract(d).multiplyBy(Ny(Io)/D)),C),this.getScaleZoom(j/si(Io),C),{flyTo:!0})):this._move(r,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Fd.call(this),this},flyToBounds:function(r,o){var u=this._getBoundsCenterZoom(r,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(r){return r=ae(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var o=this.options.minZoom;return this.options.minZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var o=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,o){this._enforcingBounds=!0;var u=this.getCenter(),d=this._limitCenter(u,this._zoom,ae(r));return u.equals(d)||this.panTo(d,o),this._enforcingBounds=!1,this},panInside:function(r,o){o=o||{};var u=F(o.paddingTopLeft||o.padding||[0,0]),d=F(o.paddingBottomRight||o.padding||[0,0]),p=this.project(this.getCenter()),_=this.project(r),C=this.getPixelBounds(),j=fe([C.min.add(u),C.max.subtract(d)]),N=j.getSize();if(!j.contains(_)){this._enforcingBounds=!0;var D=_.subtract(j.getCenter()),V=j.extend(_).getSize().subtract(N);p.x+=D.x<0?-V.x:V.x,p.y+=D.y<0?-V.y:V.y,this.panTo(this.unproject(p),o),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),d=o.divideBy(2).round(),p=u.divideBy(2).round(),_=d.subtract(p);return!_.x&&!_.y?this:(r.animate&&r.pan?this.panBy(_):(r.pan&&this._rawPanBy(_),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),u=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,r):navigator.geolocation.getCurrentPosition(o,u,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var o=r.code,u=r.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var o=r.coords.latitude,u=r.coords.longitude,d=new le(o,u),p=d.toBounds(r.coords.accuracy*2),_=this._locateOptions;if(_.setView){var C=this.getBoundsZoom(p);this.setView(d,_.maxZoom?Math.min(C,_.maxZoom):C)}var j={latlng:d,bounds:p,timestamp:r.timestamp};for(var N in r.coords)typeof r.coords[N]=="number"&&(j[N]=r.coords[N]);this.fire("locationfound",j)}},addHandler:function(r,o){if(!o)return this;var u=this[r]=new o(this);return this._handlers.push(u),this.options[r]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),De(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)De(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,o){var u="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),d=be("div",u,o||this._mapPane);return r&&(this._panes[r]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),o=this.unproject(r.getBottomLeft()),u=this.unproject(r.getTopRight());return new H(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,o,u){r=ae(r),u=F(u||[0,0]);var d=this.getZoom()||0,p=this.getMinZoom(),_=this.getMaxZoom(),C=r.getNorthWest(),j=r.getSouthEast(),N=this.getSize().subtract(u),D=fe(this.project(j,d),this.project(C,d)).getSize(),V=te.any3d?this.options.zoomSnap:1,ce=N.x/D.x,me=N.y/D.y,_t=o?Math.max(ce,me):Math.min(ce,me);return d=this.getScaleZoom(_t,d),V&&(d=Math.round(d/(V/100))*(V/100),d=o?Math.ceil(d/V)*V:Math.floor(d/V)*V),Math.max(p,Math.min(_,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,o){var u=this._getTopLeftPoint(r,o);return new ie(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(r)/u.scale(o)},getScaleZoom:function(r,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var d=u.zoom(r*u.scale(o));return isNaN(d)?1/0:d},project:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(ee(r),o)},unproject:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(F(r),o)},layerPointToLatLng:function(r){var o=F(r).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(r){var o=this.project(ee(r))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(ee(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(ae(r))},distance:function(r,o){return this.options.crs.distance(ee(r),ee(o))},containerPointToLayerPoint:function(r){return F(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return F(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var o=this.containerPointToLayerPoint(F(r));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ee(r)))},mouseEventToContainerPoint:function(r){return ad(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var o=this._container=rd(r);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");de(o,"scroll",this._onScroll,this),this._containerId=h(o)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&te.any3d,pe(r,"leaflet-container"+(te.touch?" leaflet-touch":"")+(te.retina?" leaflet-retina":"")+(te.ielt9?" leaflet-oldie":"")+(te.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Xi(r,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qe(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pe(r.markerPane,"leaflet-zoom-hide"),pe(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,o,u){qe(this._mapPane,new M(0,0));var d=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var p=this._zoom!==o;this._moveStart(p,u)._move(r,o)._moveEnd(p),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(r,o){return r&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(r,o,u,d){o===void 0&&(o=this._zoom);var p=this._zoom!==o;return this._zoom=o,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),d?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){qe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[h(this._container)]=this;var o=r?Le:de;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),te.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=oe(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,o){for(var u=[],d,p=o==="mouseout"||o==="mouseover",_=r.target||r.srcElement,C=!1;_;){if(d=this._targets[h(_)],d&&(o==="click"||o==="preclick")&&this._draggableMoved(d)){C=!0;break}if(d&&d.listens(o,!0)&&(p&&!Al(_,r)||(u.push(d),p))||_===this._container)break;_=_.parentNode}return!u.length&&!C&&!p&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var o=r.target||r.srcElement;if(!(!this._loaded||o._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(o))){var u=r.type;u==="mousedown"&&Ol(o),this._fireDOMEvent(r,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,o,u){if(r.type==="click"){var d=s({},r);d.type="preclick",this._fireDOMEvent(d,d.type,u)}var p=this._findEventTargets(r,o);if(u){for(var _=[],C=0;C<u.length;C++)u[C].listens(o,!0)&&_.push(u[C]);p=_.concat(p)}if(p.length){o==="contextmenu"&&at(r);var j=p[0],N={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var D=j.getLatLng&&(!j._radius||j._radius<=10);N.containerPoint=D?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(r),N.layerPoint=this.containerPointToLayerPoint(N.containerPoint),N.latlng=D?j.getLatLng():this.layerPointToLatLng(N.layerPoint)}for(C=0;C<p.length;C++)if(p[C].fire(o,N,!0),N.originalEvent._stopped||p[C].options.bubblingMouseEvents===!1&&O(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,o=this._handlers.length;r<o;r++)this._handlers[r].disable()},whenReady:function(r,o){return this._loaded?r.call(o||this,{target:this}):this.on("load",r,o),this},_getMapPanePos:function(){return br(this._mapPane)||new M(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,o){var u=r&&o!==void 0?this._getNewPixelOrigin(r,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,o){var u=this.getSize()._divideBy(2);return this.project(r,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,o,u){var d=this._getNewPixelOrigin(u,o);return this.project(r,o)._subtract(d)},_latLngBoundsToNewLayerBounds:function(r,o,u){var d=this._getNewPixelOrigin(u,o);return fe([this.project(r.getSouthWest(),o)._subtract(d),this.project(r.getNorthWest(),o)._subtract(d),this.project(r.getSouthEast(),o)._subtract(d),this.project(r.getNorthEast(),o)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,o,u){if(!u)return r;var d=this.project(r,o),p=this.getSize().divideBy(2),_=new ie(d.subtract(p),d.add(p)),C=this._getBoundsOffset(_,u,o);return Math.abs(C.x)<=1&&Math.abs(C.y)<=1?r:this.unproject(d.add(C),o)},_limitOffset:function(r,o){if(!o)return r;var u=this.getPixelBounds(),d=new ie(u.min.add(r),u.max.add(r));return r.add(this._getBoundsOffset(d,o))},_getBoundsOffset:function(r,o,u){var d=fe(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),p=d.min.subtract(r.min),_=d.max.subtract(r.max),C=this._rebound(p.x,-_.x),j=this._rebound(p.y,-_.y);return new M(C,j)},_rebound:function(r,o){return r+o>0?Math.round(r-o)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(o))},_limitZoom:function(r){var o=this.getMinZoom(),u=this.getMaxZoom(),d=te.any3d?this.options.zoomSnap:1;return d&&(r=Math.round(r/d)*d),Math.max(o,Math.min(u,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){He(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,o){var u=this._getCenterOffset(r)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var r=this._proxy=be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(o){var u=bl,d=this._proxy.style[u];xr(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),d===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){De(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),o=this.getZoom();xr(this._proxy,this.project(r,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(o),p=this._getCenterOffset(r)._divideBy(1-1/d);return u.animate!==!0&&!this.getSize().contains(p)?!1:(oe(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(r,o,!0)},this),!0)},_animateZoom:function(r,o,u,d){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=o,pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:o,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&He(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function G_(r,o){return new we(r,o)}var Yt=Te.extend({options:{position:"topright"},initialize:function(r){E(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var o=this._map;return o&&o.removeControl(this),this.options.position=r,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var o=this._container=this.onAdd(r),u=this.getPosition(),d=r._controlCorners[u];return pe(o,"leaflet-control"),u.indexOf("bottom")!==-1?d.insertBefore(o,d.firstChild):d.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(De(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),is=function(r){return new Yt(r)};we.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},o="leaflet-",u=this._controlContainer=be("div",o+"control-container",this._container);function d(p,_){var C=o+p+" "+o+_;r[p+_]=be("div",C,u)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)De(this._controlCorners[r]);De(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var cd=Yt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,o,u,d){return u<d?-1:d<u?1:0}},initialize:function(r,o,u){E(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in r)this._addLayer(r[d],d);for(d in o)this._addLayer(o[d],d,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Yt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,o){return this._addLayer(r,o),this._map?this._update():this},addOverlay:function(r,o){return this._addLayer(r,o,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var o=this._getLayer(h(r));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):He(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return He(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",o=this._container=be("div",r),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),rs(o),Rl(o);var d=this._section=be("section",r+"-list");u&&(this._map.on("click",this.collapse,this),de(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=be("a",r+"-toggle",o);p.href="#",p.title="Layers",p.setAttribute("role","button"),de(p,{keydown:function(_){_.keyCode===13&&this._expandSafely()},click:function(_){at(_),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=be("div",r+"-base",d),this._separator=be("div",r+"-separator",d),this._overlaysList=be("div",r+"-overlays",d),o.appendChild(d)},_getLayer:function(r){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&h(this._layers[o].layer)===r)return this._layers[o]},_addLayer:function(r,o,u){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(l(function(d,p){return this.options.sortFunction(d.layer,p.layer,d.name,p.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;vo(this._baseLayersList),vo(this._overlaysList),this._layerControlInputs=[];var r,o,u,d,p=0;for(u=0;u<this._layers.length;u++)d=this._layers[u],this._addItem(d),o=o||d.overlay,r=r||!d.overlay,p+=d.overlay?0:1;return this.options.hideSingleBase&&(r=r&&p>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=o&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var o=this._getLayer(h(r.target)),u=o.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(r,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(o?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=u,d.firstChild},_addItem:function(r){var o=document.createElement("label"),u=this._map.hasLayer(r.layer),d;r.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=u):d=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(d),d.layerId=h(r.layer),de(d,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+r.name;var _=document.createElement("span");o.appendChild(_),_.appendChild(d),_.appendChild(p);var C=r.overlay?this._overlaysList:this._baseLayersList;return C.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,o,u,d=[],p=[];this._handlingClick=!0;for(var _=r.length-1;_>=0;_--)o=r[_],u=this._getLayer(o.layerId).layer,o.checked?d.push(u):o.checked||p.push(u);for(_=0;_<p.length;_++)this._map.hasLayer(p[_])&&this._map.removeLayer(p[_]);for(_=0;_<d.length;_++)this._map.hasLayer(d[_])||this._map.addLayer(d[_]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,o,u,d=this._map.getZoom(),p=r.length-1;p>=0;p--)o=r[p],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&d<u.options.minZoom||u.options.maxZoom!==void 0&&d>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,de(r,"click",at),this.expand();var o=this;setTimeout(function(){Le(r,"click",at),o._preventClick=!1})}}),J_=function(r,o,u){return new cd(r,o,u)},Ml=Yt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var o="leaflet-control-zoom",u=be("div",o+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,o,u,d,p){var _=be("a",u,d);return _.innerHTML=r,_.href="#",_.title=o,_.setAttribute("role","button"),_.setAttribute("aria-label",o),rs(_),de(_,"click",Er),de(_,"click",p,this),de(_,"click",this._refocusOnMap,this),_},_updateDisabled:function(){var r=this._map,o="leaflet-disabled";He(this._zoomInButton,o),He(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(pe(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(pe(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});we.mergeOptions({zoomControl:!0}),we.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ml,this.addControl(this.zoomControl))});var Q_=function(r){return new Ml(r)},hd=Yt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var o="leaflet-control-scale",u=be("div",o),d=this.options;return this._addScales(d,o+"-line",u),r.on(d.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),u},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,o,u){r.metric&&(this._mScale=be("div",o,u)),r.imperial&&(this._iScale=be("div",o,u))},_update:function(){var r=this._map,o=r.getSize().y/2,u=r.distance(r.containerPointToLatLng([0,o]),r.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var o=this._getRoundNum(r),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/r)},_updateImperial:function(r){var o=r*3.2808399,u,d,p;o>5280?(u=o/5280,d=this._getRoundNum(u),this._updateScale(this._iScale,d+" mi",d/u)):(p=this._getRoundNum(o),this._updateScale(this._iScale,p+" ft",p/o))},_updateScale:function(r,o,u){r.style.width=Math.round(this.options.maxWidth*u)+"px",r.innerHTML=o},_getRoundNum:function(r){var o=Math.pow(10,(Math.floor(r)+"").length-1),u=r/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),Y_=function(r){return new hd(r)},X_='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',zl=Yt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(te.inlineSvg?X_+" ":"")+"Leaflet</a>"},initialize:function(r){E(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=be("div","leaflet-control-attribution"),rs(this._container);for(var o in r._layers)r._layers[o].getAttribution&&this.addAttribution(r._layers[o].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var o in this._attributions)this._attributions[o]&&r.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),r.length&&u.push(r.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});we.mergeOptions({attributionControl:!0}),we.addInitHook(function(){this.options.attributionControl&&new zl().addTo(this)});var ey=function(r){return new zl(r)};Yt.Layers=cd,Yt.Zoom=Ml,Yt.Scale=hd,Yt.Attribution=zl,is.layers=J_,is.zoom=Q_,is.scale=Y_,is.attribution=ey;var gn=Te.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(r,o){return r.addHandler(o,this),this};var ty={Events:ye},dd=te.touch?"touchstart mousedown":"mousedown",Vn=We.extend({options:{clickTolerance:3},initialize:function(r,o,u,d){E(this,d),this._element=r,this._dragStartTarget=o||r,this._preventOutline=u},enable:function(){this._enabled||(de(this._dragStartTarget,dd,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vn._dragging===this&&this.finishDrag(!0),Le(this._dragStartTarget,dd,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Sl(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Vn._dragging===this&&this.finishDrag();return}if(!(Vn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Vn._dragging=this,this._preventOutline&&Ol(this._element),Pl(),es(),!this._moving)){this.fire("down");var o=r.touches?r.touches[0]:r,u=id(this._element);this._startPoint=new M(o.clientX,o.clientY),this._startPos=br(this._element),this._parentScale=Ll(u);var d=r.type==="mousedown";de(document,d?"mousemove":"touchmove",this._onMove,this),de(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var o=r.touches&&r.touches.length===1?r.touches[0]:r,u=new M(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,at(r),this._moved||(this.fire("dragstart"),this._moved=!0,pe(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),qe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){He(document.body,"leaflet-dragging"),this._lastTarget&&(He(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Le(document,"mousemove touchmove",this._onMove,this),Le(document,"mouseup touchend touchcancel",this._onUp,this),Cl(),ts();var o=this._moved&&this._moving;this._moving=!1,Vn._dragging=!1,o&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function fd(r,o,u){var d,p=[1,4,2,8],_,C,j,N,D,V,ce,me;for(_=0,V=r.length;_<V;_++)r[_]._code=kr(r[_],o);for(j=0;j<4;j++){for(ce=p[j],d=[],_=0,V=r.length,C=V-1;_<V;C=_++)N=r[_],D=r[C],N._code&ce?D._code&ce||(me=bo(D,N,ce,o,u),me._code=kr(me,o),d.push(me)):(D._code&ce&&(me=bo(D,N,ce,o,u),me._code=kr(me,o),d.push(me)),d.push(N));r=d}return r}function pd(r,o){var u,d,p,_,C,j,N,D,V;if(!r||r.length===0)throw new Error("latlngs not passed");Wt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ce=ee([0,0]),me=ae(r),_t=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());_t<1700&&(ce=Dl(r));var rt=r.length,Zt=[];for(u=0;u<rt;u++){var kt=ee(r[u]);Zt.push(o.project(ee([kt.lat-ce.lat,kt.lng-ce.lng])))}for(j=N=D=0,u=0,d=rt-1;u<rt;d=u++)p=Zt[u],_=Zt[d],C=p.y*_.x-_.y*p.x,N+=(p.x+_.x)*C,D+=(p.y+_.y)*C,j+=C*3;j===0?V=Zt[0]:V=[N/j,D/j];var si=o.unproject(F(V));return ee([si.lat+ce.lat,si.lng+ce.lng])}function Dl(r){for(var o=0,u=0,d=0,p=0;p<r.length;p++){var _=ee(r[p]);o+=_.lat,u+=_.lng,d++}return ee([o/d,u/d])}var ny={__proto__:null,clipPolygon:fd,polygonCenter:pd,centroid:Dl};function md(r,o){if(!o||!r.length)return r.slice();var u=o*o;return r=sy(r,u),r=iy(r,u),r}function gd(r,o,u){return Math.sqrt(ss(r,o,u,!0))}function ry(r,o,u){return ss(r,o,u)}function iy(r,o){var u=r.length,d=typeof Uint8Array<"u"?Uint8Array:Array,p=new d(u);p[0]=p[u-1]=1,Bl(r,p,o,0,u-1);var _,C=[];for(_=0;_<u;_++)p[_]&&C.push(r[_]);return C}function Bl(r,o,u,d,p){var _=0,C,j,N;for(j=d+1;j<=p-1;j++)N=ss(r[j],r[d],r[p],!0),N>_&&(C=j,_=N);_>u&&(o[C]=1,Bl(r,o,u,d,C),Bl(r,o,u,C,p))}function sy(r,o){for(var u=[r[0]],d=1,p=0,_=r.length;d<_;d++)oy(r[d],r[p])>o&&(u.push(r[d]),p=d);return p<_-1&&u.push(r[_-1]),u}var vd;function _d(r,o,u,d,p){var _=d?vd:kr(r,u),C=kr(o,u),j,N,D;for(vd=C;;){if(!(_|C))return[r,o];if(_&C)return!1;j=_||C,N=bo(r,o,j,u,p),D=kr(N,u),j===_?(r=N,_=D):(o=N,C=D)}}function bo(r,o,u,d,p){var _=o.x-r.x,C=o.y-r.y,j=d.min,N=d.max,D,V;return u&8?(D=r.x+_*(N.y-r.y)/C,V=N.y):u&4?(D=r.x+_*(j.y-r.y)/C,V=j.y):u&2?(D=N.x,V=r.y+C*(N.x-r.x)/_):u&1&&(D=j.x,V=r.y+C*(j.x-r.x)/_),new M(D,V,p)}function kr(r,o){var u=0;return r.x<o.min.x?u|=1:r.x>o.max.x&&(u|=2),r.y<o.min.y?u|=4:r.y>o.max.y&&(u|=8),u}function oy(r,o){var u=o.x-r.x,d=o.y-r.y;return u*u+d*d}function ss(r,o,u,d){var p=o.x,_=o.y,C=u.x-p,j=u.y-_,N=C*C+j*j,D;return N>0&&(D=((r.x-p)*C+(r.y-_)*j)/N,D>1?(p=u.x,_=u.y):D>0&&(p+=C*D,_+=j*D)),C=r.x-p,j=r.y-_,d?C*C+j*j:new M(p,_)}function Wt(r){return!x(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function yd(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Wt(r)}function wd(r,o){var u,d,p,_,C,j,N,D;if(!r||r.length===0)throw new Error("latlngs not passed");Wt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var V=ee([0,0]),ce=ae(r),me=ce.getNorthWest().distanceTo(ce.getSouthWest())*ce.getNorthEast().distanceTo(ce.getNorthWest());me<1700&&(V=Dl(r));var _t=r.length,rt=[];for(u=0;u<_t;u++){var Zt=ee(r[u]);rt.push(o.project(ee([Zt.lat-V.lat,Zt.lng-V.lng])))}for(u=0,d=0;u<_t-1;u++)d+=rt[u].distanceTo(rt[u+1])/2;if(d===0)D=rt[0];else for(u=0,_=0;u<_t-1;u++)if(C=rt[u],j=rt[u+1],p=C.distanceTo(j),_+=p,_>d){N=(_-d)/p,D=[j.x-N*(j.x-C.x),j.y-N*(j.y-C.y)];break}var kt=o.unproject(F(D));return ee([kt.lat+V.lat,kt.lng+V.lng])}var ay={__proto__:null,simplify:md,pointToSegmentDistance:gd,closestPointOnSegment:ry,clipSegment:_d,_getEdgeIntersection:bo,_getBitCode:kr,_sqClosestPointOnSegment:ss,isFlat:Wt,_flat:yd,polylineCenter:wd},Ul={project:function(r){return new M(r.lng,r.lat)},unproject:function(r){return new le(r.y,r.x)},bounds:new ie([-180,-90],[180,90])},$l={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var o=Math.PI/180,u=this.R,d=r.lat*o,p=this.R_MINOR/u,_=Math.sqrt(1-p*p),C=_*Math.sin(d),j=Math.tan(Math.PI/4-d/2)/Math.pow((1-C)/(1+C),_/2);return d=-u*Math.log(Math.max(j,1e-10)),new M(r.lng*o*u,d)},unproject:function(r){for(var o=180/Math.PI,u=this.R,d=this.R_MINOR/u,p=Math.sqrt(1-d*d),_=Math.exp(-r.y/u),C=Math.PI/2-2*Math.atan(_),j=0,N=.1,D;j<15&&Math.abs(N)>1e-7;j++)D=p*Math.sin(C),D=Math.pow((1-D)/(1+D),p/2),N=Math.PI/2-2*Math.atan(_*D)-C,C+=N;return new le(C*o,r.x*o/u)}},ly={__proto__:null,LonLat:Ul,Mercator:$l,SphericalMercator:En},uy=s({},ot,{code:"EPSG:3395",projection:$l,transformation:function(){var r=.5/(Math.PI*$l.R);return Ut(r,.5,-r,.5)}()}),xd=s({},ot,{code:"EPSG:4326",projection:Ul,transformation:Ut(1/180,1,-1/180,.5)}),cy=s({},Ie,{projection:Ul,transformation:Ut(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,o){var u=o.lng-r.lng,d=o.lat-r.lat;return Math.sqrt(u*u+d*d)},infinite:!0});Ie.Earth=ot,Ie.EPSG3395=uy,Ie.EPSG3857=R,Ie.EPSG900913=W,Ie.EPSG4326=xd,Ie.Simple=cy;var Xt=We.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[h(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[h(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var o=r.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});we.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var o=h(r);return this._layers[o]?this:(this._layers[o]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var o=h(r);return this._layers[o]?(this._loaded&&r.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return h(r)in this._layers},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},_addLayers:function(r){r=r?x(r)?r:[r]:[];for(var o=0,u=r.length;o<u;o++)this.addLayer(r[o])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[h(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var o=h(r);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,o=-1/0,u=this._getZoomSpan();for(var d in this._zoomBoundLayers){var p=this._zoomBoundLayers[d].options;r=p.minZoom===void 0?r:Math.min(r,p.minZoom),o=p.maxZoom===void 0?o:Math.max(o,p.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=r===1/0?void 0:r,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ei=Xt.extend({initialize:function(r,o){E(this,o),this._layers={};var u,d;if(r)for(u=0,d=r.length;u<d;u++)this.addLayer(r[u])},addLayer:function(r){var o=this.getLayerId(r);return this._layers[o]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var o=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(r){var o=typeof r=="number"?r:this.getLayerId(r);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var o=Array.prototype.slice.call(arguments,1),u,d;for(u in this._layers)d=this._layers[u],d[r]&&d[r].apply(d,o);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return h(r)}}),hy=function(r,o){return new ei(r,o)},Cn=ei.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),ei.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),ei.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new H;for(var o in this._layers){var u=this._layers[o];r.extend(u.getBounds?u.getBounds():u.getLatLng())}return r}}),dy=function(r,o){return new Cn(r,o)},ti=Te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){E(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,o){var u=this._getIconUrl(r);if(!u){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(d,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(r,o){var u=this.options,d=u[o+"Size"];typeof d=="number"&&(d=[d,d]);var p=F(d),_=F(o==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));r.className="leaflet-marker-"+o+" "+(u.className||""),_&&(r.style.marginLeft=-_.x+"px",r.style.marginTop=-_.y+"px"),p&&(r.style.width=p.x+"px",r.style.height=p.y+"px")},_createImg:function(r,o){return o=o||document.createElement("img"),o.src=r,o},_getIconUrl:function(r){return te.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function fy(r){return new ti(r)}var os=ti.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof os.imagePath!="string"&&(os.imagePath=this._detectIconPath()),(this.options.imagePath||os.imagePath)+ti.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var o=function(u,d,p){var _=d.exec(u);return _&&_[p]};return r=o(r,/^url\((['"])?(.+)\1\)$/,2),r&&o(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=be("div","leaflet-default-icon-path",document.body),o=Xi(r,"background-image")||Xi(r,"backgroundImage");if(document.body.removeChild(r),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),bd=gn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Vn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pe(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&He(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var o=this._marker,u=o._map,d=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,_=br(o._icon),C=u.getPixelBounds(),j=u.getPixelOrigin(),N=fe(C.min._subtract(j).add(p),C.max._subtract(j).subtract(p));if(!N.contains(_)){var D=F((Math.max(N.max.x,_.x)-N.max.x)/(C.max.x-N.max.x)-(Math.min(N.min.x,_.x)-N.min.x)/(C.min.x-N.min.x),(Math.max(N.max.y,_.y)-N.max.y)/(C.max.y-N.max.y)-(Math.min(N.min.y,_.y)-N.min.y)/(C.min.y-N.min.y)).multiplyBy(d);u.panBy(D,{animate:!1}),this._draggable._newPos._add(D),this._draggable._startPos._add(D),qe(o._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=oe(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=oe(this._adjustPan.bind(this,r)))},_onDrag:function(r){var o=this._marker,u=o._shadow,d=br(o._icon),p=o._map.layerPointToLatLng(d);u&&qe(u,d),o._latlng=p,r.latlng=p,r.oldLatLng=this._oldLatLng,o.fire("move",r).fire("drag",r)},_onDragEnd:function(r){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),So=Xt.extend({options:{icon:new os,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,o){E(this,o),this._latlng=ee(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var o=this._latlng;return this._latlng=ee(r),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=r.icon.createIcon(this._icon),d=!1;u!==this._icon&&(this._icon&&this._removeIcon(),d=!0,r.title&&(u.title=r.title),u.tagName==="IMG"&&(u.alt=r.alt||"")),pe(u,o),r.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&de(u,"focus",this._panOnFocus,this);var p=r.icon.createShadow(this._shadow),_=!1;p!==this._shadow&&(this._removeShadow(),_=!0),p&&(pe(p,o),p.alt=""),this._shadow=p,r.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&_&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Le(this._icon,"focus",this._panOnFocus,this),De(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&De(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&qe(this._icon,r),this._shadow&&qe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bd)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bd(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Ft(this._icon,r),this._shadow&&Ft(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var o=this.options.icon.options,u=o.iconSize?F(o.iconSize):F(0,0),d=o.iconAnchor?F(o.iconAnchor):F(0,0);r.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:u.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function py(r,o){return new So(r,o)}var qn=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return E(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Eo=qn.extend({options:{fill:!0,radius:10},initialize:function(r,o){E(this,o),this._latlng=ee(r),this._radius=this.options.radius},setLatLng:function(r){var o=this._latlng;return this._latlng=ee(r),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var o=r&&r.radius||this._radius;return qn.prototype.setStyle.call(this,r),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,o=this._radiusY||r,u=this._clickTolerance(),d=[r+u,o+u];this._pxBounds=new ie(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function my(r,o){return new Eo(r,o)}var Fl=Eo.extend({initialize:function(r,o,u){if(typeof o=="number"&&(o=s({},u,{radius:o})),E(this,o),this._latlng=ee(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:qn.prototype.setStyle,_project:function(){var r=this._latlng.lng,o=this._latlng.lat,u=this._map,d=u.options.crs;if(d.distance===ot.distance){var p=Math.PI/180,_=this._mRadius/ot.R/p,C=u.project([o+_,r]),j=u.project([o-_,r]),N=C.add(j).divideBy(2),D=u.unproject(N).lat,V=Math.acos((Math.cos(_*p)-Math.sin(o*p)*Math.sin(D*p))/(Math.cos(o*p)*Math.cos(D*p)))/p;(isNaN(V)||V===0)&&(V=_/Math.cos(Math.PI/180*o)),this._point=N.subtract(u.getPixelOrigin()),this._radius=isNaN(V)?0:N.x-u.project([D,r-V]).x,this._radiusY=N.y-C.y}else{var ce=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(ce).x}this._updateBounds()}});function gy(r,o,u){return new Fl(r,o,u)}var Tn=qn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,o){E(this,o),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var o=1/0,u=null,d=ss,p,_,C=0,j=this._parts.length;C<j;C++)for(var N=this._parts[C],D=1,V=N.length;D<V;D++){p=N[D-1],_=N[D];var ce=d(r,p,_,!0);ce<o&&(o=ce,u=d(r,p,_))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wd(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,o){return o=o||this._defaultShape(),r=ee(r),o.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new H,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Wt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var o=[],u=Wt(r),d=0,p=r.length;d<p;d++)u?(o[d]=ee(r[d]),this._bounds.extend(o[d])):o[d]=this._convertLatLngs(r[d]);return o},_project:function(){var r=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),o=new M(r,r);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(r,o,u){var d=r[0]instanceof le,p=r.length,_,C;if(d){for(C=[],_=0;_<p;_++)C[_]=this._map.latLngToLayerPoint(r[_]),u.extend(C[_]);o.push(C)}else for(_=0;_<p;_++)this._projectLatlngs(r[_],o,u)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,d,p,_,C,j,N;for(u=0,p=0,_=this._rings.length;u<_;u++)for(N=this._rings[u],d=0,C=N.length;d<C-1;d++)j=_d(N[d],N[d+1],r,d,!0),j&&(o[p]=o[p]||[],o[p].push(j[0]),(j[1]!==N[d+1]||d===C-2)&&(o[p].push(j[1]),p++))}},_simplifyPoints:function(){for(var r=this._parts,o=this.options.smoothFactor,u=0,d=r.length;u<d;u++)r[u]=md(r[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,o){var u,d,p,_,C,j,N=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(u=0,_=this._parts.length;u<_;u++)for(j=this._parts[u],d=0,C=j.length,p=C-1;d<C;p=d++)if(!(!o&&d===0)&&gd(r,j[p],j[d])<=N)return!0;return!1}});function vy(r,o){return new Tn(r,o)}Tn._flat=yd;var ni=Tn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var o=Tn.prototype._convertLatLngs.call(this,r),u=o.length;return u>=2&&o[0]instanceof le&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(r){Tn.prototype._setLatLngs.call(this,r),Wt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Wt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,o=this.options.weight,u=new M(o,o);if(r=new ie(r.min.subtract(u),r.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,p=this._rings.length,_;d<p;d++)_=fd(this._rings[d],r,!0),_.length&&this._parts.push(_)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var o=!1,u,d,p,_,C,j,N,D;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(_=0,N=this._parts.length;_<N;_++)for(u=this._parts[_],C=0,D=u.length,j=D-1;C<D;j=C++)d=u[C],p=u[j],d.y>r.y!=p.y>r.y&&r.x<(p.x-d.x)*(r.y-d.y)/(p.y-d.y)+d.x&&(o=!o);return o||Tn.prototype._containsPoint.call(this,r,!0)}});function _y(r,o){return new ni(r,o)}var On=Cn.extend({initialize:function(r,o){E(this,o),this._layers={},r&&this.addData(r)},addData:function(r){var o=x(r)?r:r.features,u,d,p;if(o){for(u=0,d=o.length;u<d;u++)p=o[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var _=this.options;if(_.filter&&!_.filter(r))return this;var C=ko(r,_);return C?(C.feature=To(r),C.defaultOptions=C.options,this.resetStyle(C),_.onEachFeature&&_.onEachFeature(r,C),this.addLayer(C)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(o){this._setLayerStyle(o,r)},this)},_setLayerStyle:function(r,o){r.setStyle&&(typeof o=="function"&&(o=o(r.feature)),r.setStyle(o))}});function ko(r,o){var u=r.type==="Feature"?r.geometry:r,d=u?u.coordinates:null,p=[],_=o&&o.pointToLayer,C=o&&o.coordsToLatLng||Wl,j,N,D,V;if(!d&&!u)return null;switch(u.type){case"Point":return j=C(d),Sd(_,r,j,o);case"MultiPoint":for(D=0,V=d.length;D<V;D++)j=C(d[D]),p.push(Sd(_,r,j,o));return new Cn(p);case"LineString":case"MultiLineString":return N=Po(d,u.type==="LineString"?0:1,C),new Tn(N,o);case"Polygon":case"MultiPolygon":return N=Po(d,u.type==="Polygon"?1:2,C),new ni(N,o);case"GeometryCollection":for(D=0,V=u.geometries.length;D<V;D++){var ce=ko({geometry:u.geometries[D],type:"Feature",properties:r.properties},o);ce&&p.push(ce)}return new Cn(p);case"FeatureCollection":for(D=0,V=u.features.length;D<V;D++){var me=ko(u.features[D],o);me&&p.push(me)}return new Cn(p);default:throw new Error("Invalid GeoJSON object.")}}function Sd(r,o,u,d){return r?r(o,u):new So(u,d&&d.markersInheritOptions&&d)}function Wl(r){return new le(r[1],r[0],r[2])}function Po(r,o,u){for(var d=[],p=0,_=r.length,C;p<_;p++)C=o?Po(r[p],o-1,u):(u||Wl)(r[p]),d.push(C);return d}function Zl(r,o){return r=ee(r),r.alt!==void 0?[w(r.lng,o),w(r.lat,o),w(r.alt,o)]:[w(r.lng,o),w(r.lat,o)]}function Co(r,o,u,d){for(var p=[],_=0,C=r.length;_<C;_++)p.push(o?Co(r[_],Wt(r[_])?0:o-1,u,d):Zl(r[_],d));return!o&&u&&p.length>0&&p.push(p[0].slice()),p}function ri(r,o){return r.feature?s({},r.feature,{geometry:o}):To(o)}function To(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Hl={toGeoJSON:function(r){return ri(this,{type:"Point",coordinates:Zl(this.getLatLng(),r)})}};So.include(Hl),Fl.include(Hl),Eo.include(Hl),Tn.include({toGeoJSON:function(r){var o=!Wt(this._latlngs),u=Co(this._latlngs,o?1:0,!1,r);return ri(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),ni.include({toGeoJSON:function(r){var o=!Wt(this._latlngs),u=o&&!Wt(this._latlngs[0]),d=Co(this._latlngs,u?2:o?1:0,!0,r);return o||(d=[d]),ri(this,{type:(u?"Multi":"")+"Polygon",coordinates:d})}}),ei.include({toMultiPoint:function(r){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(r).geometry.coordinates)}),ri(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(r){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(r);var u=o==="GeometryCollection",d=[];return this.eachLayer(function(p){if(p.toGeoJSON){var _=p.toGeoJSON(r);if(u)d.push(_.geometry);else{var C=To(_);C.type==="FeatureCollection"?d.push.apply(d,C.features):d.push(C)}}}),u?ri(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function Ed(r,o){return new On(r,o)}var yy=Ed,Oo=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,o,u){this._url=r,this._bounds=ae(o),E(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){De(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Yr(this._image),this},bringToBack:function(){return this._map&&Xr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=ae(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",o=this._image=r?this._url:be("img");if(pe(o,"leaflet-image-layer"),this._zoomAnimated&&pe(o,"leaflet-zoom-animated"),this.options.className&&pe(o,this.options.className),o.onselectstart=g,o.onmousemove=g,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(r){var o=this._map.getZoomScale(r.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;xr(this._image,u,o)},_reset:function(){var r=this._image,o=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();qe(r,o.min),r.style.width=u.x+"px",r.style.height=u.y+"px"},_updateOpacity:function(){Ft(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),wy=function(r,o,u){return new Oo(r,o,u)},kd=Oo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",o=this._image=r?this._url:be("video");if(pe(o,"leaflet-image-layer"),this._zoomAnimated&&pe(o,"leaflet-zoom-animated"),this.options.className&&pe(o,this.options.className),o.onselectstart=g,o.onmousemove=g,o.onloadeddata=l(this.fire,this,"load"),r){for(var u=o.getElementsByTagName("source"),d=[],p=0;p<u.length;p++)d.push(u[p].src);this._url=u.length>0?d:[o.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var _=0;_<this._url.length;_++){var C=be("source");C.src=this._url[_],o.appendChild(C)}}});function xy(r,o,u){return new kd(r,o,u)}var Pd=Oo.extend({_initImage:function(){var r=this._image=this._url;pe(r,"leaflet-image-layer"),this._zoomAnimated&&pe(r,"leaflet-zoom-animated"),this.options.className&&pe(r,this.options.className),r.onselectstart=g,r.onmousemove=g}});function by(r,o,u){return new Pd(r,o,u)}var vn=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,o){r&&(r instanceof le||x(r))?(this._latlng=ee(r),E(this,o)):(E(this,r),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Ft(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Ft(this._container,1),this.bringToFront(),this.options.interactive&&(pe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Ft(this._container,0),this._removeTimeout=setTimeout(l(De,void 0,this._container),200)):De(this._container),this.options.interactive&&(He(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=ee(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Yr(this._container),this},bringToBack:function(){return this._map&&Xr(this._container),this},_prepareOpen:function(r){var o=this._source;if(!o._map)return!1;if(o instanceof Cn){o=null;var u=this._source._layers;for(var d in u)if(u[d]._map){o=u[d];break}if(!o)return!1;this._source=o}if(!r)if(o.getCenter)r=o.getCenter();else if(o.getLatLng)r=o.getLatLng();else if(o.getBounds)r=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")r.innerHTML=o;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),o=F(this.options.offset),u=this._getAnchor();this._zoomAnimated?qe(this._container,r.add(u)):o=o.add(r).add(u);var d=this._containerBottom=-o.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=d+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});we.include({_initOverlay:function(r,o,u,d){var p=o;return p instanceof r||(p=new r(d).setContent(o)),u&&p.setLatLng(u),p}}),Xt.include({_initOverlay:function(r,o,u,d){var p=u;return p instanceof r?(E(p,d),p._source=this):(p=o&&!d?o:new r(d,this),p.setContent(u)),p}});var Lo=vn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,vn.prototype.openOn.call(this,r)},onAdd:function(r){vn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qn||this._source.on("preclick",Sr))},onRemove:function(r){vn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qn||this._source.off("preclick",Sr))},getEvents:function(){var r=vn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",o=this._container=be("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=be("div",r+"-content-wrapper",o);if(this._contentNode=be("div",r+"-content",u),rs(o),Rl(this._contentNode),de(o,"contextmenu",Sr),this._tipContainer=be("div",r+"-tip-container",o),this._tip=be("div",r+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=be("a",r+"-close-button",o);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',de(d,"click",function(p){at(p),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,o=r.style;o.width="",o.whiteSpace="nowrap";var u=r.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var d=r.offsetHeight,p=this.options.maxHeight,_="leaflet-popup-scrolled";p&&d>p?(o.height=p+"px",pe(r,_)):He(r,_),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),u=this._getAnchor();qe(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,o=parseInt(Xi(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,d=this._containerWidth,p=new M(this._containerLeft,-u-this._containerBottom);p._add(br(this._container));var _=r.layerPointToContainerPoint(p),C=F(this.options.autoPanPadding),j=F(this.options.autoPanPaddingTopLeft||C),N=F(this.options.autoPanPaddingBottomRight||C),D=r.getSize(),V=0,ce=0;_.x+d+N.x>D.x&&(V=_.x+d-D.x+N.x),_.x-V-j.x<0&&(V=_.x-j.x),_.y+u+N.y>D.y&&(ce=_.y+u-D.y+N.y),_.y-ce-j.y<0&&(ce=_.y-j.y),(V||ce)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([V,ce]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Sy=function(r,o){return new Lo(r,o)};we.mergeOptions({closePopupOnClick:!0}),we.include({openPopup:function(r,o,u){return this._initOverlay(Lo,r,o,u).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Xt.include({bindPopup:function(r,o){return this._popup=this._initOverlay(Lo,this._popup,r,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Cn||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Er(r);var o=r.layer||r.target;if(this._popup._source===o&&!(o instanceof qn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=o,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var jo=vn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){vn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){vn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=vn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",o=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=be("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var o,u,d=this._map,p=this._container,_=d.latLngToContainerPoint(d.getCenter()),C=d.layerPointToContainerPoint(r),j=this.options.direction,N=p.offsetWidth,D=p.offsetHeight,V=F(this.options.offset),ce=this._getAnchor();j==="top"?(o=N/2,u=D):j==="bottom"?(o=N/2,u=0):j==="center"?(o=N/2,u=D/2):j==="right"?(o=0,u=D/2):j==="left"?(o=N,u=D/2):C.x<_.x?(j="right",o=0,u=D/2):(j="left",o=N+(V.x+ce.x)*2,u=D/2),r=r.subtract(F(o,u,!0)).add(V).add(ce),He(p,"leaflet-tooltip-right"),He(p,"leaflet-tooltip-left"),He(p,"leaflet-tooltip-top"),He(p,"leaflet-tooltip-bottom"),pe(p,"leaflet-tooltip-"+j),qe(p,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Ft(this._container,r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(o)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ey=function(r,o){return new jo(r,o)};we.include({openTooltip:function(r,o,u){return this._initOverlay(jo,r,o,u).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Xt.include({bindTooltip:function(r,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(jo,this._tooltip,r,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var o=r?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Cn||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&(de(o,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),de(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var o=r.latlng,u,d;this._tooltip.options.sticky&&r.originalEvent&&(u=this._map.mouseEventToContainerPoint(r.originalEvent),d=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(o)}});var Cd=ti.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var o=r&&r.tagName==="DIV"?r:document.createElement("div"),u=this.options;if(u.html instanceof Element?(vo(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var d=F(u.bgPos);o.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function ky(r){return new Cd(r)}ti.Default=os;var as=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:te.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){E(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),De(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Yr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Xr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof M?r:new M(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var o=this.getPane().children,u=-r(-1/0,1/0),d=0,p=o.length,_;d<p;d++)_=o[d].style.zIndex,o[d]!==this._container&&_&&(u=r(u,+_));isFinite(u)&&(this.options.zIndex=u+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!te.ielt9){Ft(this._container,this.options.opacity);var r=+new Date,o=!1,u=!1;for(var d in this._tiles){var p=this._tiles[d];if(!(!p.current||!p.loaded)){var _=Math.min(1,(r-p.loaded)/200);Ft(p.el,_),_<1?o=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(K(this._fadeFrame),this._fadeFrame=oe(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,o=this.options.maxZoom;if(r!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===r?(this._levels[u].el.style.zIndex=o-Math.abs(r-u),this._onUpdateLevel(u)):(De(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var d=this._levels[r],p=this._map;return d||(d=this._levels[r]={},d.el=be("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=o,d.origin=p.project(p.unproject(p.getPixelOrigin()),r).round(),d.zoom=r,this._setZoomTransform(d,p.getCenter(),p.getZoom()),g(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var r,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)o=this._tiles[r],o.retain=o.current;for(r in this._tiles)if(o=this._tiles[r],o.current&&!o.active){var d=o.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var o in this._tiles)this._tiles[o].coords.z===r&&this._removeTile(o)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)De(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,o,u,d){var p=Math.floor(r/2),_=Math.floor(o/2),C=u-1,j=new M(+p,+_);j.z=+C;var N=this._tileCoordsToKey(j),D=this._tiles[N];return D&&D.active?(D.retain=!0,!0):(D&&D.loaded&&(D.retain=!0),C>d?this._retainParent(p,_,C,d):!1)},_retainChildren:function(r,o,u,d){for(var p=2*r;p<2*r+2;p++)for(var _=2*o;_<2*o+2;_++){var C=new M(p,_);C.z=u+1;var j=this._tileCoordsToKey(C),N=this._tiles[j];if(N&&N.active){N.retain=!0;continue}else N&&N.loaded&&(N.retain=!0);u+1<d&&this._retainChildren(p,_,u+1,d)}},_resetView:function(r){var o=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var o=this.options;return o.minNativeZoom!==void 0&&r<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<r?o.maxNativeZoom:r},_setView:function(r,o,u,d){var p=Math.round(o);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var _=this.options.updateWhenZooming&&p!==this._tileZoom;(!d||_)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(r),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(r,o)},_setZoomTransforms:function(r,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],r,o)},_setZoomTransform:function(r,o,u){var d=this._map.getZoomScale(u,r.zoom),p=r.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(o,u)).round();te.any3d?xr(r.el,p,d):qe(r.el,p)},_resetGrid:function(){var r=this._map,o=r.options.crs,u=this._tileSize=this.getTileSize(),d=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,o.wrapLng[0]],d).x/u.x),Math.ceil(r.project([0,o.wrapLng[1]],d).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([o.wrapLat[0],0],d).y/u.x),Math.ceil(r.project([o.wrapLat[1],0],d).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),d=o.getZoomScale(u,this._tileZoom),p=o.project(r,this._tileZoom).floor(),_=o.getSize().divideBy(d*2);return new ie(p.subtract(_),p.add(_))},_update:function(r){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(r===void 0&&(r=o.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(r),p=this._pxBoundsToTileRange(d),_=p.getCenter(),C=[],j=this.options.keepBuffer,N=new ie(p.getBottomLeft().subtract([j,-j]),p.getTopRight().add([j,-j]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var D in this._tiles){var V=this._tiles[D].coords;(V.z!==this._tileZoom||!N.contains(new M(V.x,V.y)))&&(this._tiles[D].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(r,u);return}for(var ce=p.min.y;ce<=p.max.y;ce++)for(var me=p.min.x;me<=p.max.x;me++){var _t=new M(me,ce);if(_t.z=this._tileZoom,!!this._isValidTile(_t)){var rt=this._tiles[this._tileCoordsToKey(_t)];rt?rt.current=!0:C.push(_t)}}if(C.sort(function(kt,si){return kt.distanceTo(_)-si.distanceTo(_)}),C.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Zt=document.createDocumentFragment();for(me=0;me<C.length;me++)this._addTile(C[me],Zt);this._level.el.appendChild(Zt)}}}},_isValidTile:function(r){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(r.x<u.min.x||r.x>u.max.x)||!o.wrapLat&&(r.y<u.min.y||r.y>u.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(r);return ae(this.options.bounds).overlaps(d)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var o=this._map,u=this.getTileSize(),d=r.scaleBy(u),p=d.add(u),_=o.unproject(d,r.z),C=o.unproject(p,r.z);return[_,C]},_tileCoordsToBounds:function(r){var o=this._tileCoordsToNwSe(r),u=new H(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var o=r.split(":"),u=new M(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(r){var o=this._tiles[r];o&&(De(o.el),delete this._tiles[r],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){pe(r,"leaflet-tile");var o=this.getTileSize();r.style.width=o.x+"px",r.style.height=o.y+"px",r.onselectstart=g,r.onmousemove=g,te.ielt9&&this.options.opacity<1&&Ft(r,this.options.opacity)},_addTile:function(r,o){var u=this._getTilePos(r),d=this._tileCoordsToKey(r),p=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(p),this.createTile.length<2&&oe(l(this._tileReady,this,r,null,p)),qe(p,u),this._tiles[d]={el:p,coords:r,current:!0},o.appendChild(p),this.fire("tileloadstart",{tile:p,coords:r})},_tileReady:function(r,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:r});var d=this._tileCoordsToKey(r);u=this._tiles[d],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Ft(u.el,0),K(this._fadeFrame),this._fadeFrame=oe(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(pe(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),te.ielt9||!this._map._fadeAnimated?oe(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var o=new M(this._wrapX?m(r.x,this._wrapX):r.x,this._wrapY?m(r.y,this._wrapY):r.y);return o.z=r.z,o},_pxBoundsToTileRange:function(r){var o=this.getTileSize();return new ie(r.min.unscaleBy(o).floor(),r.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Py(r){return new as(r)}var ii=as.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,o){this._url=r,o=E(this,o),o.detectRetina&&te.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,o){return this._url===r&&o===void 0&&(o=!0),this._url=r,o||this.redraw(),this},createTile:function(r,o){var u=document.createElement("img");return de(u,"load",l(this._tileOnLoad,this,o,u)),de(u,"error",l(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(r),u},getTileUrl:function(r){var o={r:te.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-r.y;this.options.tms&&(o.y=u),o["-y"]=u}return y(this._url,s(o,this.options))},_tileOnLoad:function(r,o){te.ielt9?setTimeout(l(r,this,null,o),0):r(null,o)},_tileOnError:function(r,o,u){var d=this.options.errorTileUrl;d&&o.getAttribute("src")!==d&&(o.src=d),r(u,o)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,d=this.options.zoomOffset;return u&&(r=o-r),r+d},_getSubdomain:function(r){var o=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var r,o;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(o=this._tiles[r].el,o.onload=g,o.onerror=g,!o.complete)){o.src=A;var u=this._tiles[r].coords;De(o),delete this._tiles[r],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(r){var o=this._tiles[r];if(o)return o.el.setAttribute("src",A),as.prototype._removeTile.call(this,r)},_tileReady:function(r,o,u){if(!(!this._map||u&&u.getAttribute("src")===A))return as.prototype._tileReady.call(this,r,o,u)}});function Td(r,o){return new ii(r,o)}var Od=ii.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,o){this._url=r;var u=s({},this.defaultWmsParams);for(var d in o)d in this.options||(u[d]=o[d]);o=E(this,o);var p=o.detectRetina&&te.retina?2:1,_=this.getTileSize();u.width=_.x*p,u.height=_.y*p,this.wmsParams=u},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,ii.prototype.onAdd.call(this,r)},getTileUrl:function(r){var o=this._tileCoordsToNwSe(r),u=this._crs,d=fe(u.project(o[0]),u.project(o[1])),p=d.min,_=d.max,C=(this._wmsVersion>=1.3&&this._crs===xd?[p.y,p.x,_.y,_.x]:[p.x,p.y,_.x,_.y]).join(","),j=ii.prototype.getTileUrl.call(this,r);return j+T(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+C},setParams:function(r,o){return s(this.wmsParams,r),o||this.redraw(),this}});function Cy(r,o){return new Od(r,o)}ii.WMS=Od,Td.wms=Cy;var Ln=Xt.extend({options:{padding:.1},initialize:function(r){E(this,r),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,o){var u=this._map.getZoomScale(o,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,o),_=d.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(r,o));te.any3d?xr(this._container,_,u):qe(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-r)).round();this._bounds=new ie(u,u.add(o.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ld=Ln.extend({options:{tolerance:0},getEvents:function(){var r=Ln.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ln.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");de(r,"mousemove",this._onMouseMove,this),de(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),de(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,De(this._container),Le(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var o in this._layers)r=this._layers[o],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ln.prototype._update.call(this);var r=this._bounds,o=this._container,u=r.getSize(),d=te.retina?2:1;qe(o,r.min),o.width=d*u.x,o.height=d*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",te.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Ln.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[h(r)]=r;var o=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var o=r._order,u=o.next,d=o.prev;u?u.prev=d:this._drawLast=d,d?d.next=u:this._drawFirst=u,delete r._order,delete this._layers[h(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var o=r.options.dashArray.split(/[, ]+/),u=[],d,p;for(p=0;p<o.length;p++){if(d=Number(o[p]),isNaN(d))return;u.push(d)}r.options._dashArray=u}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||oe(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var o=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(r._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(r._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var o=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)r=d.layer,(!o||r._pxBounds&&r._pxBounds.intersects(o))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,o){if(this._drawing){var u,d,p,_,C=r._parts,j=C.length,N=this._ctx;if(j){for(N.beginPath(),u=0;u<j;u++){for(d=0,p=C[u].length;d<p;d++)_=C[u][d],N[d?"lineTo":"moveTo"](_.x,_.y);o&&N.closePath()}this._fillStroke(N,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var o=r._point,u=this._ctx,d=Math.max(Math.round(r._radius),1),p=(Math.max(Math.round(r._radiusY),1)||d)/d;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(o.x,o.y/p,d,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,r)}},_fillStroke:function(r,o){var u=o.options;u.fill&&(r.globalAlpha=u.fillOpacity,r.fillStyle=u.fillColor||u.color,r.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(r.setLineDash&&r.setLineDash(o.options&&o.options._dashArray||[]),r.globalAlpha=u.opacity,r.lineWidth=u.weight,r.strokeStyle=u.color,r.lineCap=u.lineCap,r.lineJoin=u.lineJoin,r.stroke())},_onClick:function(r){for(var o=this._map.mouseEventToLayerPoint(r),u,d,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(o)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(u))&&(d=u);this._fireEvent(d?[d]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,o)}},_handleMouseOut:function(r){var o=this._hoveredLayer;o&&(He(this._container,"leaflet-interactive"),this._fireEvent([o],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,o){if(!this._mouseHoverThrottled){for(var u,d,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(o)&&(d=u);d!==this._hoveredLayer&&(this._handleMouseOut(r),d&&(pe(this._container,"leaflet-interactive"),this._fireEvent([d],r,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,o,u){this._map._fireDOMEvent(o,u||o.type,r)},_bringToFront:function(r){var o=r._order;if(o){var u=o.next,d=o.prev;if(u)u.prev=d;else return;d?d.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(r)}},_bringToBack:function(r){var o=r._order;if(o){var u=o.next,d=o.prev;if(d)d.next=u;else return;u?u.prev=d:d&&(this._drawLast=d),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(r)}}});function jd(r){return te.canvas?new Ld(r):null}var ls=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ty={_initContainer:function(){this._container=be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ln.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var o=r._container=ls("shape");pe(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",r._path=ls("path"),o.appendChild(r._path),this._updateStyle(r),this._layers[h(r)]=r},_addPath:function(r){var o=r._container;this._container.appendChild(o),r.options.interactive&&r.addInteractiveTarget(o)},_removePath:function(r){var o=r._container;De(o),r.removeInteractiveTarget(o),delete this._layers[h(r)]},_updateStyle:function(r){var o=r._stroke,u=r._fill,d=r.options,p=r._container;p.stroked=!!d.stroke,p.filled=!!d.fill,d.stroke?(o||(o=r._stroke=ls("stroke")),p.appendChild(o),o.weight=d.weight+"px",o.color=d.color,o.opacity=d.opacity,d.dashArray?o.dashStyle=x(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=d.lineCap.replace("butt","flat"),o.joinstyle=d.lineJoin):o&&(p.removeChild(o),r._stroke=null),d.fill?(u||(u=r._fill=ls("fill")),p.appendChild(u),u.color=d.fillColor||d.color,u.opacity=d.fillOpacity):u&&(p.removeChild(u),r._fill=null)},_updateCircle:function(r){var o=r._point.round(),u=Math.round(r._radius),d=Math.round(r._radiusY||u);this._setPath(r,r._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+d+" 0,"+65535*360)},_setPath:function(r,o){r._path.v=o},_bringToFront:function(r){Yr(r._container)},_bringToBack:function(r){Xr(r._container)}},No=te.vml?ls:Z,us=Ln.extend({_initContainer:function(){this._container=No("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=No("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){De(this._container),Le(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ln.prototype._update.call(this);var r=this._bounds,o=r.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),qe(u,r.min),u.setAttribute("viewBox",[r.min.x,r.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(r){var o=r._path=No("path");r.options.className&&pe(o,r.options.className),r.options.interactive&&pe(o,"leaflet-interactive"),this._updateStyle(r),this._layers[h(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){De(r._path),r.removeInteractiveTarget(r._path),delete this._layers[h(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var o=r._path,u=r.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(r,o){this._setPath(r,J(r._parts,o))},_updateCircle:function(r){var o=r._point,u=Math.max(Math.round(r._radius),1),d=Math.max(Math.round(r._radiusY),1)||u,p="a"+u+","+d+" 0 1,0 ",_=r._empty()?"M0 0":"M"+(o.x-u)+","+o.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(r,_)},_setPath:function(r,o){r._path.setAttribute("d",o)},_bringToFront:function(r){Yr(r._path)},_bringToBack:function(r){Xr(r._path)}});te.vml&&us.include(Ty);function Nd(r){return te.svg||te.vml?new us(r):null}we.include({getRenderer:function(r){var o=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var o=this._paneRenderers[r];return o===void 0&&(o=this._createRenderer({pane:r}),this._paneRenderers[r]=o),o},_createRenderer:function(r){return this.options.preferCanvas&&jd(r)||Nd(r)}});var Id=ni.extend({initialize:function(r,o){ni.prototype.initialize.call(this,this._boundsToLatLngs(r),o)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=ae(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Oy(r,o){return new Id(r,o)}us.create=No,us.pointsToPath=J,On.geometryToLayer=ko,On.coordsToLatLng=Wl,On.coordsToLatLngs=Po,On.latLngToCoords=Zl,On.latLngsToCoords=Co,On.getFeature=ri,On.asFeature=To,we.mergeOptions({boxZoom:!0});var Rd=gn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){de(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){De(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),es(),Pl(),this._startPoint=this._map.mouseEventToContainerPoint(r),de(document,{contextmenu:Er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=be("div","leaflet-zoom-box",this._container),pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var o=new ie(this._point,this._startPoint),u=o.getSize();qe(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(De(this._box),He(this._container,"leaflet-crosshair")),ts(),Cl(),Le(document,{contextmenu:Er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});we.addInitHook("addHandler","boxZoom",Rd),we.mergeOptions({doubleClickZoom:!0});var Ad=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var o=this._map,u=o.getZoom(),d=o.options.zoomDelta,p=r.originalEvent.shiftKey?u-d:u+d;o.options.doubleClickZoom==="center"?o.setZoom(p):o.setZoomAround(r.containerPoint,p)}});we.addInitHook("addHandler","doubleClickZoom",Ad),we.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Md=gn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Vn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){He(this._map._container,"leaflet-grab"),He(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ae(this._map.options.maxBounds);this._offsetLimit=fe(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,o){return r-(r-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;r.x<o.min.x&&(r.x=this._viscousLimit(r.x,o.min.x)),r.y<o.min.y&&(r.y=this._viscousLimit(r.y,o.min.y)),r.x>o.max.x&&(r.x=this._viscousLimit(r.x,o.max.x)),r.y>o.max.y&&(r.y=this._viscousLimit(r.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,o=Math.round(r/2),u=this._initialWorldOffset,d=this._draggable._newPos.x,p=(d-o+u)%r+o-u,_=(d+o+u)%r-o-u,C=Math.abs(p+u)<Math.abs(_+u)?p:_;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=C},_onDragEnd:function(r){var o=this._map,u=o.options,d=!u.inertia||r.noInertia||this._times.length<2;if(o.fire("dragend",r),d)o.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),_=(this._lastTime-this._times[0])/1e3,C=u.easeLinearity,j=p.multiplyBy(C/_),N=j.distanceTo([0,0]),D=Math.min(u.inertiaMaxSpeed,N),V=j.multiplyBy(D/N),ce=D/(u.inertiaDeceleration*C),me=V.multiplyBy(-ce/2).round();!me.x&&!me.y?o.fire("moveend"):(me=o._limitOffset(me,o.options.maxBounds),oe(function(){o.panBy(me,{duration:ce,easeLinearity:C,noMoveStart:!0,animate:!0})}))}}});we.addInitHook("addHandler","dragging",Md),we.mergeOptions({keyboard:!0,keyboardPanDelta:80});var zd=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),de(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Le(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,o=document.documentElement,u=r.scrollTop||o.scrollTop,d=r.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(d,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var o=this._panKeys={},u=this.keyCodes,d,p;for(d=0,p=u.left.length;d<p;d++)o[u.left[d]]=[-1*r,0];for(d=0,p=u.right.length;d<p;d++)o[u.right[d]]=[r,0];for(d=0,p=u.down.length;d<p;d++)o[u.down[d]]=[0,r];for(d=0,p=u.up.length;d<p;d++)o[u.up[d]]=[0,-1*r]},_setZoomDelta:function(r){var o=this._zoomKeys={},u=this.keyCodes,d,p;for(d=0,p=u.zoomIn.length;d<p;d++)o[u.zoomIn[d]]=r;for(d=0,p=u.zoomOut.length;d<p;d++)o[u.zoomOut[d]]=-r},_addHooks:function(){de(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=r.keyCode,u=this._map,d;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(d=this._panKeys[o],r.shiftKey&&(d=F(d).multiplyBy(3)),u.options.maxBounds&&(d=u._limitOffset(F(d),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(d)));u.panTo(p)}else u.panBy(d)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;Er(r)}}});we.addInitHook("addHandler","keyboard",zd),we.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Dd=gn.extend({addHooks:function(){de(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Le(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var o=ld(r),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var d=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),d),Er(r)},_performZoom:function(){var r=this._map,o=r.getZoom(),u=this._map.options.zoomSnap||0;r._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,_=u?Math.ceil(p/u)*u:p,C=r._limitZoom(o+(this._delta>0?_:-_))-o;this._delta=0,this._startTime=null,C&&(r.options.scrollWheelZoom==="center"?r.setZoom(o+C):r.setZoomAround(this._lastMousePos,o+C))}});we.addInitHook("addHandler","scrollWheelZoom",Dd);var Ly=600;we.mergeOptions({tapHold:te.touchNative&&te.safari&&te.mobile,tapTolerance:15});var Bd=gn.extend({addHooks:function(){de(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var o=r.touches[0];this._startPos=this._newPos=new M(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(de(document,"touchend",at),de(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Ly),de(document,"touchend touchcancel contextmenu",this._cancel,this),de(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Le(document,"touchend",at),Le(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Le(document,"touchend touchcancel contextmenu",this._cancel,this),Le(document,"touchmove",this._onMove,this)},_onMove:function(r){var o=r.touches[0];this._newPos=new M(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,o){var u=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});we.addInitHook("addHandler","tapHold",Bd),we.mergeOptions({touchZoom:te.touch,bounceAtZoomLimits:!0});var Ud=gn.extend({addHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),de(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){He(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var o=this._map;if(!(!r.touches||r.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(r.touches[0]),d=o.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(d)._divideBy(2))),this._startDist=u.distanceTo(d),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),de(document,"touchmove",this._onTouchMove,this),de(document,"touchend touchcancel",this._onTouchEnd,this),at(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(r.touches[0]),d=o.mouseEventToContainerPoint(r.touches[1]),p=u.distanceTo(d)/this._startDist;if(this._zoom=o.getScaleZoom(p,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&p<1||this._zoom>o.getMaxZoom()&&p>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var _=u._add(d)._divideBy(2)._subtract(this._centerPoint);if(p===1&&_.x===0&&_.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(_),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var C=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=oe(C,this,!0),at(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),Le(document,"touchmove",this._onTouchMove,this),Le(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});we.addInitHook("addHandler","touchZoom",Ud),we.BoxZoom=Rd,we.DoubleClickZoom=Ad,we.Drag=Md,we.Keyboard=zd,we.ScrollWheelZoom=Dd,we.TapHold=Bd,we.TouchZoom=Ud,n.Bounds=ie,n.Browser=te,n.CRS=Ie,n.Canvas=Ld,n.Circle=Fl,n.CircleMarker=Eo,n.Class=Te,n.Control=Yt,n.DivIcon=Cd,n.DivOverlay=vn,n.DomEvent=K_,n.DomUtil=V_,n.Draggable=Vn,n.Evented=We,n.FeatureGroup=Cn,n.GeoJSON=On,n.GridLayer=as,n.Handler=gn,n.Icon=ti,n.ImageOverlay=Oo,n.LatLng=le,n.LatLngBounds=H,n.Layer=Xt,n.LayerGroup=ei,n.LineUtil=ay,n.Map=we,n.Marker=So,n.Mixin=ty,n.Path=qn,n.Point=M,n.PolyUtil=ny,n.Polygon=ni,n.Polyline=Tn,n.Popup=Lo,n.PosAnimation=ud,n.Projection=ly,n.Rectangle=Id,n.Renderer=Ln,n.SVG=us,n.SVGOverlay=Pd,n.TileLayer=ii,n.Tooltip=jo,n.Transformation=dn,n.Util=Ce,n.VideoOverlay=kd,n.bind=l,n.bounds=fe,n.canvas=jd,n.circle=gy,n.circleMarker=my,n.control=is,n.divIcon=ky,n.extend=s,n.featureGroup=dy,n.geoJSON=Ed,n.geoJson=yy,n.gridLayer=Py,n.icon=fy,n.imageOverlay=wy,n.latLng=ee,n.latLngBounds=ae,n.layerGroup=hy,n.map=G_,n.marker=py,n.point=F,n.polygon=_y,n.polyline=vy,n.popup=Sy,n.rectangle=Oy,n.setOptions=E,n.stamp=h,n.svg=Nd,n.svgOverlay=by,n.tileLayer=Td,n.tooltip=Ey,n.transformation=Ut,n.version=i,n.videoOverlay=xy;var jy=window.L;n.noConflict=function(){return window.L=jy,this},window.L=n})})(Bc,Bc.exports);var vl=Bc.exports;function b_(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function S_(t,e){return e==null?function(i,s){const a=P.useRef();return a.current||(a.current=t(i,s)),a}:function(i,s){const a=P.useRef();a.current||(a.current=t(i,s));const l=P.useRef(i),{instance:c}=a.current;return P.useEffect(function(){l.current!==i&&(e(c,i,l.current),l.current=i)},[c,i,s]),a}}function ek(t,e){P.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function E_(t){return function(n){const i=w_(),s=t(x_(n,i),i);return qE(i.map,n.attribution),XE(s.current,n.eventHandlers),ek(s.current,i),s}}function tk(t,e){const n=S_(t,e),i=E_(n);return QE(i)}function nk(t,e){const n=S_(t,e),i=E_(n);return YE(i)}function rk(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function qh(){return w_().map}function k_(t){const e=qh();return P.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Uc(){return Uc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Uc.apply(this,arguments)}function ik({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:a,placeholder:l,style:c,whenReady:h,zoom:f,...m},g){const[w]=P.useState({className:s,id:a,style:c}),[b,k]=P.useState(null);P.useImperativeHandle(g,()=>(b==null?void 0:b.map)??null,[b]);const E=P.useCallback(S=>{if(S!==null&&b===null){const y=new vl.Map(S,m);n!=null&&f!=null?y.setView(n,f):t!=null&&y.fitBounds(t,e),h!=null&&y.whenReady(h),k(GE(y))}},[]);P.useEffect(()=>()=>{b==null||b.map.remove()},[b]);const T=b?zs.createElement(y_,{value:b},i):l??null;return zs.createElement("div",Uc({},w,{ref:E}),T)}const P_=P.forwardRef(ik),sk=tk(function({position:e,...n},i){const s=new vl.Marker(e,n);return b_(s,JE(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),C_=nk(function({url:e,...n},i){const s=new vl.TileLayer(e,x_(n,i));return b_(s,i)},function(e,n,i){rk(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),ok="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",ak="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",lk=new vl.Icon({iconUrl:ok,shadowUrl:ak,iconSize:[25,41],iconAnchor:[12,41]});function uk({center:t,zoom:e=13}){const n=qh();return P.useEffect(()=>{n.setView(t,e)},[n,t,e]),null}function ck({position:t,onLocationSelect:e}){const[n,i]=P.useState(t);return P.useEffect(()=>{i(t)},[t]),k_({click(s){const{lat:a,lng:l}=s.latlng;i([a,l]),e(a,l)}}),v.jsx(sk,{position:n,icon:lk})}function hk({latitude:t,longitude:e,onLocationSelect:n,height:i="400px",initialSearchQuery:s,externalSearchQuery:a,syncSearchQuery:l,onLocationNameUpdate:c}){const[h,f]=P.useState(s||""),[m,g]=P.useState([]),[w,b]=P.useState(!1),[k,E]=P.useState(!1),[T,S]=P.useState([t,e]),y=P.useRef();P.useEffect(()=>{S([t,e])},[t,e]),P.useEffect(()=>{l!==void 0&&f(l)},[l]);const x=P.useCallback(async I=>{if(!I.trim()){g([]),E(!1);return}b(!0);try{const B=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(I)}&limit=5`,{headers:{"User-Agent":"USKSocial/1.0"}});if(B.ok){const U=await B.json();g(U),E(!0)}else console.error("Geocoding failed:",B.statusText),g([])}catch(B){console.error("Error searching location:",B),g([])}finally{b(!1)}},[]);P.useEffect(()=>{a&&a.trim()&&(f(a),x(a))},[a,x]);const O=I=>{f(I),y.current&&clearTimeout(y.current),I.trim()?y.current=setTimeout(()=>{x(I)},500):(g([]),E(!1))},A=I=>{const B=parseFloat(I.lat),U=parseFloat(I.lon);S([B,U]),f(I.display_name),E(!1),g([]),n(B,U),c&&c(I.display_name)},z=P.useCallback(I=>{I.key==="Enter"&&h.trim()&&(I.preventDefault(),x(h))},[h,x]);return v.jsxs("div",{className:"w-full border border-gray-300 rounded-md overflow-hidden",style:{height:i},children:[v.jsxs("div",{className:"relative bg-white border-b border-gray-300",children:[v.jsxs("div",{className:"px-3 py-2",children:[v.jsx("input",{type:"text",value:h,onChange:I=>O(I.target.value),onKeyPress:z,onFocus:()=>h&&m.length>0&&E(!0),placeholder:"Search for a location...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900 text-sm"}),w&&v.jsx("div",{className:"absolute right-6 top-1/2 transform -translate-y-1/2",children:v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700"})})]}),k&&m.length>0&&v.jsx("div",{className:"absolute z-[1000] w-full bg-white border-t border-gray-300 max-h-48 overflow-y-auto shadow-lg",children:m.map(I=>v.jsx("button",{type:"button",onClick:()=>A(I),className:"w-full text-left px-4 py-2 hover:bg-gray-100 border-b border-gray-200 last:border-b-0 text-sm text-gray-700",children:v.jsx("div",{className:"font-medium",children:I.display_name})},I.place_id))})]}),v.jsxs(P_,{center:T,zoom:13,style:{height:"calc(100% - 80px)",width:"100%"},scrollWheelZoom:!0,className:"map-picker",children:[v.jsx(uk,{center:T,zoom:13}),v.jsx(C_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',className:"map-tiles-minimal"}),v.jsx(ck,{position:T,onLocationSelect:n})]}),v.jsx("div",{className:"bg-gray-100 px-3 py-2 text-sm text-gray-600 border-t border-gray-300",children:"Click on the map to select location"})]})}function dk({onSuccess:t,onCancel:e}){const{profile:n}=gl(),{selectedGroup:i}=fl(),[s,a]=P.useState(""),[l,c]=P.useState(""),[h,f]=P.useState(""),[m,g]=P.useState(6.2476),[w,b]=P.useState(-75.5658),[k,E]=P.useState(""),[T,S]=P.useState("Medelln"),[y,x]=P.useState("Colombia"),[O,A]=P.useState(null),[z,I]=P.useState(!1),[B,U]=P.useState(""),G=(K,Ce)=>{g(K),b(Ce),U("")},oe=async K=>{var Ce;if(K.preventDefault(),A(null),!n){A("Por favor configura un nombre de usuario primero (usa la caja de nombre de usuario en la esquina superior derecha)");return}if(!i){A("Por favor selecciona un grupo primero");return}if(!s.trim()){A("Por favor ingresa un ttulo para el evento");return}if(!m||!w||isNaN(m)||isNaN(w)){A("Por favor selecciona una ubicacin en el mapa");return}I(!0);try{console.log("[EventCreate]  Creating event..."),console.log("[EventCreate] Profile ID:",n.id),console.log("[EventCreate] Title:",s),console.log("[EventCreate] Coordinates:",m,w),console.log("[EventCreate] Location:",k||"none"),console.log("[EventCreate] City/Country:",T,y);const Te={title:s,description:l||null,event_date:h||null,latitude:m,longitude:w,location_name:k||null,city:T||null,country:y||null,group_id:i.id,created_by:n.id};console.log("[EventCreate]  Inserting event record..."),console.log("[EventCreate] Event data:",Te);const{data:Ye,error:ye}=await Se.from("events").insert(Te).select();if(ye)throw console.error("[EventCreate]  Event insert failed:",ye),console.error("[EventCreate] Error details:",{message:ye.message,code:ye.code,details:ye.details,hint:ye.hint}),ye.code==="23503"||ye.message.includes("foreign key constraint")?new Error("Tu perfil no est configurado correctamente. Por favor completa la configuracin de tu perfil e intenta de nuevo."):ye;if(!Ye||Ye.length===0)throw console.error("[EventCreate]  Event was not created - no data returned"),new Error("El evento no fue creado. Por favor verifica los permisos de la base de datos.");console.log("[EventCreate]  Event created successfully!"),console.log("[EventCreate] Event ID:",(Ce=Ye[0])==null?void 0:Ce.id),t==null||t()}catch(Te){console.error("[EventCreate]  Event creation failed with exception:",Te);const Ye=Te.message||Te.error_description||"Error al crear el evento. Por favor revisa la consola para ms detalles.";console.error("[EventCreate] Error message:",Ye),A(Ye)}finally{I(!1)}};return v.jsxs("div",{className:"w-full",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Crear Evento"}),v.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[O&&v.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:O}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Ttulo del Evento ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{id:"title",type:"text",value:s,onChange:K=>a(K.target.value),required:!0,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Encuentro de Urban Sketching"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),v.jsx("textarea",{id:"description",value:l,onChange:K=>c(K.target.value),rows:3,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Cuntanos sobre el evento..."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"eventDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha del Evento"}),v.jsx("input",{id:"eventDate",type:"date",value:h,onChange:K=>f(K.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"locationName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Lugar"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{id:"locationName",type:"text",value:k,onChange:K=>E(K.target.value),className:"flex-1 px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"La Candelaria",onKeyPress:K=>{K.key==="Enter"&&k.trim()&&(K.preventDefault(),U(k))}}),v.jsx("button",{type:"button",onClick:()=>{k.trim()&&U(k)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors whitespace-nowrap",title:"Buscar ubicacin en el mapa",children:" Buscar"})]}),v.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Ingresa un nombre de lugar y haz clic en Buscar para encontrarlo en el mapa"})]}),v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ubicacin ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx(hk,{latitude:m,longitude:w,onLocationSelect:G,height:"300px",externalSearchQuery:B,syncSearchQuery:k,onLocationNameUpdate:E}),v.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Seleccionado: ",m.toFixed(4),", ",w.toFixed(4)]})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad"}),v.jsx("input",{id:"city",type:"text",value:T,onChange:K=>S(K.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Medelln"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pas"}),v.jsx("input",{id:"country",type:"text",value:y,onChange:K=>x(K.target.value),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"Colombia"})]})]}),v.jsxs("div",{className:"flex space-x-4",children:[e&&v.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Cancelar"}),v.jsx("button",{type:"submit",disabled:z,className:"flex-1 bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:z?"Creando...":"Crear Evento"})]})]})]})}function Kh({sketch:t,onClick:e}){return v.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:e,children:[v.jsx("div",{className:"aspect-square overflow-hidden bg-gray-200",children:v.jsx("img",{src:t.thumbnail_url||t.image_url,alt:t.title,className:"w-full h-full object-cover"})}),v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"font-semibold text-gray-800 mb-1 truncate",children:t.title}),t.profiles&&v.jsxs(Rn,{to:`/profile/${t.profiles.username}`,onClick:n=>n.stopPropagation(),className:"text-sm text-gray-600 hover:text-blue-600",children:["@",t.profiles.username]}),t.location_name&&v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.location_name}),v.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(t.sketch_date).toLocaleDateString()})]})]})}function _l({sketch:t,onClose:e}){var l,c;const{profile:n}=gl(),i=Vi(),s=(n==null?void 0:n.id)===t.user_id,a=()=>{t.latitude&&t.longitude&&(i(`/map?lat=${t.latitude}&lng=${t.longitude}&zoom=15`),e())};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"relative",children:[v.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-70 z-10",children:""}),v.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-auto"})]}),v.jsxs("div",{className:"p-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:t.title}),t.description&&v.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),v.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[((l=t.profiles)==null?void 0:l.avatar_url)&&v.jsx("img",{src:t.profiles.avatar_url,alt:t.profiles.username,className:"w-10 h-10 rounded-full"}),v.jsxs("div",{children:[(c=t.profiles)!=null&&c.username?v.jsx(Rn,{to:`/profile/${t.profiles.username}`,onClick:h=>{h.stopPropagation(),e()},className:"font-medium text-gray-800 hover:text-blue-600",children:t.profiles.username}):v.jsx("p",{className:"font-medium text-gray-800",children:"Unknown"}),v.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.uploaded_at).toLocaleDateString()})]})]}),(t.location_name||t.latitude&&t.longitude)&&v.jsx("div",{className:"mb-4",children:v.jsxs("p",{className:"text-sm text-gray-600",children:[" ",t.location_name||`${t.latitude}, ${t.longitude}`]})}),v.jsxs("div",{className:"flex space-x-4",children:[t.latitude&&t.longitude&&v.jsx("button",{onClick:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Ver en Mapa"}),s&&v.jsx(v.Fragment,{})]})]})]})})}function fk({event:t,onClose:e}){const{sketches:n,loading:i}=ml(),[s,a]=P.useState(null),l=n.filter(c=>c.event_id===t.id);return v.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:c=>{c.target===c.currentTarget&&e()},children:[v.jsxs("div",{className:"bg-gray-50 rounded-lg max-w-6xl w-full my-12 max-h-[90vh] overflow-y-auto shadow-lg",onClick:c=>c.stopPropagation(),children:[v.jsxs("div",{className:"sticky top-0 bg-gray-50 border-b border-gray-300 p-4 flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:t.title}),t.location_name&&v.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" ",t.location_name]})]}),v.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),v.jsx("div",{className:"p-6",children:i?v.jsx("div",{className:"text-center py-12",children:"Cargando sketches..."}):l.length===0?v.jsx("div",{className:"text-center py-12 text-gray-500",children:"No hay sketches subidos para este encuentro an."}):v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:l.map(c=>v.jsx(Kh,{sketch:c,onClick:()=>a(c)},c.id))})})]}),s&&v.jsx(_l,{sketch:s,onClose:()=>a(null)})]})}function pk(t){if(t.includes("-")){const[n,i,s]=t.split("T")[0].split("-").map(Number);return new Date(n,i-1,s).toLocaleDateString()}const e=new Date(t);return new Date(e.getFullYear(),e.getMonth(),e.getDate()).toLocaleDateString()}function mk(){const{events:t}=v_(),{sketches:e}=ml(),{user:n}=pl(),i=Vi(),[s,a]=P.useState(!1),[l,c]=P.useState(!1),[h,f]=P.useState(void 0),[m,g]=P.useState(null),[w,b]=P.useState(null),k=P.useRef(null),E=P.useRef(null),T=t.slice(0,5),S=e.slice(0,12),y=P.useMemo(()=>{const U=new Map;return e.forEach(G=>{G.event_id&&U.set(G.event_id,(U.get(G.event_id)||0)+1)}),U},[e]),x=250,O=75,A=65,z=(U,G)=>{const oe=k.current;if(!oe)return;const K=oe.getBoundingClientRect(),Ce=K.left+K.width/2,Te=K.top+K.height/2,Ye=U-Ce,ye=G-Te,We=Math.sqrt(Ye*Ye+ye*ye),M=Math.sqrt(K.width*K.width+K.height*K.height)/2+80,re=Math.max(0,Math.min(1,1-We/M)),F=re*40,ie=Math.min(90,O+re*15),fe=Math.min(80,A+re*15),ae=`hsl(${(x+F)%360}, ${ie}%, ${fe}%)`,le=re*30,ee=1+re*.1;oe.style.backgroundColor=ae,oe.style.transform=`scale(${ee})`,oe.style.boxShadow=`0 0 ${le}px ${ae}, 0 4px 20px rgba(0, 0, 0, 0.3)`},I=U=>{z(U.clientX,U.clientY)},B=()=>{const U=k.current;if(!U)return;const G=`hsl(${x}, ${O}%, ${A}%)`;U.style.backgroundColor=G,U.style.transform="scale(1)",U.style.boxShadow="0 4px 20px rgba(0, 0, 0, 0.3)"};return v.jsxs("div",{className:"min-h-screen",children:[v.jsx("div",{ref:E,className:"bg-gray-200 border-b border-gray-300 py-20",onMouseMove:I,onMouseLeave:B,children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[v.jsx("h1",{className:"text-5xl font-bold mb-4 text-gray-800",children:"Bienvenido a USK Social"}),v.jsxs("p",{className:"text-xl mb-8 text-gray-600",children:["Un espacio interactivo para compartir y disfrutar nuestras creaciones alrededor del mundo.",v.jsx("br",{}),"Por ahora solo disponible para USK Medelln."]}),v.jsxs("div",{className:"space-x-4",children:[v.jsx("button",{ref:k,onClick:()=>{if(!n){i("/auth");return}f(void 0),c(!0)},className:"text-white px-8 py-4 rounded-lg text-lg font-semibold transition-all duration-200 shadow-lg relative overflow-hidden",style:{backgroundColor:`hsl(${x}, ${O}%, ${A}%)`},children:v.jsx("span",{className:"relative z-10",children:"Subir un Sketch"})}),v.jsx("button",{onClick:()=>i("/map"),className:"bg-gray-700 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-800 transition-colors shadow-md",children:"Ir al Mapa"})]})]})}),s&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:U=>{U.target===U.currentTarget&&a(!1)},children:v.jsxs("div",{className:"bg-gray-50 rounded-lg max-w-2xl w-full my-12 max-h-[90vh] overflow-y-auto shadow-lg",onClick:U=>U.stopPropagation(),children:[v.jsxs("div",{className:"p-4 border-b border-gray-300 flex justify-between items-center",children:[v.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Crear Evento"}),v.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none","aria-label":"Cerrar",children:""})]}),v.jsx("div",{className:"p-6",children:v.jsx(dk,{onSuccess:()=>{a(!1),window.location.reload()},onCancel:()=>a(!1)})})]})}),l&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:U=>{U.target===U.currentTarget&&c(!1)},children:v.jsxs("div",{className:"bg-gray-50 rounded-lg max-w-2xl w-full my-12 max-h-[90vh] overflow-y-auto shadow-lg",onClick:U=>U.stopPropagation(),children:[v.jsxs("div",{className:"p-4 border-b border-gray-300 flex justify-between items-center",children:[v.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Subir Sketch"}),v.jsx("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none","aria-label":"Cerrar",children:""})]}),v.jsx("div",{className:"p-6",children:v.jsx(VE,{initialEventId:h,onSuccess:()=>{c(!1),f(void 0),window.location.reload()},onCancel:()=>{c(!1),f(void 0)}})})]})}),v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[S.length>0&&v.jsxs("section",{className:"mb-12",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Sketches Recientes"}),v.jsx(Rn,{to:"/map",className:"text-gray-700 hover:text-gray-900 font-medium",children:"Ver todos en el Mapa "})]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:S.map(U=>v.jsx(Kh,{sketch:U,onClick:()=>g(U)},U.id))})]}),T.length>0&&v.jsxs("section",{children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Encuentros Destacados"}),v.jsx("button",{onClick:()=>{if(!n){i("/auth");return}a(!0)},className:"bg-gray-700 text-white px-6 py-2 rounded-lg text-sm font-semibold hover:bg-gray-800 transition-colors shadow-md",children:"Crear Evento"})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(U=>{const G=y.get(U.id)||0;return v.jsxs("div",{className:"bg-gray-100 border border-gray-300 rounded-lg p-6 hover:bg-gray-200 transition-colors cursor-pointer",onClick:()=>b(U),children:[v.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:[U.title,G>0&&v.jsxs("span",{className:"text-base font-normal text-gray-600 ml-2",children:["(",G,")"]})]}),U.description&&v.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:U.description}),U.location_name&&v.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[" ",U.location_name]}),U.event_date&&v.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[" ",pk(U.event_date)]}),v.jsxs("div",{className:"flex gap-2 mt-4",children:[v.jsx("button",{onClick:oe=>{if(oe.stopPropagation(),!n){i("/auth");return}f(U.id),c(!0)},className:"flex-1 text-white px-4 py-2 rounded-md text-sm font-semibold transition-all duration-200 shadow-lg relative overflow-hidden hover:scale-105",style:{backgroundColor:`hsl(${x}, ${O}%, ${A}%)`},children:v.jsx("span",{className:"relative z-10",children:"Subir Sketch"})}),v.jsx("button",{onClick:oe=>{oe.stopPropagation(),i(`/map?lat=${U.latitude}&lng=${U.longitude}&zoom=15`)},className:"flex-1 bg-gray-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-600 transition-colors",children:"Ver en Mapa"})]})]},U.id)})})]})]}),m&&v.jsx(_l,{sketch:m,onClose:()=>g(null)}),w&&v.jsx(fk,{event:w,onClose:()=>b(null)})]})}function gk({onMapMove:t,onMapZoom:e,externalCenter:n,externalZoom:i,onMapReady:s}){const a=qh();return P.useEffect(()=>{s(a)},[a,s]),k_({moveend(){const l=a.getCenter();t([l.lat,l.lng])},zoomend(){e(a.getZoom())}}),P.useEffect(()=>{if(n&&i){const l=a.getCenter(),c=a.getZoom(),h=Math.abs(l.lat-n[0])>1e-4||Math.abs(l.lng-n[1])>1e-4,f=Math.abs(c-i)>.1;(h||f)&&a.setView(n,i,{animate:!0})}},[a,n,i]),P.useEffect(()=>{const l=a.getCenter();t([l.lat,l.lng]),e(a.getZoom())},[a,t,e]),null}function vk({sketches:t,initialCenter:e=[6.2476,-75.5658],initialZoom:n=12,onSketchClick:i}){var Ut;const s=P.useRef(null),a=P.useRef(null),[l,c]=P.useState(e),[h,f]=P.useState(n),[m,g]=P.useState(new Map),[w,b]=P.useState(null),[k,E]=P.useState(null),[T,S]=P.useState(null),[y,x]=P.useState(null),[O,A]=P.useState(new Map),z=P.useRef(new Map),I=P.useRef(),B=P.useRef(null),U=P.useRef(0),G=P.useRef(0),oe=P.useRef(new Map);P.useEffect(()=>{(async()=>{const W=new Set;if(t.forEach(J=>{J.event_id&&W.add(J.event_id)}),W.size===0)return;const{data:Z}=await Se.from("events").select("*").in("id",Array.from(W));if(Z){const J=new Map;Z.forEach(ue=>J.set(ue.id,ue)),g(J)}})()},[t]),P.useEffect(()=>{const R=new URLSearchParams(window.location.search),W=R.get("lat"),Z=R.get("lng"),J=R.get("zoom");W&&Z&&(c([parseFloat(W),parseFloat(Z)]),J&&f(parseInt(J)))},[]);const K=P.useCallback(R=>{c(R)},[]),Ce=P.useCallback(R=>{f(R)},[]),Te=P.useCallback(R=>{B.current=R;const W=s.current;if(W){const Z=R.getContainer(),J=Z.getBoundingClientRect();W.width=J.width,W.height=J.height,W.style.width=J.width+"px",W.style.height=J.height+"px",R.on("resize",()=>{const ue=Z.getBoundingClientRect();W.width=ue.width,W.height=ue.height,W.style.width=ue.width+"px",W.style.height=ue.height+"px"})}},[]),Ye=P.useCallback((R,W)=>{const Z=B.current;if(!Z)return[-1e3,-1e3];try{const J={lat:R,lng:W},ue=Z.latLngToContainerPoint(J),Y=ue.x,ge=ue.y;return[Y,ge]}catch(J){return console.warn("Error converting lat/lng to pixel:",J),[-1e3,-1e3]}},[]),ye=P.useCallback(R=>{let W=0;for(let Y=0;Y<R.length;Y++)W=R.charCodeAt(Y)+((W<<5)-W);const Z=(W%360+360)%360,J=60+W%30,ue=65+W%15;return`hsl(${Z}, ${J}%, ${ue}%)`},[]),We=P.useCallback(()=>{const R=new Map;if(t.forEach(se=>{se.event_id&&se.latitude&&se.longitude&&(R.has(se.event_id)||R.set(se.event_id,[]),R.get(se.event_id).push(se))}),!s.current)return[];const Z=[];R.forEach((se,ke)=>{const ve=m.get(ke);if(!ve||!ve.latitude||!ve.longitude)return;const[Oe,Ee]=Ye(ve.latitude,ve.longitude);if(Oe===-1e3&&Ee===-1e3)return;const nt=20+Math.min(se.length*3,40);Z.push({eventId:ke,event:ve,sketches:se,x:Oe,y:Ee,radius:nt,mergedCount:1,color:ye(ke)})});const J=80,ue=Math.pow(2,12-h),Y=J*Math.max(.5,Math.min(2,ue)),ge=[],X=new Set;return Z.forEach((se,ke)=>{if(X.has(se.eventId))return;const ve=[se];if(Z.forEach((Oe,Ee)=>{if(ke!==Ee&&!X.has(Oe.eventId)){const nt=se.x-Oe.x,jt=se.y-Oe.y;Math.sqrt(nt*nt+jt*jt)<Y&&(ve.push(Oe),X.add(Oe.eventId))}}),ve.length>1){const Oe=ve.reduce((ze,mt)=>ze+mt.sketches.length,0),Ee=ve.reduce((ze,mt)=>ze+mt.x,0)/ve.length,nt=ve.reduce((ze,mt)=>ze+mt.y,0)/ve.length,jt=25+Math.min(Oe*2,50);ge.push({eventId:se.eventId,event:se.event,sketches:ve.flatMap(ze=>ze.sketches),x:Ee,y:nt,radius:jt,mergedCount:ve.length,color:se.color,mergedEvents:ve.map(ze=>ze.event),mergedEventIds:ve.map(ze=>ze.eventId)})}else ge.push(se);X.add(se.eventId)}),ge},[t,m,Ye,ye,h]),M=P.useCallback((R,W)=>{const Z=s.current;if(!Z)return null;const J=Z.getBoundingClientRect(),ue=R-J.left,Y=W-J.top,ge=We();for(const X of ge){const se=X.x-ue,ke=X.y-Y;if(Math.sqrt(se*se+ke*ke)<X.radius)return{blob:X}}if(k){const X=ge.find(se=>se.eventId===k);if(X)for(const[se,ke]of O.entries()){const ve=ke.x-ue,Oe=ke.y-Y;if(Math.sqrt(ve*ve+Oe*Oe)<20)return{blob:X,sketchId:se}}}return null},[We,k,O]),re=P.useCallback((R,W,Z,J,ue,Y)=>{const ge=1+Y*.3,X=J*ge,se=R.createRadialGradient(W,Z,0,W,Z,X),ve=ue.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(ve){const[,$t,fn,kn]=ve,Qt=parseInt($t),Pn=parseInt(fn),gt=parseInt(kn),vt=Y*60,wr=(Qt+vt)%360;se.addColorStop(0,`hsla(${wr}, ${Pn}%, ${Math.min(gt+20,95)}%, 0.9)`),se.addColorStop(.3,`hsla(${(wr+30)%360}, ${Pn+10}%, ${gt+10}%, 0.7)`),se.addColorStop(.6,`hsla(${(wr-20+360)%360}, ${Pn-5}%, ${gt}%, 0.5)`),se.addColorStop(1,`hsla(${wr}, ${Pn}%, ${Math.max(gt-10,60)}%, 0.3)`)}R.fillStyle=se,R.beginPath(),R.arc(W,Z,X,0,Math.PI*2),R.fill(),R.save(),R.beginPath(),R.arc(W,Z,X,0,Math.PI*2),R.clip();const Oe=R.getImageData(W-X,Z-X,X*2,X*2),Ee=Oe.data,nt=X*2,jt=X*2;let mt=(W*73+Z*37)%1e4;const Gr=()=>(mt=(mt*9301+49297)%233280,mt/233280);for(let $t=0;$t<jt;$t++)for(let fn=0;fn<nt;fn++){const kn=fn-X,Qt=$t-X;if(Math.sqrt(kn*kn+Qt*Qt)<=X){const gt=($t*nt+fn)*4,vt=(Gr()-.5)*20;Ee[gt]=Math.max(0,Math.min(255,Ee[gt]+vt)),Ee[gt+1]=Math.max(0,Math.min(255,Ee[gt+1]+vt)),Ee[gt+2]=Math.max(0,Math.min(255,Ee[gt+2]+vt))}}R.putImageData(Oe,W-X,Z-X),R.restore()},[]),F=P.useRef(),ie=P.useCallback((R,W)=>{const Z=Math.sin(R*12.9898+W*78.233)*43758.5453;return(Z-Math.floor(Z))*2-1},[]),fe=P.useCallback(R=>R*R*(3-2*R),[]),H=P.useCallback((R,W)=>{const Z=Math.floor(R),J=Math.floor(W),ue=Z+1,Y=J+1,ge=ie(Z,J),X=ie(ue,J),se=ie(Z,Y),ke=ie(ue,Y),ve=R-Z,Oe=W-J,Ee=fe(ve),nt=fe(Oe),jt=ge*(1-Ee)+X*Ee,ze=se*(1-Ee)+ke*Ee;return jt*(1-nt)+ze*nt},[ie,fe]),ae=P.useCallback((R,W,Z=3)=>{let J=0,ue=.5,Y=1,ge=0;for(let X=0;X<Z;X++)J+=H(R*Y,W*Y)*ue,ge+=ue,ue*=.5,Y*=2;return(J/ge+1)/2},[H]),le=P.useCallback(R=>1-Math.pow(1-R,3),[]),ee=P.useCallback((R,W,Z,J,ue,Y)=>{const ge=[],X=Math.PI*2/Math.max(W.length,1),se=100,ke=new Map,ve=oe.current.get(ue)||Y;oe.current.has(ue)||oe.current.set(ue,Y);const Oe=.8,Ee=Y-ve,nt=Math.min(1,Ee/Oe),jt=le(nt);return W.forEach((ze,mt)=>{const Gr=mt*X,$t=Y*.5,fn=.7,kn=30,Qt=.15,gt=(ae(mt*.3,$t*Qt,3)-.5)*fn,vt=Gr+gt,yl=(ae(mt*.3+100,$t*Qt+50,3)-.5)*kn,Jr=(se+yl)*jt,Wn=Z+Math.cos(vt)*Jr,Zn=J+Math.sin(vt)*Jr;ge.push({sketch:ze,x:Wn,y:Zn,angle:vt,distance:Jr}),ke.set(ze.id,{x:Wn,y:Zn});const Hn=40,mo=ze.thumbnail_url||ze.image_url;if(R.fillStyle="#fff",R.beginPath(),R.arc(Wn,Zn,Hn/2,0,Math.PI*2),R.fill(),R.strokeStyle="#333",R.lineWidth=2,R.stroke(),mo){const Qi=z.current.get(mo);Qi&&Qi.complete&&(R.save(),R.beginPath(),R.arc(Wn,Zn,Hn/2-1,0,Math.PI*2),R.clip(),R.drawImage(Qi,Wn-Hn/2,Zn-Hn/2,Hn,Hn),R.restore())}}),A(ke),ge},[ae,le]),Ie=P.useCallback(()=>{const R=s.current;if(!R)return;const W=R.getContext("2d");if(!W)return;if(!B.current){I.current=requestAnimationFrame(Ie);return}const Z=performance.now()/1e3;(G.current===0||Z-G.current>1)&&(G.current=Z);const J=Z-G.current;U.current+=J,G.current=Z,W.clearRect(0,0,R.width,R.height),We().forEach(Y=>{const ge=k===Y.eventId;let X=0;if(y){const se=Y.x-y.x,ke=Y.y-y.y,ve=Math.sqrt(se*se+ke*ke);X=Math.max(0,1-ve/150)}re(W,Y.x,Y.y,Y.radius,Y.color,X),Y.mergedCount>1&&(W.fillStyle="#fff",W.font="bold 14px sans-serif",W.textAlign="center",W.textBaseline="middle",W.fillText(Y.mergedCount.toString(),Y.x,Y.y)),ge&&ee(W,Y.sketches,Y.x,Y.y,Y.eventId,U.current)}),I.current=requestAnimationFrame(Ie)},[We,k,y,re,ee]);P.useEffect(()=>{F.current=Ie},[Ie]),P.useEffect(()=>{if(k){const R=We().find(W=>W.eventId===k);R&&R.sketches.forEach(W=>{const Z=W.thumbnail_url||W.image_url;if(Z&&!z.current.has(Z)){const J=new Image;J.crossOrigin="anonymous",J.onload=()=>{z.current.set(Z,J),F.current&&(I.current&&cancelAnimationFrame(I.current),I.current=requestAnimationFrame(F.current))},J.src=Z}})}},[k,We]),P.useEffect(()=>{const R=s.current;if(!R)return;const W=()=>{var Y;const ue=(Y=B.current)==null?void 0:Y.getContainer();if(ue){const ge=ue.getBoundingClientRect();R.width=ge.width,R.height=ge.height,R.style.width=ge.width+"px",R.style.height=ge.height+"px"}else{const ge=R.parentElement;if(ge){const X=ge.getBoundingClientRect();R.width=X.width,R.height=X.height,R.style.width=X.width+"px",R.style.height=X.height+"px"}}};W();const Z=setInterval(()=>{B.current&&(W(),clearInterval(Z))},100);window.addEventListener("resize",W);const J=B.current;return J&&J.on("resize",W),Ie(),()=>{clearInterval(Z),window.removeEventListener("resize",W),J&&J.off("resize",W),I.current&&cancelAnimationFrame(I.current)}},[Ie]);const ot=P.useCallback(R=>{const W=s.current;if(!W)return;const Z=W.getBoundingClientRect(),J=R.clientX-Z.left,ue=R.clientY-Z.top;x({x:J,y:ue});const Y=We();let ge=!1;for(const X of Y){const se=X.x-J,ke=X.y-ue;if(Math.sqrt(se*se+ke*ke)<X.radius){X.mergedCount===1&&(b(X.eventId),ge=!0);break}}ge||b(null)},[We]),Sn=P.useCallback(R=>{if(R.length<2)return h;let W=R[0].latitude,Z=R[0].latitude,J=R[0].longitude,ue=R[0].longitude;R.forEach(Ee=>{W=Math.min(W,Ee.latitude),Z=Math.max(Z,Ee.latitude),J=Math.min(J,Ee.longitude),ue=Math.max(ue,Ee.longitude)});const Y=Z-W,ge=ue-J,X=Math.max(Y,ge),se=s.current;if(!se)return h+3;const ke=200,ve=Math.pow(2,h)*.001,Oe=X*ve*Math.min(se.width,se.height);if(Oe<ke){const Ee=Math.ceil(Math.log2(ke/Oe));return Math.min(20,h+Math.max(2,Ee))}return h+2},[h]),En=P.useCallback(R=>{const W=M(R.clientX,R.clientY);if(!W){E(null),S(null);return}R.stopPropagation(),R.preventDefault();const{blob:Z,sketchId:J}=W;if(Z){if(J){const ue=Z.sketches.find(Y=>Y.id===J);if(ue){S(ue),i==null||i(ue);return}}if(Z.mergedCount>1&&Z.mergedEvents){const ue=Z.mergedEvents.reduce((X,se)=>X+se.latitude,0)/Z.mergedEvents.length,Y=Z.mergedEvents.reduce((X,se)=>X+se.longitude,0)/Z.mergedEvents.length;c([ue,Y]);const ge=Sn(Z.mergedEvents);f(ge),E(null),S(null);return}k===Z.eventId?(E(null),S(null),oe.current.delete(Z.eventId)):(E(Z.eventId),S(null))}},[M,k,Sn,i]),dn=P.useCallback(R=>{M(R.clientX,R.clientY)&&(R.stopPropagation(),R.preventDefault())},[M]);return P.useEffect(()=>{if(!B.current)return;const R=B.current.getContainer();if(R)return R.addEventListener("mousemove",ot,!0),R.addEventListener("click",En,!0),R.addEventListener("mousedown",dn,!0),()=>{R.removeEventListener("mousemove",ot,!0),R.removeEventListener("click",En,!0),R.removeEventListener("mousedown",dn,!0)}},[ot,En,dn]),v.jsxs("div",{className:"relative w-full h-screen bg-gray-900",children:[v.jsx("div",{ref:a,className:"absolute inset-0 z-10",children:v.jsxs(P_,{center:e,zoom:n,style:{height:"100%",width:"100%"},zoomControl:!0,attributionControl:!1,scrollWheelZoom:!0,doubleClickZoom:!0,dragging:!0,touchZoom:!0,boxZoom:!0,children:[v.jsx(gk,{onMapMove:K,onMapZoom:Ce,externalCenter:l,externalZoom:h,onMapReady:Te}),v.jsx(C_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",className:"map-tiles-dark"})]})}),v.jsx("canvas",{ref:s,className:"absolute top-0 left-0",style:{display:"block",pointerEvents:"none",zIndex:1e3,width:"100%",height:"100%"}}),w&&v.jsx("div",{className:"absolute pointer-events-none bg-black bg-opacity-75 text-white px-3 py-1 rounded text-sm",style:{left:y?`${y.x+10}px`:"0",top:y?`${y.y+10}px`:"0",zIndex:1500},children:((Ut=m.get(w))==null?void 0:Ut.title)||"Event"}),T&&v.jsxs("div",{className:"fixed bottom-4 right-4 bg-white rounded-lg shadow-2xl overflow-hidden max-w-sm w-full",style:{maxHeight:"60vh",zIndex:2e3},children:[v.jsx("button",{onClick:()=>S(null),className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-70 z-10 transition-all",children:""}),v.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:"60vh"},children:[v.jsx("img",{src:T.image_url,alt:T.title,className:"w-full h-auto"}),v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:T.title}),T.profiles&&v.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[T.profiles.avatar_url&&v.jsx("img",{src:T.profiles.avatar_url,alt:T.profiles.username,className:"w-10 h-10 rounded-full flex-shrink-0"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["@",T.profiles.username]}),T.description&&v.jsx("p",{className:"text-sm text-gray-600 mt-1 break-words",children:T.description})]})]}),T.location_name&&v.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" ",T.location_name]}),v.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(T.sketch_date||T.uploaded_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})}function _k(){const{sketches:t,loading:e}=ml(),[n,i]=P.useState(null);if(e)return v.jsx("div",{className:"flex items-center justify-center bg-gray-50",style:{height:"calc(100vh - 64px)",overflow:"hidden"},children:v.jsx("div",{className:"text-center",children:v.jsx("p",{className:"text-gray-600",children:"Loading map..."})})});const s=t.filter(a=>a.latitude&&a.longitude);return v.jsxs("div",{className:"relative w-full",style:{height:"calc(100vh - 64px)",overflow:"hidden"},children:[v.jsx(vk,{sketches:s}),n&&v.jsx(_l,{sketch:n,onClose:()=>i(null)})]})}function yk({userId:t}){const{sketches:e,loading:n}=ml(t),[i,s]=P.useState(null);return n?v.jsx("div",{className:"text-center py-12",children:"Loading sketches..."}):e.length===0?v.jsx("div",{className:"text-center py-12 text-gray-500",children:"No sketches uploaded yet."}):v.jsxs(v.Fragment,{children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Sketches"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(a=>v.jsx(Kh,{sketch:a,onClick:()=>s(a)},a.id))}),i&&v.jsx(_l,{sketch:i,onClose:()=>s(null),onUpdate:()=>window.location.reload()})]})}function wk(){const{username:t}=Zx(),{profile:e,username:n}=gl(),i=Vi(),[s,a]=P.useState(null),[l,c]=P.useState(!0),[h,f]=P.useState(!1),[m,g]=P.useState({username:"",full_name:"",bio:"",city:"",country:""}),w=t||n,b=!t||w&&w.toLowerCase()===(n==null?void 0:n.toLowerCase());P.useEffect(()=>{k()},[t,n]);const k=async()=>{try{c(!0);const T=t||n;if(!T){console.log("[ProfilePage] No target username");return}console.log("[ProfilePage]  Fetching profile for username:",T);const{data:S,error:y}=await Se.from("profiles").select("*").eq("username",T.toLowerCase()).single();if(y){y.code==="PGRST116"||y.message.includes("No rows returned")?(console.log("[ProfilePage]  Profile not found in database"),console.log("[ProfilePage] User is authenticated but has no profile record"),a(null)):(console.error("[ProfilePage]  Error fetching profile:",y),console.error("[ProfilePage] Error details:",{message:y.message,code:y.code,details:y.details,hint:y.hint}),a(null));return}S?(console.log("[ProfilePage]  Profile fetched:",S.username),a(S),b&&g({username:S.username||"",full_name:S.full_name||"",bio:S.bio||"",city:S.city||"",country:S.country||""})):(console.log("[ProfilePage]  No profile data returned"),a(null))}catch(T){console.error("[ProfilePage]  Exception fetching profile:",T),a(null)}finally{c(!1)}},E=async()=>{if(!(!e||!s||!b))try{const T={username:m.username,full_name:m.full_name||null,bio:m.bio||null,city:m.city||null,country:m.country||null},{error:S}=await Se.from("profiles").update(T).eq("id",s.id);if(S)throw S;T.username&&T.username!==s.username&&i(`/profile/${T.username}`,{replace:!0}),await k(),f(!1)}catch(T){alert(T.message||"Failed to update profile")}};return l?v.jsx("div",{className:"text-center py-12",children:"Loading profile..."}):s?v.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[v.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 mb-8",children:v.jsxs("div",{className:"flex items-start space-x-6",children:[s.avatar_url&&v.jsx("img",{src:s.avatar_url,alt:s.username,className:"w-32 h-32 rounded-full object-cover"}),v.jsx("div",{className:"flex-1",children:h?v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),v.jsx("input",{type:"text",value:m.username,onChange:T=>g({...m,username:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),v.jsx("input",{type:"text",value:m.full_name,onChange:T=>g({...m,full_name:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),v.jsx("textarea",{value:m.bio,onChange:T=>g({...m,bio:T.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),v.jsx("input",{type:"text",value:m.city,onChange:T=>g({...m,city:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),v.jsx("input",{type:"text",value:m.country,onChange:T=>g({...m,country:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md"})]})]}),v.jsxs("div",{className:"flex space-x-4",children:[v.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"}),v.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"})]})]}):v.jsxs(v.Fragment,{children:[v.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:s.full_name||s.username}),v.jsxs("p",{className:"text-gray-600 mb-4",children:["@",s.username]}),s.bio&&v.jsx("p",{className:"text-gray-700 mb-4",children:s.bio}),(s.city||s.country)&&v.jsxs("p",{className:"text-gray-600 mb-2",children:[" ",[s.city,s.country].filter(Boolean).join(", ")]}),v.jsxs("p",{className:"text-sm text-gray-500",children:["Joined ",new Date(s.created_at).toLocaleDateString()]}),b&&v.jsx("button",{onClick:()=>f(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Editar Perfil"})]})})]})}),v.jsx(yk,{userId:s.id})]}):b&&e?v.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:v.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Profile Not Found"}),v.jsx("p",{className:"text-gray-700 mb-6",children:"You are authenticated, but you don't have a profile in the database yet. You need to complete your profile setup before you can use all features."}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("p",{className:"text-sm text-gray-600",children:[v.jsx("strong",{children:"What's happening:"})," Your authentication session is stored locally, but your profile record wasn't created in the database. This is why you see this message even though you're logged in."]}),v.jsx("button",{onClick:()=>window.location.href="/login",className:"px-6 py-3 bg-gray-700 text-white rounded-md hover:bg-gray-800 transition-colors",children:"Go to Profile Setup"})]})]})}):v.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:v.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Profile Not Found"}),v.jsx("p",{className:"text-gray-700",children:"This user profile doesn't exist."})]})})}function xk(){return v.jsx(wk,{})}const Mp="usk_username";function bk({onSuccess:t,onSwitchToSignup:e}){const[n,i]=P.useState(""),[s,a]=P.useState(""),[l,c]=P.useState(null),[h,f]=P.useState(!1),{signIn:m}=pl(),g=async w=>{w.preventDefault(),c(null),f(!0);try{console.log("[LoginForm]  Attempting sign in...");const{data:b,error:k}=await m(n,s);if(k)throw console.error("[LoginForm]  Sign in failed:",k),k;if(!b.user)throw new Error("Sign in succeeded but no user data returned");console.log("[LoginForm]  Sign in successful, fetching profile...");const{data:E,error:T}=await Se.from("profiles").select("username").eq("id",b.user.id).maybeSingle();T&&console.error("[LoginForm]  Error fetching profile (non-fatal):",T),E!=null&&E.username?(console.log("[LoginForm]  Updating localStorage with username:",E.username),localStorage.setItem(Mp,E.username)):(console.log("[LoginForm]  No profile found for user, clearing localStorage"),localStorage.removeItem(Mp)),console.log("[LoginForm]  Login complete"),t==null||t()}catch(b){console.error("[LoginForm]  Sign in error:",b),c(b.message||"Failed to sign in")}finally{f(!1)}};return v.jsxs("div",{className:"max-w-md mx-auto bg-gray-50 p-8 rounded-lg shadow-sm border border-gray-300",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Login"}),v.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l&&v.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),v.jsx("input",{id:"email",type:"email",value:n,onChange:w=>i(w.target.value),required:!0,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"your@email.com"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),v.jsx("input",{id:"password",type:"password",value:s,onChange:w=>a(w.target.value),required:!0,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:""})]}),v.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Signing in...":"Sign In"}),e&&v.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",v.jsx("button",{type:"button",onClick:e,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up"})]})]})]})}const zp="usk_username";function Sk({onSuccess:t,onSwitchToLogin:e}){const[n,i]=P.useState(""),[s,a]=P.useState(""),[l,c]=P.useState(""),[h,f]=P.useState(""),[m,g]=P.useState(null),[w,b]=P.useState(!1),[k,E]=P.useState("idle"),T=P.useRef(null);P.useEffect(()=>{T.current&&clearTimeout(T.current);const y=s.trim();if(!y){E("idle");return}if(!/^[a-zA-Z0-9_-]{3,20}$/.test(y)){E("invalid");return}return E("checking"),T.current=setTimeout(async()=>{try{const{data:O,error:A}=await Se.from("profiles").select("id").eq("username",y.toLowerCase()).maybeSingle();if(A&&A.code!=="PGRST116"){console.error("[SignupForm]  Error checking username:",A),E("idle");return}E(O?"taken":"available")}catch(O){console.error("[SignupForm]  Username check error:",O),E("idle")}},500),()=>{T.current&&clearTimeout(T.current)}},[s]);const S=async y=>{y.preventDefault(),g(null);const x=s.trim(),O=n.trim().toLowerCase();if(!x){g("Username is required");return}if(!/^[a-zA-Z0-9_-]{3,20}$/.test(x)){g("Username must be 3-20 characters and contain only letters, numbers, underscores, or hyphens");return}if(k==="taken"){g("Username is already taken. Please choose another.");return}if(k==="checking"){g("Please wait while we check username availability...");return}if(!O){g("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O)){g("Please enter a valid email address");return}if(!l){g("Password is required");return}if(l.length<6){g("Password must be at least 6 characters");return}if(l!==h){g("Passwords do not match");return}b(!0);try{console.log("[SignupForm]  Step 1: Creating auth user...");const{data:I,error:B}=await Se.auth.signUp({email:O,password:l,options:{emailRedirectTo:void 0,data:{username:x}}});if(B)throw console.error("[SignupForm]  Auth signup failed:",B),B.message.includes("already registered")?new Error("This email is already registered. Please sign in instead."):new Error(B.message||"Failed to create account. Please try again.");if(!I.user)throw new Error("Account creation failed. No user data returned.");console.log("[SignupForm]  Auth user created:",I.user.id),console.log("[SignupForm]  Step 2: Checking if profile already exists...");const{data:U,error:G}=await Se.from("profiles").select("id, username").eq("id",I.user.id).maybeSingle();if(G&&G.code!=="PGRST116")throw console.error("[SignupForm]  Error checking existing profile:",G),new Error("Failed to check profile. Please try again.");if(console.log("[SignupForm]  Step 3: Creating/updating profile..."),U){console.log("[SignupForm]  Profile exists, updating username...");const{data:oe,error:K}=await Se.from("profiles").update({username:x.toLowerCase(),email:O}).eq("id",I.user.id).select().single();if(K)throw console.error("[SignupForm]  Profile update failed:",K),K.code==="23505"&&K.message.includes("username")?new Error("Username is already taken. Please choose another."):new Error(K.message||"Failed to update profile. Please try again.");if(!oe)throw new Error("Profile update failed. No data returned.");console.log("[SignupForm]  Profile updated:",oe.id)}else{const{data:oe,error:K}=await Se.from("profiles").insert({id:I.user.id,username:x.toLowerCase(),email:O,full_name:null,bio:null,city:null,country:null,avatar_url:null}).select().single();if(K){if(console.error("[SignupForm]  Profile creation failed:",K),K.code==="23505"){if(K.message.includes("username"))throw new Error("Username is already taken. Please choose another.");{console.log("[SignupForm]  Profile exists (primary key conflict), updating...");const{data:Ce,error:Te}=await Se.from("profiles").update({username:x.toLowerCase(),email:O}).eq("id",I.user.id).select().single();if(Te)throw new Error(Te.message||"Failed to create profile. Please try again.");console.log("[SignupForm]  Profile updated after conflict:",Ce==null?void 0:Ce.id),Ce!=null&&Ce.username&&(console.log("[SignupForm]  Updating localStorage with username:",Ce.username),localStorage.setItem(zp,Ce.username)),t==null||t(),b(!1);return}}throw K.code==="23503"?new Error("Failed to create profile. Please contact support."):new Error(K.message||"Failed to create profile. Please try again.")}if(!oe)throw new Error("Profile creation failed. No data returned.");console.log("[SignupForm]  Profile created:",oe.id)}console.log("[SignupForm]  Updating localStorage with username:",x.toLowerCase()),localStorage.setItem(zp,x.toLowerCase()),console.log("[SignupForm]  Sign up and profile creation successful!"),t==null||t()}catch(I){console.error("[SignupForm]  Sign up error:",I),g(I.message||"Failed to sign up. Please try again.")}finally{b(!1)}};return v.jsxs("div",{className:"max-w-md mx-auto bg-gray-50 p-8 rounded-lg shadow-sm border border-gray-300",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Sign Up"}),v.jsxs("form",{onSubmit:S,className:"space-y-4",children:[m&&v.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:m}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:["Username ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{id:"username",type:"text",value:s,onChange:y=>a(y.target.value),required:!0,className:`w-full px-4 py-2 bg-white border rounded-md focus:ring-2 focus:border-gray-500 text-gray-900 ${k==="available"?"border-green-500 focus:ring-green-500":k==="taken"||k==="invalid"?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-500"}`,placeholder:"pedroNelGomez",pattern:"[a-zA-Z0-9_-]{3,20}"}),k==="checking"&&v.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-gray-500",children:"Checking..."}),k==="available"&&v.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-green-600",children:" Available"}),k==="taken"&&v.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-red-600",children:" Taken"}),k==="invalid"&&s.trim()&&v.jsx("span",{className:"absolute right-3 top-2.5 text-xs text-red-600",children:"Invalid format"})]}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:k==="invalid"&&s.trim()?"Username must be 3-20 characters and contain only letters, numbers, underscores, or hyphens":"3-20 characters, letters, numbers, underscores, or hyphens"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),v.jsx("input",{id:"email",type:"email",value:n,onChange:y=>i(y.target.value),required:!0,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:"your@email.com"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),v.jsx("input",{id:"password",type:"password",value:l,onChange:y=>c(y.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:""})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),v.jsx("input",{id:"confirmPassword",type:"password",value:h,onChange:y=>f(y.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-gray-900",placeholder:""})]}),v.jsx("button",{type:"submit",disabled:w,className:"w-full bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w?"Creating account...":"Sign Up"}),e&&v.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",v.jsx("button",{type:"button",onClick:e,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Login"})]})]})]})}function Ek(){const[t,e]=P.useState("login"),n=Vi(),i=()=>{n("/")};return v.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:v.jsx("div",{className:"max-w-md mx-auto",children:t==="login"?v.jsx(bk,{onSuccess:i,onSwitchToSignup:()=>e("signup")}):v.jsx(Sk,{onSuccess:i,onSwitchToLogin:()=>e("login")})})})}function kk(){return v.jsx("div",{className:"bg-gray-50 flex items-center justify-center px-4",style:{height:"calc(100vh - 64px)"},children:v.jsx("div",{className:"max-w-3xl w-full",children:v.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8 md:p-12",children:v.jsxs("p",{className:"text-gray-700 text-lg leading-relaxed",children:["Este sitio fue creado por Agustn Vallejo, un sketcher de Medelln, Colombia. Es un proyecto personal para compartir dibujos con mis compaeros de ciudad. Espero lo disfruten!",v.jsx("br",{}),v.jsx("br",{}),"Redes:"," ",v.jsx("a",{href:"https://www.instagram.com/agusvallejov/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 font-medium underline decoration-2 underline-offset-2 transition-colors",children:"Instagram"})," y ",v.jsx("a",{href:"https://github.com/agustinvallejo",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 font-medium underline decoration-2 underline-offset-2 transition-colors",children:"GitHub"})]})})})})}function Pk(){return v.jsx(WE,{children:v.jsx(fb,{children:v.jsxs("div",{className:"min-h-screen flex flex-col",children:[v.jsx(HE,{}),v.jsx("main",{className:"flex-grow",children:v.jsxs(ob,{children:[v.jsx(di,{path:"/",element:v.jsx(mk,{})}),v.jsx(di,{path:"/map",element:v.jsx(_k,{})}),v.jsx(di,{path:"/profile/:username",element:v.jsx(xk,{})}),v.jsx(di,{path:"/auth",element:v.jsx(Ek,{})}),v.jsx(di,{path:"/info",element:v.jsx(kk,{})})]})})]})})})}Lu.createRoot(document.getElementById("root")).render(v.jsx(zs.StrictMode,{children:v.jsx(Pk,{})}));
